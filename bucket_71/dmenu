# Buildsheet autogenerated by ravenadm tool -- Do not edit.

NAMEBASE=		dmenu
VERSION=		4.9
KEYWORDS=		x11
VARIANTS=		standard
SDESC[standard]=	Dynamic menu for X
HOMEPAGE=		https://tools.suckless.org/dmenu/
CONTACT=		nobody

DOWNLOAD_GROUPS=	main
SITES[main]=		https://dl.suckless.org/tools/
DISTFILE[1]=		dmenu-4.9.tar.gz:main
DF_INDEX=		1
SPKGS[standard]=	single

OPTIONS_AVAILABLE=	none
OPTIONS_STANDARD=	none

BUILDRUN_DEPENDS=	fontconfig:primary:standard

XORG_COMPONENTS=	x11 xft xinerama

LICENSE=		MIT:single
LICENSE_FILE=		MIT:{{WRKSRC}}/LICENSE
LICENSE_SCHEME=		solo

FPC_EQUIVALENT=		x11/dmenu

INVALID_RPATH=		yes

post-install:
	${STRIP_CMD} ${STAGEDIR}${PREFIX}/bin/dmenu \
		${STAGEDIR}${PREFIX}/bin/stest

[FILE:354:descriptions/desc.single]
dmenu is a minimalistic X11 menu. It reads a newline separated list of
items from stdin and shows them as a menu on the top of the screen.  When
the user selects one item or types any text and presses Enter, his choice
is printed to stdout.

dmenu was developed as an addition to the dynamic window manager (dwm),
but can be used in any X11-environment.


[FILE:95:distinfo]
b3971f4f354476a37b2afb498693649009b201550b0c7c88e866af8132b64945        15972 dmenu-4.9.tar.gz


[FILE:82:manifests/plist.single]
bin/
 dmenu
 dmenu_path
 dmenu_run
 stest
share/man/man1/
 dmenu.1.gz
 stest.1.gz


[FILE:1155:patches/patch-config.mk]
--- config.mk.orig	2019-02-02 12:55:02 UTC
+++ config.mk
@@ -2,11 +2,11 @@
 VERSION = 4.9
 
 # paths
-PREFIX = /usr/local
+PREFIX ?= /usr/local
 MANPREFIX = $(PREFIX)/share/man
 
-X11INC = /usr/X11R6/include
-X11LIB = /usr/X11R6/lib
+X11INC ?= $(PREFIX)/include
+X11LIB ?= $(PREFIX)/lib
 
 # Xinerama, comment if you don't want it
 XINERAMALIBS  = -lXinerama
@@ -16,16 +16,16 @@ XINERAMAFLAGS = -DXINERAMA
 FREETYPELIBS = -lfontconfig -lXft
 FREETYPEINC = /usr/include/freetype2
 # OpenBSD (uncomment)
-#FREETYPEINC = $(X11INC)/freetype2
+FREETYPEINC = $(X11INC)/freetype2
 
 # includes and libs
 INCS = -I$(X11INC) -I$(FREETYPEINC)
 LIBS = -L$(X11LIB) -lX11 $(XINERAMALIBS) $(FREETYPELIBS)
 
 # flags
-CPPFLAGS = -D_DEFAULT_SOURCE -D_BSD_SOURCE -D_XOPEN_SOURCE=700 -D_POSIX_C_SOURCE=200809L -DVERSION=\"$(VERSION)\" $(XINERAMAFLAGS)
-CFLAGS   = -std=c99 -pedantic -Wall -Os $(INCS) $(CPPFLAGS)
-LDFLAGS  = $(LIBS)
+CPPFLAGS += -D_DEFAULT_SOURCE -D_BSD_SOURCE -D_XOPEN_SOURCE=700 -D_POSIX_C_SOURCE=200809L -DVERSION=\"$(VERSION)\" $(XINERAMAFLAGS)
+CFLAGS   += -std=c99 $(INCS) $(CPPFLAGS)
+LDFLAGS  += $(LIBS)
 
 # compiler and linker
-CC = cc
+CC ?= cc

