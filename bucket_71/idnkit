# Buildsheet autogenerated by ravenadm tool -- Do not edit.

NAMEBASE=		idnkit
VERSION=		1.0
KEYWORDS=		dns
VARIANTS=		standard
SDESC[standard]=	Library to handle internationalized domain names
HOMEPAGE=		https://www.nic.ad.jp/ja/idn/idnkit/download/
CONTACT=		nobody

DOWNLOAD_GROUPS=	main
SITES[main]=		http://www.nic.ad.jp/ja/idn/idnkit/download/sources/
DISTFILE[1]=		idnkit-1.0-src.tar.gz:main
DF_INDEX=		1
SPKGS[standard]=	single

OPTIONS_AVAILABLE=	none
OPTIONS_STANDARD=	none

USES=			iconv libtool

DISTNAME=		idnkit-1.0-src

FPC_EQUIVALENT=		dns/idnkit

MUST_CONFIGURE=		gnu
CONFIGURE_ARGS=		{{ICONV_CONFIGURE_ARG}}
			--enable-runidn
			--enable-extra-ace

LDFLAGS=		{{ICONV_LIB}}

post-patch:
	@${FIND} ${WRKSRC} -name Makefile.in | ${XARGS} ${REINPLACE_CMD} -e \
		's|mode=link $$(LD)|mode=link $$(CC)|'

post-install:
	${STRIP_CMD} ${STAGEDIR}${PREFIX}/lib/*.so
	${MV} ${STAGEDIR}${PREFIX}/etc/idnalias.conf \
		${STAGEDIR}${PREFIX}/etc/idnalias.conf.sample
	${MV} ${STAGEDIR}${PREFIX}/etc/idn.conf \
		${STAGEDIR}${PREFIX}/etc/idn.conf.sample

[FILE:571:descriptions/desc.single]
The 'idnkit' is an open source, BSD-like licensed software that
provides functionalities about Internationalized Domain Name
processing standardized at IETF.  Major features that idnkit provides
are as follows.

    * libidnkit
      Core library for IDN processing.
    * libidnkitlite
      Light Weight library for IDN processing. (UTF-8 only)
    * idnconv
      DNS zone / configuration file encoding converter.
    * runidn / idn wrapper
      Dynamic link resolver library for UNIX / Windows.
    * BIND 9 patch
      IDN enhancements for BIND 9 DNS lookup tools.


[FILE:100:distinfo]
16cd5fce81a5180d6a2c61cf20572668b3dc59f5c39c272b75fa98edab3391fc       432823 idnkit-1.0-src.tar.gz


[FILE:827:manifests/plist.single]
bin/
 idnconv
 runidn
@sample etc/idn.conf.sample
@sample etc/idnalias.conf.sample
include/idn/
 api.h
 assert.h
 checker.h
 converter.h
 debug.h
 delimitermap.h
 export.h
 filechecker.h
 filemapper.h
 localencoding.h
 log.h
 logmacro.h
 mapper.h
 mapselector.h
 nameprep.h
 normalizer.h
 punycode.h
 race.h
 res.h
 resconf.h
 result.h
 strhash.h
 ucs4.h
 ucsmap.h
 ucsset.h
 unicode.h
 unormalize.h
 utf8.h
 util.h
 version.h
lib/
 libidnkit.a
 libidnkit.so
 libidnkit.so.1
 libidnkit.so.1.0.2
 libidnkitlite.a
 libidnkitlite.so
 libidnkitlite.so.1
 libidnkitlite.so.1.0.2
 libidnkitres.a
 libidnkitres.so
 libidnkitres.so.1
 libidnkitres.so.1.0.1
share/man/man1/
 idnconv.1.gz
 runidn.1.gz
share/man/man3/
 libidnkit.3.gz
 libidnkitlite.3.gz
share/man/man5/
 idn.conf.5.gz
 idnalias.conf.5.gz
 idnrc.5.gz
share/idnkit/jp.map


[FILE:737:patches/patch-libtool22]
--- lib/Makefile.in.orig	2009-07-13 16:56:33.000000000 -0500
+++ lib/Makefile.in	2009-07-13 16:57:14.000000000 -0500
@@ -241,7 +241,7 @@
 
 install-common:
 	$(MKINSTALLDIRS) $(DESTDIR)$(libdir)
-	$(LIBTOOL) $(INSTALL_DATA) $(LITELIB).la \
+	$(LIBTOOL) --mode=install $(INSTALL_DATA) $(LITELIB).la \
 	    $(DESTDIR)$(libdir)/$(LITELIB).la
 	-[ -f $(DESTDIR)$(libdir)/$(LITELIB).a ] \
 	    && $(RANLIB) $(DESTDIR)$(libdir)/$(LITELIB).a
@@ -262,7 +262,7 @@
 
 install-nolite:
 	$(MKINSTALLDIRS) $(DESTDIR)$(libdir)
-	$(LIBTOOL) $(INSTALL_DATA) $(LIB).la \
+	$(LIBTOOL) --mode=install $(INSTALL_DATA) $(LIB).la \
 	    $(DESTDIR)$(libdir)/$(LIB).la
 	-[ -f $(DESTDIR)$(libdir)/$(LIB).a ] \
 	    && $(RANLIB) $(DESTDIR)$(libdir)/$(LIB).a


[FILE:557:patches/patch-tools__runidn__resolver.c]
Index: tools/runidn/resolver.c
diff -u -p tools/runidn/resolver.c.orig tools/runidn/resolver.c
--- tools/runidn/resolver.c.orig	Fri Nov 29 23:26:57 2002
+++ tools/runidn/resolver.c	Sun Sep  3 21:20:21 2006
@@ -726,7 +726,7 @@ ENTRY(gethostbyname2_r)(const char *name
 
 #ifdef HAVE_GETHOSTBYADDR_R
 int
-ENTRY(gethostbyaddr_r)(GHBA_ADDR_T addr, GHBA_ADDRLEN_T len, int type,
+ENTRY(gethostbyaddr_r)(GHBA_ADDR_T addr, socklen_t len, int type,
 		       struct hostent *result,
 		       char *buffer, size_t buflen,
 		       struct hostent **rp, int *errp)

