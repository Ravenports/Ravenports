# Buildsheet autogenerated by ravenadm tool -- Do not edit.

NAMEBASE=		gwenhywfar
VERSION=		5.12.0
KEYWORDS=		devel net security
VARIANTS=		std
SDESC[std]=		Networking and security application library
HOMEPAGE=		https://www.aquamaniac.de/rdm/
CONTACT=		nobody

DOWNLOAD_GROUPS=	main
SITES[main]=		https://www.aquamaniac.de/rdm/attachments/download/529/
DISTFILE[1]=		gwenhywfar-5.12.0.tar.gz:main
DF_INDEX=		1
SPKGS[std]=		set
			primary
			dev
			gtk3
			qt5
			nls
			tools

OPTIONS_AVAILABLE=	none
OPTIONS_STANDARD=	none

BUILD_DEPENDS=		at-spi2-core:dev:std
			at-spi2-core:primary:std
			cairo:dev:std
			cairo:primary:std
			gdk-pixbuf:primary:std
			glib:dev:std
			gnutls:dev:std
			gtk3:dev:std
			gtk3:primary:std
			harfbuzz:dev:std
			libgcrypt:dev:std
			pango:primary:std
			qt5-qtbase:dev:std
			qt5-qtbase:primary:std
BUILDRUN_DEPENDS=	gnutls:primary:std
			libgcrypt:primary:std
EXRUN[tools]=		primary
			ssl
EXRUN[qt5]=		primary
			qt5-qtbase:primary:std
EXRUN[gtk3]=		primary
			at-spi2-core:primary:std
			pango:primary:std
			cairo:primary:std
			gdk-pixbuf:primary:std
			gtk3:primary:std

USES=			gmake iconv libtool pkgconfig ssl:build zlib:build
			fontconfig gettext mbsdfix

LICENSE=		LGPL21+:primary
LICENSE_TERMS=		primary:{{WRKDIR}}/TERMS
LICENSE_FILE=		LGPL21+:{{WRKSRC}}/COPYING
LICENSE_AWK=		TERMS:"GWENHYWFAR_GWENHYWFAR_H"
LICENSE_SOURCE=		TERMS:{{WRKSRC}}/src/gwenhywfar.h
LICENSE_SCHEME=		solo

FPC_EQUIVALENT=		devel/gwenhywfar

MUST_CONFIGURE=		gnu
CONFIGURE_ARGS=		--enable-release="yes"
			--with-guis="gtk3 qt5"
			--with-qt5-qmake={{LOCALBASE}}/lib/qt5/bin/qmake
			--with-qt5-moc={{LOCALBASE}}/lib/qt5/bin/moc
			--with-qt5-uic={{LOCALBASE}}/lib/qt5/bin/uic

INSTALL_TARGET=		install-strip
INSTALL_REQ_TOOLCHAIN=	yes
SOVERSION=		79.12.0
PLIST_SUB=		GWEN_MAJ_MIN_VER=5.12

LDFLAGS=		-Wl,-rpath,{{PREFIX}}/lib/qt5
VAR_OPSYS[freebsd]=	LDFLAGS=-lintl
VAR_OPSYS[sunos]=	LDFLAGS=-lintl
VAR_OPSYS[netbsd]=	LDFLAGS=-lintl
			CONFIGURE_ENV=ac_cv_lib_dl_dlopen=no
VAR_OPSYS[dragonfly]=	LDFLAGS=-lintl
VAR_OPSYS[midnightbsd]=	LDFLAGS=-lintl

[FILE:770:descriptions/desc.primary]
This is Gwenhywfar, a multi-platform (*BSD, Linux, MS-Win, etc.)
helper library for networking and security applications and libraries.
It is used by several 'finance' ports, and possibly others.

Gwenhywfar includes the following features, among several others:
 - OS abstraction functions for directory and Internet address handling
   and library loading (src/os/)
 - Networking functions which allow managing many connections to be used
   economically even in single threaded applications
 - High-level functions for parsing files with a simplified "XML-like"
   format and accessing them like a hierarchical database (src/parser/)
   It is able to process valid XML files, too.
 - High-level cryptographic functions on top of OpenSSL functionality
   (src/crypt/)


[FILE:246:descriptions/desc.gtk3]
This is Gwenhywfar, a multi-platform (*BSD, Linux, MS-Win, etc.)
helper library for networking and security applications and libraries.
It is used by several 'finance' ports, and possibly others.

This package contains the gtk3 library bindings.


[FILE:245:descriptions/desc.qt5]
This is Gwenhywfar, a multi-platform (*BSD, Linux, MS-Win, etc.)
helper library for networking and security applications and libraries.
It is used by several 'finance' ports, and possibly others.

This package contains the Qt5 library bindings.


[FILE:47:descriptions/desc.tools]
This package contains the gwenhywfar programs.


[FILE:103:distinfo]
0ad5f1447703211f1610053a94bce1e82abceda2222a2ecc9cf45b148395d626      2721790 gwenhywfar-5.12.0.tar.gz


[FILE:406:manifests/plist.primary]
lib/
 libgwengui-cpp.so.%%SOMAJOR%%
 libgwengui-cpp.so.%%SOVERSION%%
 libgwenhywfar.so.%%SOMAJOR%%
 libgwenhywfar.so.%%SOVERSION%%
lib/gwenhywfar/plugins/%%SOMAJOR%%/configmgr/
 dir.so
 dir.xml
lib/gwenhywfar/plugins/%%SOMAJOR%%/ct/
 ohbci.so
 ohbci.xml
lib/gwenhywfar/plugins/%%SOMAJOR%%/dbio/
 csv.so.0
 csv.so.0.0.1
 csv.xml
 olddb.so.0
 olddb.so.0.0.1
 olddb.xml
 xmldb.so.0
 xmldb.so.0.0.1
 xmldb.xml


[FILE:2628:manifests/plist.dev]
bin/gwenhywfar-config
include/gwenhywfar5/gwen-gui-cpp/
 api.h
 cppdialog.hpp
 cppgui.hpp
 cppwidget.hpp
include/gwenhywfar5/gwen-gui-gtk3/gtk3_gui.h
include/gwenhywfar5/gwen-gui-qt5/
 qt5_gui.hpp
 qt5_gui_dialog.hpp
 qt5dialogbox.hpp
include/gwenhywfar5/gwenhywfar/
 args.h
 base64.h
 bindata.h
 buffer.h
 cgui.h
 condvar.h
 configmgr.h
 configmgr_be.h
 cryptalgo.h
 cryptdefs.h
 crypthead.h
 cryptkey.h
 cryptkey_be.h
 cryptkeyrsa.h
 cryptkeysym.h
 cryptmgr.h
 cryptmgr_be.h
 cryptmgrkeys.h
 ct.h
 ct_be.h
 ct_context.h
 ct_keyinfo.h
 ctf_context_be.h
 ctfile_be.h
 ctplugin.h
 ctplugin_be.h
 db.h
 dbio.h
 dbio_be.h
 debug.h
 dialog.h
 dialog_be.h
 directory.h
 endianfns.h
 endpoint.h
 endpoint_ipc.h
 endpoint_msgio.h
 endpoint_multilayer.h
 endpoint_multilayer_p.h
 endpoint_tcpc.h
 endpoint_tcpd.h
 error.h
 fastbuffer.h
 fslock.h
 funcs.h
 gui.h
 gui_be.h
 gwen_sar_fileheader.h
 gwendate.h
 gwenhywfar.h
 gwenhywfarapi.h
 gwensemaphore.h
 gwensignal.h
 gwenthread.h
 gwentime.h
 hashalgo.h
 htmlctx_be.h
 htmlfont_be.h
 htmlimage_be.h
 htmlobject_be.h
 htmlprops_be.h
 httpsession.h
 i18n.h
 idlist64.h
 idmap.h
 inetaddr.h
 inetsocket.h
 inherit.h
 json.h
 json_dump.h
 json_read.h
 libloader.h
 list.h
 list1.h
 list1.tmpl
 list2.h
 list2.tmpl
 logger.h
 mdigest.h
 mdigest_be.h
 memcache.h
 memory.h
 misc.h
 misc2.h
 msg.h
 msg_ipc.h
 msgengine.h
 multicache.h
 mutex.h
 nogui.h
 o_image_be.h
 padd.h
 paddalgo.h
 param.h
 param_fns.h
 passwdstore.h
 path.h
 pathmanager.h
 plugin.h
 plugindescr.h
 portable_endian.h
 process.h
 refptr.h
 request.h
 ringbuffer.h
 sar.h
 sighead.h
 sigtail.h
 simpleptrlist.h
 smalltresor.h
 ssl_cert_descr.h
 ssl_cert_flags.h
 stringlist.h
 stringlist2.h
 syncio.h
 syncio_buffered.h
 syncio_file.h
 syncio_http.h
 syncio_memory.h
 syncio_socket.h
 syncio_tls.h
 system.h
 tag16.h
 testframework.h
 testmodule.h
 text.h
 threadlocaldata.h
 timestamp.h
 tlv.h
 tree.h
 tree2.h
 types.h
 url.h
 urlfns.h
 version.h
 widget_be.h
 xml.h
 xml2db.h
 xmlcmd.h
 xmlcmd_gxml.h
 xmlcmd_gxml_fromdb.h
 xmlcmd_gxml_todb.h
 xmlctx.h
 xsdnode.h
lib/
 libgwengui-cpp.so
 libgwengui-gtk3.so
 libgwengui-qt5.so
 libgwenhywfar.so
lib/cmake/gwengui-cpp-%%GWEN_MAJ_MIN_VER%%/
 gwengui-cpp-config-version.cmake
 gwengui-cpp-config.cmake
lib/cmake/gwengui-qt5-%%GWEN_MAJ_MIN_VER%%/
 gwengui-qt5-config-version.cmake
 gwengui-qt5-config.cmake
lib/cmake/gwenhywfar-%%GWEN_MAJ_MIN_VER%%/
 gwenhywfar-config-version.cmake
 gwenhywfar-config.cmake
lib/gwenhywfar/plugins/%%SOMAJOR%%/dbio/
 csv.so
 olddb.so
 xmldb.so
lib/pkgconfig/
 gwengui-gtk3.pc
 gwengui-qt5.pc
 gwenhywfar.pc
share/aclocal/gwenhywfar.m4


[FILE:71:manifests/plist.gtk3]
lib/
 libgwengui-gtk3.so.%%SOMAJOR%%
 libgwengui-gtk3.so.%%SOVERSION%%


[FILE:69:manifests/plist.qt5]
lib/
 libgwengui-qt5.so.%%SOMAJOR%%
 libgwengui-qt5.so.%%SOVERSION%%


[FILE:42:manifests/plist.nls]
share/locale/de/LC_MESSAGES/gwenhywfar.mo


[FILE:1277:manifests/plist.tools]
bin/
 gct-tool
 gsa
 gwbuild
 mklistdoc
 typemaker
 typemaker2
 xmlmerge
share/gwenbuild/templates/
 convlib.tmpl
 module.tmpl
 project.tmpl
share/gwenhywfar/dialogs/
 dlg_input.dlg
 dlg_message.dlg
 dlg_progress.dlg
 dlg_showbox.dlg
share/gwenhywfar/gwenbuild/builders/posix/
 app.gwb
 avrhexfile.gwb
 cbuilder.gwb
 cxxapp.gwb
 cxxbuilder.gwb
 module.gwb
 msgfmt.gwb
 sharedlib.gwb
 staticlib.gwb
 tm2builder.gwb
 tmplib.gwb
share/gwenhywfar/gwenbuild/builders/windows/
 app.gwb
 cbuilder.gwb
 cxxapp.gwb
 cxxbuilder.gwb
 module.gwb
 sharedlib.gwb
 staticlib.gwb
 tm2builder.gwb
 tmplib.gwb
share/gwenhywfar/typemaker2/c/
 char.tm2
 char_array.tm2
 char_ptr.tm2
 double.tm2
 double_array.tm2
 gwen_bindata.tm2
 gwen_buffer.tm2
 gwen_date.tm2
 gwen_db_node.tm2
 gwen_idlist64.tm2
 gwen_multicache.tm2
 gwen_multicache_type.tm2
 gwen_param.tm2
 gwen_param_list.tm2
 gwen_param_list2.tm2
 gwen_param_tree.tm2
 gwen_stringlist2.tm2
 gwen_time.tm2
 gwen_timestamp.tm2
 gwen_xmlnode.tm2
 gwen_xmlnode_list.tm2
 gwen_xmlnode_list2.tm2
 idmap_base.tm2
 int.tm2
 int_array.tm2
 int_base.tm2
 list1_base.tm2
 list2_base.tm2
 struct_base.tm2
 tree2_base.tm2
 tree_base.tm2
 uint16_t.tm2
 uint16_t_array.tm2
 uint32_t.tm2
 uint32_t_array.tm2
 uint64_t.tm2
 uint8_t.tm2
 uint8_t_array.tm2


[FILE:1344:patches/patch-configure]
--- configure.orig	2024-12-17 18:57:54 UTC
+++ configure
@@ -25026,10 +25026,6 @@ $as_echo_n "checking for Qt... " >&6; }
     am_have_qt_makefile="$am_have_qt_dir/Makefile"
     # http://qt-project.org/doc/qt-5/qmake-variable-reference.html#qt
     cat > $am_have_qt_pro << EOF
-win32 {
-    CONFIG -= debug_and_release
-    CONFIG += release
-}
 qtHaveModule(core):              QT += core
 qtHaveModule(gui):               QT += gui
 qtHaveModule(widgets):           QT += widgets
@@ -25038,8 +25034,8 @@ percent.commands = @echo -n "\$(\$(@))\
 QMAKE_EXTRA_TARGETS += percent
 EOF
     $QT_QMAKE $am_have_qt_pro -o $am_have_qt_makefile
-    QT_CXXFLAGS=`cd $am_have_qt_dir; make -s -f $am_have_qt_makefile CXXFLAGS INCPATH`
-    QT_LIBS=`cd $am_have_qt_dir; make -s -f $am_have_qt_makefile LIBS`
+    QT_CXXFLAGS=`cd $am_have_qt_dir; make -s -f $am_have_qt_makefile -VCXXFLAGS -VINCPATH | tr '\n' ' '`
+    QT_LIBS=`cd $am_have_qt_dir; make -s -f $am_have_qt_makefile -VLIBS | tr '\n' ' '`
     rm $am_have_qt_pro $am_have_qt_makefile
     rmdir $am_have_qt_dir
 
@@ -25063,9 +25059,9 @@ else
 fi
 
 
-    QT_RCC=`which rcc`
-    QT_LRELEASE=`which lrelease`
-    QT_LUPDATE=`which lupdate`
+    QT_RCC=#none
+    QT_LRELEASE=#none
+    QT_LUPDATE=#none
 
     # Get Qt version from qmake
     QT_DIR=`$QT_QMAKE --version | grep -o -E /.+`


[FILE:387:patches/patch-src_base_endianfns.h]
--- src/base/endianfns.h.orig	2017-08-07 19:02:11 UTC
+++ src/base/endianfns.h
@@ -40,7 +40,11 @@
 #  define GWEN_ENDIAN_HTOLE64(x) (x)
 #else
 /* for Linux and others use definitions from endian.h */
+# if defined(__FreeBSD__)
+#  include <sys/endian.h>
+# else
 #  include <endian.h>
+# endif
 
 #  define GWEN_ENDIAN_LE16TOH(x) le16toh(x)
 #  define GWEN_ENDIAN_HTOLE16(x) htole16(x)


[FILE:427:patches/patch-src_os_portable__endian.h]
--- src/os/portable_endian.h.orig	2024-04-21 13:51:43 UTC
+++ src/os/portable_endian.h
@@ -50,7 +50,11 @@
 #	define __LITTLE_ENDIAN LITTLE_ENDIAN
 #	define __PDP_ENDIAN    PDP_ENDIAN
 
-#elif defined(__NetBSD__) || defined(__FreeBSD__) || defined(__DragonFly__)
+#elif defined(__DragonFly__) || defined(__FreeBSD__)
+
+#	include <sys/endian.h>
+
+#elif defined(__NetBSD__) || defined(__FreeBSD__)
 
 #	include <sys/endian.h>
 

