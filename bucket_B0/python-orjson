# Buildsheet autogenerated by ravenadm tool -- Do not edit.

NAMEBASE=		python-orjson
VERSION=		3.10.3
KEYWORDS=		python rust
VARIANTS=		v12 v11
SDESC[v11]=		Fast, correct Python JSON library (3.11)
SDESC[v12]=		Fast, correct Python JSON library (3.12)
HOMEPAGE=		https://github.com/ijl/orjson
CONTACT=		Python_Automaton[python@ironwolf.systems]

DOWNLOAD_GROUPS=	main cr01 cr02 cr03 cr04 cr05 cr06 cr07 cr08 cr09 cr10 cr11 cr12 cr13 cr14 cr15 cr16 cr17 cr18 cr19 cr20 cr21 cr22 cr23 cr24 cr25 cr26 cr27 cr28 cr29 cr30 cr31 cr32 cr33 cr34 cr35 cr36 cr37 cr38 cr39 cr40 cr41 cr42 cr43
SITES[main]=		PYPI/o/orjson
SITES[cr01]=		CRATES/ahash:0.8.11
SITES[cr02]=		CRATES/arrayvec:0.7.4
SITES[cr03]=		CRATES/associative-cache:2.0.0
SITES[cr04]=		CRATES/autocfg:1.2.0
SITES[cr05]=		CRATES/beef:0.5.2
SITES[cr06]=		CRATES/bytecount:0.6.8
SITES[cr07]=		CRATES/castaway:0.2.2
SITES[cr08]=		CRATES/cc:1.0.96
SITES[cr09]=		CRATES/cfg-if:1.0.0
SITES[cr10]=		CRATES/chrono:0.4.34
SITES[cr11]=		CRATES/compact_str:0.7.1
SITES[cr12]=		CRATES/const-random:0.1.18
SITES[cr13]=		CRATES/const-random-macro:0.1.16
SITES[cr14]=		CRATES/crunchy:0.2.2
SITES[cr15]=		CRATES/encoding_rs:0.8.34
SITES[cr16]=		CRATES/getrandom:0.2.14
SITES[cr17]=		CRATES/half:2.4.1
SITES[cr18]=		CRATES/itoa:1.0.11
SITES[cr19]=		CRATES/itoap:1.0.1
SITES[cr20]=		CRATES/libc:0.2.154
SITES[cr21]=		CRATES/no-panic:0.1.29
SITES[cr22]=		CRATES/num-traits:0.2.18
SITES[cr23]=		CRATES/once_cell:1.19.0
SITES[cr24]=		CRATES/proc-macro2:1.0.81
SITES[cr25]=		CRATES/pyo3-build-config:0.21.2
SITES[cr26]=		CRATES/pyo3-ffi:0.21.2
SITES[cr27]=		CRATES/quote:1.0.36
SITES[cr28]=		CRATES/rustversion:1.0.15
SITES[cr29]=		CRATES/ryu:1.0.17
SITES[cr30]=		CRATES/serde:1.0.200
SITES[cr31]=		CRATES/serde_derive:1.0.200
SITES[cr32]=		CRATES/serde_json:1.0.116
SITES[cr33]=		CRATES/simdutf8:0.1.4
SITES[cr34]=		CRATES/smallvec:1.13.2
SITES[cr35]=		CRATES/static_assertions:1.1.0
SITES[cr36]=		CRATES/syn:2.0.60
SITES[cr37]=		CRATES/target-lexicon:0.12.14
SITES[cr38]=		CRATES/tiny-keccak:2.0.2
SITES[cr39]=		CRATES/unicode-ident:1.0.12
SITES[cr40]=		CRATES/version_check:0.9.4
SITES[cr41]=		CRATES/wasi:0.11.0+wasi-snapshot-preview1
SITES[cr42]=		CRATES/zerocopy:0.7.32
SITES[cr43]=		CRATES/zerocopy-derive:0.7.32
DISTFILE[1]=		orjson-3.10.3.tar.gz:main
DISTFILE[2]=		generated:cr01
DISTFILE[3]=		generated:cr02
DISTFILE[4]=		generated:cr03
DISTFILE[5]=		generated:cr04
DISTFILE[6]=		generated:cr05
DISTFILE[7]=		generated:cr06
DISTFILE[8]=		generated:cr07
DISTFILE[9]=		generated:cr08
DISTFILE[10]=		generated:cr09
DISTFILE[11]=		generated:cr10
DISTFILE[12]=		generated:cr11
DISTFILE[13]=		generated:cr12
DISTFILE[14]=		generated:cr13
DISTFILE[15]=		generated:cr14
DISTFILE[16]=		generated:cr15
DISTFILE[17]=		generated:cr16
DISTFILE[18]=		generated:cr17
DISTFILE[19]=		generated:cr18
DISTFILE[20]=		generated:cr19
DISTFILE[21]=		generated:cr20
DISTFILE[22]=		generated:cr21
DISTFILE[23]=		generated:cr22
DISTFILE[24]=		generated:cr23
DISTFILE[25]=		generated:cr24
DISTFILE[26]=		generated:cr25
DISTFILE[27]=		generated:cr26
DISTFILE[28]=		generated:cr27
DISTFILE[29]=		generated:cr28
DISTFILE[30]=		generated:cr29
DISTFILE[31]=		generated:cr30
DISTFILE[32]=		generated:cr31
DISTFILE[33]=		generated:cr32
DISTFILE[34]=		generated:cr33
DISTFILE[35]=		generated:cr34
DISTFILE[36]=		generated:cr35
DISTFILE[37]=		generated:cr36
DISTFILE[38]=		generated:cr37
DISTFILE[39]=		generated:cr38
DISTFILE[40]=		generated:cr39
DISTFILE[41]=		generated:cr40
DISTFILE[42]=		generated:cr41
DISTFILE[43]=		generated:cr42
DISTFILE[44]=		generated:cr43
DIST_SUBDIR=		rust/crates
DF_INDEX=		1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20
			21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37
			38 39 40 41 42 43 44
SPKGS[v11]=		single
SPKGS[v12]=		single

OPTIONS_AVAILABLE=	PY312 PY311
OPTIONS_STANDARD=	none
VOPTS[v11]=		PY312=OFF PY311=ON
VOPTS[v12]=		PY312=ON PY311=OFF

USES=			cargo cclibs:single

DISTNAME=		orjson-3.10.3

CARGO_CARGOLOCK=	{{WRKSRC}}/Cargo.lock
CARGO_CARGOTOML=	{{WRKSRC}}/Cargo.toml
GENERATED=		yes

PLIST_SUB=		VER=3.10.3
			CPYTHON={{CPYTHON:U{{PYTHON_SUFFIX}}}}

VAR_OPSYS[linux]=	MAKEFILE_LINE=CPYTHON={{PYTHON_SUFFIX}}-x86_64-linux-gnu
CARGO_SKIP_CONFIGURE=	yes
CARGO_SKIP_BUILD=	yes
CARGO_SKIP_INSTALL=	yes

[PY311].BUILD_DEPENDS_ON=		python-setuptools-rust:single:v11
					python-maturin:single:v11
					python-pip:single:v11
[PY311].USES_ON=			python:v11

[PY312].BUILD_DEPENDS_ON=		python-setuptools-rust:single:v12
					python-maturin:single:v12
					python-pip:single:v12
[PY312].USES_ON=			python:v12

post-patch:
	${MKDIR} ${WRKSRC}/.cargo
	${RM} ${WRKSRC}/.cargo/config.toml
	echo "[source.cargo]" >> ${WRKSRC}/.cargo/config.toml
	echo "directory = '${CARGO_VENDOR_DIR}'" >> ${WRKSRC}/.cargo/config.toml
	echo "[source.crates-io]" >> ${WRKSRC}/.cargo/config.toml
	echo "replace-with = 'cargo'" >> ${WRKSRC}/.cargo/config.toml

do-build:
	(cd ${BUILD_WRKSRC} && ${SETENV} ${MAKE_ENV} maturin build \
		--release \
		--interpreter ${PYTHON_CMD})

pre-install-linux:
	# for some reason compatibility ends at -manylinux_2_23_x86_64 on
	# ubuntu 16.04 sysroot
	if [ -f "${INSTALL_WRKSRC}/target/wheels/orjson-3.10.3-cp${PYTHON_SUFFIX}-cp${PYTHON_SUFFIX}-manylinux_2_24_x86_64.whl" ];\
	then ${MV}\
	  ${INSTALL_WRKSRC}/target/wheels/orjson-3.10.3-cp${PYTHON_SUFFIX}-cp${PYTHON_SUFFIX}-manylinux_2_24_x86_64.whl\
	  ${INSTALL_WRKSRC}/target/wheels/orjson-3.10.3-cp${PYTHON_SUFFIX}-cp${PYTHON_SUFFIX}-manylinux_2_23_x86_64.whl;\
	fi

do-install:
	# Due to upstream not supplying a setup.py file or other way to install
	# using pip command for now...
	${SETENV} ${MAKE_ENV} pip install \
		--verbose \
		--no-index \
		--no-compile \
		--progress-bar off \
		--root=${STAGEDIR} \
		--root-user-action=ignore \
		--disable-pip-version-check \
		--no-deps ${INSTALL_WRKSRC}/target/wheels/*.whl
	(cd ${STAGEDIR} && ${PYTHON_CMD} -m compileall -d / . ||:)
	${INSTALL_LIB} ${WRKSRC}/target/release/liborjson.so \
		${STAGEDIR}${PYTHON_SITELIBDIR}/orjson
	${CHMOD} +x ${STAGEDIR}${PYTHON_SITELIBDIR}/orjson/liborjson.so
	${STRIP_CMD} ${STAGEDIR}${PYTHON_SITELIBDIR}/orjson/orjson.*.so

pre-install-midnightbsd:
	# Due to rust limitations, maturin must set target OS as freebsd, but
	# pip doesn't recognize that as a legal combination.  Rename to complete build.
	(cd ${INSTALL_WRKSRC}/target/wheels/ && ${MV}\
	orjson-3.10.3-cp${PYTHON_SUFFIX}-cp${PYTHON_SUFFIX}-freebsd_*.whl\
	orjson-3.10.3-cp${PYTHON_SUFFIX}-cp${PYTHON_SUFFIX}-midnightbsd_3_0_0_amd64.whl)

[FILE:1392:descriptions/desc.single]
orjson is a fast, correct JSON library for Python. It benchmarks as the
fastest Python library for JSON and is more correct than the standard
json library or other third-party libraries. It serializes dataclass,
datetime, numpy, and UUID instances natively.

Its features and drawbacks compared to other Python JSON libraries:
- serializes dataclass instances 40-50x as fast as other libraries
- serializes datetime, date, and time instances to RFC 3339 format,
  e.g., "1970-01-01T00:00:00+00:00"
- serializes numpy.ndarray instances 4-12x as fast with 0.3x the memory
  usage of other libraries
- pretty prints 10x to 20x as fast as the standard library
- serializes to bytes rather than str, i.e., is not a drop-in replacement
- serializes str without escaping unicode to ASCII, e.g., "???" rather
  than "\\u597d"
- serializes float 10x as fast and deserializes 2x faster than other libs
- serializes subclasses of str, int, list, and dict natively, requiring
  default to specify how to serialize others
- serializes arbitrary types using a default hook
- has strict UTF-8 conformance, more correct than the standard library
- has strict JSON conformance in not supporting Nan/Infinity/-Infinity
- has an option for strict JSON conformance on 53-bit integers with
  default support for 64-bit
- does not provide load() or dump() functions for reading from/writing
  to file-like objects


[FILE:5019:distinfo]
2b166507acae7ba2f7c315dcf185a9111ad5e992ac81f2d507aac39193c2c818      4930028 rust/crates/orjson-3.10.3.tar.gz
e89da841a80418a9b391ebaea17f5c112ffaaa96f621d2c285b5174da76b9011        43607 rust/crates/ahash-0.8.11.tar.gz
96d30a06541fbafbc7f82ed10c06164cfbd2c401138f6addd8404629c4b16711        29856 rust/crates/arrayvec-0.7.4.tar.gz
b993cd767a2bc7307dd87622311ca22c44329cc7a21366206bfa0896827b2bad        13960 rust/crates/associative-cache-2.0.0.tar.gz
f1fdabc7756949593fe60f30ec81974b613357de856987752631dea1e3394c80        14808 rust/crates/autocfg-1.2.0.tar.gz
3a8241f3ebb85c056b509d4327ad0358fbbba6ffb340bf388f26350aeda225b1        15275 rust/crates/beef-0.5.2.tar.gz
5ce89b21cab1437276d2650d57e971f9d548a2d9037cc231abdc0562b97498ce        14694 rust/crates/bytecount-0.6.8.tar.gz
8a17ed5635fc8536268e5d4de1e22e81ac34419e5f052d4d51f4e01dcc263fcc        11091 rust/crates/castaway-0.2.2.tar.gz
065a29261d53ba54260972629f9ca6bffa69bac13cd1fed61420f7fa68b9f8bd        76576 rust/crates/cc-1.0.96.tar.gz
baf1de4339761588bc0619e3cbc0120ee582ebb74b53b4efbf79117bd2da40fd         7934 rust/crates/cfg-if-1.0.0.tar.gz
5bc015644b92d5890fab7489e49d21f879d5c990186827d42ec511919404f38b       228932 rust/crates/chrono-0.4.34.tar.gz
f86b9c4c00838774a6d902ef931eff7470720c51d90c2e32cfe15dc304737b3f        57246 rust/crates/compact_str-0.7.1.tar.gz
87e00182fe74b066627d63b85fd550ac2998d4b0bd86bfed477a0ae4c7c71359         6646 rust/crates/const-random-0.1.18.tar.gz
f9d839f2a20b0aee515dc581a6172f2321f96cab76c1a38a4c584a194955390e         6657 rust/crates/const-random-macro-0.1.16.tar.gz
7a81dae078cea95a014a339291cec439d2f232ebe854a9d672b796c6afafa9b7         2995 rust/crates/crunchy-0.2.2.tar.gz
b45de904aa0b010bce2ab45264d0631681847fa7b6f2eaa7dab7619943bc4f59      1378166 rust/crates/encoding_rs-0.8.34.tar.gz
94b22e06ecb0110981051723910cbf0b5f5e09a2062dd7663334ee79a9d1286c        37307 rust/crates/getrandom-0.2.14.tar.gz
6dd08c532ae367adf81c312a4580bc67f1d0fe8bc9c460520283f4c0ff277888        50892 rust/crates/half-2.4.1.tar.gz
49f1f14873335454500d59611f1cf4a4b0f786f9ac11f4312a78e4cf2566695b        10563 rust/crates/itoa-1.0.11.tar.gz
9028f49264629065d057f340a86acb84867925865f73bbf8d47b4d149a7e88b8        83316 rust/crates/itoap-1.0.1.tar.gz
ae743338b92ff9146ce83992f766a31066a91a8c84a45e0e9f21e7cf6de6d346       743304 rust/crates/libc-0.2.154.tar.gz
c711522eedec2a96bb3672ad60a03561cb28934ab1e9b97d2ecb58e07c79ef52        11689 rust/crates/no-panic-0.1.29.tar.gz
da0df0e5185db44f69b44f26786fe401b6c293d1907744beaa7fa62b2e5a517a        51930 rust/crates/num-traits-0.2.18.tar.gz
3fdb12b2476b595f9358c5161aa467c2438859caa136dec86c26fdd2efe17b92        33046 rust/crates/once_cell-1.19.0.tar.gz
3d1597b0c024618f09a9c3b8655b7e430397a36d23fdafec26d6965e9eec3eba        48233 rust/crates/proc-macro2-1.0.81.tar.gz
7883df5835fafdad87c0d888b266c8ec0f4c9ca48a5bed6bbb592e8dedee1b50        30581 rust/crates/pyo3-build-config-0.21.2.tar.gz
01be5843dc60b916ab4dad1dca6d20b9b4e6ddc8e15f50c47fe6d85f1fb97403        66160 rust/crates/pyo3-ffi-0.21.2.tar.gz
0fa76aaf39101c457836aec0ce2316dbdc3ab723cdda1c6bd4e6ad4208acaca7        28507 rust/crates/quote-1.0.36.tar.gz
80af6f9131f277a45a3fba6ce8e2258037bb0477a67e610d3c1fe046ab31de47        17406 rust/crates/rustversion-1.0.15.tar.gz
e86697c916019a8588c99b5fac3cead74ec0b4b819707a682fd4d23fa0ce1ba1        47537 rust/crates/ryu-1.0.17.tar.gz
ddc6f9cc94d67c0e21aaf7eda3a010fd3af78ebf6e096aa6e2e13c79749cce4f        77611 rust/crates/serde-1.0.200.tar.gz
856f046b9400cee3c8c94ed572ecdb752444c24528c035cd35882aad6f492bcb        55785 rust/crates/serde_derive-1.0.200.tar.gz
3e17db7126d17feb94eb3fad46bf1a96b034e8aacbc2e775fe81505f8b0b2813       146790 rust/crates/serde_json-1.0.116.tar.gz
f27f6278552951f1f2b8cf9da965d10969b2efdea95a6ec47987ab46edfe263a        28621 rust/crates/simdutf8-0.1.4.tar.gz
3c5e1a9a646d36c3599cd173a41282daf47c44583ad367b8e6837255952e5c67        35216 rust/crates/smallvec-1.13.2.tar.gz
a2eb9349b6444b326872e140eb1cf5e7c522154d69e7a0ffb0fb81c06b37543f        18480 rust/crates/static_assertions-1.1.0.tar.gz
909518bc7b1c9b779f1bbf07f2929d35af9f0f37e47c6e9ef7f9dddc1e1821f3       255808 rust/crates/syn-2.0.60.tar.gz
e1fc403891a21bcfb7c37834ba66a547a8f402146eba7265b5a6d88059c9ff2f        25508 rust/crates/target-lexicon-0.12.14.tar.gz
2c9d3793400a45f954c52e73d068316d76b6f4e36977e3fcebb13a2721e80237        20129 rust/crates/tiny-keccak-2.0.2.tar.gz
3354b9ac3fae1ff6755cb6db53683adb661634f67557942dea4facebec0fee4b        42168 rust/crates/unicode-ident-1.0.12.tar.gz
49874b5167b65d7193b8aba1567f5c7d93d001cafc34600cee003eda787e483f        14895 rust/crates/version_check-0.9.4.tar.gz
9c8d87e72b64a3b4db28d11ce29237c246188f4f51057d65a7eab63b7987e423        28131 rust/crates/wasi-0.11.0+wasi-snapshot-preview1.tar.gz
74d4d3961e53fa4c9a25a8637fc2bfaf2595b3d3ae34875568a5cf64787716be       151096 rust/crates/zerocopy-0.7.32.tar.gz
9ce1b18ccd8e73a9321186f97e46f9f04b778851177567b1975109d26a08d2a6        37623 rust/crates/zerocopy-derive-0.7.32.tar.gz


[FILE:395:manifests/plist.single]
%%PYTHON_SITELIBDIR%%/orjson/
 __init__.py
 __init__.pyi
 liborjson.so
 orjson.cpython-%%CPYTHON%%.so
 py.typed
%%PYTHON_SITELIBDIR%%/orjson-%%VER%%.dist-info/
 INSTALLER
 METADATA
 RECORD
 REQUESTED
 WHEEL
 direct_url.json
%%PYTHON_SITELIBDIR%%/orjson-%%VER%%.dist-info/license_files/
 LICENSE-APACHE
 LICENSE-MIT
%%PYTHON_SITELIBDIR%%/orjson/__pycache__/__init__.cpython-%%PYTHON_SUFFIX%%.pyc

