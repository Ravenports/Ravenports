# Buildsheet autogenerated by ravenadm tool -- Do not edit.

NAMEBASE=		python-orjson
VERSION=		3.9.10
KEYWORDS=		python rust
VARIANTS=		v12 v11
SDESC[v11]=		Fast, correct Python JSON library (3.11)
SDESC[v12]=		Fast, correct Python JSON library (3.12)
HOMEPAGE=		https://github.com/ijl/orjson
CONTACT=		Python_Automaton[python@ironwolf.systems]

DOWNLOAD_GROUPS=	main cr01 cr02 cr03 cr04 cr05 cr06 cr07 cr08 cr09 cr10 cr11 cr12 cr13 cr14 cr15 cr16 cr17 cr18 cr19 cr20 cr21 cr22 cr23 cr24 cr25 cr26 cr27 cr28 cr29 cr30 cr31 cr32 cr33 cr34 cr35 cr36 cr37 cr38
SITES[main]=		PYPI/o/orjson
SITES[cr01]=		CRATES/ahash:0.8.6
SITES[cr02]=		CRATES/arrayvec:0.7.4
SITES[cr03]=		CRATES/associative-cache:2.0.0
SITES[cr04]=		CRATES/autocfg:1.1.0
SITES[cr05]=		CRATES/beef:0.5.2
SITES[cr06]=		CRATES/bytecount:0.6.7
SITES[cr07]=		CRATES/castaway:0.2.2
SITES[cr08]=		CRATES/cc:1.0.83
SITES[cr09]=		CRATES/cfg-if:1.0.0
SITES[cr10]=		CRATES/chrono:0.4.31
SITES[cr11]=		CRATES/compact_str:0.7.1
SITES[cr12]=		CRATES/encoding_rs:0.8.33
SITES[cr13]=		CRATES/itoa:1.0.9
SITES[cr14]=		CRATES/itoap:1.0.1
SITES[cr15]=		CRATES/libc:0.2.149
SITES[cr16]=		CRATES/libm:0.2.8
SITES[cr17]=		CRATES/no-panic:0.1.26
SITES[cr18]=		CRATES/num-traits:0.2.17
SITES[cr19]=		CRATES/once_cell:1.18.0
SITES[cr20]=		CRATES/packed_simd:0.3.9
SITES[cr21]=		CRATES/proc-macro2:1.0.69
SITES[cr22]=		CRATES/pyo3-build-config:0.20.0
SITES[cr23]=		CRATES/pyo3-ffi:0.20.0
SITES[cr24]=		CRATES/quote:1.0.33
SITES[cr25]=		CRATES/rustversion:1.0.14
SITES[cr26]=		CRATES/ryu:1.0.15
SITES[cr27]=		CRATES/serde:1.0.190
SITES[cr28]=		CRATES/serde_derive:1.0.190
SITES[cr29]=		CRATES/serde_json:1.0.107
SITES[cr30]=		CRATES/simdutf8:0.1.4
SITES[cr31]=		CRATES/smallvec:1.11.1
SITES[cr32]=		CRATES/static_assertions:1.1.0
SITES[cr33]=		CRATES/syn:2.0.38
SITES[cr34]=		CRATES/target-lexicon:0.12.12
SITES[cr35]=		CRATES/unicode-ident:1.0.12
SITES[cr36]=		CRATES/version_check:0.9.4
SITES[cr37]=		CRATES/zerocopy:0.7.15
SITES[cr38]=		CRATES/zerocopy-derive:0.7.15
DISTFILE[1]=		orjson-3.9.10.tar.gz:main
DISTFILE[2]=		generated:cr01
DISTFILE[3]=		generated:cr02
DISTFILE[4]=		generated:cr03
DISTFILE[5]=		generated:cr04
DISTFILE[6]=		generated:cr05
DISTFILE[7]=		generated:cr06
DISTFILE[8]=		generated:cr07
DISTFILE[9]=		generated:cr08
DISTFILE[10]=		generated:cr09
DISTFILE[11]=		generated:cr10
DISTFILE[12]=		generated:cr11
DISTFILE[13]=		generated:cr12
DISTFILE[14]=		generated:cr13
DISTFILE[15]=		generated:cr14
DISTFILE[16]=		generated:cr15
DISTFILE[17]=		generated:cr16
DISTFILE[18]=		generated:cr17
DISTFILE[19]=		generated:cr18
DISTFILE[20]=		generated:cr19
DISTFILE[21]=		generated:cr20
DISTFILE[22]=		generated:cr21
DISTFILE[23]=		generated:cr22
DISTFILE[24]=		generated:cr23
DISTFILE[25]=		generated:cr24
DISTFILE[26]=		generated:cr25
DISTFILE[27]=		generated:cr26
DISTFILE[28]=		generated:cr27
DISTFILE[29]=		generated:cr28
DISTFILE[30]=		generated:cr29
DISTFILE[31]=		generated:cr30
DISTFILE[32]=		generated:cr31
DISTFILE[33]=		generated:cr32
DISTFILE[34]=		generated:cr33
DISTFILE[35]=		generated:cr34
DISTFILE[36]=		generated:cr35
DISTFILE[37]=		generated:cr36
DISTFILE[38]=		generated:cr37
DISTFILE[39]=		generated:cr38
DIST_SUBDIR=		rust/crates
DF_INDEX=		1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20
			21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37
			38 39
SPKGS[v11]=		single
SPKGS[v12]=		single

OPTIONS_AVAILABLE=	PY312 PY311
OPTIONS_STANDARD=	none
VOPTS[v11]=		PY312=OFF PY311=ON
VOPTS[v12]=		PY312=ON PY311=OFF

USES=			cargo cclibs:single

DISTNAME=		orjson-3.9.10

CARGO_CARGOLOCK=	{{WRKSRC}}/Cargo.lock
CARGO_CARGOTOML=	{{WRKSRC}}/Cargo.toml
GENERATED=		yes

PLIST_SUB=		VER=3.9.10
			CPYTHON={{CPYTHON:U{{PYTHON_SUFFIX}}}}

VAR_OPSYS[linux]=	MAKEFILE_LINE=CPYTHON={{PYTHON_SUFFIX}}-x86_64-linux-gnu
CARGO_SKIP_CONFIGURE=	yes
CARGO_SKIP_BUILD=	yes
CARGO_SKIP_INSTALL=	yes

[PY311].BUILD_DEPENDS_ON=		python-setuptools-rust:single:v11
					python-maturin:single:v11
					python-pip:single:v11
[PY311].USES_ON=			python:v11

[PY312].BUILD_DEPENDS_ON=		python-setuptools-rust:single:v12
					python-maturin:single:v12
					python-pip:single:v12
[PY312].USES_ON=			python:v12

post-patch:
	${MKDIR} ${WRKSRC}/.cargo
	${RM} ${WRKSRC}/.cargo/config.toml
	echo "[source.cargo]" >> ${WRKSRC}/.cargo/config.toml
	echo "directory = '${CARGO_VENDOR_DIR}'" >> ${WRKSRC}/.cargo/config.toml
	echo "[source.crates-io]" >> ${WRKSRC}/.cargo/config.toml
	echo "replace-with = 'cargo'" >> ${WRKSRC}/.cargo/config.toml

do-build:
	(cd ${BUILD_WRKSRC} && ${SETENV} ${MAKE_ENV} maturin build \
		--release \
		--interpreter ${PYTHON_CMD})

pre-install-linux:
	# for some reason compatibility ends at -manylinux_2_23_x86_64 on
	# ubuntu 16.04 sysroot
	if [ -f "${INSTALL_WRKSRC}/target/wheels/orjson-3.9.10-cp${PYTHON_SUFFIX}-cp${PYTHON_SUFFIX}-manylinux_2_24_x86_64.whl" ];\
	then ${MV}\
	  ${INSTALL_WRKSRC}/target/wheels/orjson-3.9.10-cp${PYTHON_SUFFIX}-cp${PYTHON_SUFFIX}-manylinux_2_24_x86_64.whl\
	  ${INSTALL_WRKSRC}/target/wheels/orjson-3.9.10-cp${PYTHON_SUFFIX}-cp${PYTHON_SUFFIX}-manylinux_2_23_x86_64.whl;\
	fi

do-install:
	# Due to upstream not supplying a setup.py file or other way to install
	# using pip command for now...
	${SETENV} ${MAKE_ENV} pip install \
		--verbose \
		--no-index \
		--no-compile \
		--progress-bar off \
		--root=${STAGEDIR} \
		--root-user-action=ignore \
		--disable-pip-version-check \
		--no-deps ${INSTALL_WRKSRC}/target/wheels/*.whl
	(cd ${STAGEDIR} && ${PYTHON_CMD} -m compileall -d / . ||:)
	${INSTALL_LIB} ${WRKSRC}/target/release/liborjson.so \
		${STAGEDIR}${PYTHON_SITELIBDIR}/orjson
	${CHMOD} +x ${STAGEDIR}${PYTHON_SITELIBDIR}/orjson/liborjson.so
	${STRIP_CMD} ${STAGEDIR}${PYTHON_SITELIBDIR}/orjson/orjson.*.so

pre-install-midnightbsd:
	# Due to rust limitations, maturin must set target OS as freebsd, but
	# pip doesn't recognize that as a legal combination.  Rename to complete build.
	(cd ${INSTALL_WRKSRC}/target/wheels/ && ${MV}\
	orjson-3.9.10-cp${PYTHON_SUFFIX}-cp${PYTHON_SUFFIX}-freebsd_*.whl\
	orjson-3.9.10-cp${PYTHON_SUFFIX}-cp${PYTHON_SUFFIX}-midnightbsd_3_0_0_amd64.whl)

[FILE:1392:descriptions/desc.single]
orjson is a fast, correct JSON library for Python. It benchmarks as the
fastest Python library for JSON and is more correct than the standard
json library or other third-party libraries. It serializes dataclass,
datetime, numpy, and UUID instances natively.

Its features and drawbacks compared to other Python JSON libraries:
- serializes dataclass instances 40-50x as fast as other libraries
- serializes datetime, date, and time instances to RFC 3339 format,
  e.g., "1970-01-01T00:00:00+00:00"
- serializes numpy.ndarray instances 4-12x as fast with 0.3x the memory
  usage of other libraries
- pretty prints 10x to 20x as fast as the standard library
- serializes to bytes rather than str, i.e., is not a drop-in replacement
- serializes str without escaping unicode to ASCII, e.g., "???" rather
  than "\\u597d"
- serializes float 10x as fast and deserializes 2x faster than other libs
- serializes subclasses of str, int, list, and dict natively, requiring
  default to specify how to serialize others
- serializes arbitrary types using a default hook
- has strict UTF-8 conformance, more correct than the standard library
- has strict JSON conformance in not supporting Nan/Infinity/-Infinity
- has an option for strict JSON conformance on 53-bit integers with
  default support for 64-bit
- does not provide load() or dump() functions for reading from/writing
  to file-like objects


[FILE:4420:distinfo]
9ebbdbd6a046c304b1845e96fbcc5559cd296b4dfd3ad2509e33c4d9ce07d6a1      5361203 rust/crates/orjson-3.9.10.tar.gz
91429305e9f0a25f6205c5b8e0d2db09e0708a7a6df0f42212bb56c32c8ac97a        42780 rust/crates/ahash-0.8.6.tar.gz
96d30a06541fbafbc7f82ed10c06164cfbd2c401138f6addd8404629c4b16711        29856 rust/crates/arrayvec-0.7.4.tar.gz
b993cd767a2bc7307dd87622311ca22c44329cc7a21366206bfa0896827b2bad        13960 rust/crates/associative-cache-2.0.0.tar.gz
d468802bab17cbc0cc575e9b053f41e72aa36bfa6b7f55e3529ffa43161b97fa        13272 rust/crates/autocfg-1.1.0.tar.gz
3a8241f3ebb85c056b509d4327ad0358fbbba6ffb340bf388f26350aeda225b1        15275 rust/crates/beef-0.5.2.tar.gz
e1e5f035d16fc623ae5f74981db80a439803888314e3a555fd6f04acd51a3205        14642 rust/crates/bytecount-0.6.7.tar.gz
8a17ed5635fc8536268e5d4de1e22e81ac34419e5f052d4d51f4e01dcc263fcc        11091 rust/crates/castaway-0.2.2.tar.gz
f1174fb0b6ec23863f8b971027804a42614e347eafb0a95bf0b12cdae21fc4d0        68343 rust/crates/cc-1.0.83.tar.gz
baf1de4339761588bc0619e3cbc0120ee582ebb74b53b4efbf79117bd2da40fd         7934 rust/crates/cfg-if-1.0.0.tar.gz
7f2c685bad3eb3d45a01354cedb7d5faa66194d1d58ba6e267a8de788f79db38       214513 rust/crates/chrono-0.4.31.tar.gz
f86b9c4c00838774a6d902ef931eff7470720c51d90c2e32cfe15dc304737b3f        57246 rust/crates/compact_str-0.7.1.tar.gz
7268b386296a025e474d5140678f75d6de9493ae55a5d709eeb9dd08149945e1      1370071 rust/crates/encoding_rs-0.8.33.tar.gz
af150ab688ff2122fcef229be89cb50dd66af9e01a4ff320cc137eecc9bacc38        10492 rust/crates/itoa-1.0.9.tar.gz
9028f49264629065d057f340a86acb84867925865f73bbf8d47b4d149a7e88b8        83316 rust/crates/itoap-1.0.1.tar.gz
a08173bc88b7955d1b3145aa561539096c421ac8debde8cbc3612ec635fee29b       715592 rust/crates/libc-0.2.149.tar.gz
4ec2a862134d2a7d32d7983ddcdd1c4923530833c9f2ea1a44fc5fa473989058       113450 rust/crates/libm-0.2.8.tar.gz
71a6d126424f5ce0bb4587ff4561421d44aeede520541cc66f1bb912506ae46a        11551 rust/crates/no-panic-0.1.26.tar.gz
39e3200413f237f41ab11ad6d161bc7239c84dcb631773ccd7de3dfe4b5c267c        50190 rust/crates/num-traits-0.2.17.tar.gz
dd8b5dd2ae5ed71462c540258bedcb51965123ad7e7ccf4b9a8cafaa4a63576d        32969 rust/crates/once_cell-1.18.0.tar.gz
1f9f08af0c877571712e2e3e686ad79efad9657dbf0f7c3c8ba943ff6c38932d        98340 rust/crates/packed_simd-0.3.9.tar.gz
134c189feb4956b20f6f547d2cf727d4c0fe06722b20a0eec87ed445a97f92da        44271 rust/crates/proc-macro2-1.0.69.tar.gz
a96fe70b176a89cff78f2fa7b3c930081e163d5379b4dcdf993e3ae29ca662e5        29534 rust/crates/pyo3-build-config-0.20.0.tar.gz
214929900fd25e6604661ed9cf349727c8920d47deff196c4e28165a6ef2a96b        64220 rust/crates/pyo3-ffi-0.20.0.tar.gz
5267fca4496028628a95160fc423a33e8b2e6af8a5302579e322e4b520293cae        28090 rust/crates/quote-1.0.33.tar.gz
7ffc183a10b4478d04cbbbfc96d0873219d962dd5accaff2ffbd4ceb7df837f4        17261 rust/crates/rustversion-1.0.14.tar.gz
1ad4cc8da4ef723ed60bced201181d83791ad433213d8c24efffda1eec85d741        46906 rust/crates/ryu-1.0.15.tar.gz
91d3c334ca1ee894a2c6f6ad698fe8c435b76d504b13d436f0685d648d6d96f7        76455 rust/crates/serde-1.0.190.tar.gz
67c5609f394e5c2bd7fc51efda478004ea80ef42fee983d5c67a65e34f32c0e3        55676 rust/crates/serde_derive-1.0.190.tar.gz
6b420ce6e3d8bd882e9b243c6eed35dbc9a6110c9769e74b584e0d68d1f20c65       146458 rust/crates/serde_json-1.0.107.tar.gz
f27f6278552951f1f2b8cf9da965d10969b2efdea95a6ec47987ab46edfe263a        28621 rust/crates/simdutf8-0.1.4.tar.gz
942b4a808e05215192e39f4ab80813e599068285906cc91aa64f923db842bd5a        34831 rust/crates/smallvec-1.11.1.tar.gz
a2eb9349b6444b326872e140eb1cf5e7c522154d69e7a0ffb0fb81c06b37543f        18480 rust/crates/static_assertions-1.1.0.tar.gz
e96b79aaa137db8f61e26363a0c9b47d8b4ec75da28b7d1d614c2303e232408b       243284 rust/crates/syn-2.0.38.tar.gz
14c39fd04924ca3a864207c66fc2cd7d22d7c016007f9ce846cbb9326331930a        25156 rust/crates/target-lexicon-0.12.12.tar.gz
3354b9ac3fae1ff6755cb6db53683adb661634f67557942dea4facebec0fee4b        42168 rust/crates/unicode-ident-1.0.12.tar.gz
49874b5167b65d7193b8aba1567f5c7d93d001cafc34600cee003eda787e483f        14895 rust/crates/version_check-0.9.4.tar.gz
81ba595b9f2772fbee2312de30eeb80ec773b4cb2f1e8098db024afadda6c06f       106053 rust/crates/zerocopy-0.7.15.tar.gz
772666c41fb6dceaf520b564b962d738a8e1a83b41bd48945f50837aed78bb1d       527188 rust/crates/zerocopy-derive-0.7.15.tar.gz


[FILE:395:manifests/plist.single]
%%PYTHON_SITELIBDIR%%/orjson/
 __init__.py
 __init__.pyi
 liborjson.so
 orjson.cpython-%%CPYTHON%%.so
 py.typed
%%PYTHON_SITELIBDIR%%/orjson-%%VER%%.dist-info/
 INSTALLER
 METADATA
 RECORD
 REQUESTED
 WHEEL
 direct_url.json
%%PYTHON_SITELIBDIR%%/orjson-%%VER%%.dist-info/license_files/
 LICENSE-APACHE
 LICENSE-MIT
%%PYTHON_SITELIBDIR%%/orjson/__pycache__/__init__.cpython-%%PYTHON_SUFFIX%%.pyc

