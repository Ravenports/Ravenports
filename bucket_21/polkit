# Buildsheet autogenerated by ravenadm tool -- Do not edit.

NAMEBASE=		polkit
VERSION=		0.115
KEYWORDS=		sysutils
VARIANTS=		standard
SDESC[standard]=	Framework for access control to system components
HOMEPAGE=		https://www.freedesktop.org/wiki/Software/polkit/
CONTACT=		Michael_Reim[kraileth@elderlinux.org]

DOWNLOAD_GROUPS=	main
SITES[main]=		https://www.freedesktop.org/software/polkit/releases/
DISTFILE[1]=		polkit-0.115.tar.gz:main
DF_INDEX=		1
SPKGS[standard]=	single

OPTIONS_AVAILABLE=	none
OPTIONS_STANDARD=	none

BUILD_DEPENDS=		docbook-xsl:primary:standard
			intltool:single:standard
BUILDRUN_DEPENDS=	dbus:single:standard
			expat:complete:standard
			openpam:single:standard
			spidermonkey:single:standard

USERS=			polkitd
GROUPS=			polkitd
USERGROUP_SPKG=		single

USES=			gettext-tools gmake libtool pkgconfig python
			shebangfix
GNOME_COMPONENTS=	glib introspection libxslt

FPC_EQUIVALENT=		sysutils/polkit
SHEBANG_FILES=		{{WRKSRC}}/src/polkitbackend/toarray.pl

MUST_CONFIGURE=		gnu
CONFIGURE_ARGS=		--with-authfw=pam
			--with-pam-include=system
			--with-mozjs=mozjs-17.0
			--with-os-type={{OPSYS}}
			--disable-libsystemd-login
			--disable-libelogind
			--disable-static
			--enable-introspection=yes
			--localstatedir=/var
			--disable-test

INSTALL_TARGET=		install-strip
INSTALL_REQ_TOOLCHAIN=	yes

post-patch:
	${REINPLACE_CMD} -e 's|__DBPATH__|${PREFIX}/share/xsl/docbook/manpages|' ${WRKSRC}/docs/man/Makefile.in
	${REINPLACE_CMD} -e 's|/usr/bin/|${PREFIX}/bin/|g' \
		${WRKSRC}/docs/man/pkexec.xml \
		${WRKSRC}/src/examples/org.freedesktop.policykit.examples.pkexec.policy.in
	${REINPLACE_CMD} -e 's|/usr/local|${PREFIX}|g' \
		${WRKSRC}/docs/man/polkit.xml

post-install:
	${MKDIR} ${STAGEDIR}/var/lib/polkit-1
	${INSTALL_DATA} ${WRKSRC}/data/org.freedesktop.PolicyKit1.conf \
		${STAGEDIR}${PREFIX}/etc/dbus-1/system.d/org.freedesktop.PolicyKit1.conf.sample
.for i in 10-vendor.d 20-org.d 30-site.d 50-local.d 90-mandatory.d
	${MKDIR} ${STAGEDIR}${PREFIX}/etc/polkit-1/localauthority/${i}
	${MKDIR} ${STAGEDIR}/var/lib/polkit-1/localauthority/${i}
.endfor
	${RM} -r ${STAGEDIR}${PREFIX}/etc/dbus-1

[FILE:300:descriptions/desc.single]
Polkit is an application-level toolkit for defining and handling the 
policy that allows unprivileged processes to speak to privileged 
processes. It is a framework for centralizing the decision making process 
with respect to granting access to privileged operations for unprivileged 
applications.


[FILE:98:distinfo]
2f87ecdabfbd415c6306673ceadc59846f059b18ef2fce42bac63fe283f12131      1550932 polkit-0.115.tar.gz


[FILE:2698:manifests/plist.single]
bin/
 pk-example-frobnicate
 pkaction
 pkcheck
@(root,,4755) bin/pkexec
 pkttyagent
etc/pam.d/polkit-1
etc/polkit-1/rules.d/50-default.rules
include/polkit-1/polkit/
 polkit.h
 polkitactiondescription.h
 polkitauthority.h
 polkitauthorityfeatures.h
 polkitauthorizationresult.h
 polkitcheckauthorizationflags.h
 polkitdetails.h
 polkitenumtypes.h
 polkiterror.h
 polkitidentity.h
 polkitimplicitauthorization.h
 polkitpermission.h
 polkitprivate.h
 polkitsubject.h
 polkitsystembusname.h
 polkittemporaryauthorization.h
 polkittypes.h
 polkitunixgroup.h
 polkitunixnetgroup.h
 polkitunixprocess.h
 polkitunixsession.h
 polkitunixuser.h
include/polkit-1/polkitagent/
 polkitagent.h
 polkitagentenumtypes.h
 polkitagentlistener.h
 polkitagentsession.h
 polkitagenttextlistener.h
 polkitagenttypes.h
lib/
 libpolkit-agent-1.so
 libpolkit-agent-1.so.0
 libpolkit-agent-1.so.0.0.0
 libpolkit-gobject-1.so
 libpolkit-gobject-1.so.0
 libpolkit-gobject-1.so.0.0.0
lib/girepository-1.0/
 Polkit-1.0.typelib
 PolkitAgent-1.0.typelib
lib/pkgconfig/
 polkit-agent-1.pc
 polkit-gobject-1.pc
@(root,,4755) lib/polkit-1/polkit-agent-helper-1
lib/polkit-1/polkitd
share/dbus-1/system-services/org.freedesktop.PolicyKit1.service
share/gettext/its/
 polkit.its
 polkit.loc
share/gir-1.0/
 Polkit-1.0.gir
 PolkitAgent-1.0.gir
share/locale/cs/LC_MESSAGES/polkit-1.mo
share/locale/da/LC_MESSAGES/polkit-1.mo
share/locale/de/LC_MESSAGES/polkit-1.mo
share/locale/hr/LC_MESSAGES/polkit-1.mo
share/locale/hu/LC_MESSAGES/polkit-1.mo
share/locale/id/LC_MESSAGES/polkit-1.mo
share/locale/pl/LC_MESSAGES/polkit-1.mo
share/locale/pt_BR/LC_MESSAGES/polkit-1.mo
share/locale/sk/LC_MESSAGES/polkit-1.mo
share/locale/sv/LC_MESSAGES/polkit-1.mo
share/locale/tr/LC_MESSAGES/polkit-1.mo
share/locale/uk/LC_MESSAGES/polkit-1.mo
share/locale/zh_CN/LC_MESSAGES/polkit-1.mo
share/locale/zh_TW/LC_MESSAGES/polkit-1.mo
share/man/man1/
 pkaction.1.gz
 pkcheck.1.gz
 pkexec.1.gz
 pkttyagent.1.gz
share/man/man8/
 polkit.8.gz
 polkitd.8.gz
share/polkit-1/actions/
 org.freedesktop.policykit.examples.pkexec.policy
 org.freedesktop.policykit.policy
@dir /var/lib/polkit-1/localauthority/10-vendor.d
@dir /var/lib/polkit-1/localauthority/20-org.d
@dir /var/lib/polkit-1/localauthority/30-site.d
@dir /var/lib/polkit-1/localauthority/50-local.d
@dir /var/lib/polkit-1/localauthority/90-mandatory.d
@dir etc/polkit-1/localauthority/10-vendor.d
@dir etc/polkit-1/localauthority/20-org.d
@dir etc/polkit-1/localauthority/30-site.d
@dir etc/polkit-1/localauthority/50-local.d
@dir etc/polkit-1/localauthority/90-mandatory.d
@dir(polkitd,,700) share/polkit-1/rules.d
@postexec chown polkitd %D/etc/polkit-1/rules.d && chmod 700 %D/etc/polkit-1/rules.d


[FILE:667:patches/patch-docs_man_Makefile.in]
--- docs/man/Makefile.in.orig	2018-03-13 16:34:14.322676000 +0100
+++ docs/man/Makefile.in	2018-03-13 16:35:12.363732000 +0100
@@ -644,7 +644,7 @@
 
 
 @MAN_PAGES_ENABLED_TRUE@%.8 %.1 : %.xml
-@MAN_PAGES_ENABLED_TRUE@	$(XSLTPROC) -nonet --stringparam man.base.url.for.relative.links $(datadir)/gtk-doc/html/polkit-1/ --xinclude http://docbook.sourceforge.net/release/xsl/current/manpages/docbook.xsl $<
+@MAN_PAGES_ENABLED_TRUE@	$(XSLTPROC) -nonet --path __DBPATH__ --stringparam man.base.url.for.relative.links $(datadir)/gtk-doc/html/polkit-1/ --xinclude http://docbook.sourceforge.net/release/xsl/current/manpages/docbook.xsl $<
 
 clean-local:
 	rm -f *~ *.1 *.8

