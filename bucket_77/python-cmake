# Buildsheet autogenerated by ravenadm tool -- Do not edit.

NAMEBASE=		python-cmake
VERSION=		4.0.3
KEYWORDS=		python
VARIANTS=		v12 v13
SDESC[v12]=		Wrapper for the cmake software builder (3.12)
SDESC[v13]=		Wrapper for the cmake software builder (3.13)
HOMEPAGE=		https://cmake.org
CONTACT=		Python_Automaton[python@ironwolf.systems]

DOWNLOAD_GROUPS=	none
SPKGS[v12]=		single
SPKGS[v13]=		single

OPTIONS_AVAILABLE=	PY312 PY313
OPTIONS_STANDARD=	none
VOPTS[v12]=		PY312=ON PY313=OFF
VOPTS[v13]=		PY312=OFF PY313=ON

RUN_DEPENDS=		cmake:primary:std

GENERATED=		yes

[PY312].BUILD_DEPENDS_ON=		python-flit-core:single:v12
[PY312].USES_ON=			python:v12,pep517

[PY313].BUILD_DEPENDS_ON=		python-flit-core:single:v13
[PY313].USES_ON=			python:v13,pep517

post-extract:
	${MKDIR} ${WRKSRC}/cmake
	${SED} -e "s|@version@|4.0.3|" ${FILESDIR}/pyproject.toml.in \
		> ${WRKSRC}/pyproject.toml
	${SED} -e "s|@version@|4.0.3|; s|@CMAKE_BIN_DIR@|${PREFIX}/bin|" \
		${FILESDIR}/__init__.py.in > ${WRKSRC}/cmake/__init__.py

[FILE:262:descriptions/desc.single]
==========================
CMake Python Distributions
==========================

This is a stub of the cmake package on PyPI that uses the cmake program
provided by Ravenports instead of downloading cmake from the web.

This port is based on analog from NixOS.


[FILE:490:files/__init__.py.in]
import os
import subprocess
import sys

__version__ = '@version@'

CMAKE_BIN_DIR = '@CMAKE_BIN_DIR@'

def _program(name, args):
    return subprocess.call([os.path.join(CMAKE_BIN_DIR, name)] + args, close_fds=False)

def cmake():
    raise SystemExit(_program('cmake', sys.argv[1:]))

def cpack():
    raise SystemExit(_program('cpack', sys.argv[1:]))

def ctest():
    raise SystemExit(_program('ctest', sys.argv[1:]))

def ccmake():
    raise SystemExit(_program('ccmake', sys.argv[1:]))


[FILE:360:files/pyproject.toml.in]
[build-system]
requires = ["flit_core"]
build-backend = "flit_core.buildapi"

[project]
name = "cmake"
version = "@version@"
description = "CMake is an open-source, cross-platform family oftools designed to build, test and package software"

# [project.scripts]
# ccmake = "cmake:ccmake"
# cmake = "cmake:cmake"
# cpack = "cmake:cpack"
# ctest = "cmake:ctest"

