# Buildsheet autogenerated by ravenadm tool -- Do not edit.

NAMEBASE=		nawk
VERSION=		20250116
KEYWORDS=		lang
VARIANTS=		std
SDESC[std]=		Brian Kernighan's pattern processing language
HOMEPAGE=		https://www.cs.princeton.edu/~bwk/btl.mirror/index.html
CONTACT=		nobody

DOWNLOAD_GROUPS=	main
SITES[main]=		GITHUB/onetrueawk:awk:20250116
DISTFILE[1]=		generated:main
DF_INDEX=		1
SPKGS[std]=		set
			primary
			man

OPTIONS_AVAILABLE=	none
OPTIONS_STANDARD=	none

USES=			bison

LICENSE=		MIT:primary
LICENSE_FILE=		MIT:{{WRKSRC}}/LICENSE
LICENSE_SCHEME=		solo

FPC_EQUIVALENT=		lang/nawk

BUILD_TARGET=		a.out
MAKEFILE=		makefile

SKIP_INSTALL=		yes

post-patch:
	${REINPLACE_CMD} -e 's|awk|nawk|g' ${WRKSRC}/awk.1

do-install:
	${INSTALL_PROGRAM} ${WRKSRC}/a.out ${STAGEDIR}${PREFIX}/bin/nawk
	${INSTALL_MAN} ${WRKSRC}/awk.1 ${STAGEDIR}${MANPREFIX}/man/man1/nawk.1

[FILE:301:descriptions/desc.primary]
Awk scans input files for specified patterns and can perform an associated
action when a line of the file matches the pattern.

This is the One True version of awk described in "The AWK Programming Language"
by Al Aho, Brian Kernighan, and Peter Weinberger
(Addison-Wesley, 1988, ISBN 0-201-07981-X).


[FILE:109:distinfo]
e031b1e1d2b230f276f975bffb923f0ea15f798c839d15a3f26a1a39448e32d7      1845685 onetrueawk-awk-20250116.tar.gz


[FILE:9:manifests/plist.primary]
bin/nawk


[FILE:22:manifests/plist.man]
share/man/man1/nawk.1


[FILE:896:patches/patch-makefile]
--- makefile.orig	2025-01-16 19:24:36 UTC
+++ makefile
@@ -22,23 +22,9 @@
 # THIS SOFTWARE.
 # ****************************************************************/
 
-CFLAGS = -fsanitize=address -O1 -g -fno-omit-frame-pointer -fno-optimize-sibling-calls
-CFLAGS = -g
-CFLAGS =
-CFLAGS = -O2
-
-# compiler options
-#CC = cc -Wall -g -Wwrite-strings
-#CC = cc -O4 -Wall -pedantic -fno-strict-aliasing
-#CC = cc -fprofile-arcs -ftest-coverage # then gcov f1.c; cat f1.c.gcov
-HOSTCC = cc -g -Wall -pedantic -Wcast-qual
-# HOSTCC = g++ -g -Wall -pedantic -Wcast-qual
-CC = $(HOSTCC)  # change this is cross-compiling.
-
-# By fiat, to make our lives easier, yacc is now defined to be bison.
-# If you want something else, you're on your own.
-# YACC = yacc -d -b awkgram
-YACC = bison -d
+HOSTCC?= cc
+CC ?= $(HOSTCC)
+YACC?= bison -d
 
 OFILES = b.o main.o parse.o proctab.o tran.o lib.o run.o lex.o
 

