# Buildsheet autogenerated by ravenadm tool -- Do not edit.

NAMEBASE=		hdf
VERSION=		4.3.0
KEYWORDS=		science archivers graphics
VARIANTS=		std
SDESC[std]=		HDF4 Hierarchical Data Format
HOMEPAGE=		https://www.hdfgroup.org/solutions/hdf4/
CONTACT=		nobody

DOWNLOAD_GROUPS=	main
SITES[main]=		https://github.com/HDFGroup/hdf4/releases/download/hdf4.3.0/
DISTFILE[1]=		hdf4.3.0.tar.gz:main
DF_INDEX=		1
SPKGS[std]=		set
			primary
			dev
			man
			tools

OPTIONS_AVAILABLE=	none
OPTIONS_STANDARD=	none

EXRUN[tools]=		primary

USES=			jpeg libtool zlib mbsdfix

DISTNAME=		hdfsrc

LICENSE=		BSD3CLAUSE:primary
LICENSE_FILE=		BSD3CLAUSE:{{WRKSRC}}/COPYING
LICENSE_SCHEME=		solo

FPC_EQUIVALENT=		science/hdf

MUST_CONFIGURE=		gnu
CONFIGURE_ARGS=		--enable-shared
			--with-jpeg={{LOCALBASE}}

INSTALL_TARGET=		install-strip
INSTALL_REQ_TOOLCHAIN=	yes
SOVERSION=		2.0.0
PLIST_SUB=		MF_SOVERSION=3.0.0
			MF_SOMAJOR=3

[FILE:972:descriptions/desc.primary]
HDF4 (originally known as HDF) is file format for storing scientific data
and a software library that provides high-level APIs and a low-level data
access interface.

HDF technologies at present include two data management formats (HDF4 and
HDF5) and libraries, a modular data browser/editor, associated tools and
utilities, and a conversion library.  Both HDF4 and HDF5 were designed to
be a general scientific format, adaptable to virtually any scientific or
engineering application, and also have been used successfully in non-
technical areas.  The Open Source format is a key technological foundation
for HDF core technologies.  It allows users to collaborate with The HDF
Group regarding functionality requirements and permits users' experience
and knowledge to be incorporated into the HDF product when appropriate.

It also permits users and organizations without adequate technology
resources to use a sophisticated and robust data management tool for no
charge.


[FILE:54:descriptions/desc.tools]
This package contains tools that use the HDF library.


[FILE:94:distinfo]
282b244a819790590950f772095abcaeef405b0f17d2ee1eb5039da698cf938b     18408537 hdf4.3.0.tar.gz


[FILE:109:manifests/plist.primary]
lib/
 libdf.so.%%SOMAJOR%%
 libdf.so.%%SOVERSION%%
 libmfhdf.so.%%MF_SOMAJOR%%
 libmfhdf.so.%%MF_SOVERSION%%


[FILE:256:manifests/plist.dev]
include/
 H4api_adpt.h
 df.h
 h4config.h
 hbitio.h
 hcomp.h
 hdatainfo.h
 hdf.h
 hdf2netcdf.h
 herr.h
 hfile.h
 hlimits.h
 hntdefs.h
 hproto.h
 htags.h
 mfan.h
 mfdatainfo.h
 mfgr.h
 mfhdf.h
 netcdf.h
 vg.h
lib/
 libdf.a
 libdf.so
 libmfhdf.a
 libmfhdf.so


[FILE:35:manifests/plist.man]
share/man/man1/
 ncdump.1
 ncgen.1


[FILE:253:manifests/plist.tools]
bin/
 gif2hdf
 h4cc
 h4redeploy
 hdf24to8
 hdf2gif
 hdf2jpeg
 hdf8to24
 hdfcomp
 hdfed
 hdfimport
 hdfls
 hdfpack
 hdftopal
 hdftor8
 hdfunpac
 hdiff
 hdp
 hrepack
 jpeg2hdf
 ncdump
 ncgen
 paltohdf
 r8tohdf
 ristosds
 vmake
 vshow
lib/libhdf4.settings


[FILE:942:patches/patch-configure]
--- configure.orig	2024-02-29 16:34:09 UTC
+++ configure
@@ -4062,6 +4062,9 @@ case "$host_os" in
   darwin11.*)   host_os_novers="darwin11.x" ;;
   darwin12.*)   host_os_novers="darwin12.x" ;;
   freebsd*)     host_os_novers="freebsd"    ;;
+  midnight*)    host_os_novers="freebsd"    ;;
+  netbsd*)      host_os_novers="netbsd"     ;;
+  dragonfly*)   host_os_novers="dragonfly"  ;;
   solaris2.*)   host_os_novers="solaris2.x" ;;
   *)            host_os_novers="$host_os"   ;;
 esac
@@ -23483,6 +23486,9 @@ case "$host" in
   *-openbsd*)           BAR="fbsd"        ;;
   *-freebsd*)           BAR="fbsd"        ;;
   *-openbsd*)           BAR="fbsd"        ;;
+  *-dragonfly*)         BAR="fbsd"        ;;
+  *-midnight*)          BAR="fbsd"        ;;
+  *-netbsd*)            BAR="fbsd"        ;;
   *-ibm-aix*)           BAR="aix"         ;;
   sparc64-*-solaris2*)  BAR="solaris64"   ;;
   *-*-solaris2*)        BAR="solaris"     ;;


[FILE:295:patches/patch-hdf-src-Makefile.in]
--- hdf/src/Makefile.in.orig	2024-02-29 16:34:09 UTC
+++ hdf/src/Makefile.in
@@ -415,7 +415,7 @@ JAVA_VERSION = @JAVA_VERSION@
 JNIFLAGS = @JNIFLAGS@
 JUNIT = @JUNIT@
 LD = @LD@
-LDFLAGS = @LDFLAGS@
+LDFLAGS = @LDFLAGS@ -version-number 2
 LIBOBJS = @LIBOBJS@
 LIBS = @LIBS@
 LIBTOOL = @LIBTOOL@


[FILE:305:patches/patch-mfhdf-libsrc-Makefile.in]
--- mfhdf/libsrc/Makefile.in.orig	2024-02-29 16:34:10 UTC
+++ mfhdf/libsrc/Makefile.in
@@ -371,7 +371,7 @@ JAVA_VERSION = @JAVA_VERSION@
 JNIFLAGS = @JNIFLAGS@
 JUNIT = @JUNIT@
 LD = @LD@
-LDFLAGS = @LDFLAGS@
+LDFLAGS = @LDFLAGS@ -version-number 3
 LIBOBJS = @LIBOBJS@
 LIBS = @LIBS@
 LIBTOOL = @LIBTOOL@


[FILE:207:patches/patch-mfhdf_libsrc_h4__xdr.c]
--- mfhdf/libsrc/h4_xdr.c.orig	2024-02-29 16:34:10 UTC
+++ mfhdf/libsrc/h4_xdr.c
@@ -36,6 +36,7 @@
  * xdr.
  */
 
+#define _NETBSD_SOURCE
 #include "nc_priv.h"
 
 /* Which header files include htonl() ? */

