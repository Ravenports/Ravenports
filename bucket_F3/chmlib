# Buildsheet autogenerated by ravenadm tool -- Do not edit.

NAMEBASE=		chmlib
VERSION=		0.40
KEYWORDS=		misc
VARIANTS=		standard
SDESC[standard]=	Library for reading Microsoft ITSS/CHM formats
HOMEPAGE=		http://www.jedrea.com/chmlib/
CONTACT=		nobody

DOWNLOAD_GROUPS=	main
SITES[main]=		http://www.jedrea.com/chmlib/
DISTFILE[1]=		chmlib-0.40.tar.bz2:main
DF_INDEX=		1
SPKGS[standard]=	single

OPTIONS_AVAILABLE=	none
OPTIONS_STANDARD=	none

USES=			gmake libtool fbsd10fix mbsdfix

LICENSE=		LGPL21+:single
LICENSE_TERMS=		single:{{WRKDIR}}/TERMS
LICENSE_FILE=		LGPL21+:{{WRKSRC}}/COPYING
LICENSE_AWK=		TERMS:"INCLUDED_CHMLIB_H"
LICENSE_SOURCE=		TERMS:{{WRKSRC}}/src/chm_lib.h
LICENSE_SCHEME=		solo

FPC_EQUIVALENT=		misc/chmlib

MUST_CONFIGURE=		gnu
CONFIGURE_ARGS=		--disable-io64
			--disable-pread
			--disable-static
			--enable-examples

INSTALL_TARGET=		install-strip
SOVERSION=		0.0.0

[FILE:357:descriptions/desc.single]
CHMLIB is a library for dealing with Microsoft ITSS/CHM format files.
Right now, it is a very simple library, but sufficient for dealing with all
of the .chm files I've come across. Due to the fairly well-designed
indexing built into this particular file format, even a small library is
able to gain reasonably good performance indexing into ITSS archives.


[FILE:98:distinfo]
3449d64b0cf71578b2c7e3ddc048d4af3661f44a83941ea074a7813f3a59ffa3       252036 chmlib-0.40.tar.bz2


[FILE:164:manifests/plist.single]
bin/
 chm_http
 enum_chmLib
 enumdir_chmLib
 extract_chmLib
 test_chmLib
include/
 chm_lib.h
 lzx.h
lib/
 libchm.so
 libchm.so.%%SOMAJOR%%
 libchm.so.%%SOVERSION%%


[FILE:661:patches/patch-chm_lib.c]
--- src/chm_lib.c.orig	2009-05-23 14:43:31 UTC
+++ src/chm_lib.c
@@ -149,6 +149,17 @@ typedef unsigned __int32        UInt32;
 typedef __int64                 Int64;
 typedef unsigned __int64        UInt64;
 
+/* FreeBSD */
+#elif defined (__FreeBSD__) || defined (__DragonFly__)
+#include <inttypes.h>
+typedef unsigned char           UChar;
+typedef int16_t                 Int16;
+typedef uint16_t                UInt16;
+typedef int32_t                 Int32;
+typedef uint32_t                UInt32;
+typedef int64_t                 Int64;
+typedef uint64_t                UInt64;
+
 /* I386, 32-bit, non-Windows */
 /* Sparc        */
 /* MIPS         */


[FILE:550:patches/patch-chm_lib.h]
--- src/chm_lib.h.orig	2009-05-23 14:43:31 UTC
+++ src/chm_lib.h
@@ -82,6 +82,12 @@ struct chmUnitInfo
     char               path[CHM_MAX_PATHLEN+1];
 };
 
+typedef struct chmUnitInfo chmUnitInfo;
+typedef struct chm_dir {
+  int nentries;
+  char **info;
+} chm_dir;
+
 /* open an ITS archive */
 #ifdef PPC_BSTR
 /* RWE 6/12/2003 */
@@ -137,6 +143,7 @@ int chm_enumerate_dir(struct chmFile *h,
                       CHM_ENUMERATOR e,
                       void *context);
 
+chm_dir get_names(struct chmFile *h);
 #ifdef __cplusplus
 }
 #endif


[FILE:293:patches/patch-configure]
fix "shift: can't shift that many"

--- configure.orig	2009-05-23 15:12:23 UTC
+++ configure
@@ -13547,7 +13547,7 @@ case $CONFIG_FILES in
 *\'*) eval set x "$CONFIG_FILES" ;;
 *)   set x $CONFIG_FILES ;;
 esac
-shift
+# shift
 for mf
 do
   # Strip MF so we end up with the name of the file.

