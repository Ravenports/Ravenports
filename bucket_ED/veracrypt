# Buildsheet autogenerated by ravenadm tool -- Do not edit.

NAMEBASE=		veracrypt
VERSION=		1.26p7
KEYWORDS=		security
VARIANTS=		standard
SDESC[standard]=	Strong disk encryption based on TrueCrypt
HOMEPAGE=		https://www.veracrypt.fr/en/Home.html
CONTACT=		nobody

DOWNLOAD_GROUPS=	main
SITES[main]=		GITHUB/veracrypt:VeraCrypt:VeraCrypt_1.26.7
DISTFILE[1]=		generated:main
DF_INDEX=		1
SPKGS[standard]=	complete
			primary
			docs

OPTIONS_AVAILABLE=	none
OPTIONS_STANDARD=	none

ONLY_FOR_OPSYS=		freebsd linux sunos

BUILD_DEPENDS=		wxWidgets:dev:standard
			yasm:single:standard
			pcsc-lite:dev:standard
BUILDRUN_DEPENDS=	fuse2:single:standard
			wxWidgets:primary:standard
RUN_DEPENDS=		sudo:primary:standard

USES=			cpe desktop-utils:primary gmake iconv pkgconfig

LICENSE=		APACHE20:primary CUSTOM1:primary
LICENSE_TERMS=		primary:{{WRKDIR}}/TERMS
LICENSE_NAME=		CUSTOM1:"TrueCrypt License 3.0"
LICENSE_FILE=		APACHE20:{{WRKDIR}}/license.apache20
			CUSTOM1:{{WRKDIR}}/license.truecrypt30
LICENSE_AWK=		TERMS:"^$$"
LICENSE_SOURCE=		TERMS:{{WRKSRC}}/src/Main/Main.h
LICENSE_SCHEME=		multi

CPE_VENDOR=		idrix
FPC_EQUIVALENT=		security/veracrypt

CONFIGURE_ARGS=		--wxWidgets-build=0
			--wxWidgets-unicode=1
CONFIGURE_ENV=		WX_CONFIG="{{LOCALBASE}}/bin/wx-config"

BUILD_WRKSRC=		{{WRKSRC}}/src
BUILD_TARGET=		#
MAKE_ENV=		WX_CONFIG="{{LOCALBASE}}/bin/wx-config"

SUB_FILES=		pkg-message-primary-freebsd

CXXFLAGS=		-std=c++14

pre-configure:
	${REINPLACE_CMD} -e 's|/wx-config|${LOCALBASE}/bin/wx-config|g' \
		-e '/export LFLAGS/ s|:=|:= ${LDFLAGS}|' \
		-e '/export CXXFLAGS/ s|:=|:= ${CXXFLAGS}|' \
		${WRKSRC}/src/Makefile
	${REINPLACE_CMD} \
		-e 's|/usr/bin|${PREFIX}/bin|g' \
		-e 's|Icon=veracrypt|Icon=VeraCrypt-16x16|g' \
		${WRKSRC}/src/Setup/FreeBSD/veracrypt.desktop

post-extract:
	${AWK} '/ Apache License/,/additional liability./' \
		${WRKSRC}/License.txt > ${WRKDIR}/license.apache20
	${AWK} '/^TrueCrypt License V/,/closely as possible./' \
		${WRKSRC}/License.txt > ${WRKDIR}/license.truecrypt30

do-install:
	${MKDIR} ${STAGEDIR}${PREFIX}/share/applications/
	${INSTALL_PROGRAM} ${WRKSRC}/src/Main/veracrypt ${STAGEDIR}${PREFIX}/bin
	${INSTALL_DATA} ${WRKSRC}/src/Setup/FreeBSD/veracrypt.desktop \
		${STAGEDIR}${PREFIX}/share/applications/
	(cd ${WRKSRC}/src/Resources/Icons && ${COPYTREE_SHARE} . \
		${STAGEDIR}${PREFIX}/share/pixmaps "-name '*.xpm'")
	# web documentation
	${MKDIR} ${STAGEDIR}${STD_DOCDIR}
	(cd ${WRKSRC}/doc/html && ${COPYTREE_SHARE} . ${STAGEDIR}${STD_DOCDIR})

[FILE:936:descriptions/desc.primary]
VeraCrypt is a free open source disk encryption software for Windows,
Mac OSX, FreeBSD and Linux. Brought to you by IDRIX (https://www.idrix.fr)
and based on  TrueCrypt 7.1a.

VeraCrypt main features:

- Creates a virtual encrypted disk within a file and mounts it as a disk.
- Encrypts an entire partition or storage device such as USB flash drive or 
  hard drive.
- Encrypts a partition or drive where Windows is installed (pre-boot 
  authentication).
- Encryption is automatic, real-time(on-the-fly) and transparent.
- Parallelization and pipelining allow data to be read and written as fast
  as if the drive was not encrypted.
- Encryption can be hardware-accelerated on modern processors.
- Provides plausible deniability, in case an adversary forces you to reveal
  the password: Hidden volume (steganography) and hidden operating system.
- More information about the features of VeraCrypt may be found in the 
  documentation


[FILE:122:distinfo]
aae15e11aaa38b656b1eb265c0c0df78c704fa756ec428e449bf48249a0d612a     30322472 veracrypt-VeraCrypt-VeraCrypt_1.26.7.tar.gz


[FILE:154:manifests/plist.primary]
bin/veracrypt
share/applications/veracrypt.desktop
share/pixmaps/
 VeraCrypt-128x128.xpm
 VeraCrypt-16x16.xpm
 VeraCrypt-256x256.xpm
 VeraCrypt-48x48.xpm


[FILE:500:files/pkg-message-primary-freebsd.in]
############################### FreeBSD message ###############################

1) Veracrypt needs security/sudo port to mount disk volumes. You must modify 
   %%PREFIX%%/etc/sudoers file to add Veracrypt user(s). Don't use root user
2) Please ensure that the fusefs kmod is loaded prior to use:
	
$ kldload fuse

If you want load fuse.ko on boot time, please add the following to
/boot/loader.conf:

fuse_load="YES"

###############################################################################

