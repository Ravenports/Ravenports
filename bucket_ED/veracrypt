# Buildsheet autogenerated by ravenadm tool -- Do not edit.

NAMEBASE=		veracrypt
VERSION=		1.21
KEYWORDS=		security
VARIANTS=		standard
SDESC[standard]=	Strong disk encryption based on TrueCrypt
HOMEPAGE=		https://www.veracrypt.fr/en/Home.html
CONTACT=		nobody

DOWNLOAD_GROUPS=	main
SITES[main]=		SF/veracrypt/VeraCrypt%201.21
DISTFILE[1]=		VeraCrypt_1.21_Source.tar.bz2:main
DF_INDEX=		1
SPKGS[standard]=	complete
			primary
			docs

OPTIONS_AVAILABLE=	none
OPTIONS_STANDARD=	none

BUILD_DEPENDS=		yasm:single:standard
BUILDRUN_DEPENDS=	fuse2:single:standard
			wxWidgets:single:standard
RUN_DEPENDS=		sudo:primary:standard

USES=			desktop-utils gmake iconv pkgconfig

EXTRACT_DIRTY=		1

LICENSE=		APACHE20:primary
LICENSE_SCHEME=		solo
LICENSE_FILE=		APACHE20:{{WRKSRC}}/License.txt

FPC_EQUIVALENT=		security/veracrypt

CONFIGURE_ARGS=		--wxWidgets-build=0
			--wxWidgets-unicode=1
CONFIGURE_ENV=		WX_CONFIG="{{LOCALBASE}}/bin/wxgtk3u-3.0-config"

BUILD_WRKSRC=		{{WRKSRC}}/src
BUILD_TARGET=		#
MAKE_ENV=		WX_CONFIG="{{LOCALBASE}}/bin/wxgtk3u-3.0-config"

SUB_FILES=		pkg-message-primary-freebsd

post-patch:
	${REINPLACE_CMD} -e 's|wx-config|${LOCALBASE}/bin/wxgtk3u-3.0-config|g' \
		-e '/export LFLAGS/ s|:=|:= ${LDFLAGS}|' \
		${WRKSRC}/src/Makefile
	${REINPLACE_CMD} \
		-e 's|/usr/bin|${PREFIX}/bin|g' \
		-e 's|Icon=veracrypt|Icon=VeraCrypt-16x16|g' \
		${WRKSRC}/src/Setup/FreeBSD/veracrypt.desktop

do-install:
	@${MKDIR} ${STAGEDIR}${PREFIX}/share/applications/
	${INSTALL_PROGRAM} ${WRKSRC}/src/Main/veracrypt ${STAGEDIR}${PREFIX}/bin
	${INSTALL_DATA} ${WRKSRC}/src/Setup/FreeBSD/veracrypt.desktop \
		${STAGEDIR}${PREFIX}/share/applications/
	(cd ${WRKSRC}/src/Resources/Icons && ${COPYTREE_SHARE} . \
		${STAGEDIR}${PREFIX}/share/pixmaps "-name '*.xpm'")
	# web documentation
	@${MKDIR} ${STAGEDIR}${STD_DOCDIR}
	(cd ${WRKSRC}/doc/html && ${COPYTREE_SHARE} . ${STAGEDIR}${STD_DOCDIR})

[FILE:936:descriptions/desc.primary]
VeraCrypt is a free open source disk encryption software for Windows,
Mac OSX, FreeBSD and Linux. Brought to you by IDRIX (https://www.idrix.fr)
and based on  TrueCrypt 7.1a.

VeraCrypt main features:

- Creates a virtual encrypted disk within a file and mounts it as a disk.
- Encrypts an entire partition or storage device such as USB flash drive or 
  hard drive.
- Encrypts a partition or drive where Windows is installed (pre-boot 
  authentication).
- Encryption is automatic, real-time(on-the-fly) and transparent.
- Parallelization and pipelining allow data to be read and written as fast
  as if the drive was not encrypted.
- Encryption can be hardware-accelerated on modern processors.
- Provides plausible deniability, in case an adversary forces you to reveal
  the password: Hidden volume (steganography) and hidden operating system.
- More information about the features of VeraCrypt may be found in the 
  documentation


[FILE:108:distinfo]
44717d24b8deff2db9dd0365572063e38bbe4a59438a8c3c07675b5eed370358     22841960 VeraCrypt_1.21_Source.tar.bz2


[FILE:154:manifests/plist.primary]
bin/veracrypt
share/applications/veracrypt.desktop
share/pixmaps/
 VeraCrypt-128x128.xpm
 VeraCrypt-16x16.xpm
 VeraCrypt-256x256.xpm
 VeraCrypt-48x48.xpm


[FILE:500:files/pkg-message-primary-freebsd.in]
############################### FreeBSD message ###############################

1) Veracrypt needs security/sudo port to mount disk volumes. You must modify 
   %%PREFIX%%/etc/sudoers file to add Veracrypt user(s). Don't use root user
2) Please ensure that the fusefs kmod is loaded prior to use:
	
$ kldload fuse

If you want load fuse.ko on boot time, please add the following to
/boot/loader.conf:

fuse_load="YES"

###############################################################################

