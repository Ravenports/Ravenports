# Buildsheet autogenerated by ravenadm tool -- Do not edit.

NAMEBASE=		veracrypt
VERSION=		1.26.19
KEYWORDS=		security
VARIANTS=		std
SDESC[std]=		Strong disk encryption based on TrueCrypt
HOMEPAGE=		https://www.veracrypt.fr/en/Home.html
CONTACT=		nobody

DOWNLOAD_GROUPS=	main
SITES[main]=		GITHUB/veracrypt:VeraCrypt:VeraCrypt_1.26.19
DISTFILE[1]=		generated:main
DF_INDEX=		1
SPKGS[std]=		set
			primary
			docs

OPTIONS_AVAILABLE=	none
OPTIONS_STANDARD=	none

ONLY_FOR_OPSYS=		freebsd linux sunos

BUILD_DEPENDS=		wxWidgets:dev:std
			yasm:primary:std
			pcsc-lite:dev:std
			fuse2:dev:std
BUILDRUN_DEPENDS=	fuse2:primary:std
			wxWidgets:primary:std
RUN_DEPENDS=		sudo:primary:std

USES=			cpe desktop-utils:primary gmake iconv pkgconfig

LICENSE=		APACHE20:primary CUSTOM1:primary
LICENSE_TERMS=		primary:{{WRKDIR}}/TERMS
LICENSE_NAME=		CUSTOM1:"TrueCrypt License 3.0"
LICENSE_FILE=		APACHE20:{{WRKDIR}}/license.apache20
			CUSTOM1:{{WRKDIR}}/license.truecrypt30
LICENSE_AWK=		TERMS:"^$$"
LICENSE_SOURCE=		TERMS:{{WRKSRC}}/src/Main/Main.h
LICENSE_SCHEME=		multi

CPE_VENDOR=		idrix
FPC_EQUIVALENT=		security/veracrypt

CONFIGURE_ARGS=		--wxWidgets-build=0
			--wxWidgets-unicode=1
CONFIGURE_ENV=		WX_CONFIG="{{LOCALBASE}}/bin/wx-config"

BUILD_WRKSRC=		{{WRKSRC}}/src
BUILD_TARGET=		#
MAKE_ENV=		WX_CONFIG="{{LOCALBASE}}/bin/wx-config"

SUB_FILES=		messages-primary-freebsd.ucl

CXXFLAGS=		-std=c++14

pre-configure:
	${REINPLACE_CMD} -e 's|/wx-config|${LOCALBASE}/bin/wx-config|g' \
		-e '/export LFLAGS/ s|:=|:= ${LDFLAGS}|' \
		-e '/export CXXFLAGS/ s|:=|:= ${CXXFLAGS}|' \
		${WRKSRC}/src/Makefile
	${REINPLACE_CMD} \
		-e 's|/usr/bin|${PREFIX}/bin|g' \
		-e 's|Icon=veracrypt|Icon=VeraCrypt-16x16|g' \
		${WRKSRC}/src/Setup/FreeBSD/veracrypt.desktop

post-extract:
	${AWK} '/ Apache License/,/additional liability./' \
		${WRKSRC}/License.txt > ${WRKDIR}/license.apache20
	${AWK} '/^TrueCrypt License V/,/closely as possible./' \
		${WRKSRC}/License.txt > ${WRKDIR}/license.truecrypt30

do-install:
	${MKDIR} ${STAGEDIR}${PREFIX}/share/applications/
	${INSTALL_PROGRAM} ${WRKSRC}/src/Main/veracrypt ${STAGEDIR}${PREFIX}/bin
	${INSTALL_DATA} ${WRKSRC}/src/Setup/FreeBSD/veracrypt.desktop \
		${STAGEDIR}${PREFIX}/share/applications/
	(cd ${WRKSRC}/src/Resources/Icons && ${COPYTREE_SHARE} . \
		${STAGEDIR}${PREFIX}/share/pixmaps "-name '*.xpm'")
	# web documentation
	${MKDIR} ${STAGEDIR}${STD_DOCDIR}
	(cd ${WRKSRC}/doc/html && ${COPYTREE_SHARE} . ${STAGEDIR}${STD_DOCDIR})

[FILE:936:descriptions/desc.primary]
VeraCrypt is a free open source disk encryption software for Windows,
Mac OSX, FreeBSD and Linux. Brought to you by IDRIX (https://www.idrix.fr)
and based on  TrueCrypt 7.1a.

VeraCrypt main features:

- Creates a virtual encrypted disk within a file and mounts it as a disk.
- Encrypts an entire partition or storage device such as USB flash drive or 
  hard drive.
- Encrypts a partition or drive where Windows is installed (pre-boot 
  authentication).
- Encryption is automatic, real-time(on-the-fly) and transparent.
- Parallelization and pipelining allow data to be read and written as fast
  as if the drive was not encrypted.
- Encryption can be hardware-accelerated on modern processors.
- Provides plausible deniability, in case an adversary forces you to reveal
  the password: Hidden volume (steganography) and hidden operating system.
- More information about the features of VeraCrypt may be found in the 
  documentation


[FILE:123:distinfo]
2af77e719e846e7d22ee57e97c2743adbfac52b4427fb6b8307f8edc28922571     29419250 veracrypt-VeraCrypt-VeraCrypt_1.26.19.tar.gz


[FILE:154:manifests/plist.primary]
bin/veracrypt
share/applications/veracrypt.desktop
share/pixmaps/
 VeraCrypt-128x128.xpm
 VeraCrypt-16x16.xpm
 VeraCrypt-256x256.xpm
 VeraCrypt-48x48.xpm


[FILE:552:files/messages-primary-freebsd.ucl.in]
freebsd: {
  type: "install"
  message: <<EOM
############################### FreeBSD message ###############################

1) Veracrypt needs security/sudo port to mount disk volumes. You must modify 
   %%PREFIX%%/etc/sudoers file to add Veracrypt user(s). Don't use root user
2) Please ensure that the fusefs kmod is loaded prior to use:
	
$ kldload fuse

If you want load fuse.ko on boot time, please add the following to
/boot/loader.conf:

fuse_load="YES"

###############################################################################
EOM
}

