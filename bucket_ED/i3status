# Buildsheet autogenerated by ravenadm tool -- Do not edit.

NAMEBASE=		i3status
VERSION=		2.13
KEYWORDS=		x11
VARIANTS=		standard
SDESC[standard]=	Status bar for i3bar, dzen2, xmobar or similar
HOMEPAGE=		https://i3wm.org/i3status/
CONTACT=		nobody

DOWNLOAD_GROUPS=	main
SITES[main]=		https://i3wm.org/i3status/
DISTFILE[1]=		i3status-2.13.tar.bz2:main
DF_INDEX=		1
SPKGS[standard]=	single

OPTIONS_AVAILABLE=	none
OPTIONS_STANDARD=	none

BROKEN[linux]=		Assumes netlink and alsa headers present

BUILD_DEPENDS=		asciidoc:single:standard
			xmlto:single:standard
BUILDRUN_DEPENDS=	libconfuse:single:standard
			yajl:single:standard

USES=			gmake pkgconfig

LICENSE=		BSD3CLAUSE:single
LICENSE_FILE=		BSD3CLAUSE:{{WRKSRC}}/LICENSE
LICENSE_SCHEME=		solo

FPC_EQUIVALENT=		x11/i3status

MUST_CONFIGURE=		gnu

post-patch:
	${REINPLACE_CMD} -e 's|/etc|${PREFIX}/etc|g' ${WRKSRC}/i3status.c

post-install:
	${MV} ${STAGEDIR}${PREFIX}/etc/i3status.conf \
		${STAGEDIR}${PREFIX}/etc/i3status.conf.sample

post-configure:
	# something wrong with autotools templates
	${REINPLACE_CMD} -e '/am--fnord am--fnord-all/ s|..TEST_LOGS:|:|' \
		${WRKSRC}/Makefile

[FILE:466:descriptions/desc.single]
i3status is a small program (about 1500 SLOC) for generating a status bar
for dzen2, xmobar or similar programs. It is designed to be very efficient
by issuing a very small number of system calls, as one generally wants to
update such a status line every second. This ensures that even under high
load, your status bar is updated correctly. Also, it saves a bit of energy
by not hogging your CPU as much as spawning the corresponding amount of
shell commands would.


[FILE:100:distinfo]
ce89c9ff8565f62e88299f1a611229afdfc356b4e97368a5f8c4f06ad2fa1466       201409 i3status-2.13.tar.bz2


[FILE:75:manifests/plist.single]
@sample etc/i3status.conf.sample
bin/i3status
share/man/man1/i3status.1.gz


[FILE:606:patches/patch-Makefile.in]
--- Makefile.in.orig	2019-06-30 17:54:48 UTC
+++ Makefile.in
@@ -141,7 +141,7 @@ am_i3status_OBJECTS = i3status-i3status.
 	src/i3status-print_wireless_info.$(OBJEXT) \
 	src/i3status-print_file_contents.$(OBJEXT) \
 	src/i3status-process_runs.$(OBJEXT) \
-	src/i3status-pulse.$(OBJEXT)
+
 i3status_OBJECTS = $(am_i3status_OBJECTS)
 am__DEPENDENCIES_1 =
 i3status_DEPENDENCIES = $(am__DEPENDENCIES_1) $(am__DEPENDENCIES_1) \
@@ -656,7 +656,7 @@ i3status_SOURCES = \
 	src/print_wireless_info.c \
 	src/print_file_contents.c \
 	src/process_runs.c \
-	src/pulse.c
+
 
 dist_sysconf_DATA = \
 	i3status.conf


[FILE:403:patches/patch-src_print__volume.c]
--- src/print_volume.c.orig	2019-01-23 08:03:56 UTC
+++ src/print_volume.c
@@ -86,7 +86,7 @@ void print_volume(yajl_gen json_gen, cha
         free(instance);
     }
 
-#if !defined(__DragonFly__) && !defined(__OpenBSD__)
+#if !defined(__DragonFly__) && !defined(__OpenBSD__) &&!defined(__FreeBSD__)
     /* Try PulseAudio first */
 
     /* If the device name has the format "pulse[:N]" where N is the

