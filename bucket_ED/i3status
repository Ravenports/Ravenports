# Buildsheet autogenerated by ravenadm tool -- Do not edit.

NAMEBASE=		i3status
VERSION=		2.15
KEYWORDS=		x11
VARIANTS=		std
SDESC[std]=		Status bar for i3bar, dzen2, xmobar or similar
HOMEPAGE=		https://i3wm.org/i3status/
CONTACT=		nobody

DOWNLOAD_GROUPS=	main
SITES[main]=		https://i3wm.org/i3status/
DISTFILE[1]=		i3status-2.15.tar.xz:main
DF_INDEX=		1
SPKGS[std]=		set
			primary
			man

OPTIONS_AVAILABLE=	none
OPTIONS_STANDARD=	none

BUILD_DEPENDS=		asciidoc:single:std
			xmlto:primary:std
			bash:primary:std
			libconfuse:dev:std
			yajl:dev:std
BUILDRUN_DEPENDS=	libconfuse:primary:std
			yajl:primary:std
B_DEPS[linux]=		alsa-lib:dev:std
BR_DEPS[linux]=		alsa-lib:primary:std

USES=			meson pkgconfig perl:build

LICENSE=		BSD3CLAUSE:primary
LICENSE_FILE=		BSD3CLAUSE:{{WRKSRC}}/LICENSE
LICENSE_SCHEME=		solo

FPC_EQUIVALENT=		x11/i3status
MESON_ARGS=		-Ddocs=true
			-Dmans=true
			-Dpulseaudio=false
			-Ddocdir=share/docs/i3status

post-install:
	${MV} ${STAGEDIR}${PREFIX}/etc/i3status.conf \
		${STAGEDIR}${PREFIX}/etc/i3status.conf.sample

pre-configure:
	${REINPLACE_CMD} -e 's|/etc|${PREFIX}/etc|g' ${WRKSRC}/i3status.c

[FILE:466:descriptions/desc.primary]
i3status is a small program (about 1500 SLOC) for generating a status bar
for dzen2, xmobar or similar programs. It is designed to be very efficient
by issuing a very small number of system calls, as one generally wants to
update such a status line every second. This ensures that even under high
load, your status bar is updated correctly. Also, it saves a bit of energy
by not hogging your CPU as much as spawning the corresponding amount of
shell commands would.


[FILE:99:distinfo]
6c67f52cae4f139df764ad1cc736562be0f97750791bc212b53f34c06eaf2205        70220 i3status-2.15.tar.xz


[FILE:46:manifests/plist.primary]
@sample etc/i3status.conf.sample
bin/i3status


[FILE:26:manifests/plist.man]
share/man/man1/i3status.1


[FILE:429:patches/patch-src_print__battery__info.c]
--- src/print_battery_info.c.orig	2021-11-09 07:27:11 UTC
+++ src/print_battery_info.c
@@ -593,7 +593,7 @@ void print_battery_info(battery_info_ctx
         ctx->format_percentage = "%.00f%s";
     }
 #endif
-#if defined(__FreeBSD__) || defined(__FreeBSD_kernel__) || defined(__DragonFly__) || defined(__OpenBSD__)
+#if defined(__OpenBSD__)
     /* These OSes report battery time in minutes. */
     hide_seconds = true;
 #endif

