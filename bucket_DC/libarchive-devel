# Buildsheet autogenerated by ravenadm tool -- Do not edit.

NAMEBASE=		libarchive-devel
VERSION=		3.3.3
KEYWORDS=		archivers
VARIANTS=		standard
SDESC[standard]=	Library to handle various archive formats (devel)
HOMEPAGE=		http://libarchive.org/
CONTACT=		nobody

DOWNLOAD_GROUPS=	main
SITES[main]=		GITHUB/libarchive:libarchive:4763691
DISTFILE[1]=		generated:main
DF_INDEX=		1
SPKGS[standard]=	complete
			shared
			static

OPTIONS_AVAILABLE=	none
OPTIONS_STANDARD=	none

BUILD_DEPENDS=		bzip2:static:standard
			expat:static:standard
			autoconf:single:standard
			automake:single:standard
BUILDRUN_DEPENDS=	libressl:single:standard
			xz:single:standard
			bzip2:shared:standard
			expat:shared:standard
			Zstandard:single:standard

USES=			cpe libtool:build perl:build pkgconfig zlib

LICENSE=		BSD2CLAUSE:static BSD3CLAUSE:static PUBDOM:static
LICENSE_SCHEME=		multi
LICENSE_FILE=		BSD2CLAUSE:{{WRKSRC}}/COPYING
			BSD3CLAUSE:{{WRKSRC}}/COPYING
			PUBDOM:{{WRKSRC}}/COPYING

FPC_EQUIVALENT=		archivers/libarchive

MUST_CONFIGURE=		gnu
CONFIGURE_ARGS=		--without-xml2
			--without-iconv
			--enable-shared=yes
			--enable-bsdtar=static
			--enable-bsdcat=static
			--enable-bsdcpio=static

INSTALL_TARGET=		install-strip
PLIST_SUB=		SOVERSION=13.3.3
			SOMAJOR=13

LDFLAGS=		-lpthread

post-install:
	${RM} -r ${STAGEDIR}${MANPREFIX}/man
.for prog in tar cat cpio
	${MV} ${STAGEDIR}${PREFIX}/bin/bsd${prog} \
		${STAGEDIR}${PREFIX}/bin/bsd${prog}-devel
.endfor
	${REINPLACE_CMD} -i'' -e 's/larchive/larchive-devel/' \
		${STAGEDIR}${PREFIX}/lib/pkgconfig/libarchive.pc

pre-configure:
	(cd ${WRKSRC} && build/autogen.sh)

post-configure:
	${REINPLACE_CMD} -e '/libname_spec=/ s/name"/name-devel"/' \
		${WRKSRC}/libtool

[FILE:686:descriptions/desc.shared]
The libarchive library features:
 * Support for a variety of archive and compression formats.
 * Robust automatic format detection, including archive/compression
   combinations such as tar.gz.
 * Zero-copy internal architecture for high performance.
 * Streaming architecture eliminates all limits on size of archive,
   limits on entry sizes depend on particular formats.
 * Carefully factored code to minimize bloat when programs are
   statically linked.
 * Growing test suite to verify correctness of new ports.
 * Works on most POSIX-like systems (including FreeBSD, Linux,
   Solaris, etc.)

This package contains the developmental version of the shared
libraries of libarchive.


[FILE:707:descriptions/desc.static]
The libarchive library features:
 * Support for a variety of archive and compression formats.
 * Robust automatic format detection, including archive/compression
   combinations such as tar.gz.
 * Zero-copy internal architecture for high performance.
 * Streaming architecture eliminates all limits on size of archive,
   limits on entry sizes depend on particular formats.
 * Carefully factored code to minimize bloat when programs are
   statically linked.
 * Growing test suite to verify correctness of new ports.
 * Works on most POSIX-like systems (including FreeBSD, Linux,
   Solaris, etc.)

This package contains the developmental version of the static
library, headers, and programs of libarchive.


[FILE:115:distinfo]
f8a0f64e459609e3fa50bbe6848540ab335a0afdd17ebca9ef2b2e6da70c07e5      4458749 libarchive-libarchive-4763691.tar.gz


[FILE:94:manifests/plist.shared]
lib/
 libarchive-devel.so
 libarchive-devel.so.%%SOMAJOR%%
 libarchive-devel.so.%%SOVERSION%%


[FILE:136:manifests/plist.static]
bin/
 bsdcat-devel
 bsdcpio-devel
 bsdtar-devel
include/
 archive.h
 archive_entry.h
lib/libarchive-devel.a
lib/pkgconfig/libarchive.pc


[FILE:469:patches/patch-libarchive_archive__util.c]
--- libarchive/archive_util.c.orig	2016-07-17 15:29:23 UTC
+++ libarchive/archive_util.c
@@ -46,16 +46,16 @@ __FBSDID("$FreeBSD: head/lib/libarchive/
 #include <wincrypt.h>
 #endif
 #ifdef HAVE_ZLIB_H
-#include <zlib.h>
+#include "zlib.h"
 #endif
 #ifdef HAVE_LZMA_H
-#include <lzma.h>
+#include "lzma.h"
 #endif
 #ifdef HAVE_BZLIB_H
-#include <bzlib.h>
+#include "bzlib.h"
 #endif
 #ifdef HAVE_LZ4_H
-#include <lz4.h>
+#include "lz4.h"
 #endif
 
 #include "archive.h"

