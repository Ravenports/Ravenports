# Buildsheet autogenerated by ravenadm tool -- Do not edit.

NAMEBASE=		wget2
VERSION=		2.0.1
KEYWORDS=		net ftp www
VARIANTS=		standard
SDESC[standard]=	File retrieval tool using HTTP, HTTPS, and FTP
HOMEPAGE=		https://gitlab.com/gnuwget/wget2
CONTACT=		nobody

DOWNLOAD_GROUPS=	main
SITES[main]=		GNU/wget
DISTFILE[1]=		wget2-2.0.1.tar.gz:main
DF_INDEX=		1
SPKGS[standard]=	complete
			primary
			nls

OPTIONS_AVAILABLE=	none
OPTIONS_STANDARD=	none

BUILD_DEPENDS=		doxygen:single:standard
BUILDRUN_DEPENDS=	pcre2:primary:standard
			libidn2:primary:standard
			brotli:single:standard
			lzip:single:standard
			gnutls:primary:standard
			libpsl:single:standard
			libnghttp2:single:standard
			gpgme:primary:standard
RUN_DEPENDS=		nss:caroot:standard

USES=			cpe gmake pkgconfig iconv libtool makeinfo
			python:build gettext zstd bz2 zlib xz

CPE_PRODUCT=		wget
CPE_VENDOR=		gnu
FPC_EQUIVALENT=		www/wget2

MUST_CONFIGURE=		gnu
CONFIGURE_ARGS=		--with-openssl=no
			--with-ssl=gnutls
			--without-libhsts
			--without-libidn
			--without-pcre

INSTALL_TARGET=		install-strip
INSTALL_REQ_TOOLCHAIN=	yes

CFLAGS=			-Wno-attributes

post-install:
	${RM} ${STAGEDIR}${PREFIX}/bin/wget2_noinstall

[FILE:2176:descriptions/desc.primary]
GNU Wget2 is the successor of GNU Wget, a file and recursive website
downloader.  Some features:

* Support for HTTP/1.1 and HTTP/2.0 protocol
* brotli decompression support (Accept-Encoding: br)
* zstandard decompression support, RFC8478 (Accept-Encoding: zstd)
* lzip decompression support, (Accept-Encoding: lzip)
* HPKP - HTTP Public Key Pinning (RFC7469) with persistent database
* TCP Fast Open for plain text and for HTTPS
* TLS Session Resumption including persistent session data cache
* TLS False Start (with GnuTLS >= 3.5.0)
* HTTP2 support via nghttp2 and GnuTLS ALPN including streaming/pipelining
* Use libpsl for cookie domain checking (using Public Suffix List)
* Support link conversion (-k/--convert-links and -K/--backup-converted)
* Support for RFC 6266 compliant Content-Disposition
* RFC 6797 HSTS (HTTP Strict Transport Security)
* Support for bzip2 Content-Encoding / Accept-Encoding compression type
* Support for XZ Content-Encoding / Accept-Encoding compression type
* Support scanning RSS 2.0 feeds.
* Support scanning Atom 1.0 feeds.
* Support scanning URLs from local Sitemap XML file
* Support scanning sitemap files given in robots.txt
* Support arbitrary number of proxies for parallel downloads
* Multithreaded download of single files (option --chunk-size)
* Internationalized Domain Names in Applications
* ICEcast / SHOUTcast support via library (see examples/getstream.c)
* respect /robots.txt "Robot Exclusion Standard" / <META name="robots">
* IDN support for international domains
* proxy support
* cookies (session/non-session), detection of supercookies via PSL
* recursive download of websites with or without spanning hosts
* download of single web pages / resources
* zlib/gzip compressed HTTP/HTTPS downloads (gzip, deflate)
* number of parallel download threads is adjustable
* support for keep-alive connections
* included CSS, HTML, XML parser needed for recursive downloads
* gettext support
* HTTPS via libgnutls (and basic WolfSSL support)
* support for Metalink RFC 6249 (Metalink/HTTP: Mirrors and Hashes)
* support for Metalink RFC 5854 (Metalink Download Description Formats)
* DNS lookup cache
* IPv4 and IPv6 support


[FILE:97:distinfo]
0bb7fa03697bb5b8d05e1b5e15b863440826eb845874c4ffb5e32330f9845db1      3780748 wget2-2.0.1.tar.gz


[FILE:638:manifests/plist.primary]
bin/wget2
include/
 wget.h
 wgetver.h
lib/
 libwget.a
 libwget.so
 libwget.so.1
 libwget.so.1.0.0
lib/pkgconfig/libwget.pc
share/man/man3/
 libwget-base64.3.gz
 libwget-bitmap.3.gz
 libwget-console.3.gz
 libwget-dns-caching.3.gz
 libwget-dns.3.gz
 libwget-error.3.gz
 libwget-hash.3.gz
 libwget-hashmap.3.gz
 libwget-io.3.gz
 libwget-ip.3.gz
 libwget-list.3.gz
 libwget-mem.3.gz
 libwget-net.3.gz
 libwget-parse_atom.3.gz
 libwget-parse_sitemap.3.gz
 libwget-printf.3.gz
 libwget-random.3.gz
 libwget-robots.3.gz
 libwget-stringmap.3.gz
 libwget-thread.3.gz
 libwget-utils.3.gz
 libwget-vector.3.gz
 libwget-xalloc.3.gz
 libwget-xml.3.gz


[FILE:1005:manifests/plist.nls]
share/locale/ca/LC_MESSAGES/wget2.mo
share/locale/cs/LC_MESSAGES/wget2.mo
share/locale/de/LC_MESSAGES/wget2.mo
share/locale/eo/LC_MESSAGES/wget2.mo
share/locale/es/LC_MESSAGES/wget2.mo
share/locale/et/LC_MESSAGES/wget2.mo
share/locale/fi/LC_MESSAGES/wget2.mo
share/locale/fr/LC_MESSAGES/wget2.mo
share/locale/ga/LC_MESSAGES/wget2.mo
share/locale/hr/LC_MESSAGES/wget2.mo
share/locale/hu/LC_MESSAGES/wget2.mo
share/locale/id/LC_MESSAGES/wget2.mo
share/locale/it/LC_MESSAGES/wget2.mo
share/locale/ja/LC_MESSAGES/wget2.mo
share/locale/nb/LC_MESSAGES/wget2.mo
share/locale/nl/LC_MESSAGES/wget2.mo
share/locale/pl/LC_MESSAGES/wget2.mo
share/locale/pt_BR/LC_MESSAGES/wget2.mo
share/locale/ro/LC_MESSAGES/wget2.mo
share/locale/ru/LC_MESSAGES/wget2.mo
share/locale/sk/LC_MESSAGES/wget2.mo
share/locale/sr/LC_MESSAGES/wget2.mo
share/locale/sv/LC_MESSAGES/wget2.mo
share/locale/tr/LC_MESSAGES/wget2.mo
share/locale/uk/LC_MESSAGES/wget2.mo
share/locale/vi/LC_MESSAGES/wget2.mo
share/locale/zh_CN/LC_MESSAGES/wget2.mo


[FILE:1625:patches/patch-config.h.in]
--- config.h.in.orig	2022-05-27 09:45:56 UTC
+++ config.h.in
@@ -2686,11 +2686,7 @@
    _GL_ATTRIBUTE_NONNULL () declares that all pointer arguments must not be
    null.  */
 /* Applies to: functions.  */
-#if _GL_HAS_ATTRIBUTE (nonnull)
-# define _GL_ATTRIBUTE_NONNULL(args) __attribute__ ((__nonnull__ args))
-#else
 # define _GL_ATTRIBUTE_NONNULL(args)
-#endif
 
 /* _GL_ATTRIBUTE_NONSTRING declares that the contents of a character array is
    not meant to be NUL-terminated.  */
@@ -2824,29 +2820,9 @@
                 && defined __GNUC__ && ! defined __cplusplus))))
 # define _GL_EXTERN_INLINE_STDHEADER_BUG
 #endif
-#if ((__GNUC__ \
-      ? defined __GNUC_STDC_INLINE__ && __GNUC_STDC_INLINE__ \
-      : (199901L <= __STDC_VERSION__ \
-         && !defined __HP_cc \
-         && !(defined __SUNPRO_C && __STDC__))) \
-     && !defined _GL_EXTERN_INLINE_STDHEADER_BUG)
 # define _GL_INLINE inline
 # define _GL_EXTERN_INLINE extern inline
 # define _GL_EXTERN_INLINE_IN_USE
-#elif (2 < __GNUC__ + (7 <= __GNUC_MINOR__) && !defined __STRICT_ANSI__ \
-       && !defined _GL_EXTERN_INLINE_STDHEADER_BUG)
-# if defined __GNUC_GNU_INLINE__ && __GNUC_GNU_INLINE__
-   /* __gnu_inline__ suppresses a GCC 4.2 diagnostic.  */
-#  define _GL_INLINE extern inline __attribute__ ((__gnu_inline__))
-# else
-#  define _GL_INLINE extern inline
-# endif
-# define _GL_EXTERN_INLINE extern
-# define _GL_EXTERN_INLINE_IN_USE
-#else
-# define _GL_INLINE static _GL_UNUSED
-# define _GL_EXTERN_INLINE static _GL_UNUSED
-#endif
 
 #if 4 < __GNUC__ + (6 <= __GNUC_MINOR__)
 # if defined __GNUC_STDC_INLINE__ && __GNUC_STDC_INLINE__


[FILE:427:patches/patch-lib_libc-config.h]
--- lib/libc-config.h.orig	2022-01-03 12:27:17 UTC
+++ lib/libc-config.h
@@ -35,6 +35,11 @@
 
 #include <config.h>
 
+#if defined __FreeBSD__ || defined __DragonFly__
+#undef __nonnull
+#define	__nonnull(...)
+#endif
+
 /* On glibc this includes <features.h> and <sys/cdefs.h> and #defines
    _FEATURES_H, __WORDSIZE, and __set_errno.  On FreeBSD 11 and
    DragonFlyBSD 5.9 it includes <sys/cdefs.h> which defines __nonnull.


[FILE:837:patches/patch-lib_string.in.h]
--- lib/string.in.h.orig	2022-04-07 02:15:05 UTC
+++ lib/string.in.h
@@ -569,7 +569,7 @@ _GL_FUNCDECL_RPL (strndup, char *,
                   _GL_ATTRIBUTE_MALLOC _GL_ATTRIBUTE_DEALLOC_FREE);
 _GL_CXXALIAS_RPL (strndup, char *, (char const *__s, size_t __n));
 # else
-#  if !@HAVE_DECL_STRNDUP@ || __GNUC__ >= 11
+#  if !@HAVE_DECL_STRNDUP@ || (__GNUC__ >= 11 && !defined strndup)
 _GL_FUNCDECL_SYS (strndup, char *,
                   (char const *__s, size_t __n)
                   _GL_ARG_NONNULL ((1))
@@ -579,7 +579,7 @@ _GL_CXXALIAS_SYS (strndup, char *, (char
 # endif
 _GL_CXXALIASWARN (strndup);
 #else
-# if __GNUC__ >= 11
+# if __GNUC__ >= 11 && !defined strndup
 /* For -Wmismatched-dealloc: Associate strndup with free or rpl_free.  */
 _GL_FUNCDECL_SYS (strndup, char *,
                   (char const *__s, size_t __n)

