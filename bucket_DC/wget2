# Buildsheet autogenerated by ravenadm tool -- Do not edit.

NAMEBASE=		wget2
VERSION=		2.2.1
KEYWORDS=		net ftp www
VARIANTS=		std
SDESC[std]=		File retrieval tool using HTTP, HTTPS, and FTP
HOMEPAGE=		https://gitlab.com/gnuwget/wget2
CONTACT=		nobody

DOWNLOAD_GROUPS=	main
SITES[main]=		GNU/wget
DISTFILE[1]=		wget2-2.2.1.tar.gz:main
DF_INDEX=		1
SPKGS[std]=		set
			primary
			tools
			dev
			nls
			man

OPTIONS_AVAILABLE=	none
OPTIONS_STANDARD=	none

BUILD_DEPENDS=		doxygen:primary:std
			gnutls:dev:std
			libnghttp2:dev:std
			gpgme:dev:std
			lzlib:dev:std
			brotli:dev:std
			libidn2:dev:std
			libpsl:dev:std
BUILDRUN_DEPENDS=	brotli:primary:std
			gnutls:primary:std
			gpgme:primary:std
			libidn2:primary:std
			libnghttp2:primary:std
			libpsl:primary:std
			lzip:primary:std
			lzlib:primary:std
EXRUN[tools]=		primary

USES=			cpe gmake pkgconfig iconv libtool makeinfo
			python:build gettext zstd bz2 zlib xz pcre2
			rootca:tools

CPE_PRODUCT=		wget
CPE_VENDOR=		gnu
FPC_EQUIVALENT=		www/wget2

MUST_CONFIGURE=		gnu
CONFIGURE_ARGS=		--with-openssl=no
			--with-ssl=gnutls
			--without-libhsts
			--without-libidn
			--without-libmicrohttpd
			--with-bzip2
			--with-lzma

INSTALL_TARGET=		install-strip
INSTALL_REQ_TOOLCHAIN=	yes
SOVERSION=		4.0.0

CFLAGS=			-Wno-attributes
VAR_OPSYS[netbsd]=	CONFIGURE_ENV=ac_cv_func_utimens=no
			CONFIGURE_ENV=ac_cv_func_lutimens=no

post-install:
	${RM} ${STAGEDIR}${PREFIX}/bin/wget2_noinstall

[FILE:2176:descriptions/desc.primary]
GNU Wget2 is the successor of GNU Wget, a file and recursive website
downloader.  Some features:

* Support for HTTP/1.1 and HTTP/2.0 protocol
* brotli decompression support (Accept-Encoding: br)
* zstandard decompression support, RFC8478 (Accept-Encoding: zstd)
* lzip decompression support, (Accept-Encoding: lzip)
* HPKP - HTTP Public Key Pinning (RFC7469) with persistent database
* TCP Fast Open for plain text and for HTTPS
* TLS Session Resumption including persistent session data cache
* TLS False Start (with GnuTLS >= 3.5.0)
* HTTP2 support via nghttp2 and GnuTLS ALPN including streaming/pipelining
* Use libpsl for cookie domain checking (using Public Suffix List)
* Support link conversion (-k/--convert-links and -K/--backup-converted)
* Support for RFC 6266 compliant Content-Disposition
* RFC 6797 HSTS (HTTP Strict Transport Security)
* Support for bzip2 Content-Encoding / Accept-Encoding compression type
* Support for XZ Content-Encoding / Accept-Encoding compression type
* Support scanning RSS 2.0 feeds.
* Support scanning Atom 1.0 feeds.
* Support scanning URLs from local Sitemap XML file
* Support scanning sitemap files given in robots.txt
* Support arbitrary number of proxies for parallel downloads
* Multithreaded download of single files (option --chunk-size)
* Internationalized Domain Names in Applications
* ICEcast / SHOUTcast support via library (see examples/getstream.c)
* respect /robots.txt "Robot Exclusion Standard" / <META name="robots">
* IDN support for international domains
* proxy support
* cookies (session/non-session), detection of supercookies via PSL
* recursive download of websites with or without spanning hosts
* download of single web pages / resources
* zlib/gzip compressed HTTP/HTTPS downloads (gzip, deflate)
* number of parallel download threads is adjustable
* support for keep-alive connections
* included CSS, HTML, XML parser needed for recursive downloads
* gettext support
* HTTPS via libgnutls (and basic WolfSSL support)
* support for Metalink RFC 6249 (Metalink/HTTP: Mirrors and Hashes)
* support for Metalink RFC 5854 (Metalink Download Description Formats)
* DNS lookup cache
* IPv4 and IPv6 support


[FILE:40:descriptions/desc.tools]
This package contains the wget program.


[FILE:97:distinfo]
d7544b13e37f18e601244fce5f5f40688ac1d6ab9541e0fbb01a32ee1fb447b4      4077812 wget2-2.2.1.tar.gz


[FILE:55:manifests/plist.primary]
lib/
 libwget.so.%%SOMAJOR%%
 libwget.so.%%SOVERSION%%


[FILE:10:manifests/plist.tools]
bin/wget2


[FILE:81:manifests/plist.dev]
include/
 wget.h
 wgetver.h
lib/
 libwget.a
 libwget.so
lib/pkgconfig/libwget.pc


[FILE:1153:manifests/plist.nls]
share/locale/ar/LC_MESSAGES/wget2.mo
share/locale/ca/LC_MESSAGES/wget2.mo
share/locale/cs/LC_MESSAGES/wget2.mo
share/locale/de/LC_MESSAGES/wget2.mo
share/locale/eo/LC_MESSAGES/wget2.mo
share/locale/es/LC_MESSAGES/wget2.mo
share/locale/et/LC_MESSAGES/wget2.mo
share/locale/fi/LC_MESSAGES/wget2.mo
share/locale/fr/LC_MESSAGES/wget2.mo
share/locale/ga/LC_MESSAGES/wget2.mo
share/locale/hr/LC_MESSAGES/wget2.mo
share/locale/hu/LC_MESSAGES/wget2.mo
share/locale/id/LC_MESSAGES/wget2.mo
share/locale/it/LC_MESSAGES/wget2.mo
share/locale/ja/LC_MESSAGES/wget2.mo
share/locale/ka/LC_MESSAGES/wget2.mo
share/locale/ko/LC_MESSAGES/wget2.mo
share/locale/ms/LC_MESSAGES/wget2.mo
share/locale/nb/LC_MESSAGES/wget2.mo
share/locale/nl/LC_MESSAGES/wget2.mo
share/locale/pl/LC_MESSAGES/wget2.mo
share/locale/pt_BR/LC_MESSAGES/wget2.mo
share/locale/ro/LC_MESSAGES/wget2.mo
share/locale/ru/LC_MESSAGES/wget2.mo
share/locale/sk/LC_MESSAGES/wget2.mo
share/locale/sr/LC_MESSAGES/wget2.mo
share/locale/sv/LC_MESSAGES/wget2.mo
share/locale/tr/LC_MESSAGES/wget2.mo
share/locale/uk/LC_MESSAGES/wget2.mo
share/locale/vi/LC_MESSAGES/wget2.mo
share/locale/zh_CN/LC_MESSAGES/wget2.mo


[FILE:443:manifests/plist.man]
share/man/man3/
 libwget-base64.3
 libwget-bitmap.3
 libwget-console.3
 libwget-dns-caching.3
 libwget-dns.3
 libwget-error.3
 libwget-hash.3
 libwget-hashmap.3
 libwget-io.3
 libwget-ip.3
 libwget-list.3
 libwget-mem.3
 libwget-net.3
 libwget-parse_atom.3
 libwget-parse_sitemap.3
 libwget-printf.3
 libwget-random.3
 libwget-robots.3
 libwget-stringmap.3
 libwget-thread.3
 libwget-utils.3
 libwget-vector.3
 libwget-xalloc.3
 libwget-xml.3


[FILE:427:patches/patch-lib_libc-config.h]
--- lib/libc-config.h.orig	2024-10-31 11:04:55 UTC
+++ lib/libc-config.h
@@ -35,6 +35,11 @@
 
 #include <config.h>
 
+#if defined __FreeBSD__ || defined __DragonFly__
+#undef __nonnull
+#define	__nonnull(...)
+#endif
+
 /* On glibc this includes <features.h> and <sys/cdefs.h> and #defines
    _FEATURES_H, __WORDSIZE, and __set_errno.  On FreeBSD 11 and
    DragonFlyBSD 5.9 it includes <sys/cdefs.h> which defines __nonnull.

