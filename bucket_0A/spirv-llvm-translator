# Buildsheet autogenerated by ravenadm tool -- Do not edit.

NAMEBASE=		spirv-llvm-translator
VERSION=		20.1.1
KEYWORDS=		lang
VARIANTS=		std
SDESC[std]=		LLVM to SPIRV Translator
HOMEPAGE=		https://github.com/KhronosGroup/SPIRV-LLVM-Translator
CONTACT=		nobody

DOWNLOAD_GROUPS=	main headers
SITES[main]=		GITHUB/KhronosGroup:SPIRV-LLVM-Translator:v20.1.1
SITES[headers]=		GITHUB/KhronosGroup:SPIRV-Headers:vulkan-sdk-1.4.309.0
DISTFILE[1]=		generated:main
DISTFILE[2]=		generated:headers
DIST_SUBDIR=		llvm20
DF_INDEX=		1 2
SPKGS[std]=		set
			primary
			dev

OPTIONS_AVAILABLE=	none
OPTIONS_STANDARD=	none

BUILD_DEPENDS=		llvm:dev:std
			llvm:tools:std
BUILDRUN_DEPENDS=	llvm:primary:std

USES=			cmake

FPC_EQUIVALENT=		devel/spirv-llvm-translator

SOVERSION=		20.1.3
PLIST_SUB=		SOMAJORMIN=20.1

CMAKE_ARGS=		-DBUILD_SHARED_LIBS:BOOL=ON
			-DLLVM_BUILD_TOOLS:BOOL=ON
			-DLLVM_EXTERNAL_SPIRV_HEADERS_SOURCE_DIR={{WRKDIR}}/SPIRV-Headers-vulkan-sdk-1.4.309.0

post-install:
	${STRIP_CMD} ${STAGEDIR}${PREFIX}/bin/llvm-spirv
	${STRIP_CMD} ${STAGEDIR}${PREFIX}/lib/libLLVMSPIRVLib.so

post-extract:
	# match headers
	${REINPLACE_CMD} -e 's|ConstFunctionPointerINTEL|ConstantFunctionPointerINTEL|g' \
		${WRKSRC}/lib/SPIRV/SPIRVReader.cpp \
		${WRKSRC}/lib/SPIRV/SPIRVWriter.cpp \
		${WRKSRC}/lib/SPIRV/libSPIRV/SPIRVFunction.h \
		${WRKSRC}/lib/SPIRV/libSPIRV/SPIRVModule.h \
		${WRKSRC}/lib/SPIRV/libSPIRV/SPIRVModule.cpp \
		${WRKSRC}/lib/SPIRV/libSPIRV/SPIRVOpCode.h \
		${WRKSRC}/lib/SPIRV/libSPIRV/SPIRVOpCodeEnum.h

[FILE:420:descriptions/desc.primary]
This package contains the LLVM/SPIR-V Bi-Directional Translator, a library
and tool for translation between LLVM IR and SPIR-V.

SPIR-V is a binary intermediate language for representing graphical-shader
stages and compute kernels for multiple Khronos APIs, including OpenCL,
OpenGL, and Vulkan. SPIR-V defines a new language and is a successor to the
original Khronos SPIR, which supported only OpenCL device programs.


[FILE:273:distinfo]
3b2a750bbaea4a084e90fd88de317f9a03879056e3bd429bb56c588f4c77ca16      1807510 llvm20/KhronosGroup-SPIRV-LLVM-Translator-20.1.1.tar.gz
a96f8b4f2dfb18f7432e5c523e220ab0075372a9509e0c25fbff21c76af0de7c       543165 llvm20/KhronosGroup-SPIRV-Headers-ulkan-sdk-1.4.309.0.tar.gz


[FILE:53:manifests/plist.primary]
bin/llvm-spirv
lib/libLLVMSPIRVLib.so.%%SOMAJORMIN%%


[FILE:133:manifests/plist.dev]
include/LLVMSPIRVLib/
 LLVMSPIRVExtensions.inc
 LLVMSPIRVLib.h
 LLVMSPIRVOpts.h
lib/libLLVMSPIRVLib.so
lib/pkgconfig/LLVMSPIRVLib.pc

