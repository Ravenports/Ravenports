# Buildsheet autogenerated by ravenadm tool -- Do not edit.

NAMEBASE=		check
VERSION=		0.15.2
KEYWORDS=		devel
VARIANTS=		std
SDESC[std]=		Unit test framework for C
HOMEPAGE=		https://libcheck.github.io/check/
CONTACT=		nobody

DOWNLOAD_GROUPS=	main
SITES[main]=		GITHUB/libcheck:check:0.15.2
DISTFILE[1]=		generated:main
DF_INDEX=		1
SPKGS[std]=		set
			primary
			tools
			dev
			man
			info

OPTIONS_AVAILABLE=	none
OPTIONS_STANDARD=	none

USES=			autoreconf libtool makeinfo pkgconfig

LICENSE=		LGPL21+:primary
LICENSE_TERMS=		primary:{{WRKDIR}}/TERMS
LICENSE_FILE=		LGPL21+:{{WRKSRC}}/COPYING.LESSER
LICENSE_AWK=		TERMS:"^$$"
LICENSE_SOURCE=		TERMS:{{WRKSRC}}/src/check.c
LICENSE_SCHEME=		solo

INFO=			info:check
FPC_EQUIVALENT=		devel/check
INFO_SUBDIR=		.

MUST_CONFIGURE=		gnu
CONFIGURE_ENV=		ac_cv_path_AWK_PATH={{AWK}}

INSTALL_TARGET=		install-strip

post-patch:
	${REINPLACE_CMD} \
		-e 's|COPYING.LESSER||' \
		-e '/^docdir = / s|$$(PACKAGE)|check|' \
			${WRKSRC}/Makefile.am

post-install:
	${RM} -r ${STAGEDIR}${PREFIX}/share/doc/check

[FILE:289:descriptions/desc.primary]
Check is a unit test framework for C. It features a simple interface for
defining unit tests, putting little in the way of the developer. Tests
are run in a separate address space, so Check can catch both assertion
failures and code errors that cause segmentation faults or other signals.


[FILE:63:descriptions/desc.tools]
This package contains the checkmk tool of the Check framework.


[FILE:107:distinfo]
998d355294bb94072f40584272cf4424571c396c631620ce463f6ea97aa67d2e       306136 libcheck-check-0.15.2.tar.gz


[FILE:39:manifests/plist.primary]
lib/
 libcheck.so.0
 libcheck.so.0.0.0


[FILE:12:manifests/plist.tools]
bin/checkmk


[FILE:110:manifests/plist.dev]
include/
 check.h
 check_stdint.h
lib/
 libcheck.a
 libcheck.so
lib/pkgconfig/check.pc
share/aclocal/check.m4


[FILE:28:manifests/plist.man]
share/man/man1/checkmk.1.gz


[FILE:784:patches/patch-check.m4]
--- check.m4.orig	2020-08-09 06:12:30 UTC
+++ check.m4
@@ -21,8 +21,20 @@ AC_DEFUN([AM_PATH_CHECK],
       CHECK_CFLAGS="-I$with_check/include"
       CHECK_LIBS="-L$with_check/lib -lcheck"
     else
-      CHECK_CFLAGS=""
-      CHECK_LIBS="-lcheck"
+      for check_includedir in /usr/local/include /usr/local/include/check /usr/include $prefix/include
+      do
+        if test -e $check_includedir/check.h ; then
+          CHECK_CFLAGS="-I${check_includedir}"
+          break
+        fi
+      done
+      for check_libdir in /usr/local/lib /usr/local/lib/check /usr/lib $prefix/lib
+      do
+        if test -e $check_libdir/libcheck.a ; then
+          CHECK_LIBS="-L${check_libdir} -lcheck"
+          break
+        fi
+      done
     fi
 
     ac_save_CFLAGS="$CFLAGS"

