# Buildsheet autogenerated by ravenadm tool -- Do not edit.

NAMEBASE=		check
VERSION=		0.15.1
KEYWORDS=		devel
VARIANTS=		standard
SDESC[standard]=	Unit test framework for C
HOMEPAGE=		https://libcheck.github.io/check/
CONTACT=		nobody

DOWNLOAD_GROUPS=	main
SITES[main]=		GITHUB/libcheck:check:0.15.1
DISTFILE[1]=		generated:main
DF_INDEX=		1
SPKGS[standard]=	single

OPTIONS_AVAILABLE=	none
OPTIONS_STANDARD=	none

USES=			autoreconf libtool makeinfo pkgconfig

LICENSE=		LGPL21+:single
LICENSE_TERMS=		single:{{WRKDIR}}/TERMS
LICENSE_FILE=		LGPL21+:{{WRKSRC}}/COPYING.LESSER
LICENSE_AWK=		TERMS:"^$$"
LICENSE_SOURCE=		TERMS:{{WRKSRC}}/src/check.c
LICENSE_SCHEME=		solo

INFO=			single:check
FPC_EQUIVALENT=		devel/check
INFO_SUBDIR=		.

MUST_CONFIGURE=		gnu
CONFIGURE_ENV=		ac_cv_path_AWK_PATH={{AWK}}

INSTALL_TARGET=		install-strip

post-patch:
	${REINPLACE_CMD} \
		-e 's|COPYING.LESSER||' \
		-e '/^docdir = / s|$$(PACKAGE)|check|' \
			${WRKSRC}/Makefile.am

post-install:
	${RM} -r ${STAGEDIR}${PREFIX}/share/doc/check

[FILE:289:descriptions/desc.single]
Check is a unit test framework for C. It features a simple interface for
defining unit tests, putting little in the way of the developer. Tests
are run in a separate address space, so Check can catch both assertion
failures and code errors that cause segmentation faults or other signals.


[FILE:107:distinfo]
a67b4972e2fb4bce14e19425d12850c2c0f232f2be93da0a2324767ee6c2995b       305925 libcheck-check-0.15.1.tar.gz


[FILE:184:manifests/plist.single]
bin/checkmk
include/
 check.h
 check_stdint.h
lib/
 libcheck.a
 libcheck.so
 libcheck.so.0
 libcheck.so.0.0.0
lib/pkgconfig/check.pc
share/aclocal/check.m4
share/man/man1/checkmk.1.gz


[FILE:784:patches/patch-check.m4]
--- check.m4.orig	2020-07-22 14:19:48 UTC
+++ check.m4
@@ -21,8 +21,20 @@ AC_DEFUN([AM_PATH_CHECK],
       CHECK_CFLAGS="-I$with_check/include"
       CHECK_LIBS="-L$with_check/lib -lcheck"
     else
-      CHECK_CFLAGS=""
-      CHECK_LIBS="-lcheck"
+      for check_includedir in /usr/local/include /usr/local/include/check /usr/include $prefix/include
+      do
+        if test -e $check_includedir/check.h ; then
+          CHECK_CFLAGS="-I${check_includedir}"
+          break
+        fi
+      done
+      for check_libdir in /usr/local/lib /usr/local/lib/check /usr/lib $prefix/lib
+      do
+        if test -e $check_libdir/libcheck.a ; then
+          CHECK_LIBS="-L${check_libdir} -lcheck"
+          break
+        fi
+      done
     fi
 
     ac_save_CFLAGS="$CFLAGS"

