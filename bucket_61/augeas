# Buildsheet autogenerated by ravenadm tool -- Do not edit.

NAMEBASE=		augeas
VERSION=		1.14.1
KEYWORDS=		textproc
VARIANTS=		std
SDESC[std]=		Configuration editing tool and API
HOMEPAGE=		http://augeas.net/
CONTACT=		nobody

DOWNLOAD_GROUPS=	main savannah
SITES[main]=		GITHUB/hercules-team:augeas:release-1.14.1
SITES[savannah]=	https://git.savannah.gnu.org/cgit/gnulib.git/snapshot/
DISTFILE[1]=		generated:main
DISTFILE[2]=		gnulib-2f7479a16a3395f1429c7795f10c5d19b9b4453e.tar.gz:savannah
DF_INDEX=		1 2
SPKGS[std]=		single

OPTIONS_AVAILABLE=	none
OPTIONS_STANDARD=	none

BUILD_DEPENDS=		bash:primary:std
			libtool:single:std

USES=			autoreconf:build cpe bison gmake libtool pkgconfig
			readline cclibs:single
GNOME_COMPONENTS=	libxml2

FPC_EQUIVALENT=		textproc/augeas

MUST_CONFIGURE=		gnu

INSTALL_TARGET=		install-strip
INSTALL_REQ_TOOLCHAIN=	yes
SOVERSION=		0.25.0
PLIST_SUB=		FA_SOVERSION=1.5.3
			FA_SOMAJOR=1

pre-configure:
	${REINPLACE_CMD} -e 's|%%PREFIX%%|${PREFIX}|' \
		${WRKSRC}/lenses/pg_hba.aug \
		${WRKSRC}/lenses/postgresql.aug
	${REINPLACE_CMD} -e 's|/usr/local|${LOCALBASE}|' \
		${WRKSRC}/lenses/puppet.aug \
		${WRKSRC}/lenses/puppet_auth.aug \
		${WRKSRC}/lenses/puppetfileserver.aug
	(cd ${WRKSRC} && ${LOCALBASE}/bin/bash ./autogen.sh \
		--gnulib-srcdir=${WRKSRC}/gnulib \
		--disable-dependency-tracking \
		--enable-debug=no)

post-extract:
	${MV} ${WRKDIR}/gnulib-2f7479a16a3395f1429c7795f10c5d19b9b4453e ${WRKSRC}/gnulib

[FILE:578:descriptions/desc.single]
Augeas - a configuration API

Augeas is a configuration editing tool. It parses configuration files in
their native formats and transforms them into a tree. Configuration changes
are made by manipulating this tree and saving it back into native config
files.

Augeas is:
 - An API provided by a C library
 - A command line tool to manipulate configuration from the shell
 - Language bindings to do the same from your favorite scripting language
 - Canonical tree representations of common configuration files
 - A domain-specific language to describe configuration file formats


[FILE:254:distinfo]
c75eba96691ccaa8f4484f97008b9d66750eee25664647ed2d47f9124536078d       907098 hercules-team-augeas-release-1.14.1.tar.gz
528538b14c4cc39741a533dee17ef0937fca611f917a9b4866dd0c33c6680f9c      7739840 gnulib-2f7479a16a3395f1429c7795f10c5d19b9b4453e.tar.gz


[FILE:8142:manifests/plist.single]
bin/
 augmatch
 augparse
 augprint
 augtool
 fadot
include/
 augeas.h
 fa.h
lib/
 libaugeas.a
 libaugeas.so
 libaugeas.so.%%SOMAJOR%%
 libaugeas.so.%%SOVERSION%%
 libfa.a
 libfa.so
 libfa.so.%%FA_SOMAJOR%%
 libfa.so.%%FA_SOVERSION%%
lib/pkgconfig/augeas.pc
share/augeas/lenses/dist/
 access.aug
 activemq_conf.aug
 activemq_xml.aug
 afs_cellalias.aug
 aliases.aug
 anaconda.aug
 anacron.aug
 approx.aug
 apt_update_manager.aug
 aptcacherngsecurity.aug
 aptconf.aug
 aptpreferences.aug
 aptsources.aug
 authinfo2.aug
 authorized_keys.aug
 authselectpam.aug
 automaster.aug
 automounter.aug
 avahi.aug
 backuppchosts.aug
 bbhosts.aug
 bootconf.aug
 build.aug
 cachefilesd.aug
 carbon.aug
 ceph.aug
 cgconfig.aug
 cgrules.aug
 channels.aug
 chrony.aug
 clamav.aug
 cmdline.aug
 cobblermodules.aug
 cobblersettings.aug
 cockpit.aug
 collectd.aug
 cpanel.aug
 cron.aug
 cron_user.aug
 crypttab.aug
 csv.aug
 cups.aug
 cyrus_imapd.aug
 darkice.aug
 debctrl.aug
 desktop.aug
 devfsrules.aug
 device_map.aug
 dhclient.aug
 dhcpd.aug
 dns_zone.aug
 dnsmasq.aug
 dovecot.aug
 dpkg.aug
 dput.aug
 erlang.aug
 ethers.aug
 exports.aug
 fai_diskconfig.aug
 fail2ban.aug
 fonts.aug
 fstab.aug
 fuse.aug
 gdm.aug
 getcap.aug
 group.aug
 grub.aug
 grubenv.aug
 gshadow.aug
 gtkbookmarks.aug
 host_conf.aug
 hostname.aug
 hosts.aug
 hosts_access.aug
 htpasswd.aug
 httpd.aug
 inetd.aug
 inifile.aug
 inittab.aug
 inputrc.aug
 interfaces.aug
 iproute2.aug
 iptables.aug
 iscsid.aug
 jaas.aug
 jettyrealm.aug
 jmxaccess.aug
 jmxpassword.aug
 json.aug
 kdump.aug
 keepalived.aug
 known_hosts.aug
 koji.aug
 krb5.aug
 ldif.aug
 ldso.aug
 lightdm.aug
 limits.aug
 login_defs.aug
 logrotate.aug
 logwatch.aug
 lokkit.aug
 lvm.aug
 mailscanner.aug
 mailscanner_rules.aug
 masterpasswd.aug
 mcollective.aug
 mdadm_conf.aug
 memcached.aug
 mke2fs.aug
 modprobe.aug
 modules.aug
 modules_conf.aug
 mongodbserver.aug
 monit.aug
 multipath.aug
 mysql.aug
 nagioscfg.aug
 nagiosobjects.aug
 netmasks.aug
 networkmanager.aug
 networks.aug
 nginx.aug
 nrpe.aug
 nslcd.aug
 nsswitch.aug
 ntp.aug
 ntpd.aug
 odbc.aug
 opendkim.aug
 openshift_config.aug
 openshift_http.aug
 openshift_quickstarts.aug
 openvpn.aug
 oz.aug
 pagekite.aug
 pam.aug
 pamconf.aug
 passwd.aug
 pbuilder.aug
 pg_hba.aug
 pgbouncer.aug
 php.aug
 phpvars.aug
 postfix_access.aug
 postfix_main.aug
 postfix_master.aug
 postfix_passwordmap.aug
 postfix_sasl_smtpd.aug
 postfix_transport.aug
 postfix_virtual.aug
 postgresql.aug
 properties.aug
 protocols.aug
 puppet.aug
 puppet_auth.aug
 puppetfile.aug
 puppetfileserver.aug
 pylonspaste.aug
 pythonpaste.aug
 qpid.aug
 quote.aug
 rabbitmq.aug
 radicale.aug
 rancid.aug
 redis.aug
 reprepro_uploaders.aug
 resolv.aug
 rhsm.aug
 rmt.aug
 rsyncd.aug
 rsyslog.aug
 rtadvd.aug
 rx.aug
 samba.aug
 schroot.aug
 securetty.aug
 semanage.aug
 sep.aug
 services.aug
 shadow.aug
 shells.aug
 shellvars.aug
 shellvars_list.aug
 simplelines.aug
 simplevars.aug
 sip_conf.aug
 slapd.aug
 smbusers.aug
 solaris_system.aug
 soma.aug
 sos.aug
 spacevars.aug
 splunk.aug
 squid.aug
 ssh.aug
 sshd.aug
 sssd.aug
 star.aug
 strongswan.aug
 stunnel.aug
 subversion.aug
 sudoers.aug
 sysconfig.aug
 sysconfig_route.aug
 sysctl.aug
 syslog.aug
 systemd.aug
 termcap.aug
 thttpd.aug
 tinc.aug
 tmpfiles.aug
 toml.aug
 trapperkeeper.aug
 tuned.aug
 up2date.aug
 updatedb.aug
 util.aug
 vfstab.aug
 vmware_config.aug
 vsftpd.aug
 webmin.aug
 wine.aug
 xendconfsxp.aug
 xinetd.aug
 xml.aug
 xorg.aug
 xymon.aug
 xymon_alerting.aug
 yaml.aug
 yum.aug
share/augeas/lenses/dist/tests/
 test_access.aug
 test_activemq_conf.aug
 test_activemq_xml.aug
 test_afs_cellalias.aug
 test_aliases.aug
 test_anaconda.aug
 test_anacron.aug
 test_approx.aug
 test_apt_update_manager.aug
 test_aptcacherngsecurity.aug
 test_aptconf.aug
 test_aptpreferences.aug
 test_aptsources.aug
 test_authinfo2.aug
 test_authorized_keys.aug
 test_authselectpam.aug
 test_automaster.aug
 test_automounter.aug
 test_avahi.aug
 test_backuppchosts.aug
 test_bbhosts.aug
 test_bootconf.aug
 test_build.aug
 test_cachefilesd.aug
 test_carbon.aug
 test_ceph.aug
 test_cgconfig.aug
 test_cgrules.aug
 test_channels.aug
 test_chrony.aug
 test_clamav.aug
 test_cmdline.aug
 test_cobblermodules.aug
 test_cobblersettings.aug
 test_cockpit.aug
 test_collectd.aug
 test_cpanel.aug
 test_cron.aug
 test_cron_user.aug
 test_crypttab.aug
 test_csv.aug
 test_cups.aug
 test_cyrus_imapd.aug
 test_darkice.aug
 test_debctrl.aug
 test_desktop.aug
 test_devfsrules.aug
 test_device_map.aug
 test_dhclient.aug
 test_dhcpd.aug
 test_dns_zone.aug
 test_dnsmasq.aug
 test_dovecot.aug
 test_dpkg.aug
 test_dput.aug
 test_erlang.aug
 test_ethers.aug
 test_exports.aug
 test_fai_diskconfig.aug
 test_fail2ban.aug
 test_fonts.aug
 test_fstab.aug
 test_fuse.aug
 test_gdm.aug
 test_getcap.aug
 test_group.aug
 test_grub.aug
 test_grubenv.aug
 test_gshadow.aug
 test_gtkbookmarks.aug
 test_host_conf.aug
 test_hostname.aug
 test_hosts.aug
 test_hosts_access.aug
 test_htpasswd.aug
 test_httpd.aug
 test_inetd.aug
 test_inifile.aug
 test_inittab.aug
 test_inputrc.aug
 test_interfaces.aug
 test_iproute2.aug
 test_iptables.aug
 test_iscsid.aug
 test_jaas.aug
 test_jettyrealm.aug
 test_jmxaccess.aug
 test_jmxpassword.aug
 test_json.aug
 test_kdump.aug
 test_keepalived.aug
 test_known_hosts.aug
 test_koji.aug
 test_krb5.aug
 test_ldap.aug
 test_ldif.aug
 test_ldso.aug
 test_lightdm.aug
 test_limits.aug
 test_login_defs.aug
 test_logrotate.aug
 test_logwatch.aug
 test_lokkit.aug
 test_lvm.aug
 test_mailscanner.aug
 test_mailscanner_rules.aug
 test_masterpasswd.aug
 test_mcollective.aug
 test_mdadm_conf.aug
 test_memcached.aug
 test_mke2fs.aug
 test_modprobe.aug
 test_modules.aug
 test_modules_conf.aug
 test_mongodbserver.aug
 test_monit.aug
 test_multipath.aug
 test_mysql.aug
 test_nagioscfg.aug
 test_nagiosobjects.aug
 test_netmasks.aug
 test_networkmanager.aug
 test_networks.aug
 test_nginx.aug
 test_nrpe.aug
 test_nslcd.aug
 test_nsswitch.aug
 test_ntp.aug
 test_ntpd.aug
 test_odbc.aug
 test_opendkim.aug
 test_openshift_config.aug
 test_openshift_http.aug
 test_openshift_quickstarts.aug
 test_openvpn.aug
 test_oz.aug
 test_pagekite.aug
 test_pam.aug
 test_pamconf.aug
 test_passwd.aug
 test_pbuilder.aug
 test_pg_hba.aug
 test_pgbouncer.aug
 test_php.aug
 test_phpvars.aug
 test_postfix_access.aug
 test_postfix_main.aug
 test_postfix_master.aug
 test_postfix_passwordmap.aug
 test_postfix_sasl_smtpd.aug
 test_postfix_transport.aug
 test_postfix_virtual.aug
 test_postgresql.aug
 test_properties.aug
 test_protocols.aug
 test_puppet.aug
 test_puppet_auth.aug
 test_puppetfile.aug
 test_puppetfileserver.aug
 test_pylonspaste.aug
 test_pythonpaste.aug
 test_qpid.aug
 test_quote.aug
 test_rabbitmq.aug
 test_radicale.aug
 test_rancid.aug
 test_redis.aug
 test_reprepro_uploaders.aug
 test_resolv.aug
 test_rhsm.aug
 test_rmt.aug
 test_rsyncd.aug
 test_rsyslog.aug
 test_rtadvd.aug
 test_rx.aug
 test_samba.aug
 test_schroot.aug
 test_securetty.aug
 test_semanage.aug
 test_services.aug
 test_shadow.aug
 test_shells.aug
 test_shellvars.aug
 test_shellvars_list.aug
 test_simplelines.aug
 test_simplevars.aug
 test_sip_conf.aug
 test_slapd.aug
 test_smbusers.aug
 test_solaris_system.aug
 test_soma.aug
 test_sos.aug
 test_spacevars.aug
 test_splunk.aug
 test_squid.aug
 test_ssh.aug
 test_sshd.aug
 test_sssd.aug
 test_star.aug
 test_strongswan.aug
 test_stunnel.aug
 test_subversion.aug
 test_sudoers.aug
 test_sysconfig.aug
 test_sysconfig_route.aug
 test_sysctl.aug
 test_syslog.aug
 test_systemd.aug
 test_termcap.aug
 test_thttpd.aug
 test_tinc.aug
 test_tmpfiles.aug
 test_toml.aug
 test_trapperkeeper.aug
 test_tuned.aug
 test_up2date.aug
 test_updatedb.aug
 test_util.aug
 test_vfstab.aug
 test_vmware_config.aug
 test_vsftpd.aug
 test_webmin.aug
 test_wine.aug
 test_xendconfsxp.aug
 test_xinetd.aug
 test_xml.aug
 test_xorg.aug
 test_xymon.aug
 test_xymon_alerting.aug
 test_yaml.aug
 test_yum.aug
share/bash-completion/completions/
 augmatch
 augprint
 augtool
share/man/man1/
 augmatch.1.gz
 augparse.1.gz
 augprint.1.gz
 augtool.1.gz
share/vim/vimfiles/ftdetect/augeas.vim
share/vim/vimfiles/syntax/augeas.vim


[FILE:302:patches/patch-bootstrap]
--- bootstrap.orig	2023-07-08 07:53:17 UTC
+++ bootstrap
@@ -53,9 +53,6 @@ case ${GNULIB_SRCDIR--} in
     echo "$0: getting gnulib files..."
     git submodule update || exit $?
     GNULIB_SRCDIR=.gnulib
-  else
-    echo >&2 "$0: invalid gnulib srcdir: $GNULIB_SRCDIR"
-    exit 1
   fi
   ;;
 esac


[FILE:441:patches/patch-gnulib_lib_libc-config.h]
--- gnulib/lib/libc-config.h.orig	2022-12-02 14:49:07 UTC
+++ gnulib/lib/libc-config.h
@@ -35,6 +35,11 @@
 
 #include <config.h>
 
+#if defined __FreeBSD__ || defined __DragonFly__
+#undef __nonnull
+#define	__nonnull(...)
+#endif
+
 /* On glibc this includes <features.h> and <sys/cdefs.h> and #defines
    _FEATURES_H, __WORDSIZE, and __set_errno.  On FreeBSD 11 and
    DragonFlyBSD 5.9 it includes <sys/cdefs.h> which defines __nonnull.


[FILE:543:patches/patch-gnulib_m4_gnulib-common.m4]
--- gnulib/m4/gnulib-common.m4.orig	2022-12-02 14:49:07 UTC
+++ gnulib/m4/gnulib-common.m4
@@ -345,11 +345,7 @@ AC_DEFUN([gl_COMMON_BODY], [
    _GL_ATTRIBUTE_NONNULL () declares that all pointer arguments must not be
    null.  */
 /* Applies to: functions.  */
-#if _GL_HAS_ATTRIBUTE (nonnull)
-# define _GL_ATTRIBUTE_NONNULL(args) __attribute__ ((__nonnull__ args))
-#else
 # define _GL_ATTRIBUTE_NONNULL(args)
-#endif
 
 /* _GL_ATTRIBUTE_NONSTRING declares that the contents of a character array is
    not meant to be NUL-terminated.  */


[FILE:477:patches/patch-lenses_pg__hba.aug]
--- lenses/pg_hba.aug.orig	2023-07-08 07:53:17 UTC
+++ lenses/pg_hba.aug
@@ -81,6 +81,7 @@ module Pg_Hba =
     (* View: filter
         The pg_hba.conf conf file *)
     let filter = (incl "/var/lib/pgsql/data/pg_hba.conf" .
+                  incl "%%PREFIX%%/pgsql/data/pg_hba.conf" .
                   incl "/var/lib/pgsql/*/data/pg_hba.conf" .
                   incl "/var/lib/postgresql/*/data/pg_hba.conf" .
                   incl "/etc/postgresql/*/*/pg_hba.conf" )


[FILE:477:patches/patch-lenses_postgresql.aug]
--- lenses/postgresql.aug.orig	2023-07-08 07:53:17 UTC
+++ lenses/postgresql.aug
@@ -70,6 +70,7 @@ let lns = (Util.empty | Util.comment | e
 
 (* Variable: filter *)
 let filter = (incl "/var/lib/pgsql/data/postgresql.conf" .
+              incl "%%PREFIX%%/pgsql/data/postgresql.conf" .
               incl "/var/lib/pgsql/*/data/postgresql.conf" .
               incl "/var/lib/postgresql/*/data/postgresql.conf" .
               incl "/etc/postgresql/*/*/postgresql.conf" )

