# Buildsheet autogenerated by ravenadm tool -- Do not edit.

NAMEBASE=		ghostscript
VERSION=		9.53.1
KEYWORDS=		print
VARIANTS=		standard
SDESC[standard]=	Postscript and PDF Rendering Engine
HOMEPAGE=		https://www.ghostscript.com/
CONTACT=		nobody

DOWNLOAD_GROUPS=	main
SITES[main]=		https://github.com/ArtifexSoftware/ghostpdl-downloads/releases/download/gs9531/
DISTFILE[1]=		ghostscript-9.53.1.tar.xz:main
DF_INDEX=		1
SPKGS[standard]=	complete
			primary
			x11
			docs

OPTIONS_AVAILABLE=	none
OPTIONS_STANDARD=	none

BUILD_DEPENDS=		xorg-sm:single:standard
			xorg-xt:single:standard
			xorg-ice:single:standard
			xorg-x11:single:standard
			xorg-xext:single:standard
BUILDRUN_DEPENDS=	freetype:primary:standard
			fontconfig:primary:standard
			jbig2dec:single:standard
			openjpeg:single:standard
			tiff:primary:standard
			libpaper:single:standard
			cups:primary:standard
			libidn:primary:standard
RUN_DEPENDS=		poppler-data:single:standard
EXRUN[x11]=		xorg-sm:single:standard
			xorg-xt:single:standard
			xorg-ice:single:standard
			xorg-x11:single:standard
			xorg-xext:single:standard

USES=			cpe gmake png jpeg iconv pkgconfig zlib

DISTNAME=		ghostscript-9.53.1

LICENSE=		AGPLv3+:primary
LICENSE_TERMS=		primary:{{WRKSRC}}/LICENSE
LICENSE_FILE=		AGPLv3+:{{WRKSRC}}/doc/COPYING
LICENSE_SCHEME=		solo

CPE_PRODUCT=		ghostscript
CPE_VENDOR=		artifex
FPC_EQUIVALENT=		print/ghostscript9-agpl-base

MUST_CONFIGURE=		gnu
CONFIGURE_ARGS=		--disable-compile-inits
			--disable-dbus
			--disable-gtk
			--enable-contrib
			--enable-dynamic
			--enable-fontconfig
			--enable-freetype
			--enable-openjpeg
			--enable-cups
			--with-drivers=ALL
			--with-fontpath={{LOCALBASE}}/share/fonts
			--with-jbig2dec
			--with-libiconv=yes
			--with-libidn
			--with-ijs=no
			--with-libpaper
			--with-system-libtiff
			--with-x
CONFIGURE_ENV=		LIBS=-Wl,-rpath,{{PREFIX}}/lib

BUILD_TARGET=		so ./obj/X11.so

INSTALL_TARGET=		soinstall install-shared
INSTALL_REQ_TOOLCHAIN=	yes
SOVERSION=		9.53
PLIST_SUB=		GV=9.53.1

VAR_OPSYS[sunos]=	CPPFLAGS=-D_XOPEN_SOURCE=600
			CPPFLAGS=-D__EXTENSIONS__

post-patch:
	${RM} -r ${WRKSRC}/freetype \
		${WRKSRC}/ijs \
		${WRKSRC}/jbig2dec \
		${WRKSRC}/jpeg \
		${WRKSRC}/libpng \
		${WRKSRC}/openjpeg \
		${WRKSRC}/zlib
	${FIND} ${WRKSRC}/Resource/Init -name "*.orig" -delete

post-install:
	${MV} ${STAGEDIR}${PREFIX}/bin/gsc ${STAGEDIR}${PREFIX}/bin/gs
	${RM} ${STAGEDIR}${PREFIX}/bin/gsx
	${STRIP_CMD} ${STAGEDIR}${PREFIX}/bin/gs
	${STRIP_CMD} ${STAGEDIR}${PREFIX}/lib/libgs.so
	${STRIP_CMD} ${STAGEDIR}${PREFIX}/lib/ghostscript/9.53.1/X11.so
	${MKDIR} ${STAGEDIR}${PREFIX}/share/color/icc \
		${STAGEDIR}${PREFIX}/share/cmap
	${MV} ${STAGEDIR}${PREFIX}/share/ghostscript/9.53.1/iccprofiles \
		${STAGEDIR}${PREFIX}/share/color/icc/ghostscript
	${LN} -s ../../color/icc/ghostscript \
		${STAGEDIR}${PREFIX}/share/ghostscript/9.53.1/iccprofiles
	${MV} ${STAGEDIR}${PREFIX}/share/ghostscript/9.53.1/Resource/CMap/Identity* \
		${STAGEDIR}${PREFIX}/share/cmap
	${RM} -r ${STAGEDIR}${PREFIX}/share/ghostscript/9.53.1/Resource/CMap
	${LN} -s ../../../cmap \
		${STAGEDIR}${PREFIX}/share/ghostscript/9.53.1/Resource/CMap
	${RM} ${STAGEDIR}${PREFIX}/share/ghostscript/9.53.1/doc
	${RM} ${STAGEDIR}${STD_DOCDIR}/9.53.1/COPYING

[FILE:609:descriptions/desc.primary]
Ghostscript is a high-performance Postscript and PDF interpreter and
rendering engine with the most comprehensive set of page description
languages (PDL's) on the market today and technology conversion
capabilities covering PDF, PostScript, PCL and XPS languages.

Ghostscript has been under active development for over 20 years, and
offers an extremely versatile feature set and can be deployed across
a wide range of platforms, modules, end uses (embedding in hardware,
as an engine in document management systems, providing cloud solution
integration and as an engine in leading PDF generators and tools).


[FILE:62:descriptions/desc.x11]
This package contains the x11 support library of ghostscript.


[FILE:104:distinfo]
9e742b005c0b1f434adc0112cf69df7ecbc5e578bd3c27fbcdaa5a9d1b440011     41362600 ghostscript-9.53.1.tar.xz


[FILE:5292:manifests/plist.primary]
bin/
 dvipdf
 eps2eps
 gs
 gsbj
 gsdj
 gsdj500
 gslj
 gslp
 gsnd
 lprsetup.sh
 pdf2dsc
 pdf2ps
 pf2afm
 pfbtopfa
 pphs
 printafm
 ps2ascii
 ps2epsi
 ps2pdf
 ps2pdf12
 ps2pdf13
 ps2pdf14
 ps2pdfwr
 ps2ps
 ps2ps2
 unix-lpr.sh
include/ghostscript/
 gdevdsp.h
 gserrors.h
 iapi.h
 ierrors.h
lib/
 libgs.so
 libgs.so.%%SOMAJOR%%
 libgs.so.%%SOVERSION%%
share/cmap/
 Identity-H
 Identity-UTF16-H
 Identity-V
share/color/icc/ghostscript/
 a98.icc
 default_cmyk.icc
 default_gray.icc
 default_rgb.icc
 esrgb.icc
 gray_to_k.icc
 lab.icc
 ps_cmyk.icc
 ps_gray.icc
 ps_rgb.icc
 rommrgb.icc
 scrgb.icc
 sgray.icc
 srgb.icc
share/ghostscript/%%GV%%/iccprofiles
share/ghostscript/%%GV%%/Resource/CMap
share/ghostscript/%%GV%%/Resource/CIDFSubst/DroidSansFallback.ttf
share/ghostscript/%%GV%%/Resource/CIDFont/ArtifexBullet
share/ghostscript/%%GV%%/Resource/ColorSpace/
 DefaultCMYK
 DefaultGray
 DefaultRGB
 TrivialCMYK
 sGray
 sRGB
share/ghostscript/%%GV%%/Resource/Decoding/
 FCO_Dingbats
 FCO_Symbol
 FCO_Unicode
 FCO_Wingdings
 Latin1
 StandardEncoding
 Unicode
share/ghostscript/%%GV%%/Resource/Encoding/
 CEEncoding
 ExpertEncoding
 ExpertSubsetEncoding
 NotDefEncoding
 Wingdings
share/ghostscript/%%GV%%/Resource/Font/
 C059-BdIta
 C059-Bold
 C059-Italic
 C059-Roman
 D050000L
 NimbusMonoPS-Bold
 NimbusMonoPS-BoldItalic
 NimbusMonoPS-Italic
 NimbusMonoPS-Regular
 NimbusRoman-Bold
 NimbusRoman-BoldItalic
 NimbusRoman-Italic
 NimbusRoman-Regular
 NimbusSans-Bold
 NimbusSans-BoldItalic
 NimbusSans-Italic
 NimbusSans-Regular
 NimbusSansNarrow-Bold
 NimbusSansNarrow-BoldOblique
 NimbusSansNarrow-Oblique
 NimbusSansNarrow-Regular
 P052-Bold
 P052-BoldItalic
 P052-Italic
 P052-Roman
 StandardSymbolsPS
 URWBookman-Demi
 URWBookman-DemiItalic
 URWBookman-Light
 URWBookman-LightItalic
 URWGothic-Book
 URWGothic-BookOblique
 URWGothic-Demi
 URWGothic-DemiOblique
 Z003-MediumItalic
share/ghostscript/%%GV%%/Resource/IdiomSet/Pscript5Idiom
share/ghostscript/%%GV%%/Resource/Init/
 FAPIcidfmap
 FAPIconfig
 FAPIfontmap
 FCOfontmap-PCLPS2
 Fontmap
 Fontmap.GS
 cidfmap
 gs_agl.ps
 gs_btokn.ps
 gs_cet.ps
 gs_cff.ps
 gs_cidcm.ps
 gs_ciddc.ps
 gs_cidfm.ps
 gs_cidfn.ps
 gs_cidtt.ps
 gs_cmap.ps
 gs_cspace.ps
 gs_dbt_e.ps
 gs_diskn.ps
 gs_dps1.ps
 gs_dps2.ps
 gs_dscp.ps
 gs_epsf.ps
 gs_fapi.ps
 gs_fntem.ps
 gs_fonts.ps
 gs_frsd.ps
 gs_icc.ps
 gs_il1_e.ps
 gs_img.ps
 gs_init.ps
 gs_lev2.ps
 gs_ll3.ps
 gs_mex_e.ps
 gs_mgl_e.ps
 gs_mro_e.ps
 gs_pdf_e.ps
 gs_pdfwr.ps
 gs_res.ps
 gs_resmp.ps
 gs_setpd.ps
 gs_statd.ps
 gs_std_e.ps
 gs_sym_e.ps
 gs_trap.ps
 gs_ttf.ps
 gs_typ32.ps
 gs_typ42.ps
 gs_type1.ps
 gs_wan_e.ps
 pdf_base.ps
 pdf_draw.ps
 pdf_font.ps
 pdf_main.ps
 pdf_ops.ps
 pdf_rbld.ps
 pdf_sec.ps
 xlatmap
share/ghostscript/%%GV%%/Resource/SubstCID/
 CNS1-WMode
 GB1-WMode
 Japan1-WMode
 Korea1-WMode
share/ghostscript/%%GV%%/lib/
 PDFA_def.ps
 PDFX_def.ps
 PM760p.upp
 PM760pl.upp
 PM820p.upp
 PM820pl.upp
 Stc670p.upp
 Stc670pl.upp
 Stc680p.upp
 Stc680pl.upp
 Stc740p.upp
 Stc740pl.upp
 Stc760p.upp
 Stc760pl.upp
 Stc777p.upp
 Stc777pl.upp
 Stp720p.upp
 Stp720pl.upp
 Stp870p.upp
 Stp870pl.upp
 acctest.ps
 align.ps
 bj8.rpd
 bj8gc12f.upp
 bj8hg12f.upp
 bj8oh06n.upp
 bj8pa06n.upp
 bj8pp12f.upp
 bj8ts06n.upp
 bjc6000a1.upp
 bjc6000b1.upp
 bjc610a0.upp
 bjc610a1.upp
 bjc610a2.upp
 bjc610a3.upp
 bjc610a4.upp
 bjc610a5.upp
 bjc610a6.upp
 bjc610a7.upp
 bjc610a8.upp
 bjc610b1.upp
 bjc610b2.upp
 bjc610b3.upp
 bjc610b4.upp
 bjc610b6.upp
 bjc610b7.upp
 bjc610b8.upp
 caption.ps
 cbjc600.ppd
 cbjc800.ppd
 cdj550.upp
 cdj690.upp
 cdj690ec.upp
 cid2code.ps
 dnj750c.upp
 dnj750m.upp
 docie.ps
 font2pcl.ps
 ghostpdf.ppd
 gs_ce_e.ps
 gs_il2_e.ps
 gs_kanji.ps
 gs_ksb_e.ps
 gs_l.xbm
 gs_l.xpm
 gs_l_m.xbm
 gs_lgo_e.ps
 gs_lgx_e.ps
 gs_m.xbm
 gs_m.xpm
 gs_m_m.xbm
 gs_s.xbm
 gs_s.xpm
 gs_s_m.xbm
 gs_t.xbm
 gs_t.xpm
 gs_t_m.xbm
 gs_wl1_e.ps
 gs_wl2_e.ps
 gs_wl5_e.ps
 gslp.ps
 gsnup.ps
 ht_ccsto.ps
 image-qa.ps
 jispaper.ps
 landscap.ps
 lines.ps
 mkcidfm.ps
 necp2x.upp
 necp2x6.upp
 pdf2dsc.ps
 pdf_info.ps
 pf2afm.ps
 pfbtopfa.ps
 ppath.ps
 pphs.ps
 prfont.ps
 printafm.ps
 ps2ai.ps
 ps2epsi.ps
 ras1.upp
 ras24.upp
 ras3.upp
 ras32.upp
 ras4.upp
 ras8m.upp
 rollconv.ps
 s400a1.upp
 s400b1.upp
 sharp.upp
 sipixa6.upp
 st640ih.upp
 st640ihg.upp
 st640p.upp
 st640pg.upp
 st640pl.upp
 st640plg.upp
 stc.upp
 stc1520h.upp
 stc2.upp
 stc200_h.upp
 stc2_h.upp
 stc2s_h.upp
 stc300.upp
 stc300bl.upp
 stc300bm.upp
 stc500p.upp
 stc500ph.upp
 stc600ih.upp
 stc600p.upp
 stc600pl.upp
 stc640p.upp
 stc740ih.upp
 stc800ih.upp
 stc800p.upp
 stc800pl.upp
 stc_h.upp
 stc_l.upp
 stcany.upp
 stcany_h.upp
 stcinfo.ps
 stcolor.ps
 stocht.ps
 traceimg.ps
 traceop.ps
 uninfo.ps
 viewcmyk.ps
 viewgif.ps
 viewjpeg.ps
 viewmiff.ps
 viewpbm.ps
 viewpcx.ps
 viewps2a.ps
 winmaps.ps
 zeroline.ps
share/man/de/man1/
 dvipdf.1.gz
 eps2eps.1.gz
 gsnd.1.gz
 pdf2dsc.1.gz
 pdf2ps.1.gz
 printafm.1.gz
 ps2ascii.1.gz
 ps2pdf.1.gz
 ps2pdf12.1.gz
 ps2pdf13.1.gz
 ps2pdf14.1.gz
 ps2ps.1.gz
share/man/man1/
 dvipdf.1.gz
 eps2eps.1.gz
 gs.1.gz
 gsbj.1.gz
 gsdj.1.gz
 gsdj500.1.gz
 gslj.1.gz
 gslp.1.gz
 gsnd.1.gz
 pdf2dsc.1.gz
 pdf2ps.1.gz
 pf2afm.1.gz
 pfbtopfa.1.gz
 printafm.1.gz
 ps2ascii.1.gz
 ps2epsi.1.gz
 ps2pdf.1.gz
 ps2pdf12.1.gz
 ps2pdf13.1.gz
 ps2pdf14.1.gz
 ps2pdfwr.1.gz
 ps2ps.1.gz
@dir lib/ghostscript/%%GV%%


[FILE:30:manifests/plist.x11]
lib/ghostscript/%%GV%%/X11.so


[FILE:646:manifests/plist.docs]
share/doc/ghostscript/%%GV%%/
 API.htm
 C-style.htm
 Commprod.htm
 DLL.htm
 Deprecated.htm
 Develop.htm
 Devices.htm
 Drivers.htm
 Fonts.htm
 GS9_Color_Management.pdf
 History9.htm
 Install.htm
 Language.htm
 Lib.htm
 Make.htm
 News.htm
 Ps-style.htm
 Ps2epsi.htm
 Psfiles.htm
 Readme.htm
 Release.htm
 SavedPages.htm
 Source.htm
 Unix-lpr.htm
 Use.htm
 VectorDevices.htm
 WhatIsGS.htm
 gdevds32.c
 gs-style.css
 index.html
 index.js
 pscet_status.txt
 sample_downscale_device.htm
 style.css
 subclass.htm
 thirdparty.htm
share/doc/ghostscript/%%GV%%/images/
 Artifex_logo.png
 favicon.png
 ghostscript_logo.png
 hamburger-light.png
 x-light.png


[FILE:2692:patches/patch-Resource_Init_cidfmap]
--- Resource/Init/cidfmap.orig	2020-09-14 13:40:08 UTC
+++ Resource/Init/cidfmap
@@ -37,6 +37,67 @@
 %   /ShinGo-Bold   /HeiseiKakuGo-W5 ;
 %   /Ryumin-Medium << /FileType /TrueType /Path (H:/AuxFiles/Fonts/BATANG.TTC) /SubfontID 3 /CSI [(Japan1) 2] >> ;
 %   /Ryumin-Medium << /FileType /TrueType /Path (windir) getenv not {(c:/windows)}if (/Fonts/BATANG.TTC)concatstrings /SubfontID 3 /CSI [(Japan1) 2] >> ;
+/Ryumin-Light << /FileType /TrueType /Path (std.ja_JP/Ryumin-Light) /SubfontID 0 /CSI [(Japan1) 6] >> ;
+/GothicBBB-Medium << /FileType /TrueType /Path (std.ja_JP/GothicBBB-Medium) /SubfontID 0 /CSI [(Japan1) 6] >> ;
+
+/Ryumin-Medium		/Ryumin-Light ;
+/Ryumin-Regular		/Ryumin-Light ;
+/RyuminPro-Light	/Ryumin-Light ;
+
+/GothicBBBPro-Medium	/GothicBBB-Medium ;
+
+/KozGoPro-Bold		/GothicBBB-Medium ;
+/KozGoPro-Heavy		/GothicBBB-Medium ;
+/KozGoPro-Medium	/GothicBBB-Medium ;
+/KozGoPro-Regular	/GothicBBB-Medium ;
+
+/KozMinPro-Bold		/Ryumin-Light ;
+/KozMinPro-Light	/Ryumin-Light ;
+/KozMinPro-Medium	/Ryumin-Light ;
+/KozMinPro-Regular	/Ryumin-Light ;
+
+/HiraKakuPro-W3		/GothicBBB-Medium ;
+/HiraKakuPro-W6		/GothicBBB-Medium ;
+/HiraKakuStd-W8		/GothicBBB-Medium ;
+
+/HiraMaruPro-W4		/GothicBBB-Medium ;
+
+/HiraMinPro-W3		/Ryumin-Light ;
+
+/HeiseiMin-W3		/Ryumin-Light ;
+/HeiseiKakuGo-W5	/GothicBBB-Medium ;
+
+/FutoMinA101-Bold	/Ryumin-Light ;
+/FutoMinA101Pro-Bold	/Ryumin-Light ;
+/FutoGoB101-Bold	/GothicBBB-Medium ;
+/FutoGoB101Pro-Bold	/GothicBBB-Medium ;
+
+/Jun101-Light		/Ryumin-Light ;
+/Jun101Pro-Light	/Ryumin-Light ;
+
+/MidashiGo-MB31		/GothicBBB-Medium ;
+/MidashiGoPro-MB31	/GothicBBB-Medium ;
+
+/MidashiMinPro-MA31	/Ryumin-Light ;
+
+/MS-Mincho		/Ryumin-Light ;
+/MS-PMincho		/Ryumin-Light ;
+/MS-Gothic		/GothicBBB-Medium ;
+/MS-PGothic		/GothicBBB-Medium ;
+
+%/Munhwa-Regular	/Munhwa-Regular ;
+%/MunhwaGothic-Regular	/MunhwaGothic-Regular ;
+%/Munhwa-Bold		/Munhwa-Bold ;
+%/MunhwaGothic-Bold	/MunhwaGothic-Bold ;
+
+/HYGoThic-Medium	/MunhwaGothic-Regular ;
+/HYSMyeongJo-Medium	/Munhwa-Regular ;
+/HYRGoThic-Medium	/MunhwaGothic-Bold ;
+
+/STHeiti-Regular << /FileType /TrueType /Path (std.zh_CN/STHeiti-Regular) /SubfontID 0 /CSI [(CNS1) 5] >> ;
+/STSong-Light << /FileType /TrueType /Path (std.zh_CN/STSong-Light) /SubfontID 0 /CSI [(GB1) 5] >> ;
+/MSung-Light << /FileType /TrueType /Path (std.zh_CN/MSung-Light) /SubfontID 0 /CSI [(CNS1) 5] >> ;
+/MHei-Medium << /FileType /TrueType /Path (std.zh_CN/MHei-Medium) /SubfontID 0 /CSI [(GB1) 5] >> ;
 %
 %   NOTE: getenv returns a boolean to indicate success of or failure, as well as the value on success. In the example, it uses this
 %         to include a default value should getenv fail.


[FILE:244:patches/patch-base_ttobjs.h]
Avoid GS conflict on older SunOS.

--- base/ttobjs.h.orig	2020-09-14 13:40:08 UTC
+++ base/ttobjs.h
@@ -43,6 +43,10 @@
 #include "setjmp_.h"
 #include "ttfoutl.h"
 
+#ifdef __sun
+#undef GS
+#endif
+
 #ifdef __cplusplus
   extern "C" {
 #endif


[FILE:4050:patches/patch-configure]
--- configure.orig	2020-09-14 13:40:41 UTC
+++ configure
@@ -4632,7 +4632,7 @@ case $host in
             CC_VISIBILITY_FLAGS_TO_TRY="-fvisibility=hidden"
         fi
         ;;
-        *bsd*)
+        *bsd*|*dragonfly*)
         if test $GCC = yes; then
             CC_OPT_FLAGS_TO_TRY="-O2 -DNDEBUG"
             CC_DBG_FLAGS_TO_TRY="-gdwarf-2 -g3 -O0"
@@ -5505,7 +5505,7 @@ if test "${enable_threadsafe+set}" = set
 fi
 
 if test x$enable_threadsafe = xyes ; then
-    CFLAGS="-DGS_THREADSAFE"
+    CFLAGS="$CFLAGS -DGS_THREADSAFE"
 fi
 
 
@@ -6181,7 +6181,6 @@ if ${ac_cv_lib_dl_dlopen+:} false; then
   $as_echo_n "(cached) " >&6
 else
   ac_check_lib_save_LIBS=$LIBS
-LIBS="-ldl  $LIBS"
 cat confdefs.h - <<_ACEOF >conftest.$ac_ext
 /* end confdefs.h.  */
 
@@ -6214,7 +6213,7 @@ $as_echo "$ac_cv_lib_dl_dlopen" >&6; }
 if test "x$ac_cv_lib_dl_dlopen" = xyes; then :
   ac_fn_c_check_header_mongrel "$LINENO" "dlfcn.h" "ac_cv_header_dlfcn_h" "$ac_includes_default"
 if test "x$ac_cv_header_dlfcn_h" = xyes; then :
-  GCFLAGS="$GCFLAGS -DHAVE_LIBDL=1";LIBS="-ldl $LIBS"
+  GCFLAGS="$GCFLAGS -DHAVE_LIBDL=1";
 fi
 
 
@@ -11387,42 +11386,42 @@ if test x$enable_threadsafe = xyes; then
 
   for ntsdev in $NTS_DEVS ; do
     NTS_EXCLUDES="$(echo \"$P_DEVS0{@:0}\" | grep -o $ntsdev) $NTS_EXCLUDES"
-    P_DEVS0=`echo $P_DEVS0 | sed "s/\b$ntsdev\b//g"`
+    P_DEVS0=`echo $P_DEVS0 | sed "s/[[:<:]]$ntsdev[[:>:]]//g"`
   done
 
   for ntsdev in $NTS_DEVS ; do
     NTS_EXCLUDES="$(echo \"$F_DEVS0{@:0}\" | grep -o $ntsdev) $NTS_EXCLUDES"
-    F_DEVS0=`echo $F_DEVS0 | sed "s/\b$ntsdev\b//g"`
+    F_DEVS0=`echo $F_DEVS0 | sed "s/[[:<:]]$ntsdev[[:>:]]//g"`
   done
 
   for ntsdev in $NTS_DEVS ; do
     NTS_EXCLUDES="$(echo \"$CUPS_DEVS0{@:0}\" | grep -o $ntsdev) $NTS_EXCLUDES"
-    CUPS_DEVS0=`echo $CUPS_DEVS0 | sed "s/\b$ntsdev\b//g"`
+    CUPS_DEVS0=`echo $CUPS_DEVS0 | sed "s/[[:<:]]$ntsdev[[:>:]]//g"`
   done
 
   for ntsdev in $NTS_DEVS ; do
     NTS_EXCLUDES="$(echo \"$XPS_DEVS0{@:0}\" | grep -o $ntsdev) $NTS_EXCLUDES"
-    XPS_DEVS0=`echo $XPS_DEVS0 | sed "s/\b$ntsdev\b//g"`
+    XPS_DEVS0=`echo $XPS_DEVS0 | sed "s/[[:<:]]$ntsdev[[:>:]]//g"`
   done
 
   for ntsdev in $NTS_DEVS ; do
     NTS_EXCLUDES="$(echo \"$IJS_DEVS0{@:0}\" | grep -o $ntsdev) $NTS_EXCLUDES"
-    IJS_DEVS0=`echo $IJS_DEVS0 | sed "s/\b$ntsdev\b//g"`
+    IJS_DEVS0=`echo $IJS_DEVS0 | sed "s/[[:<:]]$ntsdev[[:>:]]//g"`
   done
 
   for ntsdev in $NTS_DEVS ; do
     NTS_EXCLUDES="$(echo \"$PNG_DEVS0{@:0}\" | grep -o $ntsdev) $NTS_EXCLUDES"
-    PNG_DEVS0=`echo $PNG_DEVS0 | sed "s/\b$ntsdev\b//g"`
+    PNG_DEVS0=`echo $PNG_DEVS0 | sed "s/[[:<:]]$ntsdev[[:>:]]//g"`
   done
 
   for ntsdev in $NTS_DEVS ; do
     NTS_EXCLUDES="$(echo \"$X11_DEVS0{@:0}\" | grep -o $ntsdev) $NTS_EXCLUDES"
-    X11_DEVS0=`echo $X11_DEVS0 | sed "s/\b$ntsdev\b//g"`
+    X11_DEVS0=`echo $X11_DEVS0 | sed "s/[[:<:]]$ntsdev[[:>:]]//g"`
   done
 
   for ntsdev in $NTS_DEVS ; do
     NTS_EXCLUDES="$(echo \"$JBIG2_DEVS{@:0}\" | grep -o $ntsdev) $NTS_EXCLUDES"
-    JBIG2_DEVS=`echo $JBIG2_DEVS | sed "s/\b$ntsdev\b//g"`
+    JBIG2_DEVS=`echo $JBIG2_DEVS | sed "s/[[:<:]]$ntsdev[[:>:]]//g"`
   done
 
   NTS_EXCLUDES=`echo "$NTS_EXCLUDES" | tr " " "\n" | sort | uniq | tr "\n" " "`
@@ -11601,7 +11600,7 @@ case $host in
       GPDL_SONAME_MAJOR="lib\$(GPDL${libname3}"
       GPDL_SONAME_MAJOR_MINOR="cyg\$(GPDL${libname2}"
     ;;
-    *bsd*)
+    *bsd*|*dragonfly*)
       DYNAMIC_CFLAGS="-fPIC $DYNAMIC_CFLAGS"
       GS_DYNAMIC_LDFLAGS="-shared -Wl,\$(LD_SET_DT_SONAME)\$(LDFLAGS_SO_PREFIX)\$(GS_SONAME_MAJOR)"
       PCL_DYNAMIC_LDFLAGS="-shared -Wl,\$(LD_SET_DT_SONAME)\$(LDFLAGS_SO_PREFIX)\$(PCL_SONAME_MAJOR)"
@@ -11699,7 +11698,7 @@ if test "${enable_dynamic+set}" = set; t
         OPT_CFLAGS="$DYNAMIC_CFLAGS $OPT_CFLAGS"
         DBG_CFLAGS="$DYNAMIC_CFLAGS $DBG_CFLAGS"
       ;;
-      *bsd*)
+      *bsd*|*dragonfly*)
         DYNAMIC_DEVS="\$(GLOBJDIR)/X11.so"
         DYNAMIC_FLAGS="-DGS_DEVS_SHARED -DGS_DEVS_SHARED_DIR=\\\"\$(gssharedir)\\\""
         X11_DEVS=""

