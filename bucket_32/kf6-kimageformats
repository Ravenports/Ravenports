# Buildsheet autogenerated by ravenadm tool -- Do not edit.

NAMEBASE=		kf6-kimageformats
VERSION=		6.3.0
KEYWORDS=		graphics
VARIANTS=		standard
SDESC[standard]=	KF6 plugins for QImage extra file formats support
HOMEPAGE=		https://api.kde.org/frameworks/kimageformats/html/index.html
CONTACT=		Michael_Reim[kraileth@elderlinux.org]

DOWNLOAD_GROUPS=	main
SITES[main]=		https://download.kde.org/stable/frameworks/6.3/
DISTFILE[1]=		kimageformats-6.3.0.tar.xz:main
DIST_SUBDIR=		kde6
DF_INDEX=		1
SPKGS[standard]=	single

OPTIONS_AVAILABLE=	none
OPTIONS_STANDARD=	none

BUILD_DEPENDS=		brotli:dev:standard
			highway:dev:standard
			kf6-extra-cmake-modules:primary:standard
			kf6-karchive:dev:standard
			libavif:dev:standard
			libheif:dev:standard
			libjxl:dev:standard
			libraw:dev:standard
			openexr:dev:standard
			qt6-qtbase:dev:standard
BUILDRUN_DEPENDS=	kf6-kconfig:primary:standard
			kf6-karchive:primary:standard
			libavif:primary:standard
			libheif:primary:standard
			libjxl:primary:standard
			libraw:primary:standard
			openexr:primary:standard
			qt6-qtbase:primary:standard

USES=			cpe clang cmake pkgconfig

DISTNAME=		kimageformats-6.3.0

LICENSE=		BSD2CLAUSE:single BSD3CLAUSE:single LGPL20+:single
			LGPL21+:single
LICENSE_TERMS=		single:{{WRKDIR}}/TERMS
LICENSE_FILE=		BSD2CLAUSE:{{WRKSRC}}/LICENSES/BSD-2-Clause.txt
			BSD3CLAUSE:{{WRKSRC}}/LICENSES/BSD-3-Clause.txt
			LGPL20+:{{WRKSRC}}/LICENSES/LGPL-2.0-or-later.txt
			LGPL21+:{{WRKSRC}}/LICENSES/LGPL-2.1-or-later.txt
LICENSE_SCHEME=		multi

CPE_PRODUCT=		kimageformats
CPE_VENDOR=		kde
FPC_EQUIVALENT=		graphics/kf6-kimageformats

SOVERSION=		6.3.0

CMAKE_ARGS=		-DCMAKE_PREFIX_PATH:PATH={{PREFIX}}/lib/qt6/cmake

post-stage:
.for p in ani avif eps exr hdr jxl kra ora pcx pic psd qoi ras raw rgb tga xcf
	${STRIP_CMD} ${STAGEDIR}${PREFIX}/lib/qt6/plugins/imageformats/kimg_${p}.so
.endfor

post-extract:
	${ECHO} "Terms extracted from 'src/imageformats/jxl.cpp':" > ${WRKDIR}/TERMS
	${SED} -n '/include/!p;//q' ${WRKSRC}/src/imageformats/jxl.cpp >> ${WRKDIR}/TERMS
	${ECHO} "Terms extracted from 'src/imageformats/fastmath_p.h':" >> ${WRKDIR}/TERMS
	${SED} -n '/ifndef/!p;//q' ${WRKSRC}/src/imageformats/fastmath_p.h >> ${WRKDIR}/TERMS
	${ECHO} "Terms extracted from 'src/imageformats/pic_p.h':" >> ${WRKDIR}/TERMS
	${SED} -n '/ifndef/!p;//q' ${WRKSRC}/src/imageformats/pic_p.h >> ${WRKDIR}/TERMS
	${ECHO} "Terms extracted from 'src/imageformats/gimp_p.h':" >> ${WRKDIR}/TERMS
	${SED} -n '/ifndef/!p;//q' ${WRKSRC}/src/imageformats/gimp_p.h >> ${WRKDIR}/TERMS

[FILE:227:descriptions/desc.single]
KImageFormats provides additional image format plugins for QtGui. As such 
it is not required for the compilation of any other software, but may be a 
runtime requirement for Qt-based software to support certain image formats.


[FILE:110:distinfo]
0ed40771bd35ed53af7c4a5216111bef282275b2eb384ae0076c917db20c1210     15925692 kde6/kimageformats-6.3.0.tar.xz


[FILE:252:manifests/plist.single]
lib/qt6/plugins/imageformats/
 kimg_ani.so
 kimg_avif.so
 kimg_eps.so
 kimg_exr.so
 kimg_hdr.so
 kimg_jxl.so
 kimg_kra.so
 kimg_ora.so
 kimg_pcx.so
 kimg_pic.so
 kimg_psd.so
 kimg_qoi.so
 kimg_ras.so
 kimg_raw.so
 kimg_rgb.so
 kimg_tga.so
 kimg_xcf.so


[FILE:297:patches/patch-metainfo.yaml]
--- metainfo.yaml.orig	2024-05-31 13:26:00 UTC
+++ metainfo.yaml
@@ -4,6 +4,9 @@ type: functional
 platforms:
     - name: Linux
     - name: FreeBSD
+    - name: DragonFly
+    - name: NetBSD
+    - name: MidnightBSD
     - name: macOS
     - name: Windows
       note: No EPS support on Windows

