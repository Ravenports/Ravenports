# Buildsheet autogenerated by ravenadm tool -- Do not edit.

NAMEBASE=		llvm-libunwind
VERSION=		15.0.4
KEYWORDS=		lang devel
VARIANTS=		standard
SDESC[standard]=	LLVM version of libunwind library
HOMEPAGE=		https://github.com/llvm-mirror/libunwind
CONTACT=		nobody

DOWNLOAD_GROUPS=	main
SITES[main]=		https://github.com/llvm/llvm-project/releases/download/llvmorg-15.0.4/
DISTFILE[1]=		libunwind-15.0.4.src.tar.xz:main
DISTFILE[2]=		libcxx-15.0.4.src.tar.xz:main
DISTFILE[3]=		llvm-15.0.4.src.tar.xz:main
DISTFILE[4]=		cmake-15.0.4.src.tar.xz:main
DF_INDEX=		1 2 3 4
SPKGS[standard]=	single

OPTIONS_AVAILABLE=	none
OPTIONS_STANDARD=	none

BUILD_DEPENDS=		llvm:single:standard

USES=			cmake cclibs:single

DISTNAME=		libunwind-15.0.4.src

LICENSE=		CUSTOM1:single
LICENSE_NAME=		CUSTOM1:"University of Illinois/NCSA Open Source License"
LICENSE_FILE=		CUSTOM1:{{WRKSRC}}/LICENSE.TXT
LICENSE_SCHEME=		solo

CMAKE_BUILD_TYPE=	Release

SOVERSION=		1.0

CMAKE_ARGS=		-DLLVM_HOST_TRIPLE:STRING="{{CONFIGURE_TARGET}}"

post-install:
	${INSTALL_DATA} ${WRKSRC}/include/*.h ${STAGEDIR}${PREFIX}/include/
	${STRIP_CMD} ${STAGEDIR}${PREFIX}/lib/libunwind.${LIBEXT}

post-extract:
	# LIBUNWIND_LIBCXX_PATH is ignored (Another llvm 12.0.0 issue)
	${MV} ${WRKDIR}/libcxx-15.0.4.src ${WRKDIR}/libcxx
	# can't build c++ or libunwind separately anymore
	${MV} ${WRKDIR}/llvm-15.0.4.src ${WRKDIR}/llvm
	# Install more cmake functions
	${CP} ${WRKDIR}/cmake-15.0.4.src/Modules/* \
		${WRKSRC}/cmake/Modules/

[FILE:618:descriptions/desc.single]
libunwind is an implementation of the interface defined by the HP libunwind
project. It was contributed by Apple as a way to enable clang++ to port to
platforms that do not have a system unwinder. It is intended to be a small
and fast implementation of the ABI, leaving off some features of HP's
libunwind that never materialized (e.g. remote unwinding).

The unwinder has two levels of API. The high level APIs are the _Unwind_*
functions which implement functionality required by __cxa_* exception
functions. The low level APIs are the unw_* functions which are an
interface defined by the old HP libunwind project.


[FILE:412:distinfo]
a424d9357a0428c2be0c9bce8691dffa74fa5d7d6d6ecb2f4297a6c58ccad070       113360 libunwind-15.0.4.src.tar.xz
425160c72644123860dcc5d0e1eef2064cb7c65c19328ab9e0b316dab1fc2af3      3334192 libcxx-15.0.4.src.tar.xz
60aca410cae2b92665c0aa769bcd11ed17030b9ecd76115138c97d94a27a992f     52927372 llvm-15.0.4.src.tar.xz
9df45bf3a0a46264d5007485592381bbaf50f034b4155290cb0d917539d8facf         6972 cmake-15.0.4.src.tar.xz


[FILE:178:manifests/plist.single]
include/
 __libunwind_config.h
 libunwind.h
 unwind.h
 unwind_arm_ehabi.h
 unwind_itanium.h
lib/
 libunwind.a
 libunwind.so
 libunwind.so.%%SOMAJOR%%
 libunwind.so.%%SOVERSION%%

