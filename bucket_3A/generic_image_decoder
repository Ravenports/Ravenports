# Buildsheet autogenerated by ravenadm tool -- Do not edit.

NAMEBASE=		generic_image_decoder
VERSION=		06
KEYWORDS=		graphics ada
VARIANTS=		standard
SDESC[standard]=	Multi-format image decoder library for Ada
HOMEPAGE=		http://gen-img-dec.sourceforge.net/
CONTACT=		John_Marino[draco@marino.st]

DOWNLOAD_GROUPS=	main
SITES[main]=		SF/gen-img-dec
DISTFILE[1]=		gid-06.zip:main
DF_INDEX=		1
SPKGS[standard]=	complete
			primary
			docs

OPTIONS_AVAILABLE=	none
OPTIONS_STANDARD=	none

USES=			dos2unix gprbuild

DISTNAME=		gid

LICENSE=		MIT:primary
LICENSE_FILE=		MIT:{{WRKDIR}}/LICENSE
LICENSE_SCHEME=		solo

FPC_EQUIVALENT=		graphics/generic_image_decoder

MAKE_ENV=		Build_Mode=Fast_but_checked

post-patch:
	${REINPLACE_CMD} -e "s|-j2|-j${MAKE_JOBS_NUMBER}|" \
		${WRKSRC}/gid.gpr

do-build:
	(cd ${WRKSRC} && ${SETENV} ${MAKE_ENV} gprbuild -p -P construct)
	(cd ${WRKSRC} && ${SETENV} ${MAKE_ENV} gprbuild -P gid)

post-extract:
	${CP} ${FILESDIR}/construct.gpr ${WRKSRC}
	${MKDIR} ${WRKSRC}/src ${WRKDIR}/data
	${MV} ${WRKSRC}/gid_work.xls ${WRKDIR}/data
	(cd ${WRKSRC}; ${MV} *.ad[bs] src)
	${AWK} '/^with / {exit}; {print}' ${WRKSRC}/src/gid.ads \
		> ${WRKDIR}/LICENSE

do-install:
	${MKDIR} ${STAGEDIR}${PREFIX}/lib/gnat \
		${STAGEDIR}${PREFIX}/lib/generic_image_decoder \
		${STAGEDIR}${PREFIX}/include/generic_image_decoder \
		${STAGEDIR}${STD_DOCDIR}
	${INSTALL_DATA} ${FILESDIR}/generic_image_decoder.gpr \
		${STAGEDIR}${PREFIX}/lib/gnat
	${INSTALL_DATA} ${WRKSRC}/src/* \
		${STAGEDIR}${PREFIX}/include/generic_image_decoder
	${INSTALL_DATA} ${WRKSRC}/lib/*  \
		${STAGEDIR}${PREFIX}/lib/generic_image_decoder
	(cd ${WRKSRC}/test && ${INSTALL_PROGRAM} to_bmp mini \
		${STAGEDIR}${PREFIX}/bin)
	${INSTALL_DATA} ${WRKSRC}/gid.txt ${STAGEDIR}${STD_DOCDIR}

[FILE:626:descriptions/desc.primary]
The Generic Image Decoder (GID) is an Ada package for decoding a broad
variety on image formats from any data stream to any kind of medium.
Examples include in-memory bitmap, a GUI objecct, another stream, floating
point data for scientific calculations, a browser element or a device.
Animations are also supported.  GID features:

  * Standalone; requires no other libraries or bindings
  * Completely portable - no OS, CPU, or compiler dependencies
  * Task safe
  * Endian-neutral
  * Free and open source
  * Pure Ada95 (suitable for Ada2005 and Ada2012 projects)

Currently supports BMP, GIF, JPEG, PNG and TGA formats.


[FILE:89:distinfo]
0fb0e66a90d16ca5cb7325672fcdf596f3a47e84bb5a75504bdf645ea7dbbe2d       107762 gid-06.zip


[FILE:815:manifests/plist.primary]
bin/
 mini
 to_bmp
include/generic_image_decoder/
 gid-buffering.adb
 gid-buffering.ads
 gid-color_tables.adb
 gid-color_tables.ads
 gid-decoding_bmp.adb
 gid-decoding_bmp.ads
 gid-decoding_gif.adb
 gid-decoding_gif.ads
 gid-decoding_jpg.adb
 gid-decoding_jpg.ads
 gid-decoding_png-huffman.adb
 gid-decoding_png-huffman.ads
 gid-decoding_png.adb
 gid-decoding_png.ads
 gid-decoding_pnm.adb
 gid-decoding_pnm.ads
 gid-decoding_tga.adb
 gid-decoding_tga.ads
 gid-headers.adb
 gid-headers.ads
 gid.adb
 gid.ads
lib/generic_image_decoder/
 gid-buffering.ali
 gid-color_tables.ali
 gid-decoding_bmp.ali
 gid-decoding_gif.ali
 gid-decoding_jpg.ali
 gid-decoding_png-huffman.ali
 gid-decoding_png.ali
 gid-decoding_pnm.ali
 gid-decoding_tga.ali
 gid-headers.ali
 gid.ali
 libgenimgdec.a
lib/gnat/generic_image_decoder.gpr


[FILE:40:manifests/plist.docs]
share/doc/generic_image_decoder/gid.txt


[FILE:320:patches/patch-gid.gpr]
--- gid.gpr.orig	2014-03-21 21:26:29.000000000 +0000
+++ gid.gpr
@@ -4,7 +4,7 @@
 --
 project GID is
 
-   for Source_Dirs use (".", "test");
+   for Source_Dirs use ("src", "test");
    for Exec_Dir use "test";
    type Build_Mode_Type is
       ("Debug", "Fast_but_checked", "Fast", "Small", "Smallest", "Profiling");


[FILE:566:files/construct.gpr]
project Construct is

   for Languages    use ("ada");
   for Source_Dirs  use ("src");
   for Object_Dir   use "obj_safer";
   for Library_Name use "genimgdec";
   for Library_Dir  use "lib";
   for Library_Kind use "static";

   package Compiler is
      for Default_Switches ("ada") use ("-O3", "-gnato", "-ffunction-sections",
         "-funroll-loops", "-fpeel-loops", "-ftracer", "-funswitch-loops",
         "-fweb", "-frename-registers");
   end Compiler;

   package Builder is
      for Default_Switches ("ada") use ("-C");
   end Builder;

end Construct;


[FILE:306:files/generic_image_decoder.gpr]
project Generic_Image_Decoder is
   for Languages        use ("ada");
   for Library_Name     use "genimgdec";
   for Source_Dirs      use ("../../include/generic_image_decoder");
   for Library_Dir      use "../../lib/generic_image_decoder";
   for Externally_Built use "true";
end Generic_Image_Decoder;

