# Buildsheet autogenerated by ravenadm tool -- Do not edit.

NAMEBASE=		pkgconf
VERSION=		1.9.5
KEYWORDS=		devel
VARIANTS=		standard
SDESC[standard]=	Utility to configure compiler and linker flags
HOMEPAGE=		https://github.com/pkgconf/pkgconf
CONTACT=		nobody

DOWNLOAD_GROUPS=	main
SITES[main]=		https://distfiles.dereferenced.org/pkgconf/
			http://files.etoilebsd.net/pkgconf/
DISTFILE[1]=		pkgconf-1.9.5.tar.xz:main
DF_INDEX=		1
SPKGS[standard]=	complete
			primary
			dev
			man

OPTIONS_AVAILABLE=	none
OPTIONS_STANDARD=	none

USES=			cpe libtool

DISTNAME=		pkgconf-1.9.5

LICENSE=		ISCL:primary
LICENSE_FILE=		ISCL:{{WRKSRC}}/COPYING
LICENSE_SCHEME=		solo

FPC_EQUIVALENT=		devel/pkgconf

MUST_CONFIGURE=		gnu
CONFIGURE_ARGS=		--with-pkg-config-dir=/usr/lib/pkgconfig:{{PREFIX}}/lib/pkgconfig
			--with-system-libdir=/lib:/usr/lib
			--with-system-includedir=/usr/include

INSTALL_TARGET=		install-strip
SOVERSION=		4.0.0

TEST_TARGET=		check

post-install:
	${LN} -sf pkgconf ${STAGEDIR}${PREFIX}/bin/pkg-config
	${RM} -r ${STAGEDIR}${PREFIX}/share/doc/pkgconf

pre-configure:
	${REINPLACE_CMD} -e 's|version_type=sunos|version_type=freebsd-elf|' \
		${WRKSRC}/configure

[FILE:239:descriptions/desc.primary]
pkgconf is a program which helps to configure compiler and linker flags for
development frameworks. It is similar to pkg-config, but was written from
scratch in Summer of 2011 to replace pkg-config, which now needs itself to
build itself.


[FILE:99:distinfo]
1ac1656debb27497563036f7bffc281490f83f9b8457c0d60bcfb638fb6b6171       310068 pkgconf-1.9.5.tar.xz


[FILE:117:manifests/plist.primary]
bin/
 bomtool
 pkg-config
 pkgconf
lib/
 libpkgconf.so.%%SOMAJOR%%
 libpkgconf.so.%%SOVERSION%%
share/aclocal/pkg.m4


[FILE:152:manifests/plist.dev]
include/pkgconf/libpkgconf/
 bsdstubs.h
 iter.h
 libpkgconf-api.h
 libpkgconf.h
 stdinc.h
lib/
 libpkgconf.a
 libpkgconf.so
lib/pkgconfig/libpkgconf.pc


[FILE:106:manifests/plist.man]
share/man/man1/pkgconf.1.gz
share/man/man5/
 pc.5.gz
 pkgconf-personality.5.gz
share/man/man7/pkg.m4.7.gz


[FILE:291:patches/patch-libpkgconf_bsdstubs.c]
--- libpkgconf/bsdstubs.c.orig	2023-01-20 21:41:30 UTC
+++ libpkgconf/bsdstubs.c
@@ -17,6 +17,9 @@
  * OR IN CONNECTION WITH THE USE OR PERFORMANCE OF THIS SOFTWARE.
  */
 
+#ifdef __NetBSD__
+#define _OPENBSD_SOURCE
+#endif
 #include <stdlib.h>
 #include <sys/types.h>
 #include <string.h>

