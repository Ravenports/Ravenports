# Buildsheet autogenerated by ravenadm tool -- Do not edit.

NAMEBASE=		apq-base
VERSION=		3.2.0
REVISION=		1
KEYWORDS=		databases ada
VARIANTS=		standard
SDESC[standard]=	APQ Ada95 database base library
HOMEPAGE=		none
CONTACT=		John_Marino[draco@marino.st]

DOWNLOAD_GROUPS=	main
SITES[main]=		FREELOCAL/marino
DISTFILE[1]=		apq-3.2.0.tar.bz2:main
DF_INDEX=		1
SPKGS[standard]=	single

OPTIONS_AVAILABLE=	none
OPTIONS_STANDARD=	none

BUILD_DEPENDS=		bash:primary:standard

USES=			gprbuild

DISTNAME=		apq-3.2.0

LICENSE=		GMGPL:single
LICENSE_TERMS=		single:{{WRKDIR}}/TERMS
LICENSE_FILE=		GMGPL:stock
LICENSE_AWK=		TERMS:"^$$"
LICENSE_SOURCE=		TERMS:{{WRKSRC}}/src/apq.ads
LICENSE_SCHEME=		solo

FPC_EQUIVALENT=		databases/apq

MUST_CONFIGURE=		yes
CONFIGURE_ARGS=		--prefix={{PREFIX}}
			--disable-relocatable
			--work-path={{WRKDIR}}/build
			--processors={{MAKE_JOBS_NUMBER}}

post-patch:
	${REINPLACE_CMD} -e 's|processors=2|gprbuild_params="--autoconf=apq.cgpr"|' \
		${WRKSRC}/configure
	${REINPLACE_CMD} -e 's|-ws|-ws --autoconf=dummy.cgpr|' \
		${WRKSRC}/scripts/buildutil.sh

do-install:
	${MKDIR} ${STAGEDIR}${PREFIX}/share/gpr \
		${STAGEDIR}${PREFIX}/lib/apq/static \
		${STAGEDIR}${PREFIX}/include/apq
	${INSTALL_DATA} ${WRKDIR}/build/include/apq/* \
		${STAGEDIR}${PREFIX}/include/apq
	${INSTALL_DATA} ${WRKDIR}/build/lib/apq/static/*.a* \
		${STAGEDIR}${PREFIX}/lib/apq/static
	${INSTALL_DATA} ${WRKDIR}/build/lib/gnat/apq.gpr \
		${STAGEDIR}${PREFIX}/share/gpr

[FILE:456:descriptions/desc.single]
APQ is a database interface library written in Ada95.  This is the base
library, but it is not useful without a driver.  There are three drivers
available for PostgreSQL, MySQL, and ODBC in separate ports.

Some features:
  * Thick binding
  * Strong typing support
  * Full BLOB support (PGSQL)
  * High performance BLOB I/O via streams
  * Full support for NULL Values
  * Fully portable (database neutral) code possible
  * Four levels of debug tracing


[FILE:96:distinfo]
0a5cf0ecca4a6ed103948221184d21588aacd4e43438ce35dfea4a873679a9d8       115841 apq-3.2.0.tar.bz2


[FILE:132:manifests/plist.single]
include/apq/
 apq.adb
 apq.ads
 apq_helper.adb
 apq_helper.ads
lib/apq/static/
 apq.ali
 apq_helper.ali
 libapq.a
share/gpr/apq.gpr


[FILE:737:patches/patch-gnat_apq.gpr.in]
--- gnat/apq.gpr.in.orig	2012-08-10 02:00:55 UTC
+++ gnat/apq.gpr.in
@@ -42,13 +42,12 @@ project APQ is
 
 	case Debug is
 		when "true" =>
-			for Library_Dir use "../" & Project'Library_Name & "-debug/" & Project'Library_Kind;
+			for Library_Dir use "../../lib/" & Project'Library_Name & "-debug/" & Project'Library_Kind;
 		when "false" =>
-			for Library_Dir use "../" & Project'Library_name & "/" & Project'Library_Kind;
+			for Library_Dir use "../../lib/" & Project'Library_name & "/" & Project'Library_Kind;
 	end case;
 
 
-	for Object_Dir use Project'Library_Dir & "/objects/";
 
 	for Library_Version use "lib" & Project'Library_Name & ".so." & Version;
 	for Externally_Built use External( "APQ_EXTERNALLY_BUILT", "true" );

