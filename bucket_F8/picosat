# Buildsheet autogenerated by ravenadm tool -- Do not edit.

NAMEBASE=		picosat
VERSION=		965
KEYWORDS=		math
VARIANTS=		standard
SDESC[standard]=	Satisfiability (SAT) solver for boolean variables
HOMEPAGE=		http://fmv.jku.at/picosat/
CONTACT=		nobody

DOWNLOAD_GROUPS=	main
SITES[main]=		http://fmv.jku.at/picosat/
DISTFILE[1]=		picosat-965.tar.gz:main
DF_INDEX=		1
SPKGS[standard]=	single

OPTIONS_AVAILABLE=	none
OPTIONS_STANDARD=	none

LICENSE=		MIT:single
LICENSE_FILE=		MIT:{{WRKSRC}}/LICENSE
LICENSE_SCHEME=		solo

FPC_EQUIVALENT=		math/picosat

MUST_CONFIGURE=		yes
CONFIGURE_SCRIPT=	configure.sh
CONFIGURE_ARGS=		--shared
			--static

MAKEFILE=		makefile
SINGLE_JOB=		yes

INSTALL_TARGET=		install-shared

[FILE:449:descriptions/desc.single]
PicoSAT is a satisfiability (SAT) solver for boolean variables in
boolean expressions. A SAT solver can determine if it is possible to
find assignments to boolean variables that would make a given set of
expressions true. If it's satisfiable, it can also show a set of
assignments that make the expression true.

Many problems can be broken down into a large SAT problem (perhaps with
thousands of variables), so SAT solvers have a variety of uses.


[FILE:97:distinfo]
15169b4f28ba8f628f353f6f75a100845cdef4a2244f101a02b6e5a26e46a754        64386 picosat-965.tar.gz


[FILE:129:manifests/plist.single]
bin/
 picogcnf
 picomcs
 picomus
 picosat
include/picosat.h
lib/
 libpicosat.a
 libpicosat.so
 libpicosat.so.1
 libpicosat_pic.a


[FILE:478:patches/patch-configure.sh]
--- configure.sh.orig	2016-01-13 07:19:13 UTC
+++ configure.sh
@@ -108,6 +108,13 @@ then
       fi
       ;;
   esac
+else
+      if [ $debug = yes ]
+      then
+        CFLAGS="$CFLAGS -g"
+      else
+        CFLAGS="$CFLAGS -DNDEBUG"
+      fi
 fi
 
 if [ $rcode = yes ]
@@ -131,8 +138,7 @@ fi
 
 if [ $shared = yes ]
 then
-  TARGETS="$TARGETS libpicosat.so"
-  CFLAGS="$CFLAGS -fPIC"
+  TARGETS="$TARGETS libpicosat.so libpicosat_pic.a"
 fi
 echo "targets ... $TARGETS"
 


[FILE:1352:patches/patch-makefile.in]
--- makefile.in.orig	2016-01-13 07:19:13 UTC
+++ makefile.in
@@ -52,8 +52,35 @@ libpicosat.a: picosat.o version.o
 	ar rc $@ picosat.o version.o
 	ranlib $@
 
-SONAME=-Xlinker -soname -Xlinker libpicosat.so
-libpicosat.so: picosat.o version.o
-	$(CC) $(CFLAGS) -shared -o $@ picosat.o version.o $(SONAME)
+.SUFFIXES:	.o .So
+
+.c.So:
+	$(CC) $(CFLAGS) -fpic -DPIC -o $(.TARGET) -c $(.ALLSRC)
+
+SONAME=-Wl,-soname,libpicosat.so.1
+libpicosat.so.1: picosat.So version.So
+	$(CC) $(CFLAGS) -shared -o $(.TARGET) $(.ALLSRC) $(SONAME)
+
+libpicosat.so: libpicosat.so.1
+	ln -s $(.ALLSRC) $(.TARGET)
+
+libpicosat_pic.a: picosat.So version.So
+	ar rc $(.TARGET) $(.ALLSRC)
+	ranlib $(.TARGET)
+
+install-shared:
+	${BSD_INSTALL_PROGRAM} picosat picomcs picomus picogcnf \
+		${DESTDIR}${PREFIX}/bin/
+	${BSD_INSTALL_DATA} picosat.h ${DESTDIR}${PREFIX}/include
+	${BSD_INSTALL_DATA} libpicosat.a ${DESTDIR}${PREFIX}/lib/
+	${BSD_INSTALL_DATA} libpicosat_pic.a ${DESTDIR}${PREFIX}/lib/
+	${BSD_INSTALL_LIB} libpicosat.so.1 ${DESTDIR}${PREFIX}/lib/
+	(cd ${DESTDIR}${PREFIX}/lib && ln -s libpicosat.so.1 libpicosat.so)
+
+install:
+	${BSD_INSTALL_PROGRAM} picosat picomcs picomus picogcnf \
+		${DESTDIR}${PREFIX}/bin/
+	${BSD_INSTALL_DATA} picosat.h ${DESTDIR}${PREFIX}/include
+	${BSD_INSTALL_DATA} libpicosat.a ${DESTDIR}${PREFIX}/lib/
 
 .PHONY: all clean

