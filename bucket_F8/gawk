# Buildsheet autogenerated by ravenadm tool -- Do not edit.

NAMEBASE=		gawk
VERSION=		5.3.0
KEYWORDS=		lang
VARIANTS=		standard
SDESC[standard]=	GNU version of Awk
HOMEPAGE=		http://www.gnu.org/software/gawk/gawk.html
CONTACT=		nobody

DOWNLOAD_GROUPS=	main
SITES[main]=		GNU/gawk
DISTFILE[1]=		gawk-5.3.0.tar.xz:main
DF_INDEX=		1
SPKGS[standard]=	complete
			primary
			nls
			man

OPTIONS_AVAILABLE=	MPFR
OPTIONS_STANDARD=	MPFR
OPT_ON[all]=		MPFR

BUILD_DEPENDS=		libsigsegv:dev:standard

USES=			makeinfo libtool readline gettext

LICENSE=		GPLv3+:primary
LICENSE_TERMS=		primary:{{WRKDIR}}/TERMS
LICENSE_FILE=		GPLv3+:{{WRKSRC}}/COPYING
LICENSE_AWK=		TERMS:"UPDATE_YEAR"
LICENSE_SOURCE=		TERMS:{{WRKSRC}}/main.c
LICENSE_SCHEME=		solo

INFO=			primary:gawk
			primary:gawkworkflow
			primary:gawkinet
			primary:pm-gawk
FPC_EQUIVALENT=		lang/gawk
INFO_SUBDIR=		.

MUST_CONFIGURE=		gnu
CONFIGURE_ARGS=		AWK={{AWK}}
			--enable-nls
			--with-libintl-prefix={{LOCALBASE}}

INSTALL_TARGET=		install-strip
PLIST_SUB=		VERSION=5.3.0

[MPFR].DESCRIPTION=			Support multi-precision floating-point computation
[MPFR].BUILDRUN_DEPENDS_ON=		mpfr:shared:standard
[MPFR].BUILD_DEPENDS_ON=		mpfr:static:standard
[MPFR].CONFIGURE_ARGS_OFF=		--without-gmp
					--without-mpfr

post-extract:
	# ensure static build
	${RM} ${LOCALBASE}/lib/libsigsegv.so

[FILE:355:descriptions/desc.primary]
The GNU implementation of awk is called gawk; it is fully upward
compatible with the System V Release 4 version of awk.  gawk is also
upward compatible with the POSIX specification of the awk language.
This means that all properly written awk programs should work with gawk.
Thus, usually no distinction between gawk and other awk implemenations
is made.


[FILE:96:distinfo]
ca9c16d3d11d0ff8c69d79dc0b47267e1329a69b39b799895604ed447d3ca90b      3436180 gawk-5.3.0.tar.xz


[FILE:835:manifests/plist.primary]
bin/
 gawk
 gawk-%%VERSION%%
 gawkbug
etc/profile.d/
 gawk.csh
 gawk.sh
include/gawkapi.h
lib/gawk/
 filefuncs.so
 fnmatch.so
 fork.so
 inplace.so
 intdiv.so
 ordchr.so
 readdir.so
 readfile.so
 revoutput.so
 revtwoway.so
 rwarray.so
 time.so
libexec/awk/
 grcat
 pwcat
share/awk/
 assert.awk
 bits2str.awk
 cliff_rand.awk
 ctime.awk
 ftrans.awk
 getopt.awk
 gettime.awk
 group.awk
 have_mpfr.awk
 inplace.awk
 intdiv0.awk
 isnumeric.awk
 join.awk
 libintl.awk
 noassign.awk
 ns_passwd.awk
 ord.awk
 passwd.awk
 processarray.awk
 quicksort.awk
 readable.awk
 readfile.awk
 rewind.awk
 round.awk
 shellquote.awk
 strtonum.awk
 tocsv.awk
 walkarray.awk
 zerofile.awk
share/info/
 gawk_api-figure1.png
 gawk_api-figure2.png
 gawk_api-figure3.png
 gawk_array-elements.png
 gawk_general-program.png
 gawk_process-flow.png
 gawk_statist.jpg


[FILE:798:manifests/plist.nls]
share/locale/bg/LC_MESSAGES/gawk.mo
share/locale/ca/LC_MESSAGES/gawk.mo
share/locale/da/LC_MESSAGES/gawk.mo
share/locale/de/LC_MESSAGES/gawk.mo
share/locale/es/LC_MESSAGES/gawk.mo
share/locale/fi/LC_MESSAGES/gawk.mo
share/locale/fr/LC_MESSAGES/gawk.mo
share/locale/id/LC_MESSAGES/gawk.mo
share/locale/it/LC_MESSAGES/gawk.mo
share/locale/ja/LC_MESSAGES/gawk.mo
share/locale/ko/LC_MESSAGES/gawk.mo
share/locale/ms/LC_MESSAGES/gawk.mo
share/locale/nl/LC_MESSAGES/gawk.mo
share/locale/pl/LC_MESSAGES/gawk.mo
share/locale/pt/LC_MESSAGES/gawk.mo
share/locale/pt_BR/LC_MESSAGES/gawk.mo
share/locale/ro/LC_MESSAGES/gawk.mo
share/locale/sr/LC_MESSAGES/gawk.mo
share/locale/sv/LC_MESSAGES/gawk.mo
share/locale/uk/LC_MESSAGES/gawk.mo
share/locale/vi/LC_MESSAGES/gawk.mo
share/locale/zh_CN/LC_MESSAGES/gawk.mo


[FILE:247:manifests/plist.man]
share/man/man1/
 gawk.1.gz
 gawkbug.1.gz
 pm-gawk.1.gz
share/man/man3/
 filefuncs.3am.gz
 fnmatch.3am.gz
 fork.3am.gz
 inplace.3am.gz
 ordchr.3am.gz
 readdir.3am.gz
 readfile.3am.gz
 revoutput.3am.gz
 revtwoway.3am.gz
 rwarray.3am.gz
 time.3am.gz


[FILE:348:patches/patch-Makefile.in]
--- Makefile.in.orig	2023-11-02 13:22:51 UTC
+++ Makefile.in
@@ -1301,7 +1301,7 @@ install-exec-hook:
 	if [ ! -f gawk-$(VERSION)$(EXEEXT) ]; \
 	then	$(LN) $${name}$(EXEEXT) gawk-$(VERSION)$(EXEEXT) 2>/dev/null ; \
 	fi; \
-	if [ ! -f awk$(EXEEXT) ]; \
+	if ! /usr/bin/which awk; \
 	then	$(LN_S) $${name}$(EXEEXT) awk$(EXEEXT); \
 	fi; exit 0)
 


[FILE:392:patches/patch-extension_inplace.c]
--- extension/inplace.c.orig	2019-08-28 18:54:14 UTC
+++ extension/inplace.c
@@ -27,12 +27,14 @@
 #include <config.h>
 #endif
 
+#if !(defined __sun__ && (__STDC_VERSION__ - 0 >= 199901L))
 #ifndef _XOPEN_SOURCE
 # define _XOPEN_SOURCE 1
 #endif
 #ifndef _XOPEN_SOURCE_EXTENDED
 # define _XOPEN_SOURCE_EXTENDED 1
 #endif
+#endif /* __sun__ check */
 
 #include <stdio.h>
 #include <assert.h>

