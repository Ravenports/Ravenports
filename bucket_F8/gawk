# Buildsheet autogenerated by ravenadm tool -- Do not edit.

NAMEBASE=		gawk
VERSION=		5.1.1
KEYWORDS=		lang
VARIANTS=		standard
SDESC[standard]=	GNU version of Awk
HOMEPAGE=		http://www.gnu.org/software/gawk/gawk.html
CONTACT=		nobody

DOWNLOAD_GROUPS=	main
SITES[main]=		GNU/gawk
DISTFILE[1]=		gawk-5.1.1.tar.xz:main
DF_INDEX=		1
SPKGS[standard]=	complete
			primary
			nls

OPTIONS_AVAILABLE=	MPFR
OPTIONS_STANDARD=	MPFR
OPT_ON[all]=		MPFR

BUILD_DEPENDS=		libsigsegv:static:standard

USES=			makeinfo libtool readline gettext-runtime

LICENSE=		GPLv3+:primary
LICENSE_TERMS=		primary:{{WRKDIR}}/TERMS
LICENSE_FILE=		GPLv3+:{{WRKSRC}}/COPYING
LICENSE_AWK=		TERMS:"UPDATE_YEAR"
LICENSE_SOURCE=		TERMS:{{WRKSRC}}/main.c
LICENSE_SCHEME=		solo

INFO=			primary:gawk
			primary:gawkworkflow
			primary:gawkinet
FPC_EQUIVALENT=		lang/gawk
INFO_SUBDIR=		.

MUST_CONFIGURE=		gnu
CONFIGURE_ARGS=		AWK={{AWK}}
			--enable-nls
			--with-libintl-prefix={{LOCALBASE}}

INSTALL_TARGET=		install-strip
PLIST_SUB=		VERSION=5.1.1

[MPFR].DESCRIPTION=			Support multi-precision floating-point computation
[MPFR].BUILDRUN_DEPENDS_ON=		mpfr:shared:standard
[MPFR].BUILD_DEPENDS_ON=		mpfr:static:standard
[MPFR].CONFIGURE_ARGS_OFF=		--without-gmp
					--without-mpfr

[FILE:355:descriptions/desc.primary]
The GNU implementation of awk is called gawk; it is fully upward
compatible with the System V Release 4 version of awk.  gawk is also
upward compatible with the POSIX specification of the awk language.
This means that all properly written awk programs should work with gawk.
Thus, usually no distinction between gawk and other awk implemenations
is made.


[FILE:96:distinfo]
d87629386e894bbea11a5e00515fc909dc9b7249529dad9e6a3a2c77085f7ea2      3250860 gawk-5.1.1.tar.xz


[FILE:1042:manifests/plist.primary]
bin/
 gawk
 gawk-%%VERSION%%
etc/profile.d/
 gawk.csh
 gawk.sh
include/gawkapi.h
lib/gawk/
 filefuncs.%%SHARED_OBJECT%%
 fnmatch.%%SHARED_OBJECT%%
 fork.%%SHARED_OBJECT%%
 inplace.%%SHARED_OBJECT%%
 intdiv.%%SHARED_OBJECT%%
 ordchr.%%SHARED_OBJECT%%
 readdir.%%SHARED_OBJECT%%
 readfile.%%SHARED_OBJECT%%
 revoutput.%%SHARED_OBJECT%%
 revtwoway.%%SHARED_OBJECT%%
 rwarray.%%SHARED_OBJECT%%
 time.%%SHARED_OBJECT%%
libexec/awk/
 grcat
 pwcat
share/awk/
 assert.awk
 bits2str.awk
 cliff_rand.awk
 ctime.awk
 ftrans.awk
 getopt.awk
 gettime.awk
 group.awk
 have_mpfr.awk
 inplace.awk
 intdiv0.awk
 isnumeric.awk
 join.awk
 libintl.awk
 noassign.awk
 ns_passwd.awk
 ord.awk
 passwd.awk
 processarray.awk
 quicksort.awk
 readable.awk
 readfile.awk
 rewind.awk
 round.awk
 shellquote.awk
 strtonum.awk
 walkarray.awk
 zerofile.awk
share/man/man1/gawk.1.gz
share/man/man3/
 filefuncs.3am.gz
 fnmatch.3am.gz
 fork.3am.gz
 inplace.3am.gz
 ordchr.3am.gz
 readdir.3am.gz
 readfile.3am.gz
 revoutput.3am.gz
 revtwoway.3am.gz
 rwarray.3am.gz
 time.3am.gz


[FILE:726:manifests/plist.nls]
share/locale/bg/LC_MESSAGES/gawk.mo
share/locale/ca/LC_MESSAGES/gawk.mo
share/locale/da/LC_MESSAGES/gawk.mo
share/locale/de/LC_MESSAGES/gawk.mo
share/locale/es/LC_MESSAGES/gawk.mo
share/locale/fi/LC_MESSAGES/gawk.mo
share/locale/fr/LC_MESSAGES/gawk.mo
share/locale/id/LC_MESSAGES/gawk.mo
share/locale/it/LC_MESSAGES/gawk.mo
share/locale/ja/LC_MESSAGES/gawk.mo
share/locale/ko/LC_MESSAGES/gawk.mo
share/locale/ms/LC_MESSAGES/gawk.mo
share/locale/nl/LC_MESSAGES/gawk.mo
share/locale/pl/LC_MESSAGES/gawk.mo
share/locale/pt/LC_MESSAGES/gawk.mo
share/locale/pt_BR/LC_MESSAGES/gawk.mo
share/locale/sr/LC_MESSAGES/gawk.mo
share/locale/sv/LC_MESSAGES/gawk.mo
share/locale/vi/LC_MESSAGES/gawk.mo
share/locale/zh_CN/LC_MESSAGES/gawk.mo


[FILE:369:patches/patch-Makefile.in]
--- Makefile.in.orig	2021-10-28 16:48:29 UTC
+++ Makefile.in
@@ -1251,7 +1251,7 @@ install-exec-hook:
 	(cd $(DESTDIR)$(bindir); \
 	name=`echo gawk | sed '$(transform)'` ; \
 	$(LN) $${name}$(EXEEXT) gawk-$(VERSION)$(EXEEXT) 2>/dev/null ; \
-	if [ ! -f awk$(EXEEXT) ]; \
+	if ! /usr/bin/which -s awk; \
 	then	$(LN_S) $${name}$(EXEEXT) awk$(EXEEXT); \
 	fi; exit 0)
 


[FILE:392:patches/patch-extension_inplace.c]
--- extension/inplace.c.orig	2019-08-28 18:54:14 UTC
+++ extension/inplace.c
@@ -27,12 +27,14 @@
 #include <config.h>
 #endif
 
+#if !(defined __sun__ && (__STDC_VERSION__ - 0 >= 199901L))
 #ifndef _XOPEN_SOURCE
 # define _XOPEN_SOURCE 1
 #endif
 #ifndef _XOPEN_SOURCE_EXTENDED
 # define _XOPEN_SOURCE_EXTENDED 1
 #endif
+#endif /* __sun__ check */
 
 #include <stdio.h>
 #include <assert.h>

