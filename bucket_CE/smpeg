# Buildsheet autogenerated by ravenadm tool -- Do not edit.

NAMEBASE=		smpeg
VERSION=		0.4.5
KEYWORDS=		multimedia
VARIANTS=		standard
SDESC[standard]=	SDL MPEG video/audio player and library
HOMEPAGE=		https://icculus.org/smpeg
CONTACT=		Michael_Reim[kraileth@elderlinux.org]

DOWNLOAD_GROUPS=	main
SITES[main]=		http://ravenports.elderlinux.org/distcache/
DISTFILE[1]=		smpeg-0.4.5.tar.xz:main
DF_INDEX=		1
SPKGS[standard]=	single

OPTIONS_AVAILABLE=	none
OPTIONS_STANDARD=	none

USES=			autoreconf gmake libtool pkgconfig
GNOME_COMPONENTS=	gtk2
SDL_COMPONENTS=		sdl1

FPC_EQUIVALENT=		multimedia/smpeg

MUST_CONFIGURE=		gnu
CONFIGURE_ARGS=		--disable-gtk-player
			--disable-opengl-player
			--enable-mmx

SOVERSION=		0.1.4
PLIST_SUB=		PKGVER=0.4

CFLAGS=			-Wno-error=narrowing

post-install:
	${STRIP_CMD} ${STAGEDIR}${PREFIX}/lib/libsmpeg-0.4.so.0.1.4

[FILE:172:descriptions/desc.single]
Smpeg is an mpeg decoding library, which runs on just about any platform. 
It comes with two sample decoders, plaympeg (console, no UI), and gtv, a 
simple GTK+ interface.


[FILE:97:distinfo]
d492e4963c99dc518e65fced1a3f077a45a8532bd066393f7901b1c46cd8b3ff       289708 smpeg-0.4.5.tar.xz


[FILE:348:manifests/plist.single]
include/smpeg/
 MPEGerror.h
 MPEGlist.h
 MPEGaction.h
 smpeg.h
 MPEG.h
 MPEGvideo.h
 MPEGaudio.h
 MPEGfilter.h
 MPEGring.h
 MPEGsystem.h
 MPEGstream.h
bin/
 plaympeg
 smpeg-config
lib/
 libsmpeg-%%PKGVER%%.so.%%SOVERSION%%
 libsmpeg.so
 libsmpeg.a
 libsmpeg-%%PKGVER%%.so.%%SOMAJOR%%
share/man/man1/
 gtv.1.gz
 plaympeg.1.gz
share/aclocal/smpeg.m4


[FILE:657:patches/patch-configure.in]
--- configure.in.orig	2018-04-23 00:23:56.325249000 +0200
+++ configure.in	2018-04-23 00:24:26.244430000 +0200
@@ -59,7 +59,20 @@
 AC_PROG_INSTALL
 
 dnl Work around the lack of certain typedefs.
-AC_TYPE_SOCKLEN_T
+AC_DEFUN(AC_TYPE_SOCKLEN_T,
+[AC_CACHE_CHECK([for socklen_t], ac_cv_type_socklen_t,
+[
+  AC_TRY_COMPILE(
+  [#include <sys/types.h>
+   #include <sys/socket.h>],
+  [socklen_t len = 42; return len;],
+  ac_cv_type_socklen_t=yes,
+  ac_cv_type_socklen_t=no)
+])
+  if test $ac_cv_type_socklen_t != yes; then
+    AC_DEFINE(socklen_t, int)
+  fi
+])
 
 dnl The alpha architecture needs special flags for binary portability
 case "$target" in

