# Buildsheet autogenerated by ravenadm tool -- Do not edit.

NAMEBASE=		zsh
VERSION=		5.9
REVISION=		3
KEYWORDS=		shells
VARIANTS=		std
SDESC[std]=		Interactive Z Shell
HOMEPAGE=		https://www.zsh.org/
CONTACT=		nobody

DOWNLOAD_GROUPS=	main
SITES[main]=		https://www.zsh.org/pub/
DISTFILE[1]=		zsh-5.9.tar.xz:main
DISTFILE[2]=		zsh-5.9-doc.tar.xz:main
DF_INDEX=		1 2
SPKGS[std]=		set
			primary
			examples
			docs
			man
			info

OPTIONS_AVAILABLE=	CCLOCK
OPTIONS_STANDARD=	CCLOCK
OPT_ON[freebsd]=	CCLOCK
OPT_ON[dragonfly]=	CCLOCK
OPT_ON[midnightbsd]=	CCLOCK

BUILD_DEPENDS=		gdbm:dev:std
			texinfo:primary:std
BUILDRUN_DEPENDS=	gdbm:primary:std

USES=			autoreconf cpe iconv ncurses pcre shebangfix

LICENSE=		CUSTOM1:primary
LICENSE_NAME=		CUSTOM1:"ZSH license"
LICENSE_FILE=		CUSTOM1:{{WRKSRC}}/LICENCE
LICENSE_SCHEME=		solo

INFO=			info:zsh
FPC_EQUIVALENT=		shells/zsh
INFO_SUBDIR=		.
SHEBANG_FILES=		Functions/Calendar/*
			Functions/Misc/*
SHEBANG_LANG=		zsh
SHEBANG_OLD_ZSH=	zsh

MUST_CONFIGURE=		gnu
CONFIGURE_ARGS=		--with-tcsetpgrp
			--enable-function-subdirs
			--enable-maildir-support
			--enable-multibyte
			--enable-zsh-secure-free
			--enable-gdbm
			--enable-pcre
			--enable-dynamic
			--disable-zsh-mem
			--sysconfdir={{PREFIX}}/etc
			--docdir={{STD_DOCDIR}}
			--htmldir={{STD_DOCDIR}}/html
CONFIGURE_ENV=		LIBS=-lncurses

SINGLE_JOB=		yes

INSTALL_TARGET=		install install.info install.html
INSTALL_REQ_TOOLCHAIN=	yes
PLIST_SUB=		ZSH_VER="5.9"

CPPFLAGS=		-DBOOL_DEFINED
			-I{{NCURSESINC}}
VAR_OPSYS[sunos]=	CPPFLAGS=-D_XPG6
			CPPFLAGS=-DHAVE_BOOLCODES
			LDFLAGS=-ltinfo
VAR_OPSYS[midnightbsd]=	MAKEFILE_LINE=CONFIGURE_TARGET=x86_64-raven-freebsd12.3

[CCLOCK].DESCRIPTION=			Adjust linking of clock_gettext

pre-configure-CCLOCK-ON:
	# xBSD's clock_gettime(2) is in libc, not librt
	${REINPLACE_CMD} -e '/LIBS/s|-lrt||' ${WRKSRC}/configure
	${REINPLACE_CMD} -i'' -e "s|/etc/|${LOCALBASE}/etc/|" \
		${WRKSRC}/Functions/MIME/zsh-mime-setup

post-install:
	${LN} -f ${STAGEDIR}${PREFIX}/bin/zsh ${STAGEDIR}${PREFIX}/bin/rzsh
	# Precompile completions and functions
	(${STAGEDIR}${PREFIX}/bin/zsh -fc '\
		setopt extendedglob nomark_dirs;\
		cd ${STAGEDIR}${PREFIX}/share/zsh/5.9;\
		for i in functions/**/*(/) ; do\
			zcompile -U -M $$i.zwc $$i/*~*.zwc(^/);\
			${CHMOD} 644 $$i.zwc;\
		done')
	${MKDIR} ${STAGEDIR}${STD_EXAMPLESDIR} ${STAGEDIR}${STD_DOCDIR}
	(cd ${WRKSRC}/StartupFiles && ${INSTALL_DATA} \
		zlogin zshenv zshrc ${STAGEDIR}${STD_EXAMPLESDIR})
	(cd ${WRKSRC} && ${INSTALL_DATA} \
		META-FAQ README Etc/BUGS Etc/CONTRIBUTORS \
		Etc/FAQ Etc/completion-style-guide \
		${STAGEDIR}${STD_DOCDIR})

pre-configure:
	${FIND} ${WRKSRC} -name "*.orig" -delete
	${REINPLACE_CMD} -i'' -e 's|__PREFIX__|${PREFIX}|' ${WRKSRC}/Functions/VCS_Info/test-repo-git-rebase*

[FILE:462:descriptions/desc.primary]
Zsh is the Swiss Army knife of shells. It combines the most popular
features of every other shell, and then lets you customize every
inch of it. Users of bourne-style and C-style shells will feel at
home in it.

Zsh does intelligent completion, spell-checking, has a rich syntax
for precise globbing, and is fully extensible through plugin
systems.

To fire up the zsh completion system, type the following commands:

  $ autoload -U compinstall
  $ compinstall


[FILE:190:distinfo]
9b8d1ecedd5b5e81fbf1918e876752a7dd948e05c1a0dba10ab863842d45acd5      3332400 zsh-5.9.tar.xz
6f7c091249575e68c177c5e8d5c3e9705660d0d3ca1647aea365fd00a0bd3e8a      3130444 zsh-5.9-doc.tar.xz


[FILE:16739:manifests/plist.primary]
@shell bin/rzsh
@shell bin/zsh
%%ONLY-LINUX%%lib/zsh/%%ZSH_VER%%/zsh/attr.so
%%ONLY-NETBSD%%lib/zsh/%%ZSH_VER%%/zsh/attr.so
bin/zsh-%%ZSH_VER%%
lib/zsh/%%ZSH_VER%%/zsh/
 cap.so
 clone.so
 compctl.so
 complete.so
 complist.so
 computil.so
 curses.so
 datetime.so
 deltochar.so
 example.so
 files.so
 langinfo.so
 mapfile.so
 mathfunc.so
 nearcolor.so
 newuser.so
 parameter.so
 pcre.so
 regex.so
 rlimits.so
 sched.so
 stat.so
 system.so
 termcap.so
 terminfo.so
 watch.so
 zftp.so
 zle.so
 zleparameter.so
 zprof.so
 zpty.so
 zselect.so
 zutil.so
lib/zsh/%%ZSH_VER%%/zsh/db/gdbm.so
lib/zsh/%%ZSH_VER%%/zsh/net/
 socket.so
 tcp.so
lib/zsh/%%ZSH_VER%%/zsh/param/private.so
share/zsh/%%ZSH_VER%%/functions/
 Calendar.zwc
 Chpwd.zwc
 Completion.zwc
 Exceptions.zwc
 MIME.zwc
 Math.zwc
 Misc.zwc
 Newuser.zwc
 Prompts.zwc
 TCP.zwc
 VCS_Info.zwc
 Zftp.zwc
 Zle.zwc
share/zsh/%%ZSH_VER%%/functions/Calendar/
 after
 age
 before
 calendar
 calendar_add
 calendar_edit
 calendar_lockfiles
 calendar_parse
 calendar_read
 calendar_scandate
 calendar_show
 calendar_showdate
 calendar_sort
share/zsh/%%ZSH_VER%%/functions/Chpwd/
 _cdr
 cdr
 chpwd_recent_add
 chpwd_recent_dirs
 chpwd_recent_filehandler
 zsh_directory_name_cdr
 zsh_directory_name_generic
share/zsh/%%ZSH_VER%%/functions/Completion/
 AIX.zwc
 BSD.zwc
 Base.zwc
 Cygwin.zwc
 Darwin.zwc
 Debian.zwc
 Linux.zwc
 Mandriva.zwc
 Redhat.zwc
 Solaris.zwc
 Unix.zwc
 X.zwc
 Zsh.zwc
 bashcompinit
 compaudit
 compdump
 compinit
 compinstall
 openSUSE.zwc
share/zsh/%%ZSH_VER%%/functions/Completion/AIX/
 _floppy
 _logical_volumes
 _lscfg
 _lsdev
 _lslv
 _lspv
 _lsvg
 _object_classes
 _physical_volumes
 _smit
 _volume_groups
share/zsh/%%ZSH_VER%%/functions/Completion/BSD/
 _bsd_disks
 _bsd_pkg
 _bsdconfig
 _bsdinstall
 _chflags
 _csup
 _cu
 _cvsup
 _fbsd_architectures
 _fbsd_device_types
 _fetch
 _file_flags
 _freebsd-update
 _fstat
 _fw_update
 _gstat
 _ipfw
 _jail
 _jails
 _jexec
 _jls
 _jot
 _kdump
 _kld
 _ktrace
 _ktrace_points
 _ldap
 _login_classes
 _mixerctl
 _nbsd_architectures
 _obsd_architectures
 _pfctl
 _pkgin
 _portaudit
 _portlint
 _portmaster
 _portsnap
 _powerd
 _procstat
 _rcctl
 _routing_domains
 _routing_tables
 _signify
 _sockstat
 _sysclean
 _sysmerge
 _syspatch
 _sysrc
 _systat
 _sysupgrade
 _usbconfig
 _vmctl
 _watch-snoop
share/zsh/%%ZSH_VER%%/functions/Completion/Base/
 _all_labels
 _all_matches
 _alternative
 _approximate
 _arg_compile
 _arguments
 _bash_completions
 _cache_invalid
 _call_function
 _call_program
 _combination
 _comp_locale
 _complete
 _complete_debug
 _complete_help
 _complete_help_generic
 _complete_tag
 _correct
 _correct_filename
 _correct_word
 _describe
 _description
 _dispatch
 _expand
 _expand_alias
 _expand_word
 _extensions
 _external_pwds
 _generic
 _guard
 _history
 _history_complete_word
 _ignored
 _list
 _main_complete
 _match
 _menu
 _message
 _most_recent_file
 _multi_parts
 _next_label
 _next_tags
 _normal
 _nothing
 _numbers
 _oldlist
 _pick_variant
 _prefix
 _read_comp
 _regex_arguments
 _regex_words
 _requested
 _retrieve_cache
 _sep_parts
 _sequence
 _set_command
 _setup
 _store_cache
 _sub_commands
 _tags
 _user_expand
 _values
 _wanted
share/zsh/%%ZSH_VER%%/functions/Completion/Cygwin/
 _cygcheck
 _cygpath
 _cygrunsrv
 _cygserver
 _cygstart
 _dumper
 _getclip
 _mkshortcut
 _mkzsh
 _pscp
 _putclip
 _readshortcut
share/zsh/%%ZSH_VER%%/functions/Completion/Darwin/
 _caffeinate
 _defaults
 _fink
 _fs_usage
 _hdiutil
 _mac_applications
 _mac_files_for_application
 _mdfind
 _mdls
 _mdutil
 _networksetup
 _nvram
 _open
 _osascript
 _otool
 _pbcopy
 _plutil
 _qtplay
 _retrieve_mac_apps
 _say
 _sc_usage
 _scselect
 _scutil
 _softwareupdate
 _sw_vers
 _system_profiler
 _trash
 _xcode-select
share/zsh/%%ZSH_VER%%/functions/Completion/Debian/
 _a2utils
 _apt
 _apt-file
 _apt-move
 _apt-show-versions
 _aptitude
 _auto-apt
 _axi-cache
 _bts
 _bug
 _cdbs-edit-patch
 _dak
 _dchroot
 _dchroot-dsa
 _dcut
 _deb_architectures
 _deb_codenames
 _deb_files
 _deb_packages
 _debbugs_bugnumber
 _debchange
 _debcheckout
 _debdiff
 _debfoster
 _deborphan
 _debsign
 _debsnap
 _debuild
 _dlocate
 _dpatch-edit-patch
 _dpkg
 _dpkg-buildpackage
 _dpkg-cross
 _dpkg-repack
 _dpkg_source
 _dput
 _dscverify
 _dupload
 _git-buildpackage
 _grep-excuses
 _invoke-rc.d
 _lighttpd
 _lintian
 _madison
 _make-kpkg
 _members
 _mergechanges
 _module-assistant
 _pbuilder
 _piuparts
 _reprepro
 _sbuild
 _schroot
 _svn-buildpackage
 _toolchain-source
 _update-alternatives
 _update-rc.d
 _uscan
 _vim-addons
 _wajig
 _wanna-build
share/zsh/%%ZSH_VER%%/functions/Completion/Linux/
 _acpi
 _acpitool
 _alsa-utils
 _analyseplugin
 _basenc
 _brctl
 _btrfs
 _capabilities
 _chattr
 _chcon
 _choom
 _chrt
 _cpupower
 _cryptsetup
 _dkms
 _e2label
 _ethtool
 _findmnt
 _free
 _fuse_arguments
 _fuse_values
 _fusermount
 _gpasswd
 _htop
 _iconvconfig
 _ionice
 _ipset
 _iptables
 _iwconfig
 _kpartx
 _losetup
 _lsattr
 _lsblk
 _lsns
 _lsusb
 _ltrace
 _mat
 _mat2
 _mdadm
 _mii-tool
 _modutils
 _mondo
 _networkmanager
 _nsenter
 _opkg
 _perf
 _pidof
 _pkgtool
 _pmap
 _qdbus
 _schedtool
 _selinux_contexts
 _selinux_roles
 _selinux_types
 _selinux_users
 _setpriv
 _setsid
 _slabtop
 _ss
 _sshfs
 _strace
 _sysstat
 _tload
 _tpb
 _tracepath
 _tune2fs
 _uml
 _unshare
 _valgrind
 _vserver
 _wakeup_capable_devices
 _wipefs
 _wpa_cli
share/zsh/%%ZSH_VER%%/functions/Completion/Mandriva/
 _rebootin
 _urpmi
share/zsh/%%ZSH_VER%%/functions/Completion/Redhat/
 _dnf
 _rpm
 _scl
 _yum
share/zsh/%%ZSH_VER%%/functions/Completion/Solaris/
 _be_name
 _beadm
 _coreadm
 _dhcpinfo
 _dladm
 _dtrace
 _dumpadm
 _flowadm
 _fmadm
 _inetadm
 _ipadm
 _pfexec
 _pkg5
 _prstat
 _ptree
 _savecore
 _snoop
 _svcadm
 _svccfg
 _svcprop
 _svcs
 _svcs_fmri
 _zlogin
 _zoneadm
 _zones
share/zsh/%%ZSH_VER%%/functions/Completion/Unix/
 _a2ps
 _aap
 _abcde
 _absolute_command_paths
 _ack
 _adb
 _ansible
 _ant
 _antiword
 _apachectl
 _apm
 _arch_archives
 _arch_namespace
 _arp
 _arping
 _asciidoctor
 _asciinema
 _at
 _attr
 _augeas
 _avahi
 _awk
 _base64
 _basename
 _bash
 _baudrates
 _baz
 _beep
 _bibtex
 _bind_addresses
 _bison
 _bittorrent
 _bogofilter
 _bpf_filters
 _bpython
 _bzip2
 _bzr
 _cabal
 _cal
 _calendar
 _canonical_paths
 _cat
 _ccal
 _cdcd
 _cdrdao
 _cdrecord
 _chkconfig
 _chmod
 _chown
 _chroot
 _chsh
 _cksum
 _clay
 _cmdambivalent
 _cmdstring
 _cmp
 _column
 _comm
 _composer
 _compress
 _configure
 _cowsay
 _cp
 _cpio
 _cplay
 _crontab
 _cscope
 _csplit
 _cssh
 _ctags
 _ctags_tags
 _curl
 _cut
 _cvs
 _darcs
 _date
 _date_formats
 _dates
 _dbus
 _dconf
 _dd
 _devtodo
 _df
 _dhclient
 _dict
 _dict_words
 _diff
 _diff3
 _diff_options
 _diffstat
 _dig
 _dir_list
 _directories
 _django
 _dmesg
 _dmidecode
 _dns_types
 _doas
 _domains
 _dos2unix
 _drill
 _dropbox
 _dsh
 _dtruss
 _du
 _dvi
 _ecasound
 _ed
 _elfdump
 _elinks
 _email_addresses
 _enscript
 _entr
 _env
 _espeak
 _etags
 _fakeroot
 _feh
 _fetchmail
 _ffmpeg
 _figlet
 _file_modes
 _file_systems
 _files
 _find
 _find_net_interfaces
 _finger
 _flac
 _flex
 _fmt
 _fold
 _fortune
 _fsh
 _fuser
 _gcc
 _gcore
 _gdb
 _gem
 _genisoimage
 _getconf
 _getent
 _getfacl
 _getmail
 _getopt
 _ghostscript
 _git
 _global
 _global_tags
 _gnu_generic
 _gnupod
 _gnutls
 _go
 _gpg
 _gphoto2
 _gprof
 _gradle
 _graphicsmagick
 _grep
 _groff
 _groups
 _growisofs
 _gsettings
 _guilt
 _gzip
 _have_glob_qual
 _head
 _hexdump
 _host
 _hostname
 _hosts
 _iconv
 _id
 _ifconfig
 _iftop
 _imagemagick
 _init_d
 _initctl
 _install
 _iostat
 _ip
 _ipsec
 _irssi
 _ispell
 _java
 _java_class
 _joe
 _join
 _jq
 _killall
 _knock
 _kvno
 _last
 _ld_debug
 _ldconfig
 _ldd
 _less
 _lha
 _libvirt
 _links
 _list_files
 _lldb
 _ln
 _loadkeys
 _locale
 _localedef
 _locales
 _locate
 _logger
 _look
 _lp
 _ls
 _lsof
 _lua
 _luarocks
 _lynx
 _lz4
 _lzop
 _mail
 _mailboxes
 _make
 _man
 _md5sum
 _mencal
 _mh
 _mime_types
 _mkdir
 _mkfifo
 _mknod
 _mktemp
 _module
 _monotone
 _moosic
 _mosh
 _mount
 _mpc
 _mt
 _mtools
 _mtr
 _mutt
 _mv
 _my_accounts
 _myrepos
 _mysql_utils
 _mysqldiff
 _ncftp
 _net_interfaces
 _netcat
 _netstat
 _newsgroups
 _nginx
 _ngrep
 _nice
 _nkf
 _nl
 _nm
 _nmap
 _npm
 _nslookup
 _numfmt
 _objdump
 _object_files
 _od
 _openstack
 _opustools
 _other_accounts
 _pack
 _pandoc
 _paste
 _patch
 _patchutils
 _path_commands
 _path_files
 _pax
 _pbm
 _pdf
 _perforce
 _perl
 _perl_basepods
 _perl_modules
 _perldoc
 _pgids
 _pgrep
 _php
 _picocom
 _pids
 _pine
 _ping
 _pip
 _pkg-config
 _pkg_instance
 _pkgadd
 _pkginfo
 _pkgrm
 _pon
 _ports
 _postfix
 _postgresql
 _postscript
 _pr
 _printenv
 _printers
 _process_names
 _prove
 _ps
 _pspdf
 _psutils
 _ptx
 _pump
 _pv
 _pwgen
 _pydoc
 _python
 _python_modules
 _qemu
 _quilt
 _rake
 _ranlib
 _rar
 _rclone
 _rcs
 _readelf
 _readlink
 _remote_files
 _renice
 _ri
 _rlogin
 _rm
 _rmdir
 _route
 _rrdtool
 _rsync
 _rubber
 _ruby
 _runit
 _samba
 _sccs
 _scons
 _screen
 _script
 _seafile
 _sed
 _seq
 _service
 _services
 _setfacl
 _sh
 _shasum
 _showmount
 _shred
 _shuf
 _shutdown
 _signals
 _sisu
 _slrn
 _smartmontools
 _socket
 _sort
 _spamassassin
 _split
 _sqlite
 _sqsh
 _ssh
 _ssh_hosts
 _stat
 _stdbuf
 _stgit
 _stow
 _strings
 _strip
 _stty
 _su
 _subversion
 _sudo
 _surfraw
 _swaks
 _swanctl
 _swift
 _sys_calls
 _sysctl
 _tac
 _tail
 _tar
 _tar_archive
 _tardy
 _tcpdump
 _tcptraceroute
 _tee
 _telnet
 _terminals
 _tex
 _texi
 _texinfo
 _tidy
 _tiff
 _tilde_files
 _time_zone
 _timeout
 _tin
 _tla
 _tmux
 _todo.sh
 _toilet
 _top
 _topgit
 _totd
 _touch
 _tput
 _tr
 _transmission
 _tree
 _truncate
 _truss
 _tty
 _ttys
 _twidge
 _twisted
 _umountable
 _unace
 _uname
 _unexpand
 _uniq
 _unison
 _units
 _uptime
 _urls
 _user_admin
 _user_at_host
 _users
 _users_on
 _vi
 _vim
 _visudo
 _vmstat
 _vorbis
 _vpnc
 _w
 _w3m
 _watch
 _wc
 _webbrowser
 _wget
 _whereis
 _who
 _whois
 _wiggle
 _xargs
 _xmlsoft
 _xmlstarlet
 _xmms2
 _xxd
 _xz
 _yafc
 _yodl
 _yp
 _zcat
 _zdump
 _zfs
 _zfs_dataset
 _zfs_pool
 _zip
 _zsh
share/zsh/%%ZSH_VER%%/functions/Completion/X/
 _acroread
 _code
 _dcop
 _eog
 _evince
 _geany
 _gnome-gv
 _gqview
 _gv
 _kdeconnect
 _kfmclient
 _matlab
 _mozilla
 _mplayer
 _mupdf
 _nautilus
 _nedit
 _netscape
 _okular
 _pdftk
 _qiv
 _rdesktop
 _setxkbmap
 _sublimetext
 _urxvt
 _vnc
 _x_arguments
 _x_borderwidth
 _x_color
 _x_colormapid
 _x_cursor
 _x_display
 _x_extension
 _x_font
 _x_geometry
 _x_keysym
 _x_locale
 _x_modifier
 _x_name
 _x_resource
 _x_selection_timeout
 _x_title
 _x_utils
 _x_visual
 _x_window
 _xauth
 _xautolock
 _xclip
 _xdvi
 _xfig
 _xft_fonts
 _xinput
 _xloadimage
 _xmodmap
 _xournal
 _xpdf
 _xrandr
 _xscreensaver
 _xset
 _xt_arguments
 _xt_session_id
 _xterm
 _xv
 _xwit
 _zeal
share/zsh/%%ZSH_VER%%/functions/Completion/Zsh/
 __arguments
 _add-zle-hook-widget
 _add-zsh-hook
 _alias
 _aliases
 _arrays
 _assign
 _autocd
 _bindkey
 _brace_parameter
 _builtin
 _cd
 _command
 _command_names
 _compadd
 _compdef
 _completers
 _condition
 _default
 _delimiters
 _directory_stack
 _dirs
 _disable
 _dynamic_directory_name
 _echotc
 _echoti
 _emulate
 _enable
 _equal
 _exec
 _fc
 _file_descriptors
 _first
 _functions
 _globflags
 _globqual_delims
 _globquals
 _hash
 _history_modifiers
 _in_vared
 _jobs
 _jobs_bg
 _jobs_builtin
 _jobs_fg
 _kill
 _limit
 _limits
 _math
 _math_params
 _mere
 _module_math_func
 _options
 _options_set
 _options_unset
 _parameter
 _parameters
 _precommand
 _print
 _prompt
 _ps1234
 _read
 _redirect
 _run-help
 _sched
 _set
 _setopt
 _source
 _strftime
 _subscript
 _suffix_alias_files
 _tcpsys
 _tilde
 _trap
 _ttyctl
 _typeset
 _ulimit
 _unhash
 _user_math_func
 _value
 _vared
 _vars
 _vcs_info
 _vcs_info_hooks
 _wait
 _which
 _widgets
 _zargs
 _zattr
 _zcalc
 _zcalc_line
 _zcompile
 _zed
 _zftp
 _zle
 _zmodload
 _zmv
 _zparseopts
 _zpty
 _zsh-mime-handler
 _zsocket
 _zstyle
 _ztodo
share/zsh/%%ZSH_VER%%/functions/Completion/openSUSE/
 _SUSEconfig
 _hwinfo
 _osc
 _yast
 _zypper
share/zsh/%%ZSH_VER%%/functions/Exceptions/
 catch
 throw
share/zsh/%%ZSH_VER%%/functions/MIME/
 pick-web-browser
 zsh-mime-contexts
 zsh-mime-handler
 zsh-mime-setup
share/zsh/%%ZSH_VER%%/functions/Math/zmathfunc
share/zsh/%%ZSH_VER%%/functions/Misc/
 add-zle-hook-widget
 add-zsh-hook
 allopt
 checkmail
 colors
 getjobs
 harden
 is-at-least
 mere
 nslookup
 promptnl
 regexp-replace
 relative
 run-help
 run-help-btrfs
 run-help-git
 run-help-ip
 run-help-openssl
 run-help-p4
 run-help-sudo
 run-help-svk
 run-help-svn
 sticky-note
 tetris
 tetriscurses
 xtermctl
 zargs
 zcalc
 zed
 zkbd
 zmathfuncdef
 zmv
 zrecompile
 zstyle+
 ztodo
share/zsh/%%ZSH_VER%%/functions/Newuser/zsh-newuser-install
share/zsh/%%ZSH_VER%%/functions/Prompts/
 prompt_adam1_setup
 prompt_adam2_setup
 prompt_bart_setup
 prompt_bigfade_setup
 prompt_clint_setup
 prompt_default_setup
 prompt_elite2_setup
 prompt_elite_setup
 prompt_fade_setup
 prompt_fire_setup
 prompt_off_setup
 prompt_oliver_setup
 prompt_pws_setup
 prompt_redhat_setup
 prompt_restore_setup
 prompt_special_chars
 prompt_suse_setup
 prompt_walters_setup
 prompt_zefram_setup
 promptinit
share/zsh/%%ZSH_VER%%/functions/TCP/
 tcp_alias
 tcp_close
 tcp_command
 tcp_expect
 tcp_fd_handler
 tcp_log
 tcp_open
 tcp_output
 tcp_point
 tcp_proxy
 tcp_read
 tcp_rename
 tcp_send
 tcp_sess
 tcp_shoot
 tcp_spam
 tcp_talk
 tcp_wait
share/zsh/%%ZSH_VER%%/functions/VCS_Info/
 Backends.zwc
 VCS_INFO_adjust
 VCS_INFO_bydir_detect
 VCS_INFO_check_com
 VCS_INFO_formats
 VCS_INFO_get_cmd
 VCS_INFO_hexdump
 VCS_INFO_hook
 VCS_INFO_maxexports
 VCS_INFO_nvcsformats
 VCS_INFO_patch2subject
 VCS_INFO_quilt
 VCS_INFO_reposub
 VCS_INFO_set
 VCS_INFO_set-branch-format
 VCS_INFO_set-patch-format
 test-repo-git-rebase-apply
 test-repo-git-rebase-merge
 vcs_info
 vcs_info_hookadd
 vcs_info_hookdel
 vcs_info_lastmsg
 vcs_info_printsys
 vcs_info_setsys
share/zsh/%%ZSH_VER%%/functions/VCS_Info/Backends/
 VCS_INFO_detect_bzr
 VCS_INFO_detect_cdv
 VCS_INFO_detect_cvs
 VCS_INFO_detect_darcs
 VCS_INFO_detect_fossil
 VCS_INFO_detect_git
 VCS_INFO_detect_hg
 VCS_INFO_detect_mtn
 VCS_INFO_detect_p4
 VCS_INFO_detect_svk
 VCS_INFO_detect_svn
 VCS_INFO_detect_tla
 VCS_INFO_get_data_bzr
 VCS_INFO_get_data_cdv
 VCS_INFO_get_data_cvs
 VCS_INFO_get_data_darcs
 VCS_INFO_get_data_fossil
 VCS_INFO_get_data_git
 VCS_INFO_get_data_hg
 VCS_INFO_get_data_mtn
 VCS_INFO_get_data_p4
 VCS_INFO_get_data_svk
 VCS_INFO_get_data_svn
 VCS_INFO_get_data_tla
share/zsh/%%ZSH_VER%%/functions/Zftp/
 zfanon
 zfautocheck
 zfcd
 zfcd_match
 zfcget
 zfclose
 zfcput
 zfdir
 zffcache
 zfgcp
 zfget
 zfget_match
 zfgoto
 zfhere
 zfinit
 zfls
 zfmark
 zfopen
 zfparams
 zfpcp
 zfput
 zfrglob
 zfrtime
 zfsession
 zfstat
 zftp_chpwd
 zftp_progress
 zftransfer
 zftype
 zfuget
 zfuput
share/zsh/%%ZSH_VER%%/functions/Zle/
 backward-kill-word-match
 backward-word-match
 bracketed-paste-magic
 bracketed-paste-url-magic
 capitalize-word-match
 copy-earlier-word
 cycle-completion-positions
 define-composed-chars
 delete-whole-word-match
 down-case-word-match
 down-line-or-beginning-search
 edit-command-line
 expand-absolute-path
 forward-word-match
 history-beginning-search-menu
 history-pattern-search
 history-search-end
 incarg
 incremental-complete-word
 insert-composed-char
 insert-files
 insert-unicode-char
 keeper
 keymap+widget
 kill-word-match
 match-word-context
 match-words-by-style
 modify-current-argument
 move-line-in-buffer
 narrow-to-region
 narrow-to-region-invisible
 predict-on
 quote-and-complete-word
 read-from-minibuffer
 replace-argument
 replace-string
 replace-string-again
 select-bracketed
 select-quoted
 select-word-match
 select-word-style
 send-invisible
 smart-insert-last-word
 split-shell-arguments
 surround
 transpose-lines
 transpose-words-match
 up-case-word-match
 up-line-or-beginning-search
 url-quote-magic
 vi-pipe
 which-command
 zcalc-auto-insert
 zed-set-file-name
share/zsh/%%ZSH_VER%%/help/
 alias
 autoload
 bg
 bindkey
 break
 builtin
 bye
 cap
 cd
 chdir
 clone
 colon
 command
 comparguments
 compcall
 compctl
 compdescribe
 compfiles
 compgroups
 compquote
 comptags
 comptry
 compvalues
 continue
 declare
 dirs
 disable
 disown
 dot
 echo
 echotc
 echoti
 emulate
 enable
 eval
 exec
 exit
 export
 false
 fc
 fg
 float
 functions
 getcap
 getln
 getopts
 hash
 history
 integer
 jobs
 kill
 let
 limit
 local
 logout
 noglob
 popd
 print
 printf
 pushd
 pushln
 pwd
 r
 read
 readonly
 rehash
 return
 sched
 set
 setcap
 setopt
 shift
 source
 stat
 suspend
 test
 times
 trap
 true
 ttyctl
 type
 typeset
 ulimit
 umask
 unalias
 unfunction
 unhash
 unlimit
 unset
 unsetopt
 vared
 wait
 whence
 where
 which
 zcompile
 zformat
 zftp
 zle
 zmodload
 zparseopts
 zprof
 zpty
 zregexparse
 zsocket
 zstyle
 ztcp
share/zsh/%%ZSH_VER%%/scripts/newuser
@dir share/zsh/site-functions


[FILE:43:manifests/plist.examples]
share/examples/zsh/
 zlogin
 zshenv
 zshrc


[FILE:4944:manifests/plist.docs]
share/doc/zsh/
 BUGS
 CONTRIBUTORS
 FAQ
 META-FAQ
 README
 completion-style-guide
share/doc/zsh/html/
 Aliasing.html
 Alternate-Forms-For-Complex-Commands.html
 Alternative-Completion.html
 Arguments.html
 Arithmetic-Evaluation.html
 Arithmetic-Expansion.html
 Array-Parameters.html
 Author.html
 Availability.html
 Bindable-Commands.html
 Brace-Expansion.html
 Calendar-Bugs.html
 Calendar-File-and-Date-Formats.html
 Calendar-Function-System.html
 Calendar-Styles.html
 Calendar-System-User-Functions.html
 Calendar-Utility-Functions.html
 Character-Highlighting.html
 Command-Execution.html
 Command-Flags.html
 Command-Substitution.html
 Comments.html
 Compatibility.html
 Completion-Builtin-Commands.html
 Completion-Condition-Codes.html
 Completion-Directories.html
 Completion-Functions.html
 Completion-Matching-Control.html
 Completion-Special-Parameters.html
 Completion-System-Configuration.html
 Completion-System-Variables.html
 Completion-System.html
 Completion-Using-compctl.html
 Completion-Widget-Example.html
 Completion-Widgets.html
 Completion.html
 Complex-Commands.html
 Concept-Index.html
 Conditional-Expressions.html
 Control-Flags.html
 Control-Functions.html
 Description-of-Options.html
 Dynamic-named-directories.html
 Editor-Functions-Index.html
 Errors.html
 Event-Designators.html
 Example.html
 Exception-Handling.html
 Expansion.html
 Extended-Completion.html
 Filename-Expansion.html
 Filename-Generation.html
 Files.html
 Flags-with-Arguments.html
 Functions-Index.html
 Functions.html
 History-Control.html
 History-Expansion.html
 Initialization.html
 Installation.html
 Introduction.html
 Invocation.html
 Jobs-_0026-Signals.html
 Keymaps.html
 Local-Parameters.html
 MIME-Functions.html
 Mailing-Lists.html
 Mathematical-Functions.html
 Miscellaneous-Features.html
 Miscellaneous.html
 Modifiers.html
 Modifying-Text.html
 Movement.html
 Notes.html
 Option-Aliases.html
 Option-Flags.html
 Options-Index.html
 Options.html
 Other-Directory-Functions.html
 Other-Functions.html
 Overview.html
 Parameter-Expansion.html
 Parameters-Set-By-The-Shell.html
 Parameters-Used-By-The-Shell.html
 Parameters.html
 Positional-Parameters.html
 Precommand-Modifiers.html
 Process-Substitution.html
 Prompt-Expansion.html
 Prompt-Themes.html
 Quoting.html
 Recent-Directories.html
 Redirection.html
 Reserved-Words.html
 Restricted-Shell.html
 Roadmap.html
 See-Also.html
 Shell-Builtin-Commands.html
 Shell-Grammar.html
 Simple-Commands-_0026-Pipelines.html
 Simple-Flags.html
 Single-Letter-Options.html
 Specifying-Options.html
 Standard-Widgets.html
 Static-named-directories.html
 Style-and-Tag-Index.html
 TCP-Bugs.html
 TCP-Examples.html
 TCP-Function-System.html
 TCP-Functions.html
 TCP-Parameters.html
 Text-Objects.html
 The-Z-Shell-Manual.html
 The-Zsh-FAQ.html
 The-Zsh-Userguide.html
 The-Zsh-Web-Page.html
 The-zsh_002fattr-Module.html
 The-zsh_002fcap-Module.html
 The-zsh_002fclone-Module.html
 The-zsh_002fcompctl-Module.html
 The-zsh_002fcomplete-Module.html
 The-zsh_002fcomplist-Module.html
 The-zsh_002fcomputil-Module.html
 The-zsh_002fcurses-Module.html
 The-zsh_002fdatetime-Module.html
 The-zsh_002fdb_002fgdbm-Module.html
 The-zsh_002fdeltochar-Module.html
 The-zsh_002fexample-Module.html
 The-zsh_002ffiles-Module.html
 The-zsh_002flanginfo-Module.html
 The-zsh_002fmapfile-Module.html
 The-zsh_002fmathfunc-Module.html
 The-zsh_002fnearcolor-Module.html
 The-zsh_002fnet_002fsocket-Module.html
 The-zsh_002fnet_002ftcp-Module.html
 The-zsh_002fnewuser-Module.html
 The-zsh_002fparam_002fprivate-Module.html
 The-zsh_002fparameter-Module.html
 The-zsh_002fpcre-Module.html
 The-zsh_002fregex-Module.html
 The-zsh_002fsched-Module.html
 The-zsh_002fstat-Module.html
 The-zsh_002fsystem-Module.html
 The-zsh_002ftermcap-Module.html
 The-zsh_002fterminfo-Module.html
 The-zsh_002fwatch-Module.html
 The-zsh_002fzftp-Module.html
 The-zsh_002fzle-Module.html
 The-zsh_002fzleparameter-Module.html
 The-zsh_002fzprof-Module.html
 The-zsh_002fzpty-Module.html
 The-zsh_002fzselect-Module.html
 The-zsh_002fzutil-Module.html
 User-Configuration-Functions.html
 User-Contributions.html
 User_002dDefined-Widgets.html
 Utilities.html
 Variables-Index.html
 Version-Control-Information.html
 Word-Designators.html
 ZLE-Functions.html
 Zftp-Function-System.html
 Zftp-Functions.html
 Zle-Builtins.html
 Zle-Widgets.html
 Zsh-Line-Editor.html
 Zsh-Modules.html
 _0060_003d_0027-expansion.html
 index.html
 vcs_005finfo-API.html
 vcs_005finfo-Configuration.html
 vcs_005finfo-Examples.html
 vcs_005finfo-Hooks.html
 vcs_005finfo-Oddities.html
 vcs_005finfo-Quickstart.html
 vcs_005finfo-Quilt-Support.html
 vcs_005finfo-Variables.html
 zsh_1.html
 zsh_10.html
 zsh_11.html
 zsh_12.html
 zsh_13.html
 zsh_14.html
 zsh_15.html
 zsh_16.html
 zsh_17.html
 zsh_18.html
 zsh_19.html
 zsh_2.html
 zsh_3.html
 zsh_4.html
 zsh_5.html
 zsh_6.html
 zsh_7.html
 zsh_8.html
 zsh_9.html
 zsh_abt.html
 zsh_toc.html


[FILE:230:manifests/plist.man]
share/man/man1/
 zsh.1
 zshall.1
 zshbuiltins.1
 zshcalsys.1
 zshcompctl.1
 zshcompsys.1
 zshcompwid.1
 zshcontrib.1
 zshexpn.1
 zshmisc.1
 zshmodules.1
 zshoptions.1
 zshparam.1
 zshroadmap.1
 zshtcpsys.1
 zshzftpsys.1
 zshzle.1


[FILE:475:patches/patch-Doc_Makefile.in]
--- Doc/Makefile.in.orig	2022-05-08 06:18:22 UTC
+++ Doc/Makefile.in
@@ -266,7 +266,7 @@ texi2html.conf: $(sdir_top)/Config/versi
 	d=`echo $(VERSION_DATE)`; \
 	v="<font size=\"-1\">Zsh version $(VERSION), released on $$d.</font>"; \
 	case '$(TEXI2HTML)' in \
-	  *texi2any*) echo "set_from_init_file('PRE_BODY_CLOSE','$$v');" ;; \
+	  *texi2any*) echo "texinfo_set_from_init_file ('PRE_BODY_CLOSE','$$v');" ;; \
 	  *) echo "\$$PRE_BODY_CLOSE = '$$v';" ;; \
 	esac > $@
 


[FILE:314:patches/patch-Functions_VCS__Info_test-repo-git-rebase-apply]
--- Functions/VCS_Info/test-repo-git-rebase-apply.orig	2022-05-08 06:18:22 UTC
+++ Functions/VCS_Info/test-repo-git-rebase-apply
@@ -1,4 +1,4 @@
-#!/usr/local/bin/zsh -f
+#!__PREFIX__/bin/zsh -f
 #
 # This script creates a test repository for testing the git backend's behaviour during rebase-apply operations.
 #


[FILE:314:patches/patch-Functions_VCS__Info_test-repo-git-rebase-merge]
--- Functions/VCS_Info/test-repo-git-rebase-merge.orig	2022-05-08 06:18:22 UTC
+++ Functions/VCS_Info/test-repo-git-rebase-merge
@@ -1,4 +1,4 @@
-#!/usr/local/bin/zsh -f
+#!__PREFIX__/bin/zsh -f
 #
 # This script creates a test repository for testing the git backend's behaviour during rebase-apply operations.
 #


[FILE:413:patches/patch-Src_Modules_pcre.c]
--- Src/Modules/pcre.c.orig	2018-12-16 01:39:51 UTC
+++ Src/Modules/pcre.c
@@ -183,7 +183,7 @@ zpcre_get_substrings(char *arg, int *ove
 	int nelem = arrlen(captures)-1;
 	/* Set to the offsets of the complete match */
 	if (want_offset_pair) {
-	    sprintf(offset_all, "%d %d", ovec[0], ovec[1]);
+	    sprintf(offset_all, "%zd %zd", ovec[0], ovec[1]);
 	    setsparam("ZPCRE_OP", ztrdup(offset_all));
 	}
 	/*


[FILE:525:patches/patch-Src_Modules_watch.c]
--- Src/Modules/watch.c.orig	2022-05-08 06:18:22 UTC
+++ Src/Modules/watch.c
@@ -30,9 +30,21 @@
 #include "watch.mdh"
 
 /* Headers for utmp/utmpx structures */
+
+#    if defined(__DragonFly__) || defined(__FreeBSD__) || defined(__MidnightBSD__)
+# if defined(HAVE_UTMP_H) && !defined(HAVE_UTMPX_H)
+#  include <utmp.h>
+# else
+#  undef HAVE_STRUCT_UTMP
+#  undef HAVE_STRUCT_UTMP_UT_HOST
+# endif
+#    else
+
 #ifdef HAVE_UTMP_H
 # include <utmp.h>
 #endif
+
+#    endif
 #ifdef HAVE_UTMPX_H
 # include <utmpx.h>
 #endif


[FILE:1518:patches/patch-Src_jobs.c]
--- Src/jobs.c.orig	2022-05-08 06:18:22 UTC
+++ Src/jobs.c
@@ -729,6 +729,12 @@ printhhmmss(double secs)
 	fprintf(stderr,           "%.3f",              secs);
 }
 
+#if defined(__DragonFly__) || defined(__FreeBSD__) || defined(__MidnightBSD__)
+#define ravBSD 1
+#else
+#define ravBSD 0
+#endif
+
 static void
 printtime(struct timeval *real, child_times_t *ti, char *desc)
 {
@@ -753,15 +759,20 @@ printtime(struct timeval *real, child_ti
     /* go ahead and compute these, since almost every TIMEFMT will have them */
     elapsed_time = real->tv_sec + real->tv_usec / 1000000.0;
 
+    long clktck = get_clktck();
 #ifdef HAVE_GETRUSAGE
     user_time = ti->ru_utime.tv_sec + ti->ru_utime.tv_usec / 1000000.0;
     system_time = ti->ru_stime.tv_sec + ti->ru_stime.tv_usec / 1000000.0;
     total_time = user_time + system_time;
+# if ravBSD
+    percent = 100.0 * total_time / elapsed_time;
+    total_time *= (double) clktck;
+# else
     percent = 100.0 * total_time
 	/ (real->tv_sec + real->tv_usec / 1000000.0);
+# endif
 #else
     {
-	long clktck = get_clktck();
 	user_time    = ti->ut / (double) clktck;
 	system_time  = ti->st / (double) clktck;
 	percent      =  100.0 * (ti->ut + ti->st)
@@ -891,7 +902,11 @@ printtime(struct timeval *real, child_ti
 #endif
 #ifdef HAVE_STRUCT_RUSAGE_RU_MAXRSS
 	    case 'M':
+# if ravBSD
+               fprintf(stderr, "%ld", ti->ru_maxrss);
+# else
 		fprintf(stderr, "%ld", ti->ru_maxrss / 1024);
+# endif
 		break;
 #endif
 #ifdef HAVE_STRUCT_RUSAGE_RU_MAJFLT


[FILE:1092:patches/patch-aczsh.m4]
--- aczsh.m4.orig	2022-05-08 06:18:22 UTC
+++ aczsh.m4
@@ -44,7 +44,7 @@ AC_DEFUN(zsh_64_BIT_TYPE,
 #include <sys/types.h>
 #endif
 
-main()
+int main()
 {
   $1 foo = 0; 
   int bar = (int) foo;
@@ -146,7 +146,7 @@ char *zsh_gl_sym_addr ;
 #define RTLD_GLOBAL 0
 #endif
 
-main()
+int main()
 {
     void *handle1, *handle2;
     void *(*zsh_getaddr1)(), *(*zsh_getaddr2)();
@@ -229,7 +229,7 @@ char *zsh_gl_sym_addr ;
 #endif
 
 
-main()
+int main()
 {
     void *handle1, *handle2;
     int (*fred1)(), (*fred2)();
@@ -304,7 +304,7 @@ char *zsh_gl_sym_addr ;
 #define RTLD_GLOBAL 0
 #endif
 
-main()
+int main()
 {
     void *handle;
     int (*barneysym)();
@@ -374,7 +374,7 @@ char *zsh_gl_sym_addr ;
 #define RTLD_GLOBAL 0
 #endif
 
-main()
+int main()
 {
     void *handle;
     int (*barneysym)();
@@ -448,7 +448,7 @@ char *zsh_gl_sym_addr ;
 #define RTLD_GLOBAL 0
 #endif
 
-main()
+int main()
 {
     void *handle;
     int (*barneysym)();
@@ -516,7 +516,7 @@ char *zsh_gl_sym_addr ;
 #define RTLD_GLOBAL 0
 #endif
 
-main()
+int main()
 {
     void *handle;
     int (*fredsym)();


[FILE:2873:patches/patch-configure.ac]
From 4c89849c98172c951a9def3690e8647dae76308f Mon Sep 17 00:00:00 2001
From: Florian Weimer <fweimer@redhat.com>
Date: Fri, 8 Dec 2023 21:58:07 +0100
Subject: [PATCH] 52383: Avoid incompatible pointer types in terminfo global
 variable checks

---
 configure.ac | 12 ++++++------
 1 file changed, 6 insertions(+), 6 deletions(-)

--- configure.ac.orig
+++ configure.ac
@@ -1766,27 +1766,27 @@ if test x$zsh_cv_path_term_header != xno
   fi
 
   AC_MSG_CHECKING(if boolcodes is available)
-  AC_LINK_IFELSE([AC_LANG_PROGRAM([[$term_includes]], [[char **test = boolcodes; puts(*test);]])],[AC_DEFINE(HAVE_BOOLCODES) boolcodes=yes],[boolcodes=no])
+  AC_LINK_IFELSE([AC_LANG_PROGRAM([[$term_includes]], [[char **test = (char **)boolcodes; puts(*test);]])],[AC_DEFINE(HAVE_BOOLCODES) boolcodes=yes],[boolcodes=no])
   AC_MSG_RESULT($boolcodes)
 
   AC_MSG_CHECKING(if numcodes is available)
-  AC_LINK_IFELSE([AC_LANG_PROGRAM([[$term_includes]], [[char **test = numcodes; puts(*test);]])],[AC_DEFINE(HAVE_NUMCODES) numcodes=yes],[numcodes=no])
+  AC_LINK_IFELSE([AC_LANG_PROGRAM([[$term_includes]], [[char **test = (char **)numcodes; puts(*test);]])],[AC_DEFINE(HAVE_NUMCODES) numcodes=yes],[numcodes=no])
   AC_MSG_RESULT($numcodes)
 
   AC_MSG_CHECKING(if strcodes is available)
-  AC_LINK_IFELSE([AC_LANG_PROGRAM([[$term_includes]], [[char **test = strcodes; puts(*test);]])],[AC_DEFINE(HAVE_STRCODES) strcodes=yes],[strcodes=no])
+  AC_LINK_IFELSE([AC_LANG_PROGRAM([[$term_includes]], [[char **test = (char **)strcodes; puts(*test);]])],[AC_DEFINE(HAVE_STRCODES) strcodes=yes],[strcodes=no])
   AC_MSG_RESULT($strcodes)
 
   AC_MSG_CHECKING(if boolnames is available)
-  AC_LINK_IFELSE([AC_LANG_PROGRAM([[$term_includes]], [[char **test = boolnames; puts(*test);]])],[AC_DEFINE(HAVE_BOOLNAMES) boolnames=yes],[boolnames=no])
+  AC_LINK_IFELSE([AC_LANG_PROGRAM([[$term_includes]], [[char **test = (char **)boolnames; puts(*test);]])],[AC_DEFINE(HAVE_BOOLNAMES) boolnames=yes],[boolnames=no])
   AC_MSG_RESULT($boolnames)
 
   AC_MSG_CHECKING(if numnames is available)
-  AC_LINK_IFELSE([AC_LANG_PROGRAM([[$term_includes]], [[char **test = numnames; puts(*test);]])],[AC_DEFINE(HAVE_NUMNAMES) numnames=yes],[numnames=no])
+  AC_LINK_IFELSE([AC_LANG_PROGRAM([[$term_includes]], [[char **test = (char **)numnames; puts(*test);]])],[AC_DEFINE(HAVE_NUMNAMES) numnames=yes],[numnames=no])
   AC_MSG_RESULT($numnames)
 
   AC_MSG_CHECKING(if strnames is available)
-  AC_LINK_IFELSE([AC_LANG_PROGRAM([[$term_includes]], [[char **test = strnames; puts(*test);]])],[AC_DEFINE(HAVE_STRNAMES) strnames=yes],[strnames=no])
+  AC_LINK_IFELSE([AC_LANG_PROGRAM([[$term_includes]], [[char **test = (char **)strnames; puts(*test);]])],[AC_DEFINE(HAVE_STRNAMES) strnames=yes],[strnames=no])
   AC_MSG_RESULT($strnames)
 
   dnl There are apparently defective terminal library headers on some


[FILE:5931:patches/patch-configure.ac2]
--- configure.ac.orig	2024-11-18 19:53:22 UTC
+++ configure.ac
@@ -585,7 +585,7 @@ fi
 dnl  Checking if compiler correctly cast signed to unsigned.
 AC_CACHE_CHECK(if signed to unsigned casting is broken,
 zsh_cv_c_broken_signed_to_unsigned_casting,
-[AC_RUN_IFELSE([AC_LANG_SOURCE([[main(){return((int)(unsigned char)((char) -1) == 255);}]])],[zsh_cv_c_broken_signed_to_unsigned_casting=yes],[zsh_cv_c_broken_signed_to_unsigned_casting=no],[zsh_cv_c_broken_signed_to_unsigned_casting=no])])
+[AC_RUN_IFELSE([AC_LANG_SOURCE([[int main(){return((int)(unsigned char)((char) -1) == 255);}]])],[zsh_cv_c_broken_signed_to_unsigned_casting=yes],[zsh_cv_c_broken_signed_to_unsigned_casting=no],[zsh_cv_c_broken_signed_to_unsigned_casting=no])])
 AH_TEMPLATE([BROKEN_SIGNED_TO_UNSIGNED_CASTING],
 [Define to 1 if compiler incorrectly cast signed to unsigned.])
 if test x$zsh_cv_c_broken_signed_to_unsigned_casting = xyes; then
@@ -1046,7 +1046,7 @@ else
   [AC_RUN_IFELSE([AC_LANG_SOURCE([[
 #include <sys/types.h>
 
-main() { return sizeof(off_t) < 8; }
+int main() { return sizeof(off_t) < 8; }
 ]])],[zsh_cv_off_t_is_64_bit=yes],[zsh_cv_off_t_is_64_bit=no],[zsh_cv_off_t_is_64_bit=no])])
   if test x$zsh_cv_off_t_is_64_bit = xyes; then
     AC_DEFINE(OFF_T_IS_64_BIT)
@@ -1056,7 +1056,7 @@ main() { return sizeof(off_t) < 8; }
   [AC_RUN_IFELSE([AC_LANG_SOURCE([[
 #include <sys/types.h>
 
-main() { return sizeof(ino_t) < 8; }
+int main() { return sizeof(ino_t) < 8; }
 ]])],[zsh_cv_ino_t_is_64_bit=yes],[zsh_cv_ino_t_is_64_bit=no],[zsh_cv_ino_t_is_64_bit=no])])
   if test x$zsh_cv_ino_t_is_64_bit = xyes; then
     AC_DEFINE(INO_T_IS_64_BIT)
@@ -1396,7 +1396,7 @@ zsh_cv_func_tgetent_accepts_null,
 #include <stdlib.h>
 int tgetent(char *, char *);
 char *tgetstr(char *, char **);
-main()
+int main()
 {
     char buf[4096];
     int r1 = tgetent(buf, "vt100");
@@ -1424,7 +1424,7 @@ zsh_cv_func_tgetent_zero_success,
 #include <stdlib.h>
 int tgetent(char *, char*);
 char *tgetstr(char *, char **);
-main()
+int main()
 {
     char buf[4096];
     int r1 = tgetent(buf, "!@#$%^&*");
@@ -1862,7 +1862,7 @@ zsh_cv_rlim_t_is_longer,
 #endif
 #include <sys/resource.h>
 #include <stdlib.h>
-main(){struct rlimit r;exit(sizeof(r.rlim_cur) <= sizeof(long));}]])],[zsh_cv_rlim_t_is_longer=yes],[zsh_cv_rlim_t_is_longer=no],[zsh_cv_rlim_t_is_longer=yes])])
+int main(){struct rlimit r;exit(sizeof(r.rlim_cur) <= sizeof(long));}]])],[zsh_cv_rlim_t_is_longer=yes],[zsh_cv_rlim_t_is_longer=no],[zsh_cv_rlim_t_is_longer=yes])])
 if test x$zsh_cv_rlim_t_is_longer = xyes; then
   AC_CACHE_CHECK(if rlim_t is a quad,
   zsh_cv_rlim_t_is_quad_t,
@@ -1873,7 +1873,7 @@ if test x$zsh_cv_rlim_t_is_longer = xyes
 #include <stdio.h>
 #include <sys/resource.h>
 #include <stdlib.h>
-main() { 
+int main() { 
   struct rlimit r;
   char buf[20];
   r.rlim_cur = 0;
@@ -1896,7 +1896,7 @@ else
 #endif
 #include <sys/resource.h>
 #include <stdlib.h>
-  main(){struct rlimit r;r.rlim_cur=-1;exit(r.rlim_cur<0);}]])],[zsh_cv_type_rlim_t_is_unsigned=yes],[zsh_cv_type_rlim_t_is_unsigned=no],[zsh_cv_type_rlim_t_is_unsigned=no])])
+  int main(){struct rlimit r;r.rlim_cur=-1;exit(r.rlim_cur<0);}]])],[zsh_cv_type_rlim_t_is_unsigned=yes],[zsh_cv_type_rlim_t_is_unsigned=no],[zsh_cv_type_rlim_t_is_unsigned=no])])
   if test x$zsh_cv_type_rlim_t_is_unsigned = xyes; then
     AC_DEFINE(RLIM_T_IS_UNSIGNED)
     DEFAULT_RLIM_T="unsigned $DEFAULT_RLIM_T"
@@ -2177,7 +2177,7 @@ zsh_cv_sys_fifo,
 #include <unistd.h>
 #include <stdlib.h>
 #include <sys/stat.h>
-main()
+int main()
 {
     char c;
     int fd;
@@ -2278,7 +2278,7 @@ zsh_cv_sys_link,
 #include <unistd.h>
 #include <fcntl.h>
 #include <stdlib.h>
-main()
+int main()
 {
     int ret;
     char *tmpfile, *newfile;
@@ -2311,7 +2311,7 @@ zsh_cv_sys_killesrch,
 #include <signal.h>
 #include <errno.h>
 #include <stdlib.h>
-main()
+int main()
 {
     int pid = (getpid() + 10000) & 0xffffff;
     while (pid && (kill(pid, 0) == 0 || errno != ESRCH)) pid >>= 1;
@@ -2341,7 +2341,7 @@ int child=0;
 void handler(sig)
     int sig;
 {if(sig==SIGCHLD) child=1;}
-main() {
+int main() {
     struct sigaction act;
     sigset_t set;
     int pid, ret;
@@ -2389,7 +2389,7 @@ case "x$zsh_working_tcsetpgrp" in
 #include <unistd.h>
 #include <fcntl.h>
 #include <stdlib.h>
-main() {
+int main() {
     int fd;
     int ret;
     fd=open("/dev/tty", O_RDWR);
@@ -2436,7 +2436,7 @@ if test x$ac_cv_func_getpwnam = xyes; th
 #include <string.h>
 #include <stdlib.h>
 #include <unistd.h>
-main() {
+int main() {
     struct passwd *pw1, *pw2;
     char buf[1024], name[1024];
     sprintf(buf, "%d:%d", getpid(), rand());
@@ -2765,7 +2765,7 @@ elif test "x$dynamic" = xyes; then
 #include <fcntl.h>
 #include <stdlib.h>
 #include <unistd.h>
-main(argc, argv)
+int main(argc, argv)
 int argc;
 char *argv[];
 {
@@ -2841,7 +2841,7 @@ char *argv[];
   fi
   case "$host_os" in
     osf*) DLLDFLAGS="${DLLDFLAGS=-shared -expect_unresolved '*'}" ;;
-    *freebsd*|*netbsd*|linux*|irix*|gnu*|interix*|dragonfly*) DLLDFLAGS="${DLLDFLAGS=-shared}" ;;
+    *freebsd*|*netbsd*|linux*|irix*|gnu*|interix*|*dragonfly*|*midnight*) DLLDFLAGS="${DLLDFLAGS=-shared}" ;;
     sunos*)       DLLDFLAGS="${DLLDFLAGS=-assert nodefinitions}" ;;
     sysv4*|esix*) DLLDFLAGS="${DLLDFLAGS=-G $ldflags}" ;;
     aix*)         DLLDFLAGS="${DLLDFLAGS=-G -bexpall -lc}" ;;
@@ -2912,7 +2912,7 @@ LDFLAGS="$old_LDFLAGS")
   AC_CACHE_CHECK(if your dlsym() needs a leading underscore,
    zsh_cv_func_dlsym_needs_underscore,
    [echo failed >conftestval && cat >conftest.c <<EOM
-fred () { }
+int fred () { }
 EOM
     AC_TRY_COMMAND($CC -c $CFLAGS $CPPFLAGS $DLCFLAGS conftest.c 1>&AS_MESSAGE_LOG_FD) &&
     AC_TRY_COMMAND($DLLD $LDFLAGS $DLLDFLAGS -o conftest.$DL_EXT conftest.o 1>&AS_MESSAGE_LOG_FD) &&
@@ -2945,7 +2945,7 @@ char *zsh_gl_sym_addr ;
 
 extern int fred() ;
 
-main()
+int main()
 {
     void * handle ;
     void * symbol ;

