# Buildsheet autogenerated by ravenadm tool -- Do not edit.

NAMEBASE=		R-readxl
VERSION=		1.4.3
KEYWORDS=		cran
VARIANTS=		standard
SDESC[standard]=	Read Excel Files
HOMEPAGE=		https://readxl.tidyverse.org
CONTACT=		CRAN_Automaton[cran@ironwolf.systems]

DOWNLOAD_GROUPS=	main
SITES[main]=		CRAN/src/contrib
			https://loki.dragonflybsd.org/cranfiles/
DISTFILE[1]=		readxl_1.4.3.tar.gz:main
DIST_SUBDIR=		CRAN
DF_INDEX=		1
SPKGS[standard]=	single

OPTIONS_AVAILABLE=	none
OPTIONS_STANDARD=	none

BUILDRUN_DEPENDS=	R-cellranger:single:standard
			R-tibble:single:standard
			R-cpp11:single:standard
			R-progress:single:standard

USES=			cran gmake

DISTNAME=		readxl

GENERATED=		yes

INSTALL_REQ_TOOLCHAIN=	yes

[FILE:427:descriptions/desc.single]
readxl: Read Excel Files

Import excel files into R. Supports '.xls' via the embedded 'libxls' C
library &lt;<a href="https://github.com/libxls/libxls"
target="_top">https://github.com/libxls/libxls</a>&gt; and '.xlsx' via the
embedded 'RapidXML' C++ library &lt;<a
href="https://rapidxml.sourceforge.net/"
target="_top">https://rapidxml.sourceforge.net/</a>&gt;. Works on Windows,
Mac and Linux without external dependencies.


[FILE:103:distinfo]
7efebbcdefeb8523633db62b3eeb6ea2e4e81e3d010d8b2adb134011c09a5948      2093488 CRAN/readxl_1.4.3.tar.gz


[FILE:167:patches/patch-src_ColSpec.h]
--- src/ColSpec.h.orig	2022-03-23 23:43:36 UTC
+++ src/ColSpec.h
@@ -1,5 +1,6 @@
 #pragma once
 
+#include <sys/types.h>
 #include "utils.h"
 #include "StringSet.h"
 


[FILE:486:patches/patch-src_libxls_locale.c]
--- src/libxls/locale.c.orig	2022-03-28 17:24:54 UTC
+++ src/libxls/locale.c
@@ -78,7 +78,7 @@ size_t xls_wcstombs_l(char *restrict s,
     return wcstombs(s, pwcs, n);
 #elif defined(_WIN32) || defined(WIN32) || defined(_WIN64) || defined(WIN64) || defined(WINDOWS)
     return _wcstombs_l(s, pwcs, n, loc);
-#elif defined(HAVE_WCSTOMBS_L)
+#elif defined(HAVE_WCSTOMBS_L) || defined(__NetBSD__)
     return wcstombs_l(s, pwcs, n, loc);
 #else
     locale_t oldlocale = uselocale(loc);

