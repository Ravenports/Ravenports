# Buildsheet autogenerated by ravenadm tool -- Do not edit.

NAMEBASE=		jam
VERSION=		2.6.1
REVISION=		1
KEYWORDS=		devel
VARIANTS=		std
SDESC[std]=		Simple but more powerful alternative to make
HOMEPAGE=		https://github.com/gorlak/Jam
CONTACT=		Michael_Reim[kraileth@elderlinux.org]

DOWNLOAD_GROUPS=	main
SITES[main]=		http://ravenports.elderlinux.org/distcache/
DISTFILE[1]=		jam-2.6.1.tar:main
DF_INDEX=		1
SPKGS[std]=		set
			primary
			docs

OPTIONS_AVAILABLE=	none
OPTIONS_STANDARD=	none

LICENSE=		CUSTOM1:primary
LICENSE_TERMS=		primary:{{WRKDIR}}/TERMS
LICENSE_NAME=		CUSTOM1:"Perforce Jam License"
LICENSE_FILE=		CUSTOM1:{{WRKDIR}}/TERMS
LICENSE_AWK=		TERMS:"^$$"
LICENSE_SOURCE=		TERMS:{{WRKSRC}}/jam.c
LICENSE_SCHEME=		solo

FPC_EQUIVALENT=		devel/jam

post-patch:
			${REINPLACE_CMD} -e '/ccs/d' ${WRKSRC}/Jambase
			${REINPLACE_CMD} -e '/ccs/d' ${WRKSRC}/jambase.c

do-install:
			${INSTALL_PROGRAM} ${WRKSRC}/jam0 \
				${STAGEDIR}${PREFIX}/bin/jam
			${MKDIR} ${STAGEDIR}${STD_DOCDIR}
			${CP} ${WRKSRC}/*.html ${STAGEDIR}${STD_DOCDIR}

[FILE:267:descriptions/desc.primary]
Perforce JAM (short for "Just Another Make") is an open-source build tool 
that can be used as a replacement for traditional make. While it is a lot 
simpler to use it is a lot more powerful than make. "Jamfiles" are in 
general much more portable between platforms.


[FILE:92:distinfo]
ace6b227c1a9985934fd13c9c0ae4f7ff44171c6ded8b83bb3da75e6efdcb3a7       665600 jam-2.6.1.tar


[FILE:8:manifests/plist.primary]
bin/jam


[FILE:53:manifests/plist.docs]
share/doc/jam/
 Jam.html
 Jambase.html
 Jamfile.html


[FILE:224:patches/patch-execunix.c]
--- execunix.c.orig	2019-06-20 23:12:56 UTC
+++ execunix.c
@@ -51,9 +51,8 @@
 # include <process.h>
 # endif
 
-# ifdef OS_MACOSX
 # include <unistd.h>
-# endif
+# include <sys/wait.h>
 
 # ifdef OS_NT 
 # define USE_EXECNT


[FILE:228:patches/patch-fileunix.c]
--- fileunix.c.orig	2019-06-20 23:12:56 UTC
+++ fileunix.c
@@ -47,6 +47,8 @@
 # define PORTAR 1
 # endif
 
+#include <unistd.h>
+
 # if defined( OS_RHAPSODY ) || \
      defined( OS_DARWIN ) || \
      defined( OS_MACOSX ) || \


[FILE:248:patches/patch-jam.c]
--- jam.c.orig	2019-06-20 23:12:56 UTC
+++ jam.c
@@ -166,7 +166,7 @@ extern char **environ;
 # endif
 # endif
 
-main( int argc, char **argv, char **arg_environ )
+int main( int argc, char **argv, char **arg_environ )
 {
 	int		n;
 	const char	*s;


[FILE:261:patches/patch-jam.h]
--- jam.h.orig	2014-08-07 18:24:14 UTC
+++ jam.h
@@ -258,7 +258,7 @@
 # define OSMINOR "OS=CYGWIN"
 # define OS_CYGWIN
 # endif
-# ifdef __FreeBSD__
+# if defined __FreeBSD__ || defined __DragonFly__
 # define OSMINOR "OS=FREEBSD"
 # define OS_FREEBSD
 # endif


[FILE:222:patches/patch-make1.c]
--- make1.c.orig	2019-06-20 23:12:56 UTC
+++ make1.c
@@ -49,6 +49,7 @@
  * 12/03/02 (seiwald) - fix odd includes support by grafting them onto depends
  */
 
+# include <unistd.h>
 # include "jam.h"
 
 # include "lists.h"


[FILE:196:patches/patch-mkjambase.c]
--- mkjambase.c.orig	2019-06-20 23:12:56 UTC
+++ mkjambase.c
@@ -24,6 +24,7 @@
 # include <stdio.h>
 # include <string.h>
 
+int
 main( int argc, char **argv, char **envp )
 {
 	char buf[ 1024 ];


[FILE:340:patches/patch-parse.c]
--- parse.c.orig	2019-06-20 23:12:56 UTC
+++ parse.c
@@ -98,8 +98,11 @@ parse_make(
 
 	if( DEBUG_COMPILE && !p->left && !p->right )
 	{
+#pragma GCC diagnostic push
+#pragma GCC diagnostic ignored "-Wimplicit-function-declaration"
 	    p->yyfname = yyfname();
 	    p->yylineno = yylineno();
+#pragma GCC diagnostic pop
 	}
 
 	return p;

