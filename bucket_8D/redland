# Buildsheet autogenerated by ravenadm tool -- Do not edit.

NAMEBASE=		redland
VERSION=		1.0.17
REVISION=		3
KEYWORDS=		textproc
VARIANTS=		std bdb mysql pgsql virtuoso
SDESC[pgsql]=		RDF Application Framework (PostgreSQL backend)
SDESC[mysql]=		RDF Application Framework (MySQL backend)
SDESC[std]=		RDF Application Framework (SQLite backend)
SDESC[virtuoso]=	RDF Application Framework (Virtuoso backend)
SDESC[bdb]=		RDF Application Framework (BDB backend)
HOMEPAGE=		https://librdf.org/
CONTACT=		nobody

DOWNLOAD_GROUPS=	main
SITES[main]=		https://download.librdf.org/source/
DISTFILE[1]=		redland-1.0.17.tar.gz:main
DF_INDEX=		1
SPKGS[pgsql]=		set
			primary
			dev
			man
SPKGS[mysql]=		set
			primary
			dev
			man
SPKGS[std]=		set
			primary
			dev
			docs
			man
SPKGS[virtuoso]=	set
			primary
			dev
			man
SPKGS[bdb]=		set
			primary
			dev
			man

OPTIONS_AVAILABLE=	BDB MYSQL PGSQL VIRTUOSO NOTSTD
OPTIONS_STANDARD=	none
VOPTS[pgsql]=		BDB=OFF MYSQL=OFF PGSQL=ON VIRTUOSO=OFF NOTSTD=ON
VOPTS[mysql]=		BDB=OFF MYSQL=ON PGSQL=OFF VIRTUOSO=OFF NOTSTD=ON
VOPTS[virtuoso]=	BDB=OFF MYSQL=OFF PGSQL=OFF VIRTUOSO=ON NOTSTD=ON
VOPTS[bdb]=		BDB=ON MYSQL=OFF PGSQL=OFF VIRTUOSO=OFF NOTSTD=ON

BUILD_DEPENDS=		raptor:dev:std
			rasqal:dev:std
BUILDRUN_DEPENDS=	libltdl:single:std
			rasqal:primary:std
			raptor:primary:std
EXRUN[dev]=		rasqal:dev:std
			raptor:dev:std

USES=			gmake libtool perl:build pkgconfig shebangfix
			mbsdfix

FPC_EQUIVALENT=		textproc/redland
SHEBANG_FILES=		scripts/touch-mtime.pl

MUST_CONFIGURE=		gnu
CONFIGURE_ARGS=		--with-threestore=no

INSTALL_TARGET=		install-strip
INSTALL_REQ_TOOLCHAIN=	yes

[NOTSTD].DESCRIPTION=			Don't build with SQLite backend
[NOTSTD].CONFIGURE_ARGS_OFF=		--with-sqlite=3
[NOTSTD].USES_OFF=			sqlite

[MYSQL].CONFIGURE_ARGS_OFF=		--with-mysql=no
[MYSQL].CONFIGURE_ARGS_ON=		--with-mysql=yes
[MYSQL].CPPFLAGS_ON=			-I{{LOCALBASE}}/include/mysql
					-DHAVE_MYSQL_H
[MYSQL].LDFLAGS_ON=			-L{{LOCALBASE}}/lib/mysql
[MYSQL].USES_ON=			mysql
					execinfo
					ssl
					zstd:build
					zlib:build

[PGSQL].CONFIGURE_ARGS_OFF=		--with-postgresql=no
[PGSQL].CONFIGURE_ARGS_ON=		--with-postgresql=yes
[PGSQL].USES_ON=			pgsql

[VIRTUOSO].DESCRIPTION=			Build with virtuoso/ODBC backend
[VIRTUOSO].BUILDRUN_DEPENDS_ON=		unixODBC:primary:std
[VIRTUOSO].BUILD_DEPENDS_ON=		unixODBC:dev:std
[VIRTUOSO].CONFIGURE_ARGS_OFF=		--with-virtuoso=no
[VIRTUOSO].CONFIGURE_ARGS_ON=		--with-virtuoso=yes

[BDB].DESCRIPTION=			Build with Berkeley database backend
[BDB].CONFIGURE_ARGS_OFF=		--with-bdb=no
[BDB].CONFIGURE_ARGS_ON=		--with-bdb=yes
[BDB].USES_ON=				bdb

post-install-NOTSTD-ON:
	${RM} -r ${STAGEDIR}${PREFIX}/share/gtk-doc

post-install-NOTSTD-OFF:
	${MV} ${STAGEDIR}${PREFIX}/share/gtk-doc/html/redland \
		${STAGEDIR}${STD_DOCDIR}
	${RM} -r ${STAGEDIR}${PREFIX}/share/gtk-doc

[FILE:448:descriptions/desc.primary.std]
Redland is a set of libraries that provide a high-level interface for RDF
allowing the model to be stored, queried and manipulated. Redland implements
each of the RDF model concepts in its own class and provides an object based
API for them. Some of the classes providing the parsers, storage mechanisms
and other elements are built as modules that can be added or removed as
required.

This package contains the standard variant (sqlite backend).


[FILE:434:descriptions/desc.primary.bdb]
Redland is a set of libraries that provide a high-level interface for RDF
allowing the model to be stored, queried and manipulated. Redland implements
each of the RDF model concepts in its own class and provides an object based
API for them. Some of the classes providing the parsers, storage mechanisms
and other elements are built as modules that can be added or removed as
required.

This package contains the BDB-backend variant.


[FILE:436:descriptions/desc.primary.mysql]
Redland is a set of libraries that provide a high-level interface for RDF
allowing the model to be stored, queried and manipulated. Redland implements
each of the RDF model concepts in its own class and provides an object based
API for them. Some of the classes providing the parsers, storage mechanisms
and other elements are built as modules that can be added or removed as
required.

This package contains the MySQL-backend variant.


[FILE:441:descriptions/desc.primary.pgsql]
Redland is a set of libraries that provide a high-level interface for RDF
allowing the model to be stored, queried and manipulated. Redland implements
each of the RDF model concepts in its own class and provides an object based
API for them. Some of the classes providing the parsers, storage mechanisms
and other elements are built as modules that can be added or removed as
required.

This package contains the PostgreSQL-backend variant.


[FILE:439:descriptions/desc.primary.virtuoso]
Redland is a set of libraries that provide a high-level interface for RDF
allowing the model to be stored, queried and manipulated. Redland implements
each of the RDF model concepts in its own class and provides an object based
API for them. Some of the classes providing the parsers, storage mechanisms
and other elements are built as modules that can be added or removed as
required.

This package contains the Virtuoso-backend variant.


[FILE:100:distinfo]
de1847f7b59021c16bdc72abb4d8e2d9187cd6124d69156f3326dd34ee043681      1621566 redland-1.0.17.tar.gz


[FILE:130:manifests/plist.primary.std]
bin/
 rdfproc
 redland-db-upgrade
lib/
 librdf.so.0
 librdf.so.0.0.0
lib/redland/librdf_storage_sqlite.so
share/redland/Redland.i


[FILE:404:manifests/plist.dev.std]
bin/redland-config
include/
 librdf.h
 rdf_concepts.h
 rdf_digest.h
 rdf_hash.h
 rdf_init.h
 rdf_iterator.h
 rdf_list.h
 rdf_log.h
 rdf_model.h
 rdf_node.h
 rdf_parser.h
 rdf_query.h
 rdf_raptor.h
 rdf_serializer.h
 rdf_statement.h
 rdf_storage.h
 rdf_storage_module.h
 rdf_stream.h
 rdf_uri.h
 rdf_utf8.h
 redland.h
lib/
 librdf.a
 librdf.so
lib/pkgconfig/redland.pc
lib/redland/librdf_storage_sqlite.a


[FILE:1259:manifests/plist.docs.std]
share/doc/redland/
 home.png
 index.html
 index.sgml
 indexes.html
 introduction.html
 left.png
 objects.html
 redland-changes-1-0-12-to-1-0-13.html
 redland-changes-1-0-13-to-1-0-14.html
 redland-changes-1-0-14-to-1-0-15.html
 redland-changes-1-0-15-to-1-0-16.html
 redland-changes-1-0-16-to-1-0-16.html
 redland-changes.html
 redland-concepts.html
 redland-digest.html
 redland-files.html
 redland-general.html
 redland-hash.html
 redland-heuristics.html
 redland-iterator.html
 redland-list.html
 redland-log.html
 redland-model.html
 redland-node.html
 redland-parser.html
 redland-query-results.html
 redland-query.html
 redland-serializer.html
 redland-statement.html
 redland-storage-module-file.html
 redland-storage-module-hashes.html
 redland-storage-module-memory.html
 redland-storage-module-mysql.html
 redland-storage-module-postgresql.html
 redland-storage-module-sqlite.html
 redland-storage-module-tstore.html
 redland-storage-module-uri.html
 redland-storage-module-virtuoso.html
 redland-storage-modules.html
 redland-storage.html
 redland-stream.html
 redland-unicode.html
 redland-uri.html
 redland-world.html
 redland.devhelp2
 redland.html
 reference-manual.html
 right.png
 style.css
 tutorial-introduction.html
 tutorial.html
 up.png


[FILE:92:manifests/plist.man]
share/man/man1/
 rdfproc.1
 redland-config.1
 redland-db-upgrade.1
share/man/man3/redland.3


[FILE:93:manifests/plist.primary.bdb]
bin/
 rdfproc
 redland-db-upgrade
lib/
 librdf.so.0
 librdf.so.0.0.0
share/redland/Redland.i


[FILE:368:manifests/plist.dev.bdb]
bin/redland-config
include/
 librdf.h
 rdf_concepts.h
 rdf_digest.h
 rdf_hash.h
 rdf_init.h
 rdf_iterator.h
 rdf_list.h
 rdf_log.h
 rdf_model.h
 rdf_node.h
 rdf_parser.h
 rdf_query.h
 rdf_raptor.h
 rdf_serializer.h
 rdf_statement.h
 rdf_storage.h
 rdf_storage_module.h
 rdf_stream.h
 rdf_uri.h
 rdf_utf8.h
 redland.h
lib/
 librdf.a
 librdf.so
lib/pkgconfig/redland.pc


[FILE:159:manifests/plist.primary.mysql]
bin/
 rdfproc
 redland-db-upgrade
lib/
 librdf.so.0
 librdf.so.0.0.0
lib/redland/librdf_storage_mysql.so
share/redland/
 Redland.i
 mysql-v1.ttl
 mysql-v2.ttl


[FILE:403:manifests/plist.dev.mysql]
bin/redland-config
include/
 librdf.h
 rdf_concepts.h
 rdf_digest.h
 rdf_hash.h
 rdf_init.h
 rdf_iterator.h
 rdf_list.h
 rdf_log.h
 rdf_model.h
 rdf_node.h
 rdf_parser.h
 rdf_query.h
 rdf_raptor.h
 rdf_serializer.h
 rdf_statement.h
 rdf_storage.h
 rdf_storage_module.h
 rdf_stream.h
 rdf_uri.h
 rdf_utf8.h
 redland.h
lib/
 librdf.a
 librdf.so
lib/pkgconfig/redland.pc
lib/redland/librdf_storage_mysql.a


[FILE:149:manifests/plist.primary.pgsql]
bin/
 rdfproc
 redland-db-upgrade
lib/
 librdf.so.0
 librdf.so.0.0.0
lib/redland/librdf_storage_postgresql.%%SHARED_OBJECT%%
share/redland/Redland.i


[FILE:408:manifests/plist.dev.pgsql]
bin/redland-config
include/
 librdf.h
 rdf_concepts.h
 rdf_digest.h
 rdf_hash.h
 rdf_init.h
 rdf_iterator.h
 rdf_list.h
 rdf_log.h
 rdf_model.h
 rdf_node.h
 rdf_parser.h
 rdf_query.h
 rdf_raptor.h
 rdf_serializer.h
 rdf_statement.h
 rdf_storage.h
 rdf_storage_module.h
 rdf_stream.h
 rdf_uri.h
 rdf_utf8.h
 redland.h
lib/
 librdf.a
 librdf.so
lib/pkgconfig/redland.pc
lib/redland/librdf_storage_postgresql.a


[FILE:147:manifests/plist.primary.virtuoso]
bin/
 rdfproc
 redland-db-upgrade
lib/
 librdf.so.0
 librdf.so.0.0.0
lib/redland/librdf_storage_virtuoso.%%SHARED_OBJECT%%
share/redland/Redland.i


[FILE:406:manifests/plist.dev.virtuoso]
bin/redland-config
include/
 librdf.h
 rdf_concepts.h
 rdf_digest.h
 rdf_hash.h
 rdf_init.h
 rdf_iterator.h
 rdf_list.h
 rdf_log.h
 rdf_model.h
 rdf_node.h
 rdf_parser.h
 rdf_query.h
 rdf_raptor.h
 rdf_serializer.h
 rdf_statement.h
 rdf_storage.h
 rdf_storage_module.h
 rdf_stream.h
 rdf_uri.h
 rdf_utf8.h
 redland.h
lib/
 librdf.a
 librdf.so
lib/pkgconfig/redland.pc
lib/redland/librdf_storage_virtuoso.a


[FILE:415:patches/patch-src_rdf__storage__mysql.c]
--- src/rdf_storage_mysql.c.orig	2012-12-29 23:01:17 UTC
+++ src/rdf_storage_mysql.c
@@ -447,7 +447,11 @@ librdf_storage_mysql_get_handle(librdf_s
 
 #ifdef HAVE_MYSQL_OPT_RECONNECT
   if(1) {
+#if MYSQL_VERSION_ID > 80000
+    bool value=(context->reconnect) ? 1 : 0;
+#else
     my_bool value=(context->reconnect) ? 1 : 0;
+#endif
     mysql_options(connection->handle, MYSQL_OPT_RECONNECT, &value);
   }
 #endif

