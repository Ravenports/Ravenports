# Buildsheet autogenerated by ravenadm tool -- Do not edit.

NAMEBASE=		apq-mysql
VERSION=		3.2.0
REVISION=		1
KEYWORDS=		databases ada
VARIANTS=		standard
SDESC[standard]=	APQ Ada95 MySQL database driver
HOMEPAGE=		none
CONTACT=		John_Marino[draco@marino.st]

DOWNLOAD_GROUPS=	main
SITES[main]=		FREELOCAL/marino
DISTFILE[1]=		apq-mysql-3.2.0.tar.bz2:main
DF_INDEX=		1
SPKGS[standard]=	single

OPTIONS_AVAILABLE=	none
OPTIONS_STANDARD=	none

BUILD_DEPENDS=		bash:primary:standard
			mysql56:client:standard
BUILDRUN_DEPENDS=	apq-base:single:standard

USES=			gprbuild execinfo zlib

LICENSE=		GMGPL:single
LICENSE_TERMS=		single:{{WRKDIR}}/TERMS
LICENSE_FILE=		GMGPL:stock
LICENSE_AWK=		TERMS:"^$$"
LICENSE_SOURCE=		TERMS:{{WRKSRC}}/src/apq-mysql-client.ads
LICENSE_SCHEME=		solo

FPC_EQUIVALENT=		databases/apq-mysql

MUST_CONFIGURE=		yes
CONFIGURE_ARGS=		--prefix={{PREFIX}}
			--disable-relocatable
			--work-path={{WRKDIR}}/build
			--processors={{MAKE_JOBS_NUMBER}}

post-patch:
	${REINPLACE_CMD} -e '/for Object_Dir/d' \
		${WRKSRC}/src-in/apq-mysql.gpr.in
	${REINPLACE_CMD} -e 's|processors=2|gprbuild_params="--autoconf=apq.cgpr"|' \
		${WRKSRC}/configure
	${REINPLACE_CMD} -e 's|-ws|-ws --autoconf=dummy.cgpr|' \
		${WRKSRC}/scripts/buildutil.sh

post-configure:
	# The header generated with MySQL 5.6 comes with two instances of
	# double underscore variables, which is illegal in Ada
	${SED} -i'' -e 's|__|_|' \
		${WRKDIR}/build/include/apq-mysql/apq-mysql.ads

do-install:
	${MKDIR} ${STAGEDIR}${PREFIX}/share/gpr \
		${STAGEDIR}${PREFIX}/lib/apq-mysql/static \
		${STAGEDIR}${PREFIX}/include/apq-mysql
	${INSTALL_DATA} ${WRKDIR}/build/include/apq-mysql/* \
		${STAGEDIR}${PREFIX}/include/apq-mysql
	${INSTALL_DATA} ${WRKDIR}/build/lib/apq-mysql/static/*.a* \
		${STAGEDIR}${PREFIX}/lib/apq-mysql/static
	${INSTALL_DATA} ${WRKDIR}/build/lib/gnat/apq-mysql.gpr \
		${STAGEDIR}${PREFIX}/share/gpr

[FILE:119:descriptions/desc.single]
APQ is a database interface library written in Ada95, and this package
contains the MySQL driver that is used with it.


[FILE:102:distinfo]
7dfa7eaf52b2b5695f067595903fb0f5200583b462603cb707b26f11064ee358        29910 apq-mysql-3.2.0.tar.bz2


[FILE:188:manifests/plist.single]
include/apq-mysql/
 apq-mysql-client.adb
 apq-mysql-client.ads
 apq-mysql.ads
 c_mysql.c
lib/apq-mysql/static/
 apq-mysql-client.ali
 apq-mysql.ali
 libapq-mysql.a
share/gpr/apq-mysql.gpr

