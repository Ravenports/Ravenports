# Buildsheet autogenerated by ravenadm tool -- Do not edit.

NAMEBASE=		prettier-ada
VERSION=		25.0.0
KEYWORDS=		ada textproc
VARIANTS=		std
SDESC[std]=		Ada port of prettier formatter
HOMEPAGE=		https://github.com/AdaCore/prettier-ada
CONTACT=		John_Marino[draco@marino.st]

DOWNLOAD_GROUPS=	main
SITES[main]=		GITHUB/AdaCore:prettier-ada:v25.0.0
DISTFILE[1]=		generated:main
DF_INDEX=		1
SPKGS[std]=		set
			primary
			dev

OPTIONS_AVAILABLE=	none
OPTIONS_STANDARD=	none

BUILD_DEPENDS=		libvss:dev:std
			gnatcoll-core:dev:std
BUILDRUN_DEPENDS=	libvss:primary:std
			gnatcoll-core:primary:std
EXRUN[dev]=		libvss:dev:std

USES=			gmake gprbuild

MAKE_ARGS=		PROCESSORS={{MAKE_JOBS_NUMBER}}
			BUILD_MODE=prod

INSTALL_TARGET=		install-all
INSTALL_REQ_TOOLCHAIN=	yes
SOVERSION=		25.0.0

post-install:
	${STRIP_CMD} ${STAGEDIR}${PREFIX}/lib/lib*.so

pre-configure:
	# support soname libraries
	${REINPLACE_CMD} -e 's|@SOVERSION@|25.0.0|' \
		${WRKSRC}/prettier_ada.gpr

[FILE:384:descriptions/desc.primary]
This project is a port of the Prettier formatter to the Ada programming
language. The aim of this project is to provide a tool that allows Ada
programmers to create formatters for any language of their choosing.

Please note that only the core generic formatting algorithm and its
dependencies were ported. The formatters for all supported languages are
not included in this project.


[FILE:113:distinfo]
21782e6ddc031ae4b32fc42e7213fe0aed3377e895462bd7a279e38da6b60f1e        60082 AdaCore-prettier-ada-25.0.0.tar.gz


[FILE:112:manifests/plist.primary]
lib/libprettier_ada.so.%%SOVERSION%%
lib/prettier_ada/prettier_ada.relocatable/libprettier_ada.so.%%SOVERSION%%


[FILE:1648:manifests/plist.dev]
include/prettier_ada/prettier_ada/
 prettier_ada-document_vector_vectors.ads
 prettier_ada-document_vectors.ads
 prettier_ada-documents-builders.adb
 prettier_ada-documents-builders.ads
 prettier_ada-documents-implementation.adb
 prettier_ada-documents-implementation.ads
 prettier_ada-documents-json.adb
 prettier_ada-documents-json.ads
 prettier_ada-documents.adb
 prettier_ada-documents.ads
 prettier_ada-generic_formatters.adb
 prettier_ada-generic_formatters.ads
 prettier_ada-optionals.ads
 prettier_ada.ads
lib/libprettier_ada.so
lib/prettier_ada/prettier_ada.relocatable/
 libprettier_ada.so
 prettier_ada-document_vector_vectors.ali
 prettier_ada-document_vectors.ali
 prettier_ada-documents-builders.ali
 prettier_ada-documents-implementation.ali
 prettier_ada-documents-json.ali
 prettier_ada-documents.ali
 prettier_ada-generic_formatters.ali
 prettier_ada-optionals.ali
 prettier_ada.ali
lib/prettier_ada/prettier_ada.static/
 libprettier_ada.a
 prettier_ada-document_vector_vectors.ali
 prettier_ada-document_vectors.ali
 prettier_ada-documents-builders.ali
 prettier_ada-documents-implementation.ali
 prettier_ada-documents-json.ali
 prettier_ada-documents.ali
 prettier_ada-generic_formatters.ali
 prettier_ada-optionals.ali
 prettier_ada.ali
lib/prettier_ada/prettier_ada.static-pic/
 libprettier_ada.a
 prettier_ada-document_vector_vectors.ali
 prettier_ada-document_vectors.ali
 prettier_ada-documents-builders.ali
 prettier_ada-documents-implementation.ali
 prettier_ada-documents-json.ali
 prettier_ada-documents.ali
 prettier_ada-generic_formatters.ali
 prettier_ada-optionals.ali
 prettier_ada.ali
share/gpr/prettier_ada.gpr


[FILE:1243:patches/patch-Makefile]
--- Makefile.orig	2024-10-07 15:46:25 UTC
+++ Makefile
@@ -47,11 +47,12 @@ install:
 		-XPRETTIER_ADA_LIBRARY_TYPE=$(LIBRARY_TYPE) \
 		-XLIBRARY_TYPE=$(LIBRARY_TYPE) \
 		-XPRETTIER_ADA_BUILD_MODE=$(BUILD_MODE) \
-		--prefix="$(PREFIX)" \
+		--prefix="(DESTDIR)$(PREFIX)" \
 		--install-name=prettier_ada \
 		--sources-subdir=include/prettier_ada \
 		--build-name=$(LIBRARY_TYPE) \
 		--build-var=LIBRARY_TYPE \
+		--no-manifests \
 		-P $(LIB_PROJECT) -p -f ; \
 
 .PHONY: install-all
@@ -61,11 +62,12 @@ install-all:
 			-XPRETTIER_ADA_LIBRARY_TYPE=$$library_type \
 			-XLIBRARY_TYPE=$$library_type \
 			-XPRETTIER_ADA_BUILD_MODE=$(BUILD_MODE) \
-			--prefix="$(PREFIX)" \
+			--prefix="$(DESTDIR)$(PREFIX)" \
 			--install-name=prettier_ada \
 			--sources-subdir=include/prettier_ada \
 			--build-name=$$library_type \
 			--build-var=LIBRARY_TYPE \
+			--no-manifests \
 			-P $(LIB_PROJECT) -p -f ; \
 	done ;
 
@@ -87,8 +89,9 @@ install-test-programs:
 		-XLIBRARY_TYPE=static \
 		-XPRETTIER_ADA_LIBRARY_TYPE=static \
 		-XPRETTIER_ADA_BUILD_MODE=$(BUILD_MODE) \
-		--prefix="$(PREFIX)" \
+		--prefix="$(DESTDIR)$(PREFIX)" \
 		--install-name=test_programs \
+		--no-manifests \
 		--mode=usage \
 		-P$(TEST_PROGRAMS) \
 		-p \


[FILE:430:patches/patch-prettier__ada.gpr]
--- prettier_ada.gpr.orig	2024-10-07 15:46:25 UTC
+++ prettier_ada.gpr
@@ -20,6 +20,7 @@ library project Prettier_Ada is
    for Library_Name use "prettier_ada";
    for Library_Dir use "lib/" & Library_Type & "/" & Build_Mode;
    for Library_Kind use Library_Type;
+   for Library_Version use "libprettier_ada.so.@SOVERSION@";
    for Object_Dir use "obj/" & Library_Type & "/" & Build_Mode;
 
    for Source_Dirs use ("src/");

