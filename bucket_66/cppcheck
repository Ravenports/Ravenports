# Buildsheet autogenerated by ravenadm tool -- Do not edit.

NAMEBASE=		cppcheck
VERSION=		2.16.2
KEYWORDS=		devel
VARIANTS=		std
SDESC[std]=		Static analysis tool for C/C++
HOMEPAGE=		https://github.com/danmar/cppcheck
CONTACT=		nobody

DOWNLOAD_GROUPS=	main
SITES[main]=		GITHUB/danmar:cppcheck:2.16.2
DISTFILE[1]=		generated:main
DF_INDEX=		1
SPKGS[std]=		set
			tools
			gui
			lang
			man

OPTIONS_AVAILABLE=	none
OPTIONS_STANDARD=	none

BUILD_DEPENDS=		docbook-xsl:primary:std
			qt6-qttools:dev:std
			qt6-qttools:primary:std
			qt6-qtbase:dev:std
BUILDRUN_DEPENDS=	qt6-qtbase:primary:std
EXRUN[gui]=		cppcheck:tools:std
			qt6-qttools:primary:std

USES=			cmake shebangfix pcre python c++:tools,gui
GNOME_COMPONENTS=	libxslt

LICENSE=		GPLv3+:tools
LICENSE_TERMS=		tools:{{WRKDIR}}/TERMS
LICENSE_FILE=		GPLv3+:{{WRKSRC}}/COPYING
LICENSE_AWK=		TERMS:"^$$"
LICENSE_SOURCE=		TERMS:{{WRKSRC}}/cli/main.cpp
LICENSE_SCHEME=		solo

FPC_EQUIVALENT=		devel/cppcheck
SHEBANG_FILES=		htmlreport/cppcheck-htmlreport

SINGLE_JOB=		yes

CPPFLAGS=		-Wno-unused-function
CMAKE_ARGS=		-DHAVE_RULES:BOOL=ON
			-DUSE_MATCHCOMPILER="On"
			-DBUILD_GUI:BOOL=ON
			-DCMAKE_PREFIX_PATH:PATH="{{PREFIX}}/lib/qt6/cmake/"
			-DCMAKE_DISABLE_PRECOMPILE_HEADERS:BOOL=ON
			-DFILESDIR:PATH="{{PREFIX}}/share/Cppcheck"
			-DUSE_QT6:BOOL=ON

post-install:
	${INSTALL_SCRIPT} ${WRKSRC}/htmlreport/cppcheck-htmlreport \
		${STAGEDIR}${PREFIX}/bin
	${INSTALL_MAN} ${WRKSRC}/man/cppcheck.1 \
		${STAGEDIR}${MANPREFIX}/man/man1
	${STRIP_CMD} ${STAGEDIR}${PREFIX}/bin/cppcheck
	${STRIP_CMD} ${STAGEDIR}${PREFIX}/bin/cppcheck-gui

post-build:
	cd ${WRKSRC}/man && \
		${LOCALBASE}/bin/xsltproc --nonet \
		--param man.charmap.use.subset "0" \
		${LOCALBASE}/share/xsl/docbook/manpages/docbook.xsl \
		cppcheck.1.xml

[FILE:365:descriptions/desc.tools]
Cppcheck is a tool for static C/C++ code analysis, and it tries to
detect bugs that your compiler do not see.  Checks for: memory leaks,
mismatching allocation-deallocation, buffer overrun, and many more.

Cppcheck is versatile.  You can check non-standard code that includes
various compiler extensions, inline assembly code, etc.

The goal is no false positives.


[FILE:122:descriptions/desc.gui]
Cppcheck is a tool for static C/C++ code analysis.  This package contains
the Graphic User Interface (GUI) for this tool.


[FILE:108:distinfo]
521b996cb56b0c30f89e022abcb50aef85d7219cb7a7162fa81fe40fe6394206      3846122 danmar-cppcheck-2.16.2.tar.gz


[FILE:1131:manifests/plist.tools]
bin/
 cppcheck
 cppcheck-htmlreport
share/Cppcheck/addons/
 __init__.py
 cppcheck.py
 cppcheckdata.py
 findcasts.py
 misc.py
 misra.py
 misra_9.py
 naming.py
 namingng.py
 runaddon.py
 threadsafety.py
 y2038.py
share/Cppcheck/cfg/
 avr.cfg
 bento4.cfg
 boost.cfg
 bsd.cfg
 cairo.cfg
 cppcheck-lib.cfg
 cppunit.cfg
 dpdk.cfg
 embedded_sql.cfg
 emscripten.cfg
 ginac.cfg
 gnu.cfg
 googletest.cfg
 gtk.cfg
 icu.cfg
 kde.cfg
 libcerror.cfg
 libcurl.cfg
 libsigc++.cfg
 lua.cfg
 mfc.cfg
 microsoft_atl.cfg
 microsoft_sal.cfg
 microsoft_unittest.cfg
 motif.cfg
 nspr.cfg
 ntl.cfg
 opencv2.cfg
 opengl.cfg
 openmp.cfg
 openssl.cfg
 pcre.cfg
 posix.cfg
 protobuf.cfg
 python.cfg
 qt.cfg
 ruby.cfg
 sdl.cfg
 selinux.cfg
 sfml.cfg
 sqlite3.cfg
 std.cfg
 tinyxml2.cfg
 vcl.cfg
 windows.cfg
 wxsqlite3.cfg
 wxsvg.cfg
 wxwidgets.cfg
 zephyr.cfg
 zlib.cfg
share/Cppcheck/platforms/
 aix_ppc64.xml
 arm32-wchar_t2.xml
 arm32-wchar_t4.xml
 arm64-wchar_t2.xml
 arm64-wchar_t4.xml
 avr8.xml
 cray_sv1.xml
 elbrus-e1cp.xml
 mips32.xml
 msp430_eabi_large_datamodel.xml
 pic16.xml
 pic8-enhanced.xml
 pic8.xml
 unix32-unsigned.xml
 unix64-unsigned.xml


[FILE:156:manifests/plist.gui]
bin/cppcheck-gui
share/applications/cppcheck-gui.desktop
share/icons/hicolor/64x64/apps/cppcheck-gui.png
share/icons/hicolor/scalable/apps/cppcheck-gui.svg


[FILE:251:manifests/plist.lang]
share/Cppcheck/lang/
 cppcheck_de.qm
 cppcheck_es.qm
 cppcheck_fi.qm
 cppcheck_fr.qm
 cppcheck_it.qm
 cppcheck_ja.qm
 cppcheck_ka.qm
 cppcheck_ko.qm
 cppcheck_nl.qm
 cppcheck_ru.qm
 cppcheck_sr.qm
 cppcheck_sv.qm
 cppcheck_zh_CN.qm
 cppcheck_zh_TW.qm


[FILE:26:manifests/plist.man]
share/man/man1/cppcheck.1


[FILE:536:patches/patch-gui_CMakeLists.txt]
--- gui/CMakeLists.txt.orig	2024-12-19 11:05:17 UTC
+++ gui/CMakeLists.txt
@@ -81,7 +81,7 @@ CheckOptions:
     endif()
 
     install(TARGETS cppcheck-gui RUNTIME DESTINATION ${CMAKE_INSTALL_FULL_BINDIR} COMPONENT applications)
-    install(FILES ${qms} DESTINATION ${CMAKE_INSTALL_FULL_BINDIR} COMPONENT applications)
+    install(FILES ${qms} DESTINATION ${CMAKE_INSTALL_FULL_DATAROOTDIR}/${PROJECT_NAME}/lang COMPONENT applications)
 
     install(FILES cppcheck-gui.desktop DESTINATION ${CMAKE_INSTALL_DATAROOTDIR}/applications)
 

