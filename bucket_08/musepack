# Buildsheet autogenerated by ravenadm tool -- Do not edit.

NAMEBASE=		musepack
VERSION=		r475
KEYWORDS=		audio
VARIANTS=		std
SDESC[std]=		Decoder, encoder & replaygain for musepack (mpc)
HOMEPAGE=		https://www.musepack.net/
CONTACT=		Michael_Reim[kraileth@elderlinux.org]

DOWNLOAD_GROUPS=	main
SITES[main]=		https://files.musepack.net/source/
DISTFILE[1]=		musepack_src_r475.tar.gz:main
DF_INDEX=		1
SPKGS[std]=		set
			primary
			dev
			tools

OPTIONS_AVAILABLE=	none
OPTIONS_STANDARD=	none

EXRUN[tools]=		primary

USES=			autoreconf clang libtool

DISTNAME=		musepack_src_r475

LICENSE=		BSD3CLAUSE:primary
LICENSE_FILE=		BSD3CLAUSE:{{WRKDIR}}/LICENSE
LICENSE_SCHEME=		solo

FPC_EQUIVALENT=		audio/musepack

MUST_CONFIGURE=		gnu

INSTALL_TARGET=		install-strip
SOVERSION=		6.1.0

post-extract:
	${SED} -n '/mpc_decoder/!p;//q' ${WRKSRC}/libmpcdec/mpc_decoder.c > ${WRKDIR}/LICENSE

[FILE:454:descriptions/desc.primary]
Musepack is an audio compression format with a strong emphasis on high 
quality. It's not lossless, but it is designed for transparency, so that 
you won't be able to hear differences between the original wave file and 
the much smaller MPC file.

It is based on the MPEG-1 Layer-2 / MP2 algorithms, but since 1997 it has 
rapidly developed and vastly improved and is now at an advanced stage in 
which it contains heavily optimized and patentless code.


[FILE:88:descriptions/desc.tools]
This subpackage contains the tools (like encoder and decoder) that come 
with musepack.


[FILE:103:distinfo]
a4b1742f997f83e1056142d556a8c20845ba764b70365ff9ccf2e3f81c427b2b       188737 musepack_src_r475.tar.gz


[FILE:59:manifests/plist.primary]
lib/
 libmpcdec.so.%%SOMAJOR%%
 libmpcdec.so.%%SOVERSION%%


[FILE:127:manifests/plist.dev]
include/mpc/
 datatypes.h
 minimax.h
 mpc_types.h
 mpcdec.h
 mpcmath.h
 reader.h
 streaminfo.h
lib/
 libmpcdec.a
 libmpcdec.so


[FILE:46:manifests/plist.tools]
bin/
 mpc2sv8
 mpccut
 mpcdec
 mpcenc
 wavcmp


[FILE:327:patches/patch-configure.in]
--- configure.in.orig	2009-07-29 23:00:32.000000000 +0200
+++ configure.in	2025-01-05 20:55:34.364621000 +0100
@@ -30,7 +30,8 @@
 AM_CONDITIONAL([MPC_CHAP], [test "x$enable_mpcchap" = xyes])
 
 
-CHECK_VISIBILITY
+gl_VISIBILITY
+AM_CONDITIONAL([HAVE_VISIBILITY], [test "x$HAVE_VISIBILITY" = x1])
 
 AC_CONFIG_FILES([
 Makefile


[FILE:701:patches/patch-libmpcdec_requant.h]
--- libmpcdec/requant.h.orig	2009-02-23 19:44:04.000000000 +0100
+++ libmpcdec/requant.h	2025-01-05 20:57:23.780000000 +0100
@@ -47,9 +47,9 @@
 
 
 /* C O N S T A N T S */
-const mpc_uint8_t      Res_bit [18];     ///< Bits per sample for chosen quantizer
-const MPC_SAMPLE_FORMAT __Cc    [1 + 18]; ///< Requantization coefficients
-const mpc_int16_t       __Dc    [1 + 18]; ///< Requantization offset
+extern const mpc_uint8_t      Res_bit [18];     ///< Bits per sample for chosen quantizer
+extern const MPC_SAMPLE_FORMAT __Cc    [1 + 18]; ///< Requantization coefficients
+extern const mpc_int16_t       __Dc    [1 + 18]; ///< Requantization offset
 
 #define Cc (__Cc + 1)
 #define Dc (__Dc + 1)

