# Buildsheet autogenerated by ravenadm tool -- Do not edit.

NAMEBASE=		libxml2
VERSION=		2.15.0
KEYWORDS=		textproc
VARIANTS=		std
SDESC[std]=		XML parser library for GNOME
HOMEPAGE=		http://xmlsoft.org/
CONTACT=		nobody

DOWNLOAD_GROUPS=	main
SITES[main]=		GNOME/libxml2/2.15
DISTFILE[1]=		libxml2-2.15.0.tar.xz:main
DIST_SUBDIR=		gnome2
DF_INDEX=		1
SPKGS[std]=		set
			primary
			dev

OPTIONS_AVAILABLE=	none
OPTIONS_STANDARD=	none

USES=			cpe gmake libtool pkgconfig shebangfix

CPE_VENDOR=		xmlsoft
FPC_EQUIVALENT=		textproc/libxml2
SHEBANG_GLOB=		*.py

MUST_CONFIGURE=		gnu
CONFIGURE_ARGS=		--with-schemas
			--with-threads
			--with-http
			--without-icu
			--without-python
			--enable-static

INSTALL_TARGET=		install-strip
INSTALL_REQ_TOOLCHAIN=	yes
SOVERSION=		16.1.0

post-patch:
.for f in catalog.c xmlcatalog.c xmllint.c
	${REINPLACE_CMD} -e \
		's|/etc/xml/catalog|${LOCALBASE}/share/xml/catalog|g; \
		 s|/etc/sgml/catalog|${LOCALBASE}/share/sgml/catalog|g' \
		${WRKSRC}/${f}
.endfor

post-install:
	${RM} -r ${STAGEDIR}${PREFIX}/share/gtk-doc
	${RM} -r ${STAGEDIR}${STD_DOCDIR}

[FILE:313:descriptions/desc.primary]
Libxml2 is the XML C parser and toolkit developed for the Gnome project
(but usable outside of the Gnome platform).  XML itself is a metalanguage
to design markup languages, i.e. text language where semantic and
structure are added to the content using extra "markup" information
enclosed between angle brackets.


[FILE:107:distinfo]
5abc766497c5b1d6d99231f662e30c99402a90d03b06c67b62d6c1179dedd561      2004476 gnome2/libxml2-2.15.0.tar.xz


[FILE:81:manifests/plist.primary]
bin/
 xmlcatalog
 xmllint
lib/
 libxml2.so.%%SOMAJOR%%
 libxml2.so.%%SOVERSION%%


[FILE:680:manifests/plist.dev]
bin/xml2-config
include/libxml2/libxml/
 HTMLparser.h
 HTMLtree.h
 SAX.h
 SAX2.h
 c14n.h
 catalog.h
 chvalid.h
 debugXML.h
 dict.h
 encoding.h
 entities.h
 globals.h
 hash.h
 list.h
 nanoftp.h
 nanohttp.h
 parser.h
 parserInternals.h
 pattern.h
 relaxng.h
 schemasInternals.h
 schematron.h
 threads.h
 tree.h
 uri.h
 valid.h
 xinclude.h
 xlink.h
 xmlIO.h
 xmlautomata.h
 xmlerror.h
 xmlexports.h
 xmlmemory.h
 xmlmodule.h
 xmlreader.h
 xmlregexp.h
 xmlsave.h
 xmlschemas.h
 xmlschemastypes.h
 xmlstring.h
 xmlunicode.h
 xmlversion.h
 xmlwriter.h
 xpath.h
 xpathInternals.h
 xpointer.h
lib/
 libxml2.a
 libxml2.so
lib/cmake/libxml2/libxml2-config.cmake
lib/pkgconfig/libxml-2.0.pc


[FILE:303:patches/patch-python_Makefile.in]
--- python/Makefile.in.orig	2025-09-15 11:56:03 UTC
+++ python/Makefile.in
@@ -455,7 +455,7 @@ target_alias = @target_alias@
 top_build_prefix = @top_build_prefix@
 top_builddir = @top_builddir@
 top_srcdir = @top_srcdir@
-SUBDIRS = . tests
+SUBDIRS = .
 EXTRA_DIST = \
 	generator.py		\
 	libxml.py		\


[FILE:826:patches/patch-uri.c]
Revert the following commit, it makes the freebsd doc chain fail.

From 8eb55d782a2b9afacc7938694891cc6fad7b42a5 Mon Sep 17 00:00:00 2001
From: Dennis Filder <d.filder@web.de>
Date: Fri, 13 Jun 2014 14:56:14 +0800
Subject: xmlSaveUri() incorrectly recomposes URIs with rootless paths

For https://bugzilla.gnome.org/show_bug.cgi?id=731063

xmlSaveUri() of libxml2 (snapshot 2014-05-31 and earlier) returns
bogus values when called with URIs that have rootless paths
(e.g. "urx:b:b" becomes "urx://b%3Ab" where "urx:b%3Ab" would be
correct)

--- uri.c.orig	2025-09-15 11:55:59 UTC
+++ uri.c
@@ -1235,6 +1235,8 @@ xmlSaveUri(xmlURI *uri) {
                 if (temp == NULL) goto mem_error;
                 ret = temp;
 	    }
+	    ret[len++] = '/';
+	    ret[len++] = '/';
 	}
 	if (uri->path != NULL) {
 	    p = uri->path;

