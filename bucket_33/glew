# Buildsheet autogenerated by ravenadm tool -- Do not edit.

NAMEBASE=		glew
VERSION=		2.1.0
KEYWORDS=		graphics
VARIANTS=		standard
SDESC[standard]=	OpenGL Extension Wrangler Library
HOMEPAGE=		http://glew.sourceforge.net/
CONTACT=		nobody

DOWNLOAD_GROUPS=	main
SITES[main]=		SF/glew/glew/2.1.0
DISTFILE[1]=		glew-2.1.0.tgz:main
DF_INDEX=		1
SPKGS[standard]=	complete
			primary
			docs

OPTIONS_AVAILABLE=	none
OPTIONS_STANDARD=	none

USES=			gmake mesa zlib
XORG_COMPONENTS=	x11

FPC_EQUIVALENT=		graphics/glew

MAKE_ENV=		GLEW_DEST={{PREFIX}}
			GLEW_PREFIX={{PREFIX}}

INSTALL_TARGET=		install.all
SOVERSION=		2.1.0

post-patch:
	${CP} ${WRKSRC}/config/Makefile.freebsd \
		${WRKSRC}/config/Makefile.dragonfly

post-install:
	${MKDIR} ${STAGEDIR}${STD_DOCDIR}
.for i in css html jpg png
	${INSTALL_DATA} ${WRKSRC}/doc/*.${i} ${STAGEDIR}${STD_DOCDIR}
.endfor

[FILE:386:descriptions/desc.primary]
The goal of the OpenGL Extension Wrangler Library (GLEW) is to assist
C/C++ OpenGL developers with two tedious tasks: initializing and using
extensions and writing portable applications. GLEW provides an efficient
run-time mechanism to determine whether a certain extension is supported
by the driver or not. OpenGL core and extension functionality is exposed
via a single header file.


[FILE:93:distinfo]
04de91e7e6763039bc11940095cd9c7f880baba82196a7765f727ac05a993c95       764073 glew-2.1.0.tgz


[FILE:165:manifests/plist.primary]
bin/
 glewinfo
 visualinfo
include/GL/
 glew.h
 glxew.h
 wglew.h
lib/
 libGLEW.a
 libGLEW.so
 libGLEW.so.%%SOMAJOR%%
 libGLEW.so.%%SOVERSION%%
lib/pkgconfig/glew.pc


[FILE:205:manifests/plist.docs]
share/doc/glew/
 advanced.html
 basic.html
 build.html
 credits.html
 github.png
 glew.css
 glew.html
 glew.png
 glxew.html
 index.html
 install.html
 log.html
 new.png
 ogl_sm.jpg
 travis.png
 wglew.html


[FILE:4814:patches/patch-Makefile]
--- Makefile.orig	2017-07-31 11:25:39 UTC
+++ Makefile
@@ -43,7 +43,7 @@ endif
 GLEW_PREFIX ?= /usr
 GLEW_DEST ?= /usr
 BINDIR    ?= $(GLEW_DEST)/bin
-LIBDIR    ?= $(GLEW_DEST)/lib
+GLIBDIR   ?= $(GLEW_DEST)/lib
 INCDIR    ?= $(GLEW_DEST)/include/GL
 PKGDIR    ?= $(GLEW_DEST)/lib/pkgconfig
 
@@ -81,13 +81,13 @@ else
 OPT = $(POPT)
 endif
 INCLUDE = -Iinclude
-CFLAGS = $(OPT) $(WARN) $(INCLUDE) $(CFLAGS.EXTRA)
+CFLAGS += $(OPT) $(WARN) $(INCLUDE) $(CFLAGS.EXTRA)
 
 all debug: glew.lib glew.bin
 
 # GLEW shared and static libraries
 
-LIB.LDFLAGS        := $(LDFLAGS.EXTRA) $(LDFLAGS.GL)
+LIB.LDFLAGS        := $(LDFLAGS) $(LDFLAGS.EXTRA) $(LDFLAGS.GL)
 LIB.LIBS           := $(GL_LDFLAGS)
 
 LIB.SRCS           := src/glew.c
@@ -115,7 +115,7 @@ else ifneq ($(LIBTOOL),)
 	$(LIBTOOL) $@ $^
 endif
 ifneq ($(STRIP),)
-	$(STRIP) -x $@
+	$(STRIP) $@
 endif
 
 lib/$(LIB.SHARED): $(LIB.SOBJS)
@@ -125,8 +125,9 @@ ifneq ($(LN),)
 	$(LN) $(LIB.SHARED) lib/$(LIB.DEVLNK)
 endif
 ifneq ($(STRIP),)
-	$(STRIP) -x $@
+	$(STRIP) $@
 endif
+	/usr/bin/file $@
 
 tmp/$(SYSTEM)/default/static/glew.o: src/glew.c include/GL/glew.h include/GL/wglew.h include/GL/glxew.h
 	@mkdir -p $(dir $@)
@@ -142,14 +143,14 @@ tmp/$(SYSTEM)/default/shared/glew.o: src
 
 glew.pc: glew.pc.in
 	sed \
-		-e "s|@prefix@|$(GLEW_PREFIX)|g" \
-		-e "s|@libdir@|$(LIBDIR)|g" \
-		-e "s|@exec_prefix@|$(BINDIR)|g" \
-		-e "s|@includedir@|$(INCDIR)|g" \
-		-e "s|@version@|$(GLEW_VERSION)|g" \
-		-e "s|@cflags@||g" \
-		-e "s|@libname@|$(NAME)|g" \
-		-e "s|@requireslib@|$(LIBGLU)|g" \
+		-e 's|@prefix@|$(GLEW_PREFIX)|g' \
+		-e 's|@libdir@|$${prefix}/lib|g' \
+		-e 's|@exec_prefix@|$${prefix}/bin|g' \
+		-e 's|@includedir@|$${prefix}/include|g' \
+		-e 's|@version@|$(GLEW_VERSION)|g' \
+		-e 's|@cflags@||g' \
+		-e 's|@libname@|$(NAME)|g' \
+		-e 's|@requireslib@|$(LIBGLU)|g' \
 		< $< > $@
 
 # GLEW utility programs
@@ -178,24 +179,24 @@ bin:
 	mkdir bin
 
 bin/$(GLEWINFO.BIN): $(GLEWINFO.BIN.OBJ) lib/$(LIB.SHARED)
-	$(CC) $(CFLAGS) -o $@ $(GLEWINFO.BIN.OBJ) $(BIN.LIBS)
+	$(CC) $(CFLAGS) -o $@ $(GLEWINFO.BIN.OBJ) $(BIN.LIBS) $(LDFLAGS)
 ifneq ($(STRIP),)
-	$(STRIP) -x $@
+	$(STRIP) $@
 endif
 
 bin/$(VISUALINFO.BIN): $(VISUALINFO.BIN.OBJ) lib/$(LIB.SHARED)
-	$(CC) $(CFLAGS) -o $@ $(VISUALINFO.BIN.OBJ) $(BIN.LIBS)
+	$(CC) $(CFLAGS) -o $@ $(VISUALINFO.BIN.OBJ) $(BIN.LIBS) $(LDFLAGS)
 ifneq ($(STRIP),)
-	$(STRIP) -x $@
+	$(STRIP) $@
 endif
 
 $(GLEWINFO.BIN.OBJ): $(GLEWINFO.BIN.SRC) include/GL/glew.h include/GL/wglew.h include/GL/glxew.h
 	@mkdir -p $(dir $@)
-	$(CC) -DGLEW_NO_GLU $(CFLAGS) $(CFLAGS.SO) -o $@ -c $<
+	$(CC) -DGLEW_NO_GLU $(CFLAGS) -o $@ -c $<
 
 $(VISUALINFO.BIN.OBJ): $(VISUALINFO.BIN.SRC) include/GL/glew.h include/GL/wglew.h include/GL/glxew.h
 	@mkdir -p $(dir $@)
-	$(CC) -DGLEW_NO_GLU $(CFLAGS) $(CFLAGS.SO) -o $@ -c $<
+	$(CC) -DGLEW_NO_GLU $(CFLAGS) -o $@ -c $<
 
 # Install targets
 
@@ -204,26 +205,26 @@ install.all: install install.bin
 install:     install.include install.lib install.pkgconfig
 
 install.lib: glew.lib
-	$(INSTALL) -d -m 0755 "$(DESTDIR)$(LIBDIR)"
+	$(INSTALL) -d -m 0755 "$(DESTDIR)$(GLIBDIR)"
 # runtime
 ifeq ($(filter-out mingw% cygwin,$(SYSTEM)),)
 	$(INSTALL) -d -m 0755 "$(DESTDIR)$(BINDIR)"
 	$(INSTALL) -m 0755 lib/$(LIB.SHARED) "$(DESTDIR)$(BINDIR)/"
 else
-	$(INSTALL) -m 0644 lib/$(LIB.SHARED) "$(DESTDIR)$(LIBDIR)/"
+	$(INSTALL) -m 0644 lib/$(LIB.SHARED) "$(DESTDIR)$(GLIBDIR)/"
 endif
 ifneq ($(LN),)
-	$(LN) $(LIB.SHARED) "$(DESTDIR)$(LIBDIR)/$(LIB.SONAME)"
+	$(LN) $(LIB.SHARED) "$(DESTDIR)$(GLIBDIR)/$(LIB.SONAME)"
 endif
 
 # development files
 ifeq ($(filter-out mingw% cygwin,$(SYSTEM)),)
-	$(INSTALL) -m 0644 lib/$(LIB.DEVLNK) "$(DESTDIR)$(LIBDIR)/"
+	$(INSTALL) -m 0644 lib/$(LIB.DEVLNK) "$(DESTDIR)$(GLIBDIR)/"
 endif
 ifneq ($(LN),)
-	$(LN) $(LIB.SHARED) "$(DESTDIR)$(LIBDIR)/$(LIB.DEVLNK)"
+	$(LN) $(LIB.SHARED) "$(DESTDIR)$(GLIBDIR)/$(LIB.DEVLNK)"
 endif
-	$(INSTALL) -m 0644 lib/$(LIB.STATIC) "$(DESTDIR)$(LIBDIR)/"
+	$(INSTALL) -m 0644 lib/$(LIB.STATIC) "$(DESTDIR)$(GLIBDIR)/"
 
 install.bin: glew.bin
 	$(INSTALL) -d -m 0755 "$(DESTDIR)$(BINDIR)"
@@ -244,14 +245,14 @@ uninstall:
 	$(RM) "$(DESTDIR)$(INCDIR)/wglew.h"
 	$(RM) "$(DESTDIR)$(INCDIR)/glew.h"
 	$(RM) "$(DESTDIR)$(INCDIR)/glxew.h"
-	$(RM) "$(DESTDIR)$(LIBDIR)/$(LIB.DEVLNK)"
+	$(RM) "$(DESTDIR)$(GLIBDIR)/$(LIB.DEVLNK)"
 ifeq ($(filter-out mingw% cygwin,$(SYSTEM)),)
 	$(RM) "$(DESTDIR)$(BINDIR)/$(LIB.SHARED)"
 else
-	$(RM) "$(DESTDIR)$(LIBDIR)/$(LIB.SONAME)"
-	$(RM) "$(DESTDIR)$(LIBDIR)/$(LIB.SHARED)"
+	$(RM) "$(DESTDIR)$(GLIBDIR)/$(LIB.SONAME)"
+	$(RM) "$(DESTDIR)$(GLIBDIR)/$(LIB.SHARED)"
 endif
-	$(RM) "$(DESTDIR)$(LIBDIR)/$(LIB.STATIC)"
+	$(RM) "$(DESTDIR)$(GLIBDIR)/$(LIB.STATIC)"
 	$(RM) "$(DESTDIR)$(BINDIR)/$(GLEWINFO.BIN)" "$(DESTDIR)$(BINDIR)/$(VISUALINFO.BIN)"
 
 clean:


[FILE:755:patches/patch-config_Makefile.freebsd]
--- config/Makefile.freebsd.orig	2017-07-31 11:25:39 UTC
+++ config/Makefile.freebsd
@@ -1,17 +1,17 @@
 NAME = $(GLEW_NAME)
-CC = cc
-LD = ld
-LDFLAGS.EXTRA = -L/usr/X11R6/lib
+CC ?= cc
+LD = cc
+LDFLAGS.EXTRA ?= -L${LOCALBASE}/lib
 LDFLAGS.GL = -lGL -lX11
 LDFLAGS.STATIC = -Wl,-Bstatic
 LDFLAGS.DYNAMIC = -Wl,-Bdynamic
-CFLAGS.EXTRA += -I/usr/X11R6/include -fPIC
+CFLAGS.EXTRA += -I${LOCALBASE}/include -fPIC
 NAME = GLEW
 WARN = -Wall -W
 POPT = -O2
 BIN.SUFFIX =
-LIB.SONAME    = lib$(NAME).so.$(SO_MAJOR)
+LIB.SONAME    = lib$(NAME).so.$(GLEW_MAJOR)
 LIB.DEVLNK    = lib$(NAME).so
-LIB.SHARED    = lib$(NAME).so.$(SO_VERSION)
+LIB.SHARED    = lib$(NAME).so.$(GLEW_VERSION)
 LIB.STATIC    = lib$(NAME).a
 LDFLAGS.SO    = -shared -soname $(LIB.SONAME)


[FILE:1105:patches/patch-config_Makefile.linux]
--- config/Makefile.linux.orig	2017-07-31 11:25:39 UTC
+++ config/Makefile.linux
@@ -1,5 +1,5 @@
 NAME = $(GLEW_NAME)
-CC = cc
+CC ?= cc
 LD = cc
 M_ARCH ?= $(shell uname -m)
 ARCH64 = false
@@ -9,26 +9,21 @@ endif
 ifeq (ppc64,${M_ARCH})
   ARCH64 = true
 endif
-ifeq (${ARCH64},true)
-  LDFLAGS.EXTRA = -L/usr/X11R6/lib64 -L/usr/lib64
-  LIBDIR = $(GLEW_DEST)/lib64
-else
-  LDFLAGS.EXTRA = -L/usr/X11R6/lib -L/usr/lib
-  LIBDIR = $(GLEW_DEST)/lib
-endif
+LDFLAGS.EXTRA = -L${LOCALBASE}/lib
+LIBDIR = $(GLEW_DEST)/lib
 LDFLAGS.GL = -lGL -lX11
 LDFLAGS.STATIC = -Wl,-Bstatic
 LDFLAGS.DYNAMIC = -Wl,-Bdynamic
 NAME = GLEW
 WARN = -Wall -W
 POPT = -O2
-CFLAGS.EXTRA += -fPIC
+CFLAGS.EXTRA += -I${LOCALBASE}/include -fPIC
 CFLAGS.EXTRA += -Wcast-qual
 CFLAGS.EXTRA += -ansi -pedantic
 CFLAGS.EXTRA += -fno-stack-protector
 BIN.SUFFIX =
-LIB.SONAME = lib$(NAME).so.$(SO_MAJOR)
+LIB.SONAME = lib$(NAME).so.$(GLEW_MAJOR)
 LIB.DEVLNK = lib$(NAME).so
-LIB.SHARED = lib$(NAME).so.$(SO_VERSION)
+LIB.SHARED = lib$(NAME).so.$(GLEW_VERSION)
 LIB.STATIC = lib$(NAME).a
 LDFLAGS.SO = -shared -Wl,-soname=$(LIB.SONAME)

