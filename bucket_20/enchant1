# Buildsheet autogenerated by ravenadm tool -- Do not edit.

NAMEBASE=		enchant1
VERSION=		1.6.1
REVISION=		2
KEYWORDS=		textproc
VARIANTS=		std
SDESC[std]=		Dictionary/spellchecking framework (legacy)
HOMEPAGE=		https://rrthomas.github.io/enchant/
CONTACT=		nobody

DOWNLOAD_GROUPS=	main
SITES[main]=		GITHUB/AbiWord:enchant:enchant-1-6-1
DISTFILE[1]=		generated:main
DF_INDEX=		1
SPKGS[std]=		set
			primary
			dev
			man

OPTIONS_AVAILABLE=	none
OPTIONS_STANDARD=	none

BUILD_DEPENDS=		hunspell:dev:std
			aspell:dev:std
BUILDRUN_DEPENDS=	hunspell:primary:std
			aspell:primary:std

USES=			autoreconf gmake libtool pkgconfig
GNOME_COMPONENTS=	glib

LICENSE=		LGPL21+:primary
LICENSE_TERMS=		primary:{{WRKDIR}}/TERMS
LICENSE_FILE=		LGPL21+:{{WRKSRC}}/COPYING.LIB
LICENSE_AWK=		TERMS:"^$$"
LICENSE_SOURCE=		TERMS:{{WRKSRC}}/src/enchant.h
LICENSE_SCHEME=		solo

FPC_EQUIVALENT=		textproc/enchant

MUST_CONFIGURE=		gnu
CONFIGURE_ARGS=		--disable-voikko
			--disable-applespell
			--disable-hspell
			--disable-ispell
			--disable-uspell
			--disable-zemberek
			--enable-aspell
			--with-aspell-prefix={{LOCALBASE}}
			--enable-myspell
			--with-myspell-dir={{LOCALBASE}}

INSTALL_TARGET=		install-strip
INSTALL_REQ_TOOLCHAIN=	yes
SOVERSION=		1.6.1

post-install:
	# avoid name clash with enchant package
	cd ${STAGEDIR}${PREFIX}/share/enchant && \
		${MV} enchant.ordering enchant1.ordering

[FILE:932:descriptions/desc.primary]
This is the legacy version of enchant.  It has been superceded by the
"enchant" package (version 2).

On the surface, Enchant appears to be a generic spell checking library. You
can request dictionaries from it, ask if a word is correctly spelled, get
corrections for a misspelled word, etc...

Beneath the surface, Enchant is a whole lot more - and less - than that.
You'll see that Enchant isn't really a spell checking library at all.

"What's that?" you ask. Well, Enchant doesn't try to do any of the work
itself. It's lazy, and requires backends to do most of its dirty work. Looking
closer, you'll see the Enchant is more-or-less a fancy wrapper around the
dlopen() system call. Enchant steps in to provide uniformity and conformity
on top of these libraries, and implement certain features that may be lacking
in any individual provider library. Everything should "just work" for any and
every definition of "just working."


[FILE:115:distinfo]
ed2b11211a571ab5f963debf4c3bf3fc46541bb9cbb441b2997bd871ba8618d4       194201 AbiWord-enchant-enchant-1-6-1.tar.gz


[FILE:180:manifests/plist.primary]
bin/
 enchant
 enchant-lsmod
lib/
 libenchant.so.%%SOMAJOR%%
 libenchant.so.%%SOVERSION%%
lib/enchant/
 libenchant_aspell.so
 libenchant_myspell.so
share/enchant/enchant1.ordering


[FILE:176:manifests/plist.dev]
include/enchant/
 enchant++.h
 enchant-provider.h
 enchant.h
lib/
 libenchant.a
 libenchant.so
lib/enchant/
 libenchant_aspell.a
 libenchant_myspell.a
lib/pkgconfig/enchant.pc


[FILE:25:manifests/plist.man]
share/man/man1/enchant.1


[FILE:424:patches/patch-configure.ac]
--- configure.ac.orig	2017-02-08 22:24:36 UTC
+++ configure.ac
@@ -404,7 +404,7 @@ if test "x$check_aspell" != "xno"; then
          ,)
        AC_CHECK_LIB(aspell,get_aspell_dict_info_list,ASPELL_CFLAGS="-DASPELL_0_50_0=1",)
 
-       ASPELL_CFLAGS+=" -DHAVE_PSPELL_H"
+       ASPELL_CFLAGS="${ASPELL_CFLAGS} -DHAVE_PSPELL_H"
    elif test -f "$aspell_prefix/include/aspell.h"; then
        AC_MSG_RESULT([yes (aspell)])
 


[FILE:508:patches/patch-src_Makefile.am]
--- src/Makefile.am.orig	2017-02-08 22:24:36 UTC
+++ src/Makefile.am
@@ -1,5 +1,6 @@
 SUBDIRS=. aspell ispell uspell myspell hspell applespell voikko zemberek
 
+AM_LIBTOOLFLAGS = --tag cc
 AM_CPPFLAGS=-I$(top_srcdir) $(ENCHANT_CFLAGS) $(CC_WARN_CFLAGS) -DENCHANT_GLOBAL_MODULE_DIR=\"$(libdir)/enchant\" -DENCHANT_GLOBAL_ORDERING=\"$(datadir)/enchant\" -D_ENCHANT_BUILD=1 -DENCHANT_VERSION_STRING=\"@ENCHANT_MAJOR_VERSION@.@ENCHANT_MINOR_VERSION@.@ENCHANT_MICRO_VERSION@\"
 
 lib_LTLIBRARIES = libenchant.la


[FILE:931:patches/patch-src_enchant.c]
--- src/enchant.c.orig	2017-02-08 22:24:36 UTC
+++ src/enchant.c
@@ -988,7 +988,8 @@ enchant_dict_suggest (EnchantDict * dict
 	/* Check for suggestions from personal dictionary */
 	if(session->personal)
 		{
-			pwl_suggs = enchant_pwl_suggest(session->personal, word, len, dict_suggs, &n_pwl_suggs);
+			pwl_suggs = enchant_pwl_suggest(session->personal, word, len,
+				(const char * const*)dict_suggs, &n_pwl_suggs);
 			if(pwl_suggs)
 				{
 					suggsT = enchant_dict_get_good_suggestions(dict, pwl_suggs, n_pwl_suggs, &n_suggsT);
@@ -1592,7 +1593,7 @@ enchant_load_provider_ordering (EnchantB
 	for (iter = conf_dirs; iter; iter = iter->next)
 		{
 			char *ordering_file;
-			ordering_file = g_build_filename (iter->data, "enchant.ordering", NULL);
+			ordering_file = g_build_filename (iter->data, "enchant1.ordering", NULL);
 			enchant_load_ordering_from_file (broker, ordering_file);
 			g_free (ordering_file);	
 		}


[FILE:410:patches/patch-src_pwl.c]
--- src/pwl.c.orig	2017-02-08 22:24:36 UTC
+++ src/pwl.c
@@ -736,7 +736,7 @@ char** enchant_pwl_suggest(EnchantPWL *p
 	EnchantSuggList sugg_list;
 	int max_dist;
 
-	max_dist = suggs? best_distance(suggs, word, len) : ENCHANT_PWL_MAX_ERRORS;
+	max_dist = suggs? best_distance((char **)suggs, word, len) : ENCHANT_PWL_MAX_ERRORS;
 	if(max_dist > ENCHANT_PWL_MAX_ERRORS)
 		max_dist = ENCHANT_PWL_MAX_ERRORS;
 

