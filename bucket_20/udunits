# Buildsheet autogenerated by ravenadm tool -- Do not edit.

NAMEBASE=		udunits
VERSION=		2.2.27.14
KEYWORDS=		science
VARIANTS=		standard
SDESC[standard]=	Library for manipulating physical quantity units
HOMEPAGE=		https://www.unidata.ucar.edu/software/udunits/
CONTACT=		nobody

DOWNLOAD_GROUPS=	main
SITES[main]=		GITHUB/Unidata:UDUNITS-2:00ce1e1
DISTFILE[1]=		generated:main
DF_INDEX=		1
SPKGS[standard]=	complete
			primary
			docs

OPTIONS_AVAILABLE=	none
OPTIONS_STANDARD=	none

BUILD_DEPENDS=		expat:static:standard
BUILDRUN_DEPENDS=	expat:shared:standard

USES=			autoreconf libtool makeinfo

LICENSE=		CUSTOM1:primary
LICENSE_NAME=		CUSTOM1:"University Corporation for Atmospheric Research/Unidata"
LICENSE_FILE=		CUSTOM1:{{WRKSRC}}/COPYRIGHT
LICENSE_SCHEME=		solo

INFO=			primary:udunits2
			primary:udunits2lib
			primary:udunits2prog
FPC_EQUIVALENT=		science/udunits
INFO_SUBDIR=		.

MUST_CONFIGURE=		gnu
CONFIGURE_ENV=		ac_cv_header_CUnit_CUnit_h=no

INSTALL_TARGET=		install-strip
SOVERSION=		0.1.0

post-install:
	${RM} ${STAGEDIR}${STD_DOCDIR}/COPYRIGHT

[FILE:230:descriptions/desc.primary]
The Unidata units library, udunits, supports conversion of unit
specifications between formatted and binary forms, arithmetic
manipulation of unit specifications, and conversion of values between
compatible scales of measurement.


[FILE:111:distinfo]
9deaf56d890399834fefd323e37a9f03396a9edc5f02530068957f38b8b1aa61       303410 Unidata-UDUNITS-2-00ce1e1.tar.gz


[FILE:289:manifests/plist.primary]
bin/udunits2
include/
 converter.h
 udunits.h
 udunits2.h
lib/
 libudunits2.a
 libudunits2.so
 libudunits2.so.%%SOMAJOR%%
 libudunits2.so.%%SOVERSION%%
share/udunits/
 udunits2-accepted.xml
 udunits2-base.xml
 udunits2-common.xml
 udunits2-derived.xml
 udunits2-prefixes.xml
 udunits2.xml


[FILE:161:manifests/plist.docs]
share/doc/udunits/
 CHANGE_LOG
 README
 udunits2-derived.xml
 udunits2-accepted.xml
 udunits2-common.xml
 udunits2-base.xml
 udunits2-prefixes.xml
 udunits2.xml


[FILE:855:patches/patch-lib_xml.c]
--- lib/xml.c.orig	2020-05-29 20:22:11 UTC
+++ lib/xml.c
@@ -14,9 +14,11 @@
 
 #include <config.h>
 
+#if !(defined(__DragonFly__) || defined(__FreeBSD__))
 #ifndef	_XOPEN_SOURCE
 #   define _XOPEN_SOURCE 500
 #endif
+#endif
 
 #if defined(__linux__)
 #   ifndef _GNU_SOURCE
@@ -40,7 +42,7 @@
 #endif
 #include <sys/stat.h>
 #include <sys/types.h>
-#if defined(__linux__)
+#if defined(__linux__) || defined(__DragonFly__) || defined(__FreeBSD__)
 #include <dlfcn.h>
 #elif defined(__APPLE__)
 #define _DARWIN_C_SOURCE
@@ -2137,7 +2139,7 @@ default_udunits2_xml_path()
     const char* path;
     char const* soname = 0;
 
-#if defined(__APPLE__) || defined(__linux__)
+#if defined(__APPLE__) || defined(__linux__) || defined(__FreeBSD__) || defined(__DragonFly__)
     #define END_BIT "/share/udunits/udunits2.xml"
     #define SEP '/'
     Dl_info info;

