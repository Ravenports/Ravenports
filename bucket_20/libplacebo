# Buildsheet autogenerated by ravenadm tool -- Do not edit.

NAMEBASE=		libplacebo
VERSION=		7.351.0
KEYWORDS=		graphics
VARIANTS=		std
SDESC[std]=		GPU-accelerated video/image rendering library
HOMEPAGE=		https://code.videolan.org/videolan/libplacebo
CONTACT=		nobody

DOWNLOAD_GROUPS=	main glad
SITES[main]=		https://code.videolan.org/videolan/libplacebo/-/archive/v7.351.0/
SITES[glad]=		GITHUB/Dav1dde:glad:v2.0.4:3rdparty/glad
DISTFILE[1]=		libplacebo-v7.351.0.tar.bz2:main
DISTFILE[2]=		generated:glad
DF_INDEX=		1 2
SPKGS[std]=		set
			primary
			dev

OPTIONS_AVAILABLE=	none
OPTIONS_STANDARD=	none

BUILD_DEPENDS=		lcms2:dev:std
			xxhash:dev:std
			python-Jinja2:single:python_default
			vulkan-headers:single:std
BUILDRUN_DEPENDS=	lcms2:primary:std
			xxhash:primary:std
EXRUN[dev]=		xxhash:dev:std
			lcms2:dev:std

USES=			meson pkgconfig

DISTNAME=		libplacebo-v7.351.0

LICENSE=		LGPL21+:primary
LICENSE_TERMS=		primary:{{WRKDIR}}/TERMS
LICENSE_FILE=		LGPL21+:{{WRKSRC}}/LICENSE
LICENSE_AWK=		TERMS:"LIBPLACEBO_COMMON_H_"
LICENSE_SOURCE=		TERMS:{{WRKSRC}}/src/include/libplacebo/common.h
LICENSE_SCHEME=		solo

FPC_EQUIVALENT=		graphics/libplacebo
MESON_ARGS=		-Dd3d11=disabled
			-Dlibdovi=disabled
			-Ddemos=false
			-Dlcms=enabled
			-Dxxhash=enabled
			-Dvulkan=disabled

SOVERSION=		351

pre-configure:
	${REINPLACE_CMD} -e 's,/usr/share,${PREFIX}/share,' \
		${WRKSRC}/src/vulkan/utils_gen.py
	# https://github.com/mesonbuild/meson/issues/7746
	${REINPLACE_CMD} "s,static:,dirs: '${LOCALBASE}/lib'\, &," \
		${WRKSRC}/src/glsl/meson.build

[FILE:653:descriptions/desc.primary]
libplacebo is essentially the core rendering algorithms and ideas of
mpv turned into a library. This grew out of an interest to accomplish
the following goals:

- Clean up mpv's internal rendering abstraction API and make it
  reusable for other projects.
- Provide a standard library of useful GPU-accelerated image processing
  primitives based on GLSL, so projects like VLC or Firefox can use them
  without incurring a heavy dependency on libmpv.
- Rewrite core parts of mpv's GPU-accelerated video renderer on top of
  redesigned abstractions. (Basically, I wanted to eliminate stateful APIs
  like shader_cache.c and totally redesign gpu/video.c)


[FILE:210:distinfo]
d68159280842a7f0482dcea44a440f4c9a8e9403b82eccf185e46394dfc77e6a       703424 libplacebo-v7.351.0.tar.bz2
02629644c242dcc27c58222bd2c001d5e2f3765dbbcfd796542308bddebab401       599932 Dav1dde-glad-2.0.4.tar.gz


[FILE:32:manifests/plist.primary]
lib/libplacebo.so.%%SOVERSION%%


[FILE:516:manifests/plist.dev]
include/libplacebo/
 cache.h
 colorspace.h
 common.h
 config.h
 d3d11.h
 dispatch.h
 dither.h
 dummy.h
 filters.h
 gamut_mapping.h
 gpu.h
 log.h
 opengl.h
 options.h
 renderer.h
 shaders.h
 swapchain.h
 tone_mapping.h
 vulkan.h
include/libplacebo/shaders/
 colorspace.h
 custom.h
 deinterlacing.h
 dithering.h
 film_grain.h
 icc.h
 lut.h
 sampling.h
include/libplacebo/utils/
 dav1d.h
 dav1d_internal.h
 dolbyvision.h
 frame_queue.h
 libav.h
 libav_internal.h
 upload.h
lib/libplacebo.so
lib/pkgconfig/libplacebo.pc

