# Buildsheet autogenerated by ravenadm tool -- Do not edit.

NAMEBASE=		pugixml
VERSION=		1.9
KEYWORDS=		textproc
VARIANTS=		standard
SDESC[standard]=	Simple C++ XML processing lib with XPath support
HOMEPAGE=		https://pugixml.org
CONTACT=		Michael_Reim[kraileth@elderlinux.org]

DOWNLOAD_GROUPS=	main
SITES[main]=		https://github.com/zeux/pugixml/releases/download/v1.9/
DISTFILE[1]=		pugixml-1.9.tar.gz:main
DF_INDEX=		1
SPKGS[standard]=	single

OPTIONS_AVAILABLE=	none
OPTIONS_STANDARD=	none

USES=			c++:single cmake

LICENSE=		MIT:single
LICENSE_FILE=		MIT:{{WRKDIR}}/LICENSE_MIT
LICENSE_AWK=		MIT:"^$$"
LICENSE_SOURCE=		MIT:{{WRKSRC}}/src/pugixml.hpp
LICENSE_SCHEME=		solo

FPC_EQUIVALENT=		textproc/pugixml

SOVERSION=		1.9

CMAKE_ARGS=		-DBUILD_SHARED_LIBS=ON
			-DBUILD_STATIC_LIBS=ON
			-DBUILD_TESTS=OFF
			-DBUILD_PKGCONFIG=ON
			-DCMAKE_INSTALL_LIBDIR:STRING=lib

post-patch:
	${TAIL} -n 23 ${WRKSRC}/src/pugixml.hpp >> ${WRKDIR}/LICENSE_MIT

post-install:
	${STRIP_CMD} ${STAGEDIR}${PREFIX}/lib/libpugixml.so

[FILE:462:descriptions/desc.single]
pugixml is a light-weight C++ XML processing library. It features:

  - DOM-like interface with rich traversal/modification capabilities
  - Extremely fast non-validating XML parser which constructs the DOM tree 
from an XML file/buffer
  - XPath 1.0 implementation for complex data-driven tree queries
  - Full Unicode support with Unicode interface variants and automatic 
encoding conversions

The library is extremely portable and easy to integrate and use.


[FILE:97:distinfo]
d156d35b83f680e40fd6412c4455fdd03544339779134617b9b28d19e11fdba6       377369 pugixml-1.9.tar.gz


[FILE:210:manifests/plist.single]
include/
 pugiconfig.hpp
 pugixml.hpp
lib/cmake/pugixml/
 pugixml-config-release.cmake
 pugixml-config.cmake
lib/pkgconfig/pugixml.pc
lib/
 libpugixml.so
 libpugixml.so.%%SOMAJOR%%
 libpugixml.so.%%SOVERSION%%


[FILE:1397:patches/patch-CMakeLists.txt]
--- CMakeLists.txt.orig	2018-04-04 16:53:16.000000000 +0200
+++ CMakeLists.txt	2018-05-16 17:20:41.177952000 +0200
@@ -4,7 +4,7 @@
 
 option(BUILD_SHARED_LIBS "Build shared instead of static library" OFF)
 option(BUILD_TESTS "Build tests" OFF)
-option(BUILD_PKGCONFIG "Build in PKGCONFIG mode" OFF)
+option(USE_VERSIONED_LIBDIR "Use a private subdirectory to install the headers and libs" OFF)
 
 set(BUILD_DEFINES "" CACHE STRING "Build defines")
 
@@ -55,7 +55,7 @@
 set_target_properties(pugixml PROPERTIES VERSION 1.9 SOVERSION 1)
 get_target_property(PUGIXML_VERSION_STRING pugixml VERSION)
 
-if(BUILD_PKGCONFIG)
+if(USE_VERSIONED_LIBDIR)
 	# Install library into its own directory under LIBDIR
 	set(INSTALL_SUFFIX /pugixml-${PUGIXML_VERSION_STRING})
 endif()
@@ -71,10 +71,8 @@
 install(FILES ${HEADERS} DESTINATION ${CMAKE_INSTALL_INCLUDEDIR}${INSTALL_SUFFIX})
 install(EXPORT pugixml-config DESTINATION ${CMAKE_INSTALL_LIBDIR}/cmake/pugixml)
 
-if(BUILD_PKGCONFIG)
-	configure_file(scripts/pugixml.pc.in ${PROJECT_BINARY_DIR}/pugixml.pc @ONLY)
-	install(FILES ${PROJECT_BINARY_DIR}/pugixml.pc DESTINATION ${CMAKE_INSTALL_PREFIX}/lib/pkgconfig)
-endif()
+configure_file(scripts/pugixml.pc.in ${PROJECT_BINARY_DIR}/pugixml.pc @ONLY)
+install(FILES ${PROJECT_BINARY_DIR}/pugixml.pc DESTINATION ${CMAKE_INSTALL_PREFIX}/lib/pkgconfig)
 
 if(BUILD_TESTS)
 	file(GLOB TEST_SOURCES tests/*.cpp)


[FILE:685:patches/patch-scripts_pugixml.pc.in]
--- scripts/pugixml.pc.in.orig	2018-04-04 16:53:16.000000000 +0200
+++ scripts/pugixml.pc.in	2018-05-16 17:21:06.250986000 +0200
@@ -1,11 +1,11 @@
 prefix=@CMAKE_INSTALL_PREFIX@
 exec_prefix=${prefix}
-includedir=${prefix}/include/pugixml-@PUGIXML_VERSION_STRING@
-libdir=${exec_prefix}/lib/pugixml-@PUGIXML_VERSION_STRING@
+includedir=${prefix}/include@INSTALL_SUFFIX@
+libdir=${exec_prefix}/lib@INSTALL_SUFFIX@
 
 Name: pugixml
 Description: Light-weight, simple and fast XML parser for C++ with XPath support.
 URL: http://pugixml.org/
 Version: @PUGIXML_VERSION_STRING@
 Cflags: -I${includedir}
-Libs: -L${libdir} -lpugixml
\ No newline at end of file
+Libs: -L${libdir} -lpugixml

