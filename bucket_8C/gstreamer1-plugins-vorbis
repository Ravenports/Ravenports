# Buildsheet autogenerated by ravenadm tool -- Do not edit.

NAMEBASE=		gstreamer1-plugins-vorbis
VERSION=		1.26.4
KEYWORDS=		multimedia audio
VARIANTS=		std
SDESC[std]=		GStreamer1 vorbis encoder/decoder plugin
HOMEPAGE=		https://gstreamer.freedesktop.org/
CONTACT=		nobody

DOWNLOAD_GROUPS=	main
SITES[main]=		https://gstreamer.freedesktop.org/src/gst-plugins-base/
DISTFILE[1]=		gst-plugins-base-1.26.4.tar.xz:main
DF_INDEX=		1
SPKGS[std]=		single

OPTIONS_AVAILABLE=	none
OPTIONS_STANDARD=	none

BUILD_DEPENDS=		gstreamer1:dev:std
			gstreamer1-plugins-base:dev:std
			gstreamer1-plugins-base:primary:std
			libvorbis:dev:std
BUILDRUN_DEPENDS=	gstreamer1:primary:std
			libvorbis:primary:std
RUN_DEPENDS=		gstreamer1-plugins-ogg:single:std

USES=			gmake pkgconfig meson
GNOME_COMPONENTS=	glib

DISTNAME=		gst-plugins-base-1.26.4

LICENSE=		LGPL20+:single
LICENSE_TERMS=		single:{{WRKDIR}}/TERMS
LICENSE_FILE=		LGPL20+:{{WRKSRC}}/COPYING
LICENSE_AWK=		TERMS:"^$$"
LICENSE_SOURCE=		TERMS:{{WRKSRC}}/ext/vorbis/gstvorbis.c
LICENSE_SCHEME=		solo

FPC_EQUIVALENT=		audio/gstreamer1-plugins-vorbis
MESON_ARGS=		-Dalsa=disabled
			-Dcdparanoia=disabled
			-Dlibvisual=disabled
			-Dogg=disabled
			-Dopus=disabled
			-Dpango=disabled
			-Dtheora=disabled
			-Dtremor=disabled
			-Dvorbis=enabled
			-Dx11=disabled
			-Dxshm=disabled
			-Dxvideo=disabled
			-Ddoc=disabled
			-Dnls=disabled
			-Dtools=disabled
			-Dexamples=disabled
			-Dtests=disabled
			-Dorc=disabled
			-Daudioconvert=disabled
			-Daudiomixer=disabled
			-Daudiorate=disabled
			-Daudioresample=disabled
			-Daudiotestsrc=disabled
			-Dcompositor=disabled
			-Dencoding=disabled
			-Dgio=disabled
			-Dadder=disabled
			-Dapp=disabled
			-Doverlaycomposition=disabled
			-Dpbtypes=disabled
			-Dplayback=disabled
			-Drawparse=disabled
			-Dsubparse=disabled
			-Dtcp=disabled
			-Dtypefind=disabled
			-Dvideoconvertscale=disabled
			-Dvideorate=disabled
			-Dvideotestsrc=disabled
			-Dvolume=disabled
			-Dgl=disabled
			-Ddsd=disabled
			-Ddebugutils=disabled

PLIST_SUB=		GSTVER=1.0
			PLUGIN=vorbis

post-patch:
	${REINPLACE_CMD} \
		-e "s/subdir..gst-libs../build_gstgl = false/" \
		-e "/subdir..pkgconfig../d" \
		${WRKSRC}/meson.build

post-install:
	${RM} ${STAGEDIR}${PREFIX}/lib/pkgconfig/gstreamer-plugins-base-1.0.pc

[FILE:52:descriptions/desc.single]
This package contains the Vorbis GStreamer1 plugin.


[FILE:109:distinfo]
d6fcca7be4253e5d8541c6e3e07729120a16e1dc356f9a14a4a83a901120742f      2483464 gst-plugins-base-1.26.4.tar.xz


[FILE:45:manifests/plist.single]
lib/gstreamer-%%GSTVER%%/libgst%%PLUGIN%%.so


[FILE:563:patches/patch-ext_vorbis_meson.build]
--- ext/vorbis/meson.build.orig	2025-05-29 22:56:43 UTC
+++ ext/vorbis/meson.build
@@ -59,6 +59,10 @@ vorbisenc_dep = dependency('vorbisenc',
 vorbisidec_dep = dependency('vorbisidec', allow_fallback: true,
                             include_type: 'system', required : get_option('tremor'))
 
+video_dep = cc.find_library ('gstvideo-1.0', required : true)
+audio_dep = cc.find_library ('gstaudio-1.0', required : true)
+tag_dep = cc.find_library ('gsttag-1.0', required : true)
+
 if vorbis_dep.found()
   vorbis_deps = [vorbis_dep]
   if vorbisenc_dep.found()


[FILE:391:patches/patch-tools_meson.build]
--- tools/meson.build.orig	2023-01-23 19:29:34 UTC
+++ tools/meson.build
@@ -1,3 +1,6 @@
+tag_dep = cc.find_library ('gsttag-1.0', required : true)
+audio_dep = cc.find_library ('gstaudio-1.0', required : true)
+pbutils_dep = cc.find_library ('gstpbutils-1.0', required : true)
 tool_deps = [pbutils_dep, audio_dep, video_dep, tag_dep, gst_dep, gst_base_dep, gmodule_dep]
 
 extra_args = []

