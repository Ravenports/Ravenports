# Buildsheet autogenerated by ravenadm tool -- Do not edit.

NAMEBASE=		musikcube
VERSION=		3.0.5
KEYWORDS=		multimedia audio
VARIANTS=		std
SDESC[std]=		Terminal-based music player, server & more
HOMEPAGE=		https://musikcube.com/
CONTACT=		Michael_Reim[kraileth@elderlinux.org]

DOWNLOAD_GROUPS=	main asio
SITES[main]=		GITHUB/clangen:musikcube:3.0.5
SITES[asio]=		GITHUB/chriskohlhoff:asio:f693a3e:src/3rdparty/asio
DISTFILE[1]=		generated:main
DISTFILE[2]=		generated:asio
DF_INDEX=		1 2
SPKGS[std]=		set
			primary
			dev
			server
			in_gme
			in_openmpt
			out_alsa
			out_sndio
			out_pipewire
			out_portaudio

OPTIONS_AVAILABLE=	none
OPTIONS_STANDARD=	none

BUILD_DEPENDS=		alsa-lib:dev:std
			curl:dev:std
			ffmpeg:dev:std
			flac:dev:std
			lame:dev:std
			libev:dev:std
			libgme:dev:std
			libmicrohttpd:dev:std
			libogg:dev:std
			libopenmpt:dev:std
			libvorbis:dev:std
			mpg123:dev:std
			mpg123:primary:std
			portaudio:primary:std
			sndio:dev:std
			taglib:dev:std
			pipewire:dev:std
BUILDRUN_DEPENDS=	curl:primary:std
			ffmpeg:primary:std
			flac:primary:std
			lame:primary:std
			libev:primary:std
			libogg:primary:std
			libvorbis:primary:std
			taglib:primary:std
EXRUN[out_sndio]=	primary
			sndio:primary:std
EXRUN[out_portaudio]=	primary
			portaudio:primary:std
EXRUN[in_openmpt]=	primary
			libopenmpt:primary:std
			mpg123:primary:std
			zlib:primary:std
EXRUN[out_alsa]=	primary
			alsa-lib:primary:std
EXRUN[in_gme]=		primary
			libgme:primary:std
EXRUN[server]=		primary
			libmicrohttpd:primary:std
EXRUN[out_pipewire]=	primary
			pipewire:primary:std

USES=			cmake ncurses pkgconfig ssl zlib

LICENSE=		BSD3CLAUSE:primary
LICENSE_FILE=		BSD3CLAUSE:{{WRKSRC}}/LICENSE.txt
LICENSE_SCHEME=		solo

FPC_EQUIVALENT=		multimedia/musikcube

CXXFLAGS=		-I{{OPENSSLINC}}
			-I{{PREFIX}}/include/ncurses
CMAKE_ARGS=		-DCMAKE_INSTALL_PREFIX:PATH={{PREFIX}}
			-DDISABLE_WIDE_NCURSES_LIB_SUFFIXES=true
			-DLIBSSL={{PREFIX}}/libressl/lib/libssl.so
			-DLIBCRYPTO={{PREFIX}}/libressl/lib/libcrypto.so

post-install:
	${STRIP_CMD} ${STAGEDIR}${PREFIX}/share/musikcube/libmusikcore.so
	${STRIP_CMD} ${STAGEDIR}${PREFIX}/share/musikcube/plugins/*.so
	${STRIP_CMD} ${STAGEDIR}${PREFIX}/share/musikcube/musikcube*

[FILE:930:descriptions/desc.primary]
Musikcube is a cross-platform, terminal-based audio engine, library, 
player and server written in C++.

It ships with a streaming audio server enabled by default which runs a 
websocket server on port 7905, used for metadata retrieval. An HTTP server 
runs on port 7906, and is used to serve (optionally transcoded) audio data 
to clients.

It's important to understand that, out of the box, the server (and remote 
api) should NOT be considered safe for use outside of a local network. The 
websockets service only supports a simple password challenge, and the 
audio http server just handles basic authorization; it does not provide 
TLS. The server also stores the password in plain text in a settings file 
on the local machine. You can fix some of this using a reverse proxy to 
provide TLS termination (see documentation). While this improves things, 
you should exercise caution exposing these services over the Internet.


[FILE:61:descriptions/desc.server]
This package contains the server of the Musikcube ecosystem.


[FILE:50:descriptions/desc.in_gme]
This subpackage contains the libgme input plugin.


[FILE:54:descriptions/desc.in_openmpt]
This subpackage contains the libopenmpt input plugin.


[FILE:49:descriptions/desc.out_alsa]
This subpackage contains the alsa output plugin.


[FILE:50:descriptions/desc.out_sndio]
This subpackage contains the sndio output plugin.


[FILE:53:descriptions/desc.out_pipewire]
This subpackage contains the pipewire output plugin.


[FILE:54:descriptions/desc.out_portaudio]
This subpackage contains the portaudio output plugin.


[FILE:221:distinfo]
708292a583bb5072a8dbb14e408c2a1f61de9b8c9786d4e53b3e69bef5dad8c5      4891353 clangen-musikcube-3.0.5.tar.gz
8b3b6a20fefe74ba7216380c25211b1c57515806b4b41660bad84c544f2410b1      2962746 chriskohlhoff-asio-f693a3e.tar.gz


[FILE:712:manifests/plist.primary]
%%ONLY-LINUX%%share/applications/musikcube.desktop
%%ONLY-LINUX%%share/icons/hicolor/128x128/apps/musikcube.png
%%ONLY-LINUX%%share/icons/hicolor/48x48/apps/musikcube.png
%%ONLY-LINUX%%share/icons/hicolor/64x64/apps/musikcube.png
%%ONLY-LINUX%%share/musikcube/plugins/libmpris.so
bin/musikcube
share/musikcube/
 libmusikcore.so
 musikcube
share/musikcube/locales/
 cs_CZ.json
 de_DE.json
 en_US.json
 es_ES.json
 fr_FR.json
 it_IT.json
 ja_JP.json
 ru_RU.json
 uk_UA.json
 zh_CN.json
share/musikcube/plugins/
 libffmpegdecoder.so
 libhttpdatastream.so
 libnullout.so
 libstockencoders.so
 libsupereqdsp.so
 libtaglibreader.so
share/musikcube/themes/
 gruvbox_dark.json
 solarized_dark.json
 solarized_light.json


[FILE:711:manifests/plist.dev]
include/musikcube/musikcore/sdk/
 DataBuffer.h
 Filesystem.h
 HttpClient.h
 IAllocator.h
 IAnalyzer.h
 IBlockingEncoder.h
 IBuffer.h
 IBufferProvider.h
 IDSP.h
 IDataStream.h
 IDataStreamFactory.h
 IDebug.h
 IDecoder.h
 IDecoderFactory.h
 IDevice.h
 IEncoder.h
 IEncoderFactory.h
 IEnvironment.h
 IIndexerNotifier.h
 IIndexerSource.h
 IIndexerWriter.h
 IMap.h
 IMapList.h
 IMetadataProxy.h
 IOutput.h
 IPcmVisualizer.h
 IPlaybackRemote.h
 IPlaybackService.h
 IPlugin.h
 IPreferences.h
 IResource.h
 ISchema.h
 ISpectrumVisualizer.h
 IStreamingEncoder.h
 ITagReader.h
 ITagStore.h
 ITrack.h
 ITrackList.h
 ITrackListEditor.h
 IValue.h
 IValueList.h
 IVisualizer.h
 ReplayGain.h
 String.h
 constants.h
 version.h


[FILE:79:manifests/plist.server]
bin/musikcubed
share/musikcube/musikcubed
share/musikcube/plugins/libserver.so


[FILE:41:manifests/plist.in_gme]
share/musikcube/plugins/libgmedecoder.so


[FILE:45:manifests/plist.in_openmpt]
share/musikcube/plugins/libopenmptdecoder.so


[FILE:38:manifests/plist.out_alsa]
share/musikcube/plugins/libalsaout.so


[FILE:39:manifests/plist.out_sndio]
share/musikcube/plugins/libsndioout.so


[FILE:42:manifests/plist.out_pipewire]
share/musikcube/plugins/libpipewireout.so


[FILE:43:manifests/plist.out_portaudio]
share/musikcube/plugins/libportaudioout.so


[FILE:479:patches/patch-src_musikcube_cursespp_cursespp_curses__config.h]
--- src/musikcube/cursespp/cursespp/curses_config.h.orig	2024-07-14 19:37:30 UTC
+++ src/musikcube/cursespp/cursespp/curses_config.h
@@ -43,12 +43,9 @@
 #if defined(WIN32) || defined(NO_NCURSESW) && !defined(__DragonFly__)
     #include <curses.h>
     #include <panel.h>
-#elif defined(__DragonFly__)
+#else
     #include <ncurses/curses.h>
     #include <ncurses/panel.h>
-#else
-    #include <ncursesw/curses.h>
-    #include <ncursesw/panel.h>
 #endif
 
 #include <stdarg.h>

