# Buildsheet autogenerated by ravenadm tool -- Do not edit.

NAMEBASE=		cairo
VERSION=		1.16.0
REVISION=		2
KEYWORDS=		graphics
VARIANTS=		standard
SDESC[standard]=	Vector graphics library with cross-device support
HOMEPAGE=		https://www.cairographics.org
CONTACT=		nobody

DOWNLOAD_GROUPS=	main
SITES[main]=		http://cairographics.org/releases/
DISTFILE[1]=		cairo-1.16.0.tar.xz:main
DF_INDEX=		1
SPKGS[standard]=	complete
			primary
			dev

OPTIONS_AVAILABLE=	none
OPTIONS_STANDARD=	none

BUILD_DEPENDS=		libatomic_ops:single:standard
BUILDRUN_DEPENDS=	libglvnd:single:standard
EXRUN[dev]=		fontconfig:dev:standard
			png:dev:standard
			xorg-xcb:dev:standard
			xorg-pixman:dev:standard
			xorg-xrender:dev:standard
			xorg-xext:dev:standard
			xorg-x11:dev:standard

USES=			cpe libtool fontconfig pkgconfig png mbsdfix
GNOME_COMPONENTS=	glib
XORG_COMPONENTS=	pixman x11 xext xrender xcb-render-util

LICENSE=		CUSTOM1:primary LGPL21:primary
LICENSE_TERMS=		primary:{{WRKSRC}}/COPYING
LICENSE_NAME=		CUSTOM1:"Mozilla Public License (MPL) version 1.1"
LICENSE_FILE=		CUSTOM1:{{WRKSRC}}/COPYING-MPL-1.1
			LGPL21:{{WRKSRC}}/COPYING-LGPL-2.1
LICENSE_SCHEME=		dual

CPE_VENDOR=		cairographics
FPC_EQUIVALENT=		graphics/cairo

MUST_CONFIGURE=		gnu
CONFIGURE_ARGS=		--with-html-dir={{STD_DOCDIR}}
			--disable-directfb
			--disable-gallium
			--disable-glesv2
			--disable-wgl
			--enable-tee
			--enable-gobject
			--enable-gl
			--enable-egl
			--enable-xlib
			--enable-xcb
CONFIGURE_ENV=		cairo_cv_atomic_primitives="libatomic-ops"

INSTALL_TARGET=		install-strip
INSTALL_REQ_TOOLCHAIN=	yes
SOVERSION=		2.11600.0

VAR_OPSYS[sunos]=	CFLAGS=-D_XOPEN_SOURCE=600
VAR_OPSYS[netbsd]=	CONFIGURE_ENV=ac_cv_lib_dl_dlsym=false

post-patch:
	${REINPLACE_CMD} \
		-e '/strings/s/ - / -a /' \
		-e '/test/s/==/=/g' \
		-e '/LIBS/s|-ldld||' ${WRKSRC}/configure
	${REINPLACE_CMD} -e 's|-lcairo|-lcairo -lpthread|' \
		${WRKSRC}/src/*.pc.in
	${REINPLACE_CMD} -e '/@CAIRO_HAS_PNG_FUNCTIONS_TRUE@.*=/d' \
		${WRKSRC}/Makefile.in
	# disable html docs (gnome referencehack)
	${FIND} ${WRKSRC} -name "Makefile.in" -type f | ${XARGS} ${REINPLACE_CMD} -e \
		"s|test \"\$$\$$installfiles\" = '\$$(srcdir)/html/\*'|:|"

post-patch-dragonfly:
	${REINPLACE_CMD} -e '/LIBS/s/-lrt//' ${WRKSRC}/configure

post-patch-freebsd:
	${REINPLACE_CMD} -e '/LIBS/s/-lrt//' ${WRKSRC}/configure

post-patch-midnightbsd:
	${REINPLACE_CMD} -e '/LIBS/s/-lrt//' ${WRKSRC}/configure

[FILE:637:descriptions/desc.primary]
Cairo is a vector graphics library with cross-device output
support. Currently supported output targets include the X Window
System and in-memory image buffers. PostScript and PDF file output is
planned. Cairo is designed to produce identical output on all output
media while taking advantage of display hardware acceleration when
available (eg. through the X Render Extension).

Cairo provides a stateful user-level API with capabilities similar to
the PDF 1.4 imaging model. Cairo provides operations including stroking
and filling Bezier cubic splines, transforming and compositing translucent
images, and antialiased text rendering.


[FILE:98:distinfo]
5e7b29b3f113ef870d1e3ecf8adf21f923396401604bda16d44be45e66052331     41997432 cairo-1.16.0.tar.xz


[FILE:308:manifests/plist.primary]
bin/
 cairo-sphinx
 cairo-trace
lib/
 libcairo-gobject.so.%%SOMAJOR%%
 libcairo-gobject.so.%%SOVERSION%%
 libcairo-script-interpreter.so.%%SOMAJOR%%
 libcairo-script-interpreter.so.%%SOVERSION%%
 libcairo.so.%%SOMAJOR%%
 libcairo.so.%%SOVERSION%%
lib/cairo/
 cairo-fdr.so
 cairo-sphinx.so
 libcairo-trace.so


[FILE:722:manifests/plist.dev]
include/cairo/
 cairo-deprecated.h
 cairo-features.h
 cairo-ft.h
 cairo-gl.h
 cairo-gobject.h
 cairo-pdf.h
 cairo-ps.h
 cairo-script-interpreter.h
 cairo-script.h
 cairo-svg.h
 cairo-tee.h
 cairo-version.h
 cairo-xcb.h
 cairo-xlib-xrender.h
 cairo-xlib.h
 cairo.h
lib/
 libcairo-gobject.a
 libcairo-gobject.so
 libcairo-script-interpreter.a
 libcairo-script-interpreter.so
 libcairo.a
 libcairo.so
lib/cairo/
 cairo-fdr.a
 cairo-sphinx.a
 libcairo-trace.a
lib/pkgconfig/
 cairo-egl.pc
 cairo-fc.pc
 cairo-ft.pc
 cairo-gl.pc
 cairo-glx.pc
 cairo-gobject.pc
 cairo-pdf.pc
 cairo-png.pc
 cairo-ps.pc
 cairo-script.pc
 cairo-svg.pc
 cairo-tee.pc
 cairo-xcb-shm.pc
 cairo-xcb.pc
 cairo-xlib-xrender.pc
 cairo-xlib.pc
 cairo.pc


[FILE:762:patches/patch-src_cairo-gl.h]
--- src/cairo-gl.h.orig	2018-08-17 01:10:53 UTC
+++ src/cairo-gl.h
@@ -92,7 +92,7 @@ cairo_public void
 cairo_gl_device_set_thread_aware (cairo_device_t	*device,
 				  cairo_bool_t		 thread_aware);
 
-#if CAIRO_HAS_GLX_FUNCTIONS
+#if defined(CAIRO_HAS_GLX_FUNCTIONS)
 #include <GL/glx.h>
 
 cairo_public cairo_device_t *
@@ -110,7 +110,7 @@ cairo_gl_surface_create_for_window (cair
 				    int width, int height);
 #endif
 
-#if CAIRO_HAS_WGL_FUNCTIONS
+#if defined(CAIRO_HAS_WGL_FUNCTIONS)
 #include <windows.h>
 
 cairo_public cairo_device_t *
@@ -126,7 +126,7 @@ cairo_gl_surface_create_for_dc (cairo_de
 				int			 height);
 #endif
 
-#if CAIRO_HAS_EGL_FUNCTIONS
+#if defined(CAIRO_HAS_EGL_FUNCTIONS)
 #include <EGL/egl.h>
 
 cairo_public cairo_device_t *


[FILE:532:patches/patch-src_cairo-xlib-display.c]
--- src/cairo-xlib-display.c.orig	2018-08-17 01:10:53 UTC
+++ src/cairo-xlib-display.c
@@ -263,11 +263,7 @@ _cairo_xlib_device_create (Display *dpy)
     /* Prior to Render 0.10, there is no protocol support for gradients and
      * we call function stubs instead, which would silently consume the drawing.
      */
-#if RENDER_MAJOR == 0 && RENDER_MINOR < 10
     display->buggy_gradients = TRUE;
-#else
-    display->buggy_gradients = FALSE;
-#endif
     display->buggy_pad_reflect = FALSE;
     display->buggy_repeat = FALSE;
 


[FILE:251:patches/patch-util_cairo-missing_getline.c]
--- util/cairo-missing/getline.c.orig	2018-08-17 01:10:53 UTC
+++ util/cairo-missing/getline.c
@@ -87,4 +87,6 @@ getline (char	**lineptr,
     return ret;
 }
 #undef GETLINE_BUFFER_SIZE
+#else
+int solaris_ld_requires_at_least_one_symbol = 0;
 #endif

