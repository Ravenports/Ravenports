# Buildsheet autogenerated by ravenadm tool -- Do not edit.

NAMEBASE=		kf5-kcrash
VERSION=		5.111.0
KEYWORDS=		devel
VARIANTS=		standard
SDESC[standard]=	KF5 library for crash analysis and bug reports
HOMEPAGE=		https://api.kde.org/frameworks/kcrash/html/index.html
CONTACT=		Michael_Reim[kraileth@elderlinux.org]

DOWNLOAD_GROUPS=	main
SITES[main]=		https://download.kde.org/stable/frameworks/5.111/
DISTFILE[1]=		kcrash-5.111.0.tar.xz:main
DF_INDEX=		1
SPKGS[standard]=	complete
			primary
			dev

OPTIONS_AVAILABLE=	none
OPTIONS_STANDARD=	none

BUILD_DEPENDS=		kf5-extra-cmake-modules:primary:standard
			kf5-kcoreaddons:dev:standard
			kf5-kwindowsystem:dev:standard
			qt5-qtx11extras:dev:standard
BUILDRUN_DEPENDS=	kf5-kcoreaddons:primary:standard
			kf5-kwindowsystem:primary:standard
			qt5-qtx11extras:primary:standard

USES=			cmake
XORG_COMPONENTS=	x11

DISTNAME=		kcrash-5.111.0

LICENSE=		LGPL20+:primary
LICENSE_TERMS=		primary:{{WRKDIR}}/TERMS
LICENSE_FILE=		LGPL20+:{{WRKSRC}}/LICENSES/LGPL-2.0-or-later.txt
LICENSE_AWK=		TERMS:"ifndef KCRASH_H"
LICENSE_SOURCE=		TERMS:{{WRKSRC}}/src/kcrash.h
LICENSE_SCHEME=		solo

FPC_EQUIVALENT=		devel/kf5-kcrash

SOVERSION=		5.111.0

CMAKE_ARGS=		-DCMAKE_PREFIX_PATH:PATH={{PREFIX}}/lib/qt5/cmake

post-stage:
	${STRIP_CMD} ${STAGEDIR}${PREFIX}/lib/libKF5Crash.so

[FILE:75:descriptions/desc.primary]
KCrash provides support for intercepting and handling application crashes.


[FILE:100:distinfo]
dc2198a8435ef2f3c87cc2345627b55de10cf511b1e2b352c1abb0009cb57c31        28304 kcrash-5.111.0.tar.xz


[FILE:135:manifests/plist.primary]
lib/
 libKF5Crash.so.%%SOMAJOR%%
 libKF5Crash.so.%%SOVERSION%%
share/qlogging-categories5/
 kcrash.categories
 kcrash.renamecategories


[FILE:255:manifests/plist.dev]
include/KF5/KCrash/
 KCrash
 kcrash.h
 kcrash_export.h
 kcrash_version.h
lib/libKF5Crash.so
lib/cmake/KF5Crash/
 KF5CrashConfig.cmake
 KF5CrashConfigVersion.cmake
 KF5CrashTargets-release.cmake
 KF5CrashTargets.cmake
lib/qt5/mkspecs/modules/qt_KCrash.pri


[FILE:278:patches/patch-metainfo.yaml]
--- metainfo.yaml.orig	2023-01-07 00:25:32 UTC
+++ metainfo.yaml
@@ -5,6 +5,9 @@ type: integration
 platforms:
     - name: Linux
     - name: FreeBSD
+    - name: DragonFly
+    - name: MidnightBSD
+    - name: NetBSD
     - name: macOS
     - name: Windows
 portingAid: false


[FILE:575:patches/patch-src_CMakeLists.txt]
--- src/CMakeLists.txt.orig	2023-01-07 00:25:32 UTC
+++ src/CMakeLists.txt
@@ -35,7 +35,7 @@ target_link_libraries(KF5Crash PRIVATE Q
 # in libc.so.7 -- it is in crt1.o, and so not available to shared
 # libraries. We just drop the normal no-undefined flag for library building
 # here, on the assumption that Linux CI will catch any *actual* undefineds.
-if (CMAKE_SYSTEM_NAME MATCHES "FreeBSD")
+if (CMAKE_SYSTEM_NAME MATCHES "FreeBSD|DragonFly|MidnightBSD")
     string(REPLACE "-Wl,--no-undefined" "" CMAKE_SHARED_LINKER_FLAGS "${CMAKE_SHARED_LINKER_FLAGS}")
 endif ()
 

