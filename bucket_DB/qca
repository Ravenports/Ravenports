# Buildsheet autogenerated by ravenadm tool -- Do not edit.

NAMEBASE=		qca
VERSION=		2.3.9
KEYWORDS=		devel
VARIANTS=		qt5 qt6
SDESC[qt5]=		Cross-platform crypto API for Qt 5
SDESC[qt6]=		Cross-platform crypto API for Qt 6
HOMEPAGE=		https://userbase.kde.org/QCA
CONTACT=		Michael_Reim[kraileth@elderlinux.org]

DOWNLOAD_GROUPS=	main
SITES[main]=		https://download.kde.org/stable/qca/2.3.9/
DISTFILE[1]=		qca-2.3.9.tar.xz:main
DF_INDEX=		1
SPKGS[qt5]=		complete
			primary
			dev
			man
SPKGS[qt6]=		complete
			primary
			dev
			man

OPTIONS_AVAILABLE=	QT5 QT6
OPTIONS_STANDARD=	none
VOPTS[qt5]=		QT5=ON QT6=OFF
VOPTS[qt6]=		QT5=OFF QT6=ON

BUILD_DEPENDS=		botan:dev:standard
			doxygen:primary:standard
			libgcrypt:dev:standard
			nss:dev:standard
BUILDRUN_DEPENDS=	botan:primary:standard
			cyrus-sasl:primary:standard
			gnupg:primary:standard
			nss:primary:standard
			nss:caroot:standard

USES=			cmake pkgconfig qt5

FPC_EQUIVALENT=		devel/qca

CONFIGURE_ENV=		QC_CERTSTORE_PATH={{LOCALBASE}}/share/certs/ca-root-nss.crt

SOVERSION=		2.3.9

CMAKE_ARGS=		-DBUILD_PLUGINS=none
			-DBUILD_TESTS=no
			-DQT4_BUILD=OFF
			-DWITH_botan_PLUGIN=yes
			-DWITH_cyrus-sasl_PLUGIN=yes
			-DWITH_gcrypt_PLUGIN=yes
			-DWITH_gnupg_PLUGIN=yes
			-DWITH_logger_PLUGIN=yes
			-DWITH_nss_PLUGIN=yes
			-DWITH_ossl_PLUGIN=no
			-DWITH_pkcs11_PLUGIN=no
			-DWITH_softstore_PLUGIN=yes
			-DQCA_MAN_INSTALL_DIR={{PREFIX}}/share/man

[QT5].DESCRIPTION=			Built Qt5 variant
[QT5].BUILDRUN_DEPENDS_ON=		qt5-qtbase:primary:standard
[QT5].BUILD_DEPENDS_ON=			qt5-qtbase:dev:standard
[QT5].CMAKE_ARGS_ON=			-DQT5=ON
					-DQT6=OFF
					-DCMAKE_PREFIX_PATH={{PREFIX}}/lib/qt5/cmake
					-DQCA_FEATURE_INSTALL_DIR={{PREFIX}}/lib/qt5/mkspecs/features

[QT6].DESCRIPTION=			Built Qt6 variant
[QT6].BUILDRUN_DEPENDS_ON=		qt6-qt5compat:primary:standard
					qt6-qtbase:primary:standard
[QT6].BUILD_DEPENDS_ON=			qt6-qt5compat:dev:standard
					qt6-qtbase:dev:standard
[QT6].CMAKE_ARGS_ON=			-DQT5=OFF
					-DQT6=ON
					-DCMAKE_PREFIX_PATH={{PREFIX}}/lib/qt6/cmake
					-DQCA_FEATURE_INSTALL_DIR={{PREFIX}}/lib/qt6/mkspecs/features

post-install-QT6-ON:
	(cd ${STAGEDIR}${PREFIX} && ${STRIP_CMD} bin/mozcerts-qt6 \
		bin/qcatool-qt6 \
		lib/libqca-qt6.so.2.3.9)
.for PLUGIN in botan cyrus-sasl gcrypt gnupg logger nss softstore
	${STRIP_CMD} ${STAGEDIR}${PREFIX}/lib/qca-qt6/crypto/libqca-${PLUGIN}.so
.endfor

do-install:
	cd ${WRKDIR}/.build && make DESTDIR="${STAGEDIR}" install

post-install-QT5-ON:
	(cd ${STAGEDIR}${PREFIX} && ${STRIP_CMD} bin/mozcerts-qt5 \
		bin/qcatool-qt5 \
		lib/libqca-qt5.so.2.3.9)
.for PLUGIN in botan cyrus-sasl gcrypt gnupg logger nss softstore
	${STRIP_CMD} ${STAGEDIR}${PREFIX}/lib/qca-qt5/crypto/libqca-${PLUGIN}.so
.endfor

[FILE:587:descriptions/desc.primary]
Taking a hint from the similarly-named Java Cryptography Architecture, QCA 
aims to provide a straightforward and cross-platform crypto API, using Qt 
datatypes and conventions. QCA separates the API from the implementation, 
using plugins known as Providers. The advantage of this model is to allow 
applications to avoid linking to or explicitly depending on any particular 
cryptographic library. This allows one to easily change or upgrade crypto 
implementations without even needing to recompile the application! QCA 
should work everywhere Qt does, including Windows/Unix/MacOSX.


[FILE:95:distinfo]
c555d5298cdd7b6bafe2b1f96106f30cfa543a23d459d50c8a91eac33c476e4e       765256 qca-2.3.9.tar.xz


[FILE:277:manifests/plist.primary]
bin/
 mozcerts-qt5
 qcatool-qt5
lib/
 libqca-qt5.so.%%SOMAJOR%%
 libqca-qt5.so.%%SOVERSION%%
lib/qca-qt5/crypto/
 libqca-botan.so
 libqca-cyrus-sasl.so
 libqca-gcrypt.so
 libqca-gnupg.so
 libqca-logger.so
 libqca-nss.so
 libqca-softstore.so
lib/qt5/mkspecs/features/crypto.prf


[FILE:433:manifests/plist.dev]
include/Qca-qt5/QtCrypto/
 QtCrypto
 qca.h
 qca_basic.h
 qca_cert.h
 qca_core.h
 qca_export.h
 qca_keystore.h
 qca_publickey.h
 qca_safetimer.h
 qca_securelayer.h
 qca_securemessage.h
 qca_support.h
 qca_textfilter.h
 qca_tools.h
 qca_version.h
 qcaprovider.h
 qpipe.h
lib/libqca-qt5.so
lib/cmake/Qca-qt5/
 Qca-qt5Config.cmake
 Qca-qt5ConfigVersion.cmake
 Qca-qt5Targets-release.cmake
 Qca-qt5Targets.cmake
lib/pkgconfig/qca2-qt5.pc


[FILE:32:manifests/plist.man]
share/man/man1/qcatool-qt5.1.gz


[FILE:241:manifests/plist.primary.qt6]
bin/
 mozcerts-qt6
 qcatool-qt6
lib/
 libqca-qt6.so.%%SOMAJOR%%
 libqca-qt6.so.%%SOVERSION%%
lib/qca-qt6/crypto/
 libqca-botan.so
 libqca-cyrus-sasl.so
 libqca-gcrypt.so
 libqca-gnupg.so
 libqca-logger.so
 libqca-nss.so
 libqca-softstore.so


[FILE:407:manifests/plist.dev.qt6]
include/Qca-qt6/QtCrypto/
 QtCrypto
 qca.h
 qca_basic.h
 qca_cert.h
 qca_core.h
 qca_export.h
 qca_keystore.h
 qca_publickey.h
 qca_safetimer.h
 qca_securelayer.h
 qca_securemessage.h
 qca_support.h
 qca_textfilter.h
 qca_tools.h
 qca_version.h
 qcaprovider.h
 qpipe.h
lib/libqca-qt6.so
lib/cmake/Qca-qt6/
 Qca-qt6Config.cmake
 Qca-qt6ConfigVersion.cmake
 Qca-qt6Targets-release.cmake
 Qca-qt6Targets.cmake


[FILE:32:manifests/plist.man.qt6]
share/man/man1/qcatool-qt6.1.gz

