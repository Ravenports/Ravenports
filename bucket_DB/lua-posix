# Buildsheet autogenerated by ravenadm tool -- Do not edit.

NAMEBASE=		lua-posix
VERSION=		36.1
REVISION=		1
KEYWORDS=		devel
VARIANTS=		lua52 lua53 lua54
SDESC[lua52]=		POSIX API bindings for Lua 5.2
SDESC[lua53]=		POSIX API bindings for Lua 5.3
SDESC[lua54]=		POSIX API bindings for Lua 5.4
HOMEPAGE=		https://github.com/luaposix/luaposix
CONTACT=		Michael_Reim[kraileth@elderlinux.org]

DOWNLOAD_GROUPS=	main
SITES[main]=		GITHUB/luaposix:luaposix:v36.1
DISTFILE[1]=		generated:main
DF_INDEX=		1
SPKGS[lua52]=		single
SPKGS[lua53]=		single
SPKGS[lua54]=		single

OPTIONS_AVAILABLE=	LUA52 LUA53 LUA54
OPTIONS_STANDARD=	none
VOPTS[lua52]=		LUA52=ON LUA53=OFF LUA54=OFF
VOPTS[lua53]=		LUA52=OFF LUA53=ON LUA54=OFF
VOPTS[lua54]=		LUA52=OFF LUA53=OFF LUA54=ON

USES=			shebangfix

LICENSE=		MIT:single
LICENSE_FILE=		MIT:{{WRKSRC}}/LICENSE
LICENSE_SCHEME=		solo

FPC_EQUIVALENT=		devel/lua-posix
SHEBANG_FILES=		build-aux/luke

VAR_OPSYS[dragonfly]=	CFLAGS=-D__BSD_VISIBLE=1

[LUA52].DESCRIPTION=			Build with Lua 5.2
[LUA52].RUN_DEPENDS_ON=			lua-stdlib-normalize:single:lua52
[LUA52].USES_ON=			lua:5.2

[LUA53].DESCRIPTION=			Build with Lua 5.3
[LUA53].RUN_DEPENDS_ON=			lua-stdlib-normalize:single:lua53
[LUA53].USES_ON=			lua:5.3

[LUA54].DESCRIPTION=			Build with Lua 5.4
[LUA54].RUN_DEPENDS_ON=			lua-stdlib-normalize:single:lua54
[LUA54].USES_ON=			lua:5.4

do-build:
	cd ${WRKSRC} && build-aux/luke all \
		CFLAGS="${CFLAGS}" \
		LUA="${LOCALBASE}/bin/${LUA_CMD}" \
		LUA_INCDIR="${LUA_INCDIR}" \
		PREFIX="${PREFIX}" \
		version="36.1"

post-install:
	${FIND} ${STAGEDIR}${LUA_MODLIBDIR} -name '*.so' -exec ${STRIP_CMD} {} +

do-install:
	cd ${WRKSRC} && build-aux/luke install \
		INST_LIBDIR="${STAGEDIR}${LUA_MODLIBDIR}" \
		INST_LUADIR="${STAGEDIR}${LUA_MODSHAREDIR}"

[FILE:231:descriptions/desc.single]
POSIX binding for Lua and LuaJIT. It simply binds to C APIs on the 
underlying OS and thus won't work on non-POSIX systems. It does however 
try to detect the level of POSIX conformance of the OS and binds only to 
available APIs.


[FILE:108:distinfo]
e680ba9b9c7ae28c0598942cb00df7c7fbc70b82863bb55f028ea7dc101e39ac       186075 luaposix-luaposix-36.1.tar.gz


[FILE:476:manifests/plist.single]
%%LUA_MODLIBDIR%%/posix/
 ctype.so
 dirent.so
 errno.so
 fcntl.so
 fnmatch.so
 glob.so
 grp.so
 libgen.so
 poll.so
 pwd.so
 sched.so
 signal.so
 stdio.so
 stdlib.so
 syslog.so
 termio.so
 time.so
 unistd.so
 utime.so
%%LUA_MODLIBDIR%%/posix/sys/
 msg.so
 resource.so
 socket.so
 stat.so
 statvfs.so
 time.so
 times.so
 utsname.so
 wait.so
share/lua/%%LUA_VER%%/posix/
 _base.lua
 _bitwise.lua
 _strict.lua
 compat.lua
 deprecated.lua
 init.lua
 sys.lua
 util.lua
 version.lua

