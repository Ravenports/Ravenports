# Buildsheet autogenerated by ravenadm tool -- Do not edit.

NAMEBASE=		gstreamer1-plugins-v4l2
VERSION=		1.26.7
KEYWORDS=		multimedia graphics
VARIANTS=		std
SDESC[std]=		GStreamer1 video4linux2 plugin
HOMEPAGE=		https://gstreamer.freedesktop.org/
CONTACT=		nobody

DOWNLOAD_GROUPS=	main
SITES[main]=		https://gstreamer.freedesktop.org/src/gst-plugins-good/
DISTFILE[1]=		gst-plugins-good-1.26.7.tar.xz:main
DF_INDEX=		1
SPKGS[std]=		single

OPTIONS_AVAILABLE=	none
OPTIONS_STANDARD=	none

BUILD_DEPENDS=		evdev-proto:single:std
			gstreamer1:dev:std
			gstreamer1-plugins-base:dev:std
			gstreamer1-plugins-good:primary:std
BUILDRUN_DEPENDS=	gstreamer1-plugins-base:primary:std
			gstreamer1:primary:std

USES=			gmake pkgconfig png meson
GNOME_COMPONENTS=	glib

DISTNAME=		gst-plugins-good-1.26.7

LICENSE=		LGPL20+:single
LICENSE_TERMS=		single:{{WRKDIR}}/TERMS
LICENSE_FILE=		LGPL20+:{{WRKSRC}}/COPYING
LICENSE_AWK=		TERMS:"^$$"
LICENSE_SOURCE=		TERMS:{{WRKSRC}}/sys/v4l2/gstv4l2.c
LICENSE_SCHEME=		solo

FPC_EQUIVALENT=		multimedia/gstreamer1-plugins-v4l2
MESON_ARGS=		-Dalpha=disabled
			-Dapetag=disabled
			-Daudiofx=disabled
			-Daudioparsers=disabled
			-Dauparse=disabled
			-Dautodetect=disabled
			-Davi=disabled
			-Dcutter=disabled
			-Ddebugutils=disabled
			-Ddeinterlace=disabled
			-Ddtmf=disabled
			-Deffectv=disabled
			-Dequalizer=disabled
			-Dflv=disabled
			-Dflx=disabled
			-Dgoom=disabled
			-Dgoom2k1=disabled
			-Dicydemux=disabled
			-Did3demux=disabled
			-Dimagefreeze=disabled
			-Dinterleave=disabled
			-Disomp4=disabled
			-Dlaw=disabled
			-Dlevel=disabled
			-Dmatroska=disabled
			-Dmonoscope=disabled
			-Dmultifile=disabled
			-Dmultipart=disabled
			-Dreplaygain=disabled
			-Drtp=disabled
			-Drtpmanager=disabled
			-Drtsp=disabled
			-Dshapewipe=disabled
			-Dsmpte=disabled
			-Dspectrum=disabled
			-Dudp=disabled
			-Dvideobox=disabled
			-Dvideocrop=disabled
			-Dvideofilter=disabled
			-Dvideomixer=disabled
			-Dwavenc=disabled
			-Dwavparse=disabled
			-Dy4m=disabled
			-Daalib=disabled
			-Dbz2=disabled
			-Dcairo=disabled
			-Ddirectsound=disabled
			-Ddv=disabled
			-Ddv1394=disabled
			-Dflac=disabled
			-Dgdk-pixbuf=disabled
			-Dgtk3=disabled
			-Djack=disabled
			-Djpeg=disabled
			-Dlame=disabled
			-Dlibcaca=disabled
			-Dmpg123=disabled
			-Doss=disabled
			-Doss4=disabled
			-Dosxaudio=disabled
			-Dosxvideo=disabled
			-Dpng=disabled
			-Dpulse=disabled
			-Dqt5=disabled
			-Dshout2=disabled
			-Dsoup=disabled
			-Dspeex=disabled
			-Dtaglib=disabled
			-Dtwolame=disabled
			-Dvpx=disabled
			-Dwaveform=disabled
			-Dwavpack=disabled
			-Drpicamsrc=disabled
			-Drpi-header-dir=disabled
			-Drpi-lib-dir=disabled
			-Dximagesrc=disabled
			-Dximagesrc-xshm=disabled
			-Dximagesrc-xfixes=disabled
			-Dximagesrc-xdamage=disabled
			-Dv4l2=enabled
			-Dv4l2-probe=false
			-Dv4l2-libv4l2=disabled
			-Dv4l2-gudev=disabled
			-Ddoc=disabled
			-Dnls=disabled
			-Dexamples=disabled
			-Dtests=disabled
			-Dorc=disabled
			-Dadaptivedemux2=disabled
			-Dxingmux=disabled

PLIST_SUB=		GSTVER=1.0
			PLUGIN=video4linux2

[FILE:47:descriptions/desc.single]
This package contains the video4linux2 plugin.


[FILE:109:distinfo]
82af18a1f3e4a060db61d2630fbb975269b80b55bb2fdcfddfab5c6440d30781      3000520 gst-plugins-good-1.26.7.tar.xz


[FILE:45:manifests/plist.single]
lib/gstreamer-%%GSTVER%%/libgst%%PLUGIN%%.so


[FILE:472:patches/patch-sys_v4l2_gstv4l2object.c]
--- sys/v4l2/gstv4l2object.c.orig	2024-04-09 20:48:55 UTC
+++ sys/v4l2/gstv4l2object.c
@@ -5004,7 +5004,9 @@ gst_v4l2_object_probe_caps (GstV4l2Objec
     if (v4l2object->ioctl (v4l2object->video_fd, VIDIOC_CROPCAP, &cropcap) < 0) {
 
       switch (errno) {
+#ifdef ENODATA
         case ENODATA:
+#endif
         case ENOTTY:
           GST_INFO_OBJECT (v4l2object->dbg_obj,
               "Driver does not support VIDIOC_CROPCAP (%s), assuming pixel aspect ratio 1/1",


[FILE:511:patches/patch-sys_v4l2_v4l2__calls.c]
--- sys/v4l2/v4l2_calls.c.orig	2024-04-09 20:48:55 UTC
+++ sys/v4l2/v4l2_calls.c
@@ -1333,10 +1333,12 @@ gst_v4l2_query_dv_timings (GstV4l2Object
 
   if (ret < 0) {
     switch (errno) {
+#ifdef ENODATA
       case ENODATA:
         GST_DEBUG_OBJECT (v4l2object->dbg_obj,
             "QUERY_DV_TIMINGS not supported for this input/output");
         break;
+#endif
       case ENOLINK:
         GST_DEBUG_OBJECT (v4l2object->dbg_obj,
             "No timings could be detected because no signal was found.");

