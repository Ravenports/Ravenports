# Buildsheet autogenerated by ravenadm tool -- Do not edit.

NAMEBASE=		gnome-keyring
VERSION=		42.1
REVISION=		1
KEYWORDS=		security
VARIANTS=		standard
SDESC[standard]=	Program that keeps passwords and other secrets
HOMEPAGE=		https://wiki.gnome.org/Projects/GnomeKeyring
CONTACT=		Michael_Reim[kraileth@elderlinux.org]

DOWNLOAD_GROUPS=	main
SITES[main]=		https://download.gnome.org/sources/gnome-keyring/42/
DISTFILE[1]=		gnome-keyring-42.1.tar.xz:main
DF_INDEX=		1
SPKGS[standard]=	complete
			primary
			nls

OPTIONS_AVAILABLE=	none
OPTIONS_STANDARD=	none

BUILD_DEPENDS=		intltool:single:standard
			docbook-xsl:primary:standard
			libgpg-error:dev:standard
			harfbuzz:dev:standard
			dbus:dev:standard
BUILDRUN_DEPENDS=	dbus:primary:standard
			gcr3:primary:standard
			libgcrypt:single:standard
			libtasn1:primary:standard
			nss:caroot:standard
			openssh:primary:standard
			openpam:single:standard
			p11-kit:primary:standard
RUN_DEPENDS=		pinentry:single:gnome3

USES=			autoreconf cpe gmake libtool pkgconfig python
			schemas:primary
GNOME_COMPONENTS=	gtk3 libxslt

LICENSE=		LGPL21+:primary
LICENSE_TERMS=		primary:{{WRKDIR}}/TERMS
LICENSE_FILE=		LGPL21+:{{WRKSRC}}/COPYING.LIB
LICENSE_AWK=		TERMS:"^$$"
LICENSE_SOURCE=		TERMS:{{WRKSRC}}/daemon/gkd-main.h
LICENSE_SCHEME=		solo

CPE_VENDOR=		gnome
FPC_EQUIVALENT=		security/gnome-keyring
GLIB_SCHEMAS=		org.gnome.crypto.cache.gschema.xml

MUST_CONFIGURE=		gnu
CONFIGURE_ARGS=		--with-pam-dir={{PREFIX}}/lib

INSTALL_TARGET=		install-strip

post-patch:
	${REINPLACE_CMD} -e 's|__DBPATH__|${PREFIX}/share/xsl/docbook/manpages|' ${WRKSRC}/docs/Makefile.am

[FILE:455:descriptions/desc.primary]
GNOME Keyring is a collection of components in GNOME that store secrets, 
passwords, keys, certificates and make them available to applications. It 
is integrated with the user's login, so that their secret storage can be 
unlocked when the user logins into their session.

The program can manage several keyrings, each with its own master 
password, and there is also  session keyring which is never stored to 
disk, but forgotten when the session ends.


[FILE:104:distinfo]
c7f4d040cc76a6b7fe67e08ef9106911c3c80d40fc88cbfc8e2684a4c946e3e6      1346284 gnome-keyring-42.1.tar.xz


[FILE:735:manifests/plist.primary]
bin/
 gnome-keyring
 gnome-keyring-3
 gnome-keyring-daemon
etc/xdg/autostart/
 gnome-keyring-pkcs11.desktop
 gnome-keyring-secrets.desktop
 gnome-keyring-ssh.desktop
lib/pam_gnome_keyring.so
lib/gnome-keyring/devel/
 gkm-gnome2-store-standalone.so
 gkm-secret-store-standalone.so
 gkm-ssh-store-standalone.so
 gkm-xdg-store-standalone.so
lib/pkcs11/gnome-keyring-pkcs11.so
share/GConf/gsettings/org.gnome.crypto.cache.convert
share/dbus-1/services/
 org.freedesktop.impl.portal.Secret.service
 org.freedesktop.secrets.service
 org.gnome.keyring.service
share/man/man1/
 gnome-keyring-3.1.gz
 gnome-keyring-daemon.1.gz
 gnome-keyring.1.gz
share/p11-kit/modules/gnome-keyring.module
share/xdg-desktop-portal/portals/gnome-keyring.portal


[FILE:4102:manifests/plist.nls]
share/locale/af/LC_MESSAGES/gnome-keyring.mo
share/locale/ar/LC_MESSAGES/gnome-keyring.mo
share/locale/as/LC_MESSAGES/gnome-keyring.mo
share/locale/ast/LC_MESSAGES/gnome-keyring.mo
share/locale/az/LC_MESSAGES/gnome-keyring.mo
share/locale/be/LC_MESSAGES/gnome-keyring.mo
share/locale/be@latin/LC_MESSAGES/gnome-keyring.mo
share/locale/bg/LC_MESSAGES/gnome-keyring.mo
share/locale/bn/LC_MESSAGES/gnome-keyring.mo
share/locale/bn_IN/LC_MESSAGES/gnome-keyring.mo
share/locale/bs/LC_MESSAGES/gnome-keyring.mo
share/locale/ca/LC_MESSAGES/gnome-keyring.mo
share/locale/ca@valencia/LC_MESSAGES/gnome-keyring.mo
share/locale/ckb/LC_MESSAGES/gnome-keyring.mo
share/locale/cs/LC_MESSAGES/gnome-keyring.mo
share/locale/cy/LC_MESSAGES/gnome-keyring.mo
share/locale/da/LC_MESSAGES/gnome-keyring.mo
share/locale/de/LC_MESSAGES/gnome-keyring.mo
share/locale/dz/LC_MESSAGES/gnome-keyring.mo
share/locale/el/LC_MESSAGES/gnome-keyring.mo
share/locale/en@shaw/LC_MESSAGES/gnome-keyring.mo
share/locale/en_CA/LC_MESSAGES/gnome-keyring.mo
share/locale/en_GB/LC_MESSAGES/gnome-keyring.mo
share/locale/eo/LC_MESSAGES/gnome-keyring.mo
share/locale/es/LC_MESSAGES/gnome-keyring.mo
share/locale/et/LC_MESSAGES/gnome-keyring.mo
share/locale/eu/LC_MESSAGES/gnome-keyring.mo
share/locale/fa/LC_MESSAGES/gnome-keyring.mo
share/locale/fi/LC_MESSAGES/gnome-keyring.mo
share/locale/fr/LC_MESSAGES/gnome-keyring.mo
share/locale/fur/LC_MESSAGES/gnome-keyring.mo
share/locale/ga/LC_MESSAGES/gnome-keyring.mo
share/locale/gd/LC_MESSAGES/gnome-keyring.mo
share/locale/gl/LC_MESSAGES/gnome-keyring.mo
share/locale/gu/LC_MESSAGES/gnome-keyring.mo
share/locale/he/LC_MESSAGES/gnome-keyring.mo
share/locale/hi/LC_MESSAGES/gnome-keyring.mo
share/locale/hr/LC_MESSAGES/gnome-keyring.mo
share/locale/hu/LC_MESSAGES/gnome-keyring.mo
share/locale/id/LC_MESSAGES/gnome-keyring.mo
share/locale/is/LC_MESSAGES/gnome-keyring.mo
share/locale/it/LC_MESSAGES/gnome-keyring.mo
share/locale/ja/LC_MESSAGES/gnome-keyring.mo
share/locale/ka/LC_MESSAGES/gnome-keyring.mo
share/locale/kk/LC_MESSAGES/gnome-keyring.mo
share/locale/km/LC_MESSAGES/gnome-keyring.mo
share/locale/kn/LC_MESSAGES/gnome-keyring.mo
share/locale/ko/LC_MESSAGES/gnome-keyring.mo
share/locale/lt/LC_MESSAGES/gnome-keyring.mo
share/locale/lv/LC_MESSAGES/gnome-keyring.mo
share/locale/mai/LC_MESSAGES/gnome-keyring.mo
share/locale/mg/LC_MESSAGES/gnome-keyring.mo
share/locale/mjw/LC_MESSAGES/gnome-keyring.mo
share/locale/mk/LC_MESSAGES/gnome-keyring.mo
share/locale/ml/LC_MESSAGES/gnome-keyring.mo
share/locale/mn/LC_MESSAGES/gnome-keyring.mo
share/locale/mr/LC_MESSAGES/gnome-keyring.mo
share/locale/ms/LC_MESSAGES/gnome-keyring.mo
share/locale/nb/LC_MESSAGES/gnome-keyring.mo
share/locale/ne/LC_MESSAGES/gnome-keyring.mo
share/locale/nl/LC_MESSAGES/gnome-keyring.mo
share/locale/nn/LC_MESSAGES/gnome-keyring.mo
share/locale/oc/LC_MESSAGES/gnome-keyring.mo
share/locale/or/LC_MESSAGES/gnome-keyring.mo
share/locale/pa/LC_MESSAGES/gnome-keyring.mo
share/locale/pl/LC_MESSAGES/gnome-keyring.mo
share/locale/pt/LC_MESSAGES/gnome-keyring.mo
share/locale/pt_BR/LC_MESSAGES/gnome-keyring.mo
share/locale/ro/LC_MESSAGES/gnome-keyring.mo
share/locale/ru/LC_MESSAGES/gnome-keyring.mo
share/locale/rw/LC_MESSAGES/gnome-keyring.mo
share/locale/si/LC_MESSAGES/gnome-keyring.mo
share/locale/sk/LC_MESSAGES/gnome-keyring.mo
share/locale/sl/LC_MESSAGES/gnome-keyring.mo
share/locale/sq/LC_MESSAGES/gnome-keyring.mo
share/locale/sr/LC_MESSAGES/gnome-keyring.mo
share/locale/sr@latin/LC_MESSAGES/gnome-keyring.mo
share/locale/sv/LC_MESSAGES/gnome-keyring.mo
share/locale/ta/LC_MESSAGES/gnome-keyring.mo
share/locale/te/LC_MESSAGES/gnome-keyring.mo
share/locale/tg/LC_MESSAGES/gnome-keyring.mo
share/locale/th/LC_MESSAGES/gnome-keyring.mo
share/locale/tr/LC_MESSAGES/gnome-keyring.mo
share/locale/ug/LC_MESSAGES/gnome-keyring.mo
share/locale/uk/LC_MESSAGES/gnome-keyring.mo
share/locale/vi/LC_MESSAGES/gnome-keyring.mo
share/locale/xh/LC_MESSAGES/gnome-keyring.mo
share/locale/zh_CN/LC_MESSAGES/gnome-keyring.mo
share/locale/zh_HK/LC_MESSAGES/gnome-keyring.mo
share/locale/zh_TW/LC_MESSAGES/gnome-keyring.mo


[FILE:285:patches/patch-docs_Makefile.am]
--- docs/Makefile.am.orig	2020-06-01 11:37:11 UTC
+++ docs/Makefile.am
@@ -19,6 +19,7 @@ CLEANFILES += \
 
 XSLTPROC_FLAGS = \
 	--nonet \
+	--path __DBPATH__ \
 	--stringparam man.output.quietly 1 \
 	--stringparam funcsynopsis.style ansi \
 	--stringparam man.th.extra1.suppress 1 \


[FILE:941:patches/patch-egg_egg-unix-credentials.c]
$NetBSD: patch-egg_egg-unix-credentials.c,v 1.1 2020/11/22 21:26:51 nia Exp $

LOCAL_CREDS path appears broken on NetBSD...

--- egg/egg-unix-credentials.c.orig	2020-06-01 11:37:11 UTC
+++ egg/egg-unix-credentials.c
@@ -48,6 +48,10 @@
 #include <ucred.h>
 #endif
 
+#if defined(__NetBSD__)
+#undef LOCAL_CREDS
+#endif
+
 int
 egg_unix_credentials_read (int sock, pid_t *pid, uid_t *uid)
 {
@@ -243,14 +247,14 @@ egg_unix_credentials_executable (pid_t p
 	char *result = NULL;
 
 	/* Try and figure out the path from the pid */
-#if defined(__linux__) || defined(__FreeBSD__)
+#if defined(__linux__) || defined(__FreeBSD__) || defined(__NetBSD__)
 	char path[1024];
 	char buffer[64];
 	int count;
 
 #if defined(__linux__)
 	snprintf (buffer, sizeof (buffer), "/proc/%d/exe", (int)pid);
-#elif defined(__FreeBSD__)
+#elif defined(__FreeBSD__) || defined(__NetBSD__)
 	snprintf (buffer, sizeof (buffer), "/proc/%d/file", (int)pid);
 #endif
 

