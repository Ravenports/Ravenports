# Buildsheet autogenerated by ravenadm tool -- Do not edit.

NAMEBASE=		asciidoc
VERSION=		10.2.0
REVISION=		1
KEYWORDS=		textproc python
VARIANTS=		standard
SDESC[standard]=	Text document format for short documents
HOMEPAGE=		https://asciidoc.org/
CONTACT=		nobody

DOWNLOAD_GROUPS=	main
SITES[main]=		GITHUB/asciidoc:asciidoc-py3:10.2.0
DISTFILE[1]=		generated:main
DF_INDEX=		1
SPKGS[standard]=	single

OPTIONS_AVAILABLE=	none
OPTIONS_STANDARD=	none

BUILDRUN_DEPENDS=	docbook-xsl:primary:standard

USES=			autoreconf gmake shebangfix python:sutools
GNOME_COMPONENTS=	libxslt

DISTNAME=		asciidoc-py-10.2.0

LICENSE=		GPLv2+:single
LICENSE_TERMS=		single:{{WRKSRC}}/COPYRIGHT
LICENSE_FILE=		GPLv2+:{{WRKSRC}}/COPYING
LICENSE_SCHEME=		solo

FPC_EQUIVALENT=		textproc/asciidoc
SHEBANG_GLOB=		*.py
SHEBANG_OLD_PYTHON=	"/usr/bin/env python3"

MUST_CONFIGURE=		gnu

post-install:
	${MKDIR} ${STAGEDIR}${PYTHON_SITELIBDIR}/
	# ${INSTALL_DATA} ${WRKSRC}/asciidocapi.py ${STAGEDIR}${PYTHON_SITELIBDIR}/

pre-configure:
	${REINPLACE_CMD} \
		-e '/^INSTALL_PROG/ s|INSTALL_PROGRAM|INSTALL_SCRIPT|' \
		-e 's|\.conf|&.sample|' \
		-e 's|python3 |${PYTHON_CMD} |' \
		${WRKSRC}/Makefile.in
	CONF_FILES=$$(${FIND} ${WRKSRC} -name "*.conf"); \
	for conf_file in $${CONF_FILES}; do \
		${CP} $${conf_file} $${conf_file}.sample; \
	done
	# fix urls
.for xsl in chunked epub fo htmlhelp manpage text xhtml
	${REINPLACE_CMD} -e "s|http://docbook.sourceforge.net/release/xsl/current/|file://${LOCALBASE}/share/xsl/docbook/|g" \
		${WRKSRC}/asciidoc/resources/docbook-xsl/${xsl}.xsl
.endfor

[FILE:192:descriptions/desc.single]
AsciiDoc is a text document format for writing short documents, articles,
books and UNIX man pages. AsciiDoc files can be translated to HTML and
DocBook markups using the asciidoc(1) command.


[FILE:114:distinfo]
684ea53c1f5b71d6d1ac6086bbc96906b1f709ecc7ab536615b0f0c9e1baa3cc      1200416 asciidoc-asciidoc-py3-10.2.0.tar.gz

