# Buildsheet autogenerated by ravenadm tool -- Do not edit.

NAMEBASE=		libassuan
VERSION=		3.0.2
KEYWORDS=		security
VARIANTS=		std
SDESC[std]=		Assuan - an IPC library for non-persistent servers
HOMEPAGE=		http://www.gnupg.org/
CONTACT=		nobody

DOWNLOAD_GROUPS=	main
SITES[main]=		GNUPG/libassuan
DISTFILE[1]=		libassuan-3.0.2.tar.bz2:main
DF_INDEX=		1
SPKGS[std]=		set
			primary
			dev
			info

OPTIONS_AVAILABLE=	none
OPTIONS_STANDARD=	none

BUILD_DEPENDS=		libgpg-error:dev:std
BUILDRUN_DEPENDS=	libgpg-error:primary:std

USES=			libtool mbsdfix

LICENSE=		LGPL21+:primary
LICENSE_TERMS=		primary:{{WRKDIR}}/TERMS
LICENSE_FILE=		LGPL21+:{{WRKSRC}}/COPYING.LIB
LICENSE_AWK=		TERMS:"@configure_input@"
LICENSE_SOURCE=		TERMS:{{WRKSRC}}/src/assuan.h.in
LICENSE_SCHEME=		solo

INFO=			info:assuan
FPC_EQUIVALENT=		security/libassuan
INFO_SUBDIR=		.

MUST_CONFIGURE=		gnu

INSTALL_TARGET=		install-strip
SOVERSION=		9.0.2

[FILE:140:descriptions/desc.primary]
Libassuan is a small library implementing the so-called Assuan protocol.
This protocol is used for IPC between most newer GnuPG components.


[FILE:102:distinfo]
d2931cdad266e633510f9970e1a2f346055e351bb19f9b78912475b8074c36f6       593917 libassuan-3.0.2.tar.bz2


[FILE:59:manifests/plist.primary]
lib/
 libassuan.so.%%SOMAJOR%%
 libassuan.so.%%SOVERSION%%


[FILE:88:manifests/plist.dev]
include/assuan.h
lib/libassuan.so
lib/pkgconfig/libassuan.pc
share/aclocal/libassuan.m4


[FILE:457:patches/patch-src_assuan-uds.c]
$NetBSD: patch-src_assuan-uds.c,v 1.1.2.2 2017/05/28 08:44:18 spz Exp $

Handle _XOPEN_SOURCE correctly.

--- src/assuan-uds.c.orig	2023-05-17 06:54:14 UTC
+++ src/assuan-uds.c
@@ -22,6 +22,14 @@
 #include <config.h>
 #endif
 
+#if defined(__sun) && !defined(_XOPEN_SOURCE)
+#  if __STDC_VERSION__ - 0 < 199901L
+#define _XOPEN_SOURCE	500
+#  else
+#define _XOPEN_SOURCE	600
+#  endif
+#endif
+
 #include <stdlib.h>
 #include <stddef.h>
 #include <stdio.h>

