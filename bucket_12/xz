# Buildsheet autogenerated by ravenadm tool -- Do not edit.

NAMEBASE=		xz
VERSION=		5.6.4
EPOCH=			1
KEYWORDS=		archivers raven
VARIANTS=		std
SDESC[std]=		LZMA compression and decompression tools
HOMEPAGE=		https://tukaani.org/xz/
CONTACT=		nobody

DOWNLOAD_GROUPS=	main
SITES[main]=		SF/lzmautils
DISTFILE[1]=		xz-5.6.4.tar.gz:main
DF_INDEX=		1
SPKGS[std]=		set
			primary
			tools
			dev
			man
			docs
			examples

OPTIONS_AVAILABLE=	none
OPTIONS_STANDARD=	none

USES=			cpe libtool

LICENSE=		PUBDOM:primary GPLv2+:primary
LICENSE_TERMS=		primary:{{WRKSRC}}/COPYING
LICENSE_FILE=		PUBDOM:{{WRKDIR}}/LICENSE_PUBDOM
			GPLv2+:{{WRKSRC}}/COPYING.GPLv2
LICENSE_SCHEME=		multi

CPE_VENDOR=		tukaani

MUST_CONFIGURE=		gnu
CONFIGURE_ARGS=		--disable-nls
			--enable-sandbox=no
			{{SYMVER:U--enable-symbol-versions}}
CONFIGURE_ENV=		gl_cv_posix_shell=/bin/sh

INSTALL_TARGET=		install-strip
SOVERSION=		5.6.4

VAR_OPSYS[sunos]=	MAKEFILE_LINE=SYMVER=

post-install:
	# install static version of xz
	${INSTALL_PROGRAM} ${WRKSRC}/src/xz/.libs/xz-static ${STAGEDIR}${PREFIX}/bin
	# remove redundant license
	${RM} ${STAGEDIR}${STD_DOCDIR}/COPYING*
	# mv examples to their place
	${MKDIR} ${STAGEDIR}${STD_EXAMPLESDIR}
	${MV} ${STAGEDIR}${STD_DOCDIR}/examples/* ${STAGEDIR}${STD_EXAMPLESDIR}/
	${RM} -r ${STAGEDIR}${STD_DOCDIR}/exam*

post-build:
	# create statically linked version of xz
	(cd ${WRKSRC}/src/xz && ${CC} -o .libs/xz-static \
	xz-args.o xz-coder.o xz-file_io.o xz-hardware.o xz-main.o xz-message.o xz-mytime.o \
	xz-options.o xz-signals.o xz-suffix.o xz-util.o xz-tuklib_open_stdxxx.o \
	xz-tuklib_progname.o xz-tuklib_exit.o xz-tuklib_mbstr_width.o xz-tuklib_mbstr_fw.o \
	xz-list.o ../liblzma/.libs/liblzma.a -lpthread)

do-test:
	(cd ${WRKSRC} && ${SETENV} ${MAKE_ENV} ${MAKE} check)

post-extract:
	${AWK} '/You can do whatever/,/lawyers/' \
		${WRKSRC}/COPYING > ${WRKDIR}/LICENSE_PUBDOM

[FILE:902:descriptions/desc.primary]
XZ Utils is free general-purpose data compression software with a
high compression ratio.  XZ Utils is the successor to LZMA Utils.

The core of the XZ Utils compression code is based on the LZMA SDK.
The primary compression algorithm is currently LZMA2, which is used
inside the .xz container format.  With typical files, XZ Utils
creates output 30% smaller than gzip and 15% smaller than bzip2.

The XZ Utils package consists of several components:

* liblzma is a compression library with an API similar to that of zlib.
* xz is a command line tool with syntax similar to that of gzip.
* xzdec is a decompression-only tool smaller than the full-featured xz one.
* A set of shell scripts (xzgrep, xzdiff, etc.) have been adapted
  from gzip to ease viewing, grepping, and comparing compressed files.
* Emulation of the command line tools of LZMA Utils eases transition
  from LZMA Utils to XZ Utils.


[FILE:67:descriptions/desc.tools]
This packages contains the command line tools of LZMA compression.


[FILE:94:distinfo]
269e3f2e512cbd3314849982014dc199a7b2148cf5c91cedc6db629acdf5e09b      2280985 xz-5.6.4.tar.gz


[FILE:55:manifests/plist.primary]
lib/
 liblzma.so.%%SOMAJOR%%
 liblzma.so.%%SOVERSION%%


[FILE:194:manifests/plist.tools]
bin/
 lzcat
 lzcmp
 lzdiff
 lzegrep
 lzfgrep
 lzgrep
 lzless
 lzma
 lzmadec
 lzmainfo
 lzmore
 unlzma
 unxz
 xz
 xz-static
 xzcat
 xzcmp
 xzdec
 xzdiff
 xzegrep
 xzfgrep
 xzgrep
 xzless
 xzmore


[FILE:226:manifests/plist.dev]
include/lzma.h
include/lzma/
 base.h
 bcj.h
 block.h
 check.h
 container.h
 delta.h
 filter.h
 hardware.h
 index.h
 index_hash.h
 lzma12.h
 stream_flags.h
 version.h
 vli.h
lib/
 liblzma.a
 liblzma.so
lib/pkgconfig/liblzma.pc


[FILE:240:manifests/plist.man]
share/man/man1/
 lzcat.1
 lzcmp.1
 lzdiff.1
 lzegrep.1
 lzfgrep.1
 lzgrep.1
 lzless.1
 lzma.1
 lzmadec.1
 lzmainfo.1
 lzmore.1
 unlzma.1
 unxz.1
 xz.1
 xzcat.1
 xzcmp.1
 xzdec.1
 xzdiff.1
 xzegrep.1
 xzfgrep.1
 xzgrep.1
 xzless.1
 xzmore.1


[FILE:109:manifests/plist.docs]
share/doc/xz/
 AUTHORS
 NEWS
 README
 THANKS
 faq.txt
 history.txt
 lzma-file-format.txt
 xz-file-format.txt


[FILE:142:manifests/plist.examples]
share/examples/xz/
 00_README.txt
 01_compress_easy.c
 02_decompress.c
 03_compress_custom.c
 04_compress_easy_mt.c
 11_file_info.c
 Makefile

