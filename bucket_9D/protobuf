# Buildsheet autogenerated by ravenadm tool -- Do not edit.

NAMEBASE=		protobuf
VERSION=		27.3
KEYWORDS=		devel
VARIANTS=		standard
SDESC[standard]=	Google's data interchange format
HOMEPAGE=		https://github.com/google/protobuf
CONTACT=		nobody

DOWNLOAD_GROUPS=	main
SITES[main]=		GITHUB/google:protobuf:v27.3
DISTFILE[1]=		generated:main
DF_INDEX=		1
SPKGS[standard]=	complete
			primary
			dev

OPTIONS_AVAILABLE=	none
OPTIONS_STANDARD=	none

BUILD_DEPENDS=		abseil-cpp:dev:standard
BUILDRUN_DEPENDS=	abseil-cpp:primary:standard
EXRUN[dev]=		abseil-cpp:dev:standard

USES=			cpe cmake pkgconfig zlib c++:primary

LICENSE=		BSD3CLAUSE:primary
LICENSE_FILE=		BSD3CLAUSE:{{WRKSRC}}/LICENSE
LICENSE_SCHEME=		solo

CPE_VENDOR=		google
FPC_EQUIVALENT=		devel/protobuf

PLIST_SUB=		PROTOCVER=27.3.0

CMAKE_ARGS=		-Dprotobuf_BUILD_TESTS:BOOL=OFF
			-DBUILD_SHARED_LIBS:BOOL=ON
			-Dprotobuf_ABSL_PROVIDER:STRING=package

post-install:
	${STRIP_CMD} ${STAGEDIR}${PREFIX}/lib/*.so
	${STRIP_CMD} ${STAGEDIR}${PREFIX}/bin/protoc

[FILE:186:descriptions/desc.primary]
Protocol Buffers are a way of encoding structured data in an efficient yet
extensible format. Google uses Protocol Buffers for almost all of its
internal RPC protocols and file formats.


[FILE:106:distinfo]
1535151efbc7893f38b0578e83cac584f2819974f065698976989ec71c1af84a      6282725 google-protobuf-27.3.tar.gz


[FILE:299:manifests/plist.primary]
bin/
 protoc
 protoc-%%PROTOCVER%%
 protoc-gen-upb
 protoc-gen-upb-%%PROTOCVER%%
 protoc-gen-upb_minitable
 protoc-gen-upb_minitable-%%PROTOCVER%%
 protoc-gen-upbdefs
 protoc-gen-upbdefs-%%PROTOCVER%%
lib/
 libprotobuf-lite.so.%%PROTOCVER%%
 libprotobuf.so.%%PROTOCVER%%
 libprotoc.so.%%PROTOCVER%%


[FILE:7442:manifests/plist.dev]
include/
 utf8_range.h
 utf8_validity.h
include/google/protobuf/
 any.h
 any.pb.h
 any.proto
 api.pb.h
 api.proto
 arena.h
 arena_align.h
 arena_allocation_policy.h
 arena_cleanup.h
 arenastring.h
 arenaz_sampler.h
 cpp_edition_defaults.h
 cpp_features.pb.h
 cpp_features.proto
 descriptor.h
 descriptor.pb.h
 descriptor.proto
 descriptor.upb.h
 descriptor.upb_minitable.h
 descriptor_database.h
 descriptor_legacy.h
 descriptor_lite.h
 descriptor_visitor.h
 duration.pb.h
 duration.proto
 dynamic_message.h
 empty.pb.h
 empty.proto
 endian.h
 explicitly_constructed.h
 extension_set.h
 extension_set_inl.h
 feature_resolver.h
 field_access_listener.h
 field_mask.pb.h
 field_mask.proto
 generated_enum_reflection.h
 generated_enum_util.h
 generated_message_bases.h
 generated_message_reflection.h
 generated_message_tctable_decl.h
 generated_message_tctable_gen.h
 generated_message_tctable_impl.h
 generated_message_util.h
 has_bits.h
 implicit_weak_message.h
 inlined_string_field.h
 internal_visibility.h
 map.h
 map_entry.h
 map_field.h
 map_field_inl.h
 map_field_lite.h
 map_type_handler.h
 message.h
 message_lite.h
 metadata.h
 metadata_lite.h
 parse_context.h
 port.h
 port_def.inc
 port_undef.inc
 raw_ptr.h
 reflection.h
 reflection_internal.h
 reflection_mode.h
 reflection_ops.h
 reflection_visit_field_info.h
 reflection_visit_fields.h
 repeated_field.h
 repeated_ptr_field.h
 runtime_version.h
 serial_arena.h
 service.h
 source_context.pb.h
 source_context.proto
 string_block.h
 struct.pb.h
 struct.proto
 text_format.h
 thread_safe_arena.h
 timestamp.pb.h
 timestamp.proto
 type.pb.h
 type.proto
 unknown_field_set.h
 varint_shuffle.h
 wire_format.h
 wire_format_lite.h
 wrappers.pb.h
 wrappers.proto
include/google/protobuf/compiler/
 code_generator.h
 command_line_interface.h
 importer.h
 parser.h
 plugin.h
 plugin.pb.h
 plugin.proto
 retention.h
 scc.h
 subprocess.h
 versions.h
 zip_writer.h
include/google/protobuf/compiler/cpp/
 enum.h
 extension.h
 field.h
 file.h
 generator.h
 helpers.h
 ifndef_guard.h
 message.h
 message_layout_helper.h
 names.h
 namespace_printer.h
 options.h
 padding_optimizer.h
 parse_function_generator.h
 service.h
 tracker.h
include/google/protobuf/compiler/cpp/field_generators/generators.h
include/google/protobuf/compiler/csharp/
 csharp_doc_comment.h
 csharp_enum.h
 csharp_enum_field.h
 csharp_field_base.h
 csharp_generator.h
 csharp_helpers.h
 csharp_map_field.h
 csharp_message.h
 csharp_message_field.h
 csharp_options.h
 csharp_primitive_field.h
 csharp_reflection_class.h
 csharp_repeated_enum_field.h
 csharp_repeated_message_field.h
 csharp_repeated_primitive_field.h
 csharp_source_generator_base.h
 csharp_wrapper_field.h
 names.h
include/google/protobuf/compiler/java/
 context.h
 doc_comment.h
 field_common.h
 file.h
 generator.h
 generator_common.h
 generator_factory.h
 helpers.h
 internal_helpers.h
 java_features.pb.h
 kotlin_generator.h
 message_serialization.h
 name_resolver.h
 names.h
 options.h
 shared_code_generator.h
include/google/protobuf/compiler/java/full/
 enum.h
 enum_field.h
 extension.h
 field_generator.h
 generator_factory.h
 make_field_gens.h
 map_field.h
 message.h
 message_builder.h
 message_field.h
 primitive_field.h
 service.h
 string_field.h
include/google/protobuf/compiler/java/lite/
 enum.h
 enum_field.h
 extension.h
 field_generator.h
 generator_factory.h
 make_field_gens.h
 map_field.h
 message.h
 message_builder.h
 message_field.h
 primitive_field.h
 string_field.h
include/google/protobuf/compiler/objectivec/
 enum.h
 enum_field.h
 extension.h
 field.h
 file.h
 generator.h
 helpers.h
 import_writer.h
 line_consumer.h
 map_field.h
 message.h
 message_field.h
 names.h
 nsobject_methods.h
 oneof.h
 options.h
 primitive_field.h
 tf_decode_data.h
include/google/protobuf/compiler/php/
 names.h
 php_generator.h
include/google/protobuf/compiler/python/
 generator.h
 helpers.h
 pyi_generator.h
include/google/protobuf/compiler/ruby/ruby_generator.h
include/google/protobuf/compiler/rust/
 context.h
 crate_mapping.h
 enum.h
 generator.h
 message.h
 naming.h
 oneof.h
 relative_path.h
 rust_field_type.h
 rust_keywords.h
include/google/protobuf/compiler/rust/accessors/
 accessor_case.h
 accessors.h
 generator.h
 helpers.h
include/google/protobuf/io/
 coded_stream.h
 gzip_stream.h
 io_win32.h
 printer.h
 strtod.h
 tokenizer.h
 zero_copy_sink.h
 zero_copy_stream.h
 zero_copy_stream_impl.h
 zero_copy_stream_impl_lite.h
include/google/protobuf/json/json.h
include/google/protobuf/json/internal/
 descriptor_traits.h
 lexer.h
 message_path.h
 parser.h
 parser_traits.h
 unparser.h
 unparser_traits.h
 untyped_message.h
 writer.h
 zero_copy_buffered_stream.h
include/google/protobuf/stubs/
 callback.h
 common.h
 platform_macros.h
 port.h
 status_macros.h
include/google/protobuf/testing/file.h
include/google/protobuf/util/
 delimited_message_util.h
 field_comparator.h
 field_mask_util.h
 json_util.h
 message_differencer.h
 time_util.h
 type_resolver.h
 type_resolver_util.h
include/java/core/src/main/resources/google/protobuf/java_features.proto
include/upb/generated_code_support.h
include/upb/base/
 descriptor_constants.h
 status.h
 status.hpp
 string_view.h
 upcast.h
include/upb/base/internal/
 endian.h
 log2.h
include/upb/hash/
 common.h
 int_table.h
 str_table.h
include/upb/json/
 decode.h
 encode.h
include/upb/lex/
 atoi.h
 round_trip.h
 strtod.h
 unicode.h
include/upb/mem/
 alloc.h
 arena.h
 arena.hpp
include/upb/mem/internal/arena.h
include/upb/message/
 accessors.h
 array.h
 compare.h
 compat.h
 copy.h
 map.h
 map_gencode_util.h
 message.h
 tagged_ptr.h
 value.h
include/upb/message/internal/
 accessors.h
 array.h
 compare_unknown.h
 extension.h
 map.h
 map_entry.h
 map_sorter.h
 message.h
 tagged_ptr.h
 types.h
include/upb/mini_descriptor/
 build_enum.h
 decode.h
 link.h
include/upb/mini_descriptor/internal/
 base92.h
 decoder.h
 encode.h
 encode.hpp
 modifiers.h
 wire_constants.h
include/upb/mini_table/
 enum.h
 extension.h
 extension_registry.h
 field.h
 file.h
 message.h
 sub.h
include/upb/mini_table/internal/
 enum.h
 extension.h
 field.h
 file.h
 message.h
 size_log2.h
 sub.h
include/upb/port/
 atomic.h
 def.inc
 undef.inc
 vsnprintf_compat.h
include/upb/reflection/
 common.h
 def.h
 def.hpp
 def_pool.h
 def_type.h
 enum_def.h
 enum_reserved_range.h
 enum_value_def.h
 extension_range.h
 field_def.h
 file_def.h
 message.h
 message.hpp
 message_def.h
 message_reserved_range.h
 method_def.h
 oneof_def.h
 service_def.h
include/upb/reflection/internal/
 def_pool.h
 desc_state.h
 enum_def.h
 enum_reserved_range.h
 enum_value_def.h
 extension_range.h
 field_def.h
 file_def.h
 message_def.h
 message_reserved_range.h
 method_def.h
 oneof_def.h
 service_def.h
 upb_edition_defaults.h
include/upb/text/encode.h
include/upb/util/
 def_to_proto.h
 required_fields.h
include/upb/wire/
 decode.h
 encode.h
 eps_copy_input_stream.h
 reader.h
 types.h
include/upb/wire/internal/decode_fast.h
include/upb_generator/mangle.h
lib/
 libprotobuf-lite.so
 libprotobuf.so
 libprotoc.so
 libupb.a
 libutf8_range.a
 libutf8_validity.a
lib/cmake/protobuf/
 protobuf-config-version.cmake
 protobuf-config.cmake
 protobuf-generate.cmake
 protobuf-module.cmake
 protobuf-options.cmake
 protobuf-targets-release.cmake
 protobuf-targets.cmake
lib/cmake/utf8_range/
 utf8_range-config.cmake
 utf8_range-targets-release.cmake
 utf8_range-targets.cmake
lib/pkgconfig/
 protobuf-lite.pc
 protobuf.pc
 utf8_range.pc


[FILE:659:patches/patch-src_google_protobuf_compiler_command__line__interface.cc]
--- src/google/protobuf/compiler/command_line_interface.cc.orig	2024-06-25 17:53:13 UTC
+++ src/google/protobuf/compiler/command_line_interface.cc
@@ -62,7 +62,7 @@
 
 #if defined(__APPLE__)
 #include <mach-o/dyld.h>
-#elif defined(__FreeBSD__)
+#elif defined(__FreeBSD__) || defined(__DragonFly__)
 #include <sys/sysctl.h>
 #endif
 
@@ -219,7 +219,7 @@ bool GetProtocAbsolutePath(std::string*
     realpath(dirtybuffer, buffer);
     len = strlen(buffer);
   }
-#elif defined(__FreeBSD__)
+#elif defined(__FreeBSD__) || defined(__DragonFly__)
   char buffer[PATH_MAX];
   size_t len = PATH_MAX;
   int mib[4] = {CTL_KERN, KERN_PROC, KERN_PROC_PATHNAME, -1};


[FILE:754:patches/patch-src_google_protobuf_stubs_port.h]
--- src/google/protobuf/stubs/port.h.orig	2024-06-25 17:53:13 UTC
+++ src/google/protobuf/stubs/port.h
@@ -25,6 +25,8 @@
 #ifdef _MSC_VER
 #include <stdlib.h>  // NOLINT(build/include)
 #include <intrin.h>
+#elif defined(__sun__)
+#include <sys/byteorder.h>
 #elif defined(__APPLE__)
 #include <libkern/OSByteOrder.h>
 #elif defined(__linux__) || defined(__ANDROID__) || defined(__CYGWIN__)
@@ -130,6 +132,11 @@ inline void GOOGLE_UNALIGNED_STORE64(voi
 #define bswap_32(x) _byteswap_ulong(x)
 #define bswap_64(x) _byteswap_uint64(x)
 
+#elif defined(__sun__)
+#define bswap_16(x) BSWAP_16(x)
+#define bswap_32(x) BSWAP_32(x)
+#define bswap_64(x) BSWAP_64(x)
+
 #elif defined(__APPLE__)
 // Mac OS X / Darwin features
 #define bswap_16(x) OSSwapInt16(x)

