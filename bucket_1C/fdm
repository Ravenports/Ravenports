# Buildsheet autogenerated by ravenadm tool -- Do not edit.

NAMEBASE=		fdm
VERSION=		2.2
REVISION=		1
KEYWORDS=		mail
VARIANTS=		std
SDESC[std]=		Fetch, filter and deliver mail
HOMEPAGE=		https://github.com/nicm/fdm
CONTACT=		nobody

DOWNLOAD_GROUPS=	main
SITES[main]=		GITHUB/nicm:fdm:2.2
DISTFILE[1]=		generated:main
DF_INDEX=		1
SPKGS[std]=		set
			primary
			examples
			docs
			man

OPTIONS_AVAILABLE=	none
OPTIONS_STANDARD=	none

BUILD_DEPENDS=		tdb:dev:std
BUILDRUN_DEPENDS=	tdb:primary:std

USES=			autoreconf:build ssl zlib pcre

LICENSE=		ISCL:primary
LICENSE_FILE=		ISCL:{{WRKDIR}}/LICENSE
LICENSE_AWK=		ISCL:"^\#include"
LICENSE_SOURCE=		ISCL:{{WRKSRC}}/fdm.c
LICENSE_SCHEME=		solo

FPC_EQUIVALENT=		mail/fdm

MUST_CONFIGURE=		gnu
CONFIGURE_ARGS=		--sysconfdir={{PREFIX}}/etc

CFLAGS=			-DPCRE
LDFLAGS=		-lpcre
VAR_OPSYS[netbsd]=	CFLAGS=-D_OPENBSD_SOURCE

post-patch:
	${REINPLACE_CMD} -e 's|/etc|${PREFIX}/etc|g' ${WRKSRC}/*.[15] ${WRKSRC}/MANUAL
	${ECHO_CMD} 'lex.c: parse.h' >> ${WRKSRC}/Makefile.am

post-install:
	${MKDIR} ${STAGEDIR}${STD_EXAMPLESDIR} ${STAGEDIR}${STD_DOCDIR}
	${INSTALL_DATA} ${WRKSRC}/examples/* ${STAGEDIR}${STD_EXAMPLESDIR}/
	${INSTALL_DATA} ${WRKSRC}/README ${STAGEDIR}${STD_DOCDIR}/
	${INSTALL_DATA} ${WRKSRC}/MANUAL ${STAGEDIR}${STD_DOCDIR}/

pre-configure:
	cd ${WRKSRC} && sh autogen.sh

[FILE:253:descriptions/desc.primary]
fdm is a simple, lightweight replacement for mail fetch, filter and
delivery programs such as fetchmail and procmail. It can fetch using
POP3 or IMAP (with SSL) or from stdin, and deliver to a pipe, file,
maildir, mbox or SMTP server, based on regexps.


[FILE:98:distinfo]
75d72794a0a7600c6c007b2f074f75f2852feb688325a7d24fb5dbab68e344ab       184913 nicm-fdm-2.2.tar.gz


[FILE:8:manifests/plist.primary]
bin/fdm


[FILE:121:manifests/plist.examples]
share/examples/fdm/
 example_imap_folder.conf
 f-terbeck.conf
 g-lando.conf
 n-marriott.conf
 t-ulmer.conf
 w-maier.conf


[FILE:31:manifests/plist.docs]
share/doc/fdm/
 MANUAL
 README


[FILE:47:manifests/plist.man]
share/man/man1/fdm.1
share/man/man5/fdm.conf.5

