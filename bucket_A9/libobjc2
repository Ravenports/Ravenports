# Buildsheet autogenerated by ravenadm tool -- Do not edit.

NAMEBASE=		libobjc2
VERSION=		2.2.1
KEYWORDS=		lang devel
VARIANTS=		standard
SDESC[standard]=	Replacement Obj-C runtime for modern lang features
HOMEPAGE=		https://github.com/gnustep/libobjc2/
CONTACT=		Michael_Reim[kraileth@elderlinux.org]

DOWNLOAD_GROUPS=	main tessil
SITES[main]=		GITHUB/gnustep:libobjc2:v2.2.1
DISTFILE[1]=		generated:main
DIST_SUBDIR=		gnustep
DF_INDEX=		1
SPKGS[standard]=	complete
			primary
			dev

OPTIONS_AVAILABLE=	none
OPTIONS_STANDARD=	none

BUILD_DEPENDS=		gnustep-make-bootstrap:primary:standard
			robin-map:single:standard

USES=			c++:primary cmake clang

LICENSE=		MIT:primary
LICENSE_FILE=		MIT:{{WRKSRC}}/COPYING
LICENSE_SCHEME=		solo

FPC_EQUIVALENT=		lang/libobjc2

SOVERSION=		4.6

LDFLAGS=		-lm
CMAKE_ARGS=		-DLIB_INSTALL_PATH=lib
			-DLLVM_OPTS:BOOL=ON
			-DGNUSTEP_INSTALL_TYPE=SYSTEM
			-DTESTS=OFF

post-install:
	${STRIP_CMD} ${STAGEDIR}${PREFIX}/lib/libobjc.so

[FILE:1192:descriptions/desc.primary]
The GNUstep Objective-C runtime was designed as a drop-in replacement for 
the GCC runtime. It supports three ABIs:

 * The old GCC ABI, which provides support for Objective-C 1.0 features. 
This can be selected via the -fobjc-runtime=gcc flag in Clang or by 
compiling with GCC.
 * The initial GNUstep non-fragile ABI, which was intended to be 
compatible with the GCC ABI, but provide support for modern Objective-C 
features. This can be selected with the -fobjc-runtime=gnustep-1.9 flag in 
Clang.
 * The modern (v2) ABI, which provides richer reflection metadata, smaller 
binaries and reduced memory usage. This is selected with the 
-fobjc-runtime=gnustep-2.0 flag in Clang 7.0 or later.

All ABIs support the following feature above and beyond the GCC runtime:

 * The modern Objective-C runtime APIs, initially introduced with OS X 
10.5.
 * Blocks (closures).
 * Synthesised property accessors.
 * Efficient support for @synchronized()
 * Type-dependent dispatch, eliminating stack corruption from mismatched 
selectors.
 * Support for the associated reference APIs introduced with Mac OS X 10.6.
 * Support for the automatic reference counting APIs introduced with Mac 
OS X 10.7



[FILE:116:distinfo]
768ea8c5bd0999a29b5d15781125494f986456c1dc5c51d370fb31852cd31ea1       205087 gnustep/gnustep-libobjc2-2.2.1.tar.gz


[FILE:29:manifests/plist.primary]
lib/libobjc.so.%%SOVERSION%%


[FILE:377:manifests/plist.dev]
include/
 Block.h
 Block_private.h
include/objc/
 Availability.h
 Object.h
 Protocol.h
 blocks_private.h
 blocks_runtime.h
 capabilities.h
 developer.h
 encoding.h
 hooks.h
 message.h
 objc-api.h
 objc-arc.h
 objc-auto.h
 objc-class.h
 objc-exception.h
 objc-runtime.h
 objc-visibility.h
 objc.h
 runtime-deprecated.h
 runtime.h
 slot.h
lib/libobjc.so
lib/pkgconfig/libobjc.pc


[FILE:408:patches/patch-objcxx__eh.h]
--- objcxx_eh.h.orig	2024-03-21 16:06:36 UTC
+++ objcxx_eh.h
@@ -14,7 +14,7 @@ extern "C" {
 #undef CXA_ALLOCATE_EXCEPTION_SPECIFIER
 #define CXA_ALLOCATE_EXCEPTION_SPECIFIER
 #endif
-void *__cxa_allocate_exception(size_t thrown_size) CXA_ALLOCATE_EXCEPTION_SPECIFIER;
+void *__cxa_allocate_exception(size_t thrown_size);
 
 /**
  * Initialises an exception object returned by __cxa_allocate_exception() for

