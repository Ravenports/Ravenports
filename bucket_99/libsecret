# Buildsheet autogenerated by ravenadm tool -- Do not edit.

NAMEBASE=		libsecret
VERSION=		0.21.4
KEYWORDS=		security
VARIANTS=		std
SDESC[std]=		Library to access the secret service API
HOMEPAGE=		https://wiki.gnome.org/Projects/Libsecret
CONTACT=		Michael_Reim[kraileth@elderlinux.org]

DOWNLOAD_GROUPS=	main
SITES[main]=		http://ftp.gnome.org/pub/GNOME/sources/libsecret/0.21/
DISTFILE[1]=		libsecret-0.21.4.tar.xz:main
DF_INDEX=		1
SPKGS[std]=		set
			primary
			tools
			dev
			nls
			man

OPTIONS_AVAILABLE=	none
OPTIONS_STANDARD=	none

BUILD_DEPENDS=		libgcrypt:dev:std
			docbook-xsl:primary:std
			vala:primary:std
BUILDRUN_DEPENDS=	libgcrypt:primary:std
EXRUN[tools]=		libsecret:primary:std
EXRUN[dev]=		libgcrypt:dev:std

USES=			gmake libtool meson pkgconfig
GNOME_COMPONENTS=	glib libxslt intltool introspection

LICENSE=		LGPL21+:primary
LICENSE_TERMS=		primary:{{WRKDIR}}/TERMS
LICENSE_FILE=		LGPL21+:{{WRKSRC}}/COPYING
LICENSE_AWK=		TERMS:"^$$"
LICENSE_SOURCE=		TERMS:{{WRKSRC}}/libsecret/secret.h
LICENSE_SCHEME=		solo

FPC_EQUIVALENT=		security/libsecret
MESON_ARGS=		-Dgtk_doc=false

INSTALL_TARGET=		install-strip
INSTALL_REQ_TOOLCHAIN=	yes
SOVERSION=		0.0.0

VAR_OPSYS[sunos]=	LDFLAGS=-lintl

pre-configure:
	${REINPLACE_CMD} -e 's|http://docbook.sourceforge.net/release/xsl/current|file://${LOCALBASE}/share/xsl/docbook|' \
		${WRKSRC}/docs/man/meson.build

[FILE:261:descriptions/desc.primary]
Libsecret is a library for storing and retrieving passwords and other 
secrets. It communicates with the "Secret Service" using D-Bus. 
Gnome-keyring and Ksecretservice are both implementations of a Secret 
Service; Libsecret replaces the old libgnome-keyring.


[FILE:43:descriptions/desc.tools]
This packages contains the libsecret tool.


[FILE:102:distinfo]
163d08d783be6d4ab9a979ceb5a4fecbc1d9660d3c34168c581301cd53912b20       206636 libsecret-0.21.4.tar.xz


[FILE:181:manifests/plist.primary]
lib/
 libsecret-1.so.%%SOMAJOR%%
 libsecret-1.so.%%SOVERSION%%
lib/girepository-1.0/Secret-1.typelib
share/gir-1.0/Secret-1.gir
share/vala/vapi/
 libsecret-1.deps
 libsecret-1.vapi


[FILE:16:manifests/plist.tools]
bin/secret-tool


[FILE:387:manifests/plist.dev]
include/libsecret-1/libsecret/
 secret-attributes.h
 secret-backend.h
 secret-collection.h
 secret-enum-types.h
 secret-item.h
 secret-password.h
 secret-paths.h
 secret-prompt.h
 secret-retrievable.h
 secret-schema.h
 secret-schemas.h
 secret-service.h
 secret-types.h
 secret-value.h
 secret-version.h
 secret.h
lib/libsecret-1.so
lib/pkgconfig/
 libsecret-1.pc
 libsecret-unstable.pc


[FILE:2492:manifests/plist.nls]
share/locale/ab/LC_MESSAGES/libsecret.mo
share/locale/an/LC_MESSAGES/libsecret.mo
share/locale/ar/LC_MESSAGES/libsecret.mo
share/locale/as/LC_MESSAGES/libsecret.mo
share/locale/be/LC_MESSAGES/libsecret.mo
share/locale/bg/LC_MESSAGES/libsecret.mo
share/locale/bs/LC_MESSAGES/libsecret.mo
share/locale/ca/LC_MESSAGES/libsecret.mo
share/locale/ca@valencia/LC_MESSAGES/libsecret.mo
share/locale/ckb/LC_MESSAGES/libsecret.mo
share/locale/cs/LC_MESSAGES/libsecret.mo
share/locale/da/LC_MESSAGES/libsecret.mo
share/locale/de/LC_MESSAGES/libsecret.mo
share/locale/el/LC_MESSAGES/libsecret.mo
share/locale/en_GB/LC_MESSAGES/libsecret.mo
share/locale/eo/LC_MESSAGES/libsecret.mo
share/locale/es/LC_MESSAGES/libsecret.mo
share/locale/eu/LC_MESSAGES/libsecret.mo
share/locale/fa/LC_MESSAGES/libsecret.mo
share/locale/fi/LC_MESSAGES/libsecret.mo
share/locale/fr/LC_MESSAGES/libsecret.mo
share/locale/fur/LC_MESSAGES/libsecret.mo
share/locale/gl/LC_MESSAGES/libsecret.mo
share/locale/he/LC_MESSAGES/libsecret.mo
share/locale/hr/LC_MESSAGES/libsecret.mo
share/locale/hu/LC_MESSAGES/libsecret.mo
share/locale/id/LC_MESSAGES/libsecret.mo
share/locale/ie/LC_MESSAGES/libsecret.mo
share/locale/it/LC_MESSAGES/libsecret.mo
share/locale/ja/LC_MESSAGES/libsecret.mo
share/locale/ka/LC_MESSAGES/libsecret.mo
share/locale/kk/LC_MESSAGES/libsecret.mo
share/locale/ko/LC_MESSAGES/libsecret.mo
share/locale/lt/LC_MESSAGES/libsecret.mo
share/locale/lv/LC_MESSAGES/libsecret.mo
share/locale/ml/LC_MESSAGES/libsecret.mo
share/locale/ms/LC_MESSAGES/libsecret.mo
share/locale/nb/LC_MESSAGES/libsecret.mo
share/locale/ne/LC_MESSAGES/libsecret.mo
share/locale/nl/LC_MESSAGES/libsecret.mo
share/locale/oc/LC_MESSAGES/libsecret.mo
share/locale/pa/LC_MESSAGES/libsecret.mo
share/locale/pl/LC_MESSAGES/libsecret.mo
share/locale/pt/LC_MESSAGES/libsecret.mo
share/locale/pt_BR/LC_MESSAGES/libsecret.mo
share/locale/ro/LC_MESSAGES/libsecret.mo
share/locale/ru/LC_MESSAGES/libsecret.mo
share/locale/sk/LC_MESSAGES/libsecret.mo
share/locale/sl/LC_MESSAGES/libsecret.mo
share/locale/sr/LC_MESSAGES/libsecret.mo
share/locale/sr@latin/LC_MESSAGES/libsecret.mo
share/locale/sv/LC_MESSAGES/libsecret.mo
share/locale/ta/LC_MESSAGES/libsecret.mo
share/locale/tg/LC_MESSAGES/libsecret.mo
share/locale/tr/LC_MESSAGES/libsecret.mo
share/locale/uk/LC_MESSAGES/libsecret.mo
share/locale/vi/LC_MESSAGES/libsecret.mo
share/locale/zh_CN/LC_MESSAGES/libsecret.mo
share/locale/zh_HK/LC_MESSAGES/libsecret.mo
share/locale/zh_TW/LC_MESSAGES/libsecret.mo


[FILE:29:manifests/plist.man]
share/man/man1/secret-tool.1


[FILE:289:patches/patch-egg_egg-unix-credentials.c]
--- egg/egg-unix-credentials.c.orig	2024-02-23 09:53:23 UTC
+++ egg/egg-unix-credentials.c
@@ -48,6 +48,10 @@
 #include <ucred.h>
 #endif
 
+#if defined(__FreeBSD__) || defined(__NetBSD__)
+#undef LOCAL_CREDS
+#endif
+
 int
 egg_unix_credentials_read (int sock, pid_t *pid, uid_t *uid)
 {

