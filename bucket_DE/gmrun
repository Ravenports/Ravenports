# Buildsheet autogenerated by ravenadm tool -- Do not edit.

NAMEBASE=		gmrun
VERSION=		0.9.2
KEYWORDS=		x11
VARIANTS=		standard
SDESC[standard]=	Small GTK based 'Run application' dialog
HOMEPAGE=		https://sourceforge.net/projects/gmrun/
CONTACT=		nobody

DOWNLOAD_GROUPS=	main
SITES[main]=		SF/gmrun/gmrun/0.9.2
DISTFILE[1]=		gmrun-0.9.2.tar.gz:main
DF_INDEX=		1
SPKGS[standard]=	single

OPTIONS_AVAILABLE=	none
OPTIONS_STANDARD=	none

BUILDRUN_DEPENDS=	popt:single:standard

USES=			gmake pkgconfig
GNOME_COMPONENTS=	gtk2

FPC_EQUIVALENT=		x11/gmrun

MUST_CONFIGURE=		gnu
CONFIGURE_ARGS=		--disable-stlport

post-patch:
	@${REINPLACE_CMD} -e '/my_alphasort/s#const void\*#const struct dirent**#g' \
		${WRKSRC}/src/gtkcompletionline.cc

[FILE:288:descriptions/desc.single]
gmrun is a very featureful GTK+-2 Run box. Its features include:

 * Tilde completion
 * Completion for separate words
 * Cycleable command history
 * Configuration file share/gmrun/gmrunrc which can be copied to ~/.gmrunrc
 * Can spawn commands in a terminal
 * Intelligent URL handling


[FILE:97:distinfo]
17297bce53249ccc7145931db22251b47f77ac355f78cf8abf1e87ae16341fa0        66097 gmrun-0.9.2.tar.gz


[FILE:30:manifests/plist.single]
bin/gmrun
share/gmrun/gmrunrc


[FILE:1299:patches/patch-src__gtkcompletionline.cc]
--- src/gtkcompletionline.cc.orig	2003-11-16 13:55:07.000000000 +0300
+++ src/gtkcompletionline.cc
@@ -24,6 +24,7 @@
 #include <sys/types.h>
 #include <sys/stat.h>
 #include <unistd.h>
+#include <string.h>
 
 #include <iostream>
 #include <set>
@@ -39,6 +39,8 @@
 
 /* GLOBALS */
 
+GtkType type = 0;
+
 /* signals */
 enum {
   UNIQUE,
@@ -76,14 +78,13 @@
 on_key_press(GtkCompletionLine *cl, GdkEventKey *event, gpointer data);
 
 /* get_type */
-guint gtk_completion_line_get_type(void)
+GtkType gtk_completion_line_get_type(void)
 {
-  static guint type = 0;
   if (type == 0)
   {
     GtkTypeInfo type_info =
     {
-      "GtkCompletionLine",
+      (gchar *)"GtkCompletionLine",
       sizeof(GtkCompletionLine),
       sizeof(GtkCompletionLineClass),
       (GtkClassInitFunc)gtk_completion_line_class_init,
@@ -551,10 +552,10 @@
 {
   string text = gtk_entry_get_text(GTK_ENTRY(object));
   gint where = (gint)text.find("~");
-  if (where != string::npos) {
+  if (where != (gint)string::npos) {
     if ((where > 0) && (text[where - 1] != ' '))
       return 0;
-    if (where < text.size() - 1 && text[where + 1] != '/') {
+    if (where < (gint)text.size() - 1 && text[where + 1] != '/') {
       // FIXME: Parse another user's home
     } else {
       string home = g_get_home_dir();


[FILE:410:patches/patch-src__gtkcompletionline.h]
--- ./src/gtkcompletionline.h.orig	2003-11-16 13:43:32.000000000 +0300
+++ ./src/gtkcompletionline.h	2010-01-20 21:24:57.489100621 +0300
@@ -76,7 +76,7 @@
     void (* cancel)(GtkCompletionLine *cl);
   };
 
-  guint gtk_completion_line_get_type(void);
+  GtkType gtk_completion_line_get_type(void);
   GtkWidget *gtk_completion_line_new();
 
   void gtk_completion_line_last_history_item(GtkCompletionLine*);


[FILE:208:patches/patch-src_ci__string.h]
--- src/ci_string.h.orig	2001-05-16 14:39:31 UTC
+++ src/ci_string.h
@@ -8,6 +8,7 @@
 
 #include <string>
 #include <ctype.h>
+#include <strings.h>
 
 struct ci_char_traits : public std::char_traits<char>
 {


[FILE:188:patches/patch-src_main.cc]
--- src/main.cc.orig	2003-11-16 10:55:07 UTC
+++ src/main.cc
@@ -20,6 +20,7 @@
 #include <algorithm>
 #include <iterator>
 #include <popt.h>
+#include <string.h>
 
 using namespace std;
 


[FILE:205:patches/patch-src_prefs.cc]
--- src/prefs.cc.orig	2002-08-16 10:48:22 UTC
+++ src/prefs.cc
@@ -13,6 +13,8 @@
 #include <fstream>
 #include <iostream>
 #include <stdio.h>
+#include <stdlib.h>
+#include <string.h>
 
 #include <list>
 

