# Buildsheet autogenerated by ravenadm tool -- Do not edit.

NAMEBASE=		libunistring
VERSION=		1.4.1
KEYWORDS=		devel
VARIANTS=		std
SDESC[std]=		Unicode string library
HOMEPAGE=		https://www.gnu.org/software/libunistring/
CONTACT=		nobody

DOWNLOAD_GROUPS=	main
SITES[main]=		GNU/libunistring
DISTFILE[1]=		libunistring-1.4.1.tar.xz:main
DF_INDEX=		1
SPKGS[std]=		set
			primary
			dev
			docs
			info

OPTIONS_AVAILABLE=	none
OPTIONS_STANDARD=	none

USES=			charsetfix gmake iconv libtool

LICENSE=		GPLv2+:primary LGPL3+:primary
LICENSE_TERMS=		primary:{{WRKDIR}}/TERMS
LICENSE_FILE=		GPLv2+:{{WRKSRC}}/COPYING
			LGPL3+:{{WRKSRC}}/COPYING.LIB
LICENSE_AWK=		TERMS:"stddef.h"
LICENSE_SOURCE=		TERMS:{{WRKSRC}}/lib/unicase/unicasemap.h
LICENSE_SCHEME=		dual

INFO=			info:libunistring
FPC_EQUIVALENT=		devel/libunistring
INFO_SUBDIR=		.

MUST_CONFIGURE=		gnu

INSTALL_TARGET=		install-strip
SOVERSION=		5.2.1

VAR_OPSYS[sunos]=	CFLAGS=-D_STRICT_SYMBOLS

pre-configure:
	${REINPLACE_CMD} -e '/^SUBDIRS =/ s|tests||' ${WRKSRC}/Makefile.in

[FILE:174:descriptions/desc.primary]
GNU LIBUNISTRING - Unicode string library

This library provides functions for manipulating Unicode strings and
for manipulating C strings according to the Unicode standard.


[FILE:104:distinfo]
67d88430892527861903788868c77802a217b0959990f7449f2976126a307763      2769164 libunistring-1.4.1.tar.xz


[FILE:65:manifests/plist.primary]
lib/
 libunistring.so.%%SOMAJOR%%
 libunistring.so.%%SOVERSION%%


[FILE:295:manifests/plist.dev]
include/
 unicase.h
 uniconv.h
 unictype.h
 unigbrk.h
 unilbrk.h
 unimetadata.h
 uniname.h
 uninorm.h
 unistdio.h
 unistr.h
 unitypes.h
 uniwbrk.h
 uniwidth.h
include/unistring/
 cdefs.h
 iconveh.h
 inline.h
 localcharset.h
 stdint.h
 version.h
 woe32dll.h
lib/
 libunistring.a
 libunistring.so


[FILE:590:manifests/plist.docs]
share/doc/libunistring/
 libunistring_1.html
 libunistring_10.html
 libunistring_11.html
 libunistring_12.html
 libunistring_13.html
 libunistring_14.html
 libunistring_15.html
 libunistring_16.html
 libunistring_17.html
 libunistring_18.html
 libunistring_19.html
 libunistring_2.html
 libunistring_20.html
 libunistring_21.html
 libunistring_22.html
 libunistring_23.html
 libunistring_3.html
 libunistring_4.html
 libunistring_5.html
 libunistring_6.html
 libunistring_7.html
 libunistring_8.html
 libunistring_9.html
 libunistring_abt.html
 libunistring_fot.html
 libunistring_toc.html


[FILE:221:patches/patch-lib_unistdio_u16-u16-vasnprintf.c]
--- lib/unistdio/u16-u16-vasnprintf.c.orig	2025-04-25 21:02:23 UTC
+++ lib/unistdio/u16-u16-vasnprintf.c
@@ -31,6 +31,7 @@
 #endif
 
 #include <config.h>
+#include <string.h>
 #include <alloca.h>
 
 /* Specification.  */


[FILE:228:patches/patch-lib_unistr_u8-stpcpy.c]
--- lib/unistr/u8-stpcpy.c.orig	2025-01-22 21:41:11 UTC
+++ lib/unistr/u8-stpcpy.c
@@ -33,7 +33,7 @@
 /* Specification.  */
 #include "unistr.h"
 
-#if HAVE_STPCPY
+#if HAVE_STPCPY && !defined(__sun__)
 
 # include <string.h>
 


[FILE:408:patches/patch-lib_vasnprintf.c]
--- lib/vasnprintf.c.orig	2025-09-23 23:01:32 UTC
+++ lib/vasnprintf.c
@@ -259,7 +259,7 @@
 #define remainder rem
 
 #if (!USE_SNPRINTF || !HAVE_SNPRINTF_RETVAL_C99 || USE_MSVC__SNPRINTF || (PTRDIFF_MAX > INT_MAX)) && !WIDE_CHAR_VERSION
-# if (HAVE_STRNLEN && !defined _AIX)
+# if (HAVE_STRNLEN && !defined _AIX) && !defined(__sun__)
 #  define local_strnlen strnlen
 # else
 #  ifndef local_strnlen_defined

