# Buildsheet autogenerated by ravenadm tool -- Do not edit.

NAMEBASE=		rarian
VERSION=		0.8.1
KEYWORDS=		textproc
VARIANTS=		standard
SDESC[standard]=	Documentation metadata library
HOMEPAGE=		https://rarian.freedesktop.org/
CONTACT=		nobody

DOWNLOAD_GROUPS=	main
SITES[main]=		GNOME/rarian/0.8
DISTFILE[1]=		rarian-0.8.1.tar.bz2:main
DF_INDEX=		1
SPKGS[standard]=	single

OPTIONS_AVAILABLE=	none
OPTIONS_STANDARD=	none

BUILDRUN_DEPENDS=	bash:primary:standard
			docbook-xsl:primary:standard
			docbook-xml:single:standard
RUN_DEPENDS=		getopt:single:standard

USES=			gmake libtool python fbsd10fix
GNOME_COMPONENTS=	libxslt

FPC_EQUIVALENT=		textproc/rarian

MUST_CONFIGURE=		gnu
CONFIGURE_ARGS=		--with-convert-dir={{LOCALBASE}}/share/omf
			--localstatedir=/var

INSTALL_TARGET=		install-strip
PLIST_SUB=		PREFIX={{PREFIX}}

post-patch:
	@${REINPLACE_CMD} -e 's|/lib/rarian|/db/rarian|' \
		${WRKSRC}/util/Makefile.in
	@${REINPLACE_CMD} -e 's|@localstatedir@/lib/rarian|@localstatedir@/db/rarian|g ; \
		s|getopt|${LOCALBASE}/bin/getopt|' \
		${WRKSRC}/util/rarian-sk-config.in \
		${WRKSRC}/util/rarian-sk-extract.in \
		${WRKSRC}/util/rarian-sk-rebuild.in \
		${WRKSRC}/util/rarian-sk-update.in
	@${REINPLACE_CMD} -e 's|/usr/local|${LOCALBASE}|' \
		${WRKSRC}/librarian/rarian-main.c \
		${WRKSRC}/librarian/rarian-man.c \
		${WRKSRC}/librarian/rarian-info.c

post-install:
	${RM} -r ${STAGEDIR}${PREFIX}/share/help

[FILE:522:descriptions/desc.single]
Rarian is designed to be a replacement for scrollkeeper.  It is
currently undergoing heavy development.  As of writing, rarian can be
installed in place of scrollkeeper and everything will work okay.

Rarian manages documentation metadata (as specified by the Open Source
Metadata Framework (OMF) and provides a simple API to allow help browsers
to find, sort, and search the document catalog.  It will also be able to
communicate with catalog servers on the Net to search for documents which
are not on the local system.


[FILE:99:distinfo]
aafe886d46e467eb3414e91fa9e42955bd4b618c3e19c42c773026b205a84577       324441 rarian-0.8.1.tar.bz2


[FILE:1155:manifests/plist.single]
bin/
 rarian-example
 rarian-sk-config
 rarian-sk-extract
 rarian-sk-gen-uuid
 rarian-sk-get-cl
 rarian-sk-get-content-list
 rarian-sk-get-extended-content-list
 rarian-sk-get-scripts
 rarian-sk-install
 rarian-sk-migrate
 rarian-sk-preinstall
 rarian-sk-rebuild
 rarian-sk-update
 scrollkeeper-config
 scrollkeeper-extract
 scrollkeeper-gen-seriesid
 scrollkeeper-get-cl
 scrollkeeper-get-content-list
 scrollkeeper-get-extended-content-list
 scrollkeeper-get-index-from-docpath
 scrollkeeper-get-toc-from-docpath
 scrollkeeper-get-toc-from-id
 scrollkeeper-install
 scrollkeeper-preinstall
 scrollkeeper-rebuilddb
 scrollkeeper-uninstall
 scrollkeeper-update
include/rarian/
 rarian-info.h
 rarian-main.h
 rarian-man.h
 rarian-reg-utils.h
 rarian.h
lib/
 librarian.a
 librarian.so
 librarian.so.0
 librarian.so.0.0.0
lib/pkgconfig/rarian.pc
share/librarian/Templates/C/scrollkeeper_cl.xml
share/librarian/manual/
 help-spec-0.2.xml
 index.xhtml
 rar-lib.xhtml
 rar-mdf.xhtml
 rar-skcompat.xhtml
share/librarian/rarian-sk-cl.xml
@dir /var/db/rarian
@postunexec rmdir /var/db/rarian/* 2>/dev/null || true
@postexec %%PREFIX%%/bin/rarian-sk-update || true


[FILE:364:patches/patch-librarian_rarian-main.c]
--- librarian/rarian-main.c.orig	2007-08-02 16:04:45.000000000 -0400
+++ librarian/rarian-main.c	2007-08-02 16:12:58.000000000 -0400
@@ -212,7 +212,7 @@ past:
     path = getenv ("XDG_DATA_DIRS");
 
     if (!path || !strcmp (path, "")) {
-        path = "/usr/local/share/:/usr/share/";
+        path = "/usr/local/share/";
     }
     cur_path = path;
     do {


[FILE:907:patches/patch-util_Makefile.in]
--- util/Makefile.in.orig	2010-10-03 11:23:55.000000000 +0200
+++ util/Makefile.in	2010-10-03 11:24:58.000000000 +0200
@@ -401,10 +401,10 @@
 	done
 rarian-example$(EXEEXT): $(rarian_example_OBJECTS) $(rarian_example_DEPENDENCIES) 
 	@rm -f rarian-example$(EXEEXT)
-	$(LINK) $(rarian_example_OBJECTS) $(rarian_example_LDADD) $(LIBS)
+	$(CXXLINK) $(rarian_example_OBJECTS) $(rarian_example_LDADD) $(LIBS)
 rarian-sk-gen-uuid$(EXEEXT): $(rarian_sk_gen_uuid_OBJECTS) $(rarian_sk_gen_uuid_DEPENDENCIES) 
 	@rm -f rarian-sk-gen-uuid$(EXEEXT)
-	$(LINK) $(rarian_sk_gen_uuid_OBJECTS) $(rarian_sk_gen_uuid_LDADD) $(LIBS)
+	$(CXXLINK) $(rarian_sk_gen_uuid_OBJECTS) $(rarian_sk_gen_uuid_LDADD) $(LIBS)
 rarian-sk-get-cl$(EXEEXT): $(rarian_sk_get_cl_OBJECTS) $(rarian_sk_get_cl_DEPENDENCIES) 
 	@rm -f rarian-sk-get-cl$(EXEEXT)
 	$(rarian_sk_get_cl_LINK) $(rarian_sk_get_cl_OBJECTS) $(rarian_sk_get_cl_LDADD) $(LIBS) 


[FILE:319:patches/patch-util_rarian-sk-config.in]
--- util/rarian-sk-config.in.orig	2007-10-10 23:00:03.000000000 -0500
+++ util/rarian-sk-config.in	2007-10-10 23:00:30.000000000 -0500
@@ -47,7 +47,7 @@
 		print_help
 		;;
 	--version )
-		echo $package_version \(Rarian replacement for scrollkeeper-config\)
+		echo $package_version
 		;;
 	--prefix )
 		echo $prefix

