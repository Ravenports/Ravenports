# Buildsheet autogenerated by ravenadm tool -- Do not edit.

NAMEBASE=		libmpeg2
VERSION=		0.5.1
KEYWORDS=		multimedia
VARIANTS=		std loaded
SDESC[std]=		MPEG1+2 video stream decoding library
SDESC[loaded]=		MPEG1+2 video stream decoding library (X11 + SDL)
HOMEPAGE=		https://libmpeg2.sourceforge.io/
CONTACT=		Michael_Reim[kraileth@elderlinux.org]

DOWNLOAD_GROUPS=	main
SITES[main]=		https://libmpeg2.sourceforge.io/files/
DISTFILE[1]=		libmpeg2-0.5.1.tar.gz:main
DF_INDEX=		1
SPKGS[std]=		set
			primary
			dev
			tools
			man
SPKGS[loaded]=		set
			primary
			dev
			tools
			man

OPTIONS_AVAILABLE=	LOADED
OPTIONS_STANDARD=	none
VOPTS[loaded]=		LOADED=ON

USES=			fbsd10fix libtool mbsdfix

LICENSE=		GPLv2+:primary
LICENSE_TERMS=		primary:{{WRKDIR}}/TERMS
LICENSE_FILE=		GPLv2+:{{WRKSRC}}/COPYING
LICENSE_AWK=		TERMS:"^$$"
LICENSE_SOURCE=		TERMS:{{WRKSRC}}/src/mpeg2dec.c
LICENSE_SCHEME=		solo

FPC_EQUIVALENT=		multimedia/libmpeg2

MUST_CONFIGURE=		gnu
CONFIGURE_ARGS=		--enable-shared

PLIST_SUB=		SO_LIBMPEG2=0.1.0
			SO_LIBMPEG2_MAJ=0
			SO_LIBMPEG2CONV=0.0.0
			SO_LIBMPEG2CONV_MAJ=0

[LOADED].DESCRIPTION=			Turn on X11 and SDL support
[LOADED].BUILDRUN_DEPENDS_ON=		sdl1:primary:std
[LOADED].BUILD_DEPENDS_ON=		sdl1:dev:std
[LOADED].CONFIGURE_ARGS_OFF=		--disable-sdl
					--without-x
[LOADED].CONFIGURE_ARGS_ON=		--enable-sdl
					--with-x
[LOADED].XORG_COMPONENTS_ON=		x11
					ice
					xext
					sm
					xv

post-install:
	${STRIP_CMD} ${STAGEDIR}${PREFIX}/lib/libmpeg2.so
	${STRIP_CMD} ${STAGEDIR}${PREFIX}/lib/libmpeg2convert.so

[FILE:1812:descriptions/desc.primary]
libmpeg2 is a free library for decoding mpeg-2 and mpeg-1 video streams. 
The main goals in libmpeg2 development are:

* Conformance - libmpeg2 is able to decode all mpeg streams that conform 
to certain restrictions: "constrained parameters" for mpeg-1, and "main 
profile" for mpeg-2. In practice, this is what most people are using. For 
streams that follow these restrictions, we believe libmpeg2 is 100% 
conformant to the mpeg standards - and we have a pretty extensive test 
suite to check this.
* Speed - there has been huge efforts there, and we believe libmpeg2 is 
the fastest library around for what it does. Please tell us if you find a 
faster one! With typical video streams as found on DVD's, and doing only 
decoding with no display, you should be able to get about 110 fps on a 
PIII/666, or 150 fps on an Athlon/950. This is less than 20 cycles per 
output pixel. In a real player program, the display routines will probably 
take as much time as the actual decoding!
* Portability - most of the code is written in C, and when we use 
platform-specific optimizations (typically assembly routines, currently 
used for the motion compensation and the inverse cosine transform stages) 
we always have a generic C routine to fall back on. This should be 
portable to all architectures - at least we have heard reports from people 
running this code on x86, ppc, sparc, arm and sh4. Assembly-optimized 
implementations are available on x86 (MMX) and ppc (AltiVec) 
architectures. Ultrasparc (VIS) is probably the next on the list - we'll 
see.
* Reuseability - we do not want libmpeg2 to include any project-specific 
code, but it should still include enough features to be used by very 
diverse projects. We are only starting to get there - the best way to help 
here is to give us some feedback!


[FILE:60:descriptions/desc.tools]
This subpackage contains the tools that come with libmpeg2.


[FILE:100:distinfo]
dee22e893cb5fc2b2b6ebd60b88478ab8556cb3b93f9a0d7ce8f3b61851871d4       524776 libmpeg2-0.5.1.tar.gz


[FILE:151:manifests/plist.primary]
lib/
 libmpeg2.so.%%SO_LIBMPEG2%%
 libmpeg2.so.%%SO_LIBMPEG2_MAJ%%
 libmpeg2convert.so.%%SO_LIBMPEG2CONV%%
 libmpeg2convert.so.%%SO_LIBMPEG2CONV_MAJ%%


[FILE:160:manifests/plist.dev]
include/mpeg2dec/
 mpeg2.h
 mpeg2convert.h
lib/
 libmpeg2.a
 libmpeg2.so
 libmpeg2convert.a
 libmpeg2convert.so
lib/pkgconfig/
 libmpeg2.pc
 libmpeg2convert.pc


[FILE:45:manifests/plist.tools]
bin/
 corrupt_mpeg2
 extract_mpeg2
 mpeg2dec


[FILE:45:manifests/plist.man]
share/man/man1/
 extract_mpeg2.1
 mpeg2dec.1

