# Buildsheet autogenerated by ravenadm tool -- Do not edit.

NAMEBASE=		libvncserver
VERSION=		0.9.13
REVISION=		1
KEYWORDS=		net
VARIANTS=		standard
SDESC[standard]=	VNC server and client C libraries
HOMEPAGE=		https://libvnc.github.io/
CONTACT=		nobody

DOWNLOAD_GROUPS=	main commits
SITES[main]=		GITHUB/LibVNC:libvncserver:LibVNCServer-0.9.13
SITES[commits]=		https://github.com/LibVNC/libvncserver/commit/
DISTFILE[1]=		generated:main
DISTFILE[2]=		132c1389390c.patch:commits
DISTFILE[3]=		0becaf749e83.patch:commits
DIST_SUBDIR=		vncserver
DF_INDEX=		1
SPKGS[standard]=	single

OPTIONS_AVAILABLE=	none
OPTIONS_STANDARD=	none

BUILDRUN_DEPENDS=	libgcrypt:single:standard
			libgpg-error:primary:standard

USES=			cpe cmake png jpeg lzo libtool pkgconfig zlib ssl

LICENSE=		GPLv2+:single
LICENSE_TERMS=		single:{{WRKDIR}}/TERMS
LICENSE_FILE=		GPLv2+:{{WRKSRC}}/COPYING
LICENSE_AWK=		TERMS:"defined __cplusplus"
LICENSE_SOURCE=		TERMS:{{WRKSRC}}/rfb/rfb.h
LICENSE_SCHEME=		solo

CPE_VENDOR=		libvncserver_project
FPC_EQUIVALENT=		net/libvncserver

PATCHFILES=		2 3
PATCHFILES_STRIP=	-p1

SOVERSION=		0.9.13
PLIST_SUB=		MAJORVER=1

CMAKE_ARGS=		-DWITH_24BPP:BOOL=ON
			-DWITH_JPEG:BOOL=ON
			-DWITH_LZO:BOOL=ON
			-DWITH_PNG:BOOL=ON
			-DWITH_THREADS:BOOL=ON
			-DWITH_TIGHTVNC_FILETRANSFER:BOOL=ON
			-DWITH_WEBSOCKETS:BOOL=ON
			-DWITH_ZLIB:BOOL=ON
			-DWITH_GCRYPT:BOOL=ON
			-DWITH_IPv6:BOOL=ON
			-DWITH_OPENSSL:BOOL=ON
			-DWITH_FFMPEG:BOOL=OFF
			-DWITH_SDL:BOOL=OFF
			-DWITH_SYSTEMD:BOOL=OFF
			-DWITH_SASL:BOOL=OFF
			-DWITH_GNUTLS:BOOL=OFF

post-install:
	${STRIP_CMD} ${STAGEDIR}${PREFIX}/lib/lib*.so

[FILE:490:descriptions/desc.single]
LibVNCServer/LibVNCClient are cross-platform C libraries that allow you to
easily implement Virtual Network Computing (VNC) server or client
functionality in programs.

In computing, Virtual Network Computing is a graphical desktop-sharing
system that uses the Remote Frame Buffer protocol (RFB) to remotely
control another computer. It transmits the keyboard and mouse events from
one computer to another, relaying the graphical-screen updates back in the
other direction, over a network.


[FILE:349:distinfo]
0ae5bb9175dc0a602fe85c1cf591ac47ee5247b87f2bf164c16b05f87cbfa81a       567491 vncserver/LibVNC-libvncserver-LibVNCServer-0.9.13.tar.gz
8f448ab0cb6c3100e2bee0318c7de4233b90432f2fa9d2f5869fd303fa9b7d17         1446 vncserver/132c1389390c.patch
aae6bb9093f4931fd5ff0cd2cd704069c534b64179d160ef8e390a10b3d7dfeb         3262 vncserver/0becaf749e83.patch


[FILE:304:manifests/plist.single]
include/rfb/
 keysym.h
 rfb.h
 rfbclient.h
 rfbconfig.h
 rfbproto.h
 rfbregion.h
 threading.h
lib/
 libvncclient.so
 libvncclient.so.%%MAJORVER%%
 libvncclient.so.%%SOVERSION%%
 libvncserver.so
 libvncserver.so.%%MAJORVER%%
 libvncserver.so.%%SOVERSION%%
lib/pkgconfig/
 libvncclient.pc
 libvncserver.pc


[FILE:278:patches/patch-libvncserver_main.c]
--- libvncserver/main.c.orig	2020-06-13 18:49:53 UTC
+++ libvncserver/main.c
@@ -20,6 +20,10 @@
 #include <stdarg.h>
 #include <errno.h>
 
+#if defined(__DragonFly__)
+#include <sys/socket.h>	/* For sockaddr_storage */
+#endif
+
 #ifndef false
 #define false 0
 #define true -1

