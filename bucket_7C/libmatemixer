# Buildsheet autogenerated by ravenadm tool -- Do not edit.

NAMEBASE=		libmatemixer
VERSION=		1.28.0
KEYWORDS=		audio
VARIANTS=		std
SDESC[std]=		Mixer library for MATE
HOMEPAGE=		https://mate-desktop.org/
CONTACT=		Michael_Reim[kraileth@elderlinux.org]

DOWNLOAD_GROUPS=	main
SITES[main]=		https://pub.mate-desktop.org/releases/1.28/
DISTFILE[1]=		libmatemixer-1.28.0.tar.xz:main
DIST_SUBDIR=		mate
DF_INDEX=		1
SPKGS[std]=		set
			primary
			dev
			nls
			docs

OPTIONS_AVAILABLE=	OSS
OPTIONS_STANDARD=	OSS
OPT_ON[freebsd]=	OSS
OPT_ON[netbsd]=		OSS
OPT_ON[dragonfly]=	OSS
OPT_ON[midnightbsd]=	OSS

BUILD_DEPENDS=		alsa-lib:dev:std
BUILDRUN_DEPENDS=	alsa-lib:primary:std

USES=			iconv gettext gmake libtool pkgconfig
GNOME_COMPONENTS=	glib

LICENSE=		LGPL20+:primary
LICENSE_TERMS=		primary:{{WRKDIR}}/TERMS
LICENSE_FILE=		LGPL20+:stock
LICENSE_AWK=		TERMS:"^$$"
LICENSE_SOURCE=		TERMS:{{WRKSRC}}/libmatemixer/matemixer.h
LICENSE_SCHEME=		solo

FPC_EQUIVALENT=		audio/libmatemixer

MUST_CONFIGURE=		gnu

INSTALL_REQ_TOOLCHAIN=	yes
SOVERSION=		0.0.0

[OSS].DESCRIPTION=			Enable OSS backend
[OSS].CONFIGURE_ARGS_ON=		--enable-oss
					--disable-null

post-install-OSS-OFF:
	${STRIP_CMD} ${STAGEDIR}${PREFIX}/lib/libmatemixer/libmatemixer-null.so

post-install:
	${STRIP_CMD} ${STAGEDIR}${PREFIX}/lib/libmatemixer.so
	${STRIP_CMD} ${STAGEDIR}${PREFIX}/lib/libmatemixer/libmatemixer-alsa.so

post-install-OSS-ON:
	${STRIP_CMD} ${STAGEDIR}${PREFIX}/lib/libmatemixer/libmatemixer-oss.so

[FILE:192:descriptions/desc.primary]
libmatemixer is a mixer library for the MATE desktop environment. It 
provides an abstract API allowing access to mixer functionality available 
in the PulseAudio, ALSA and OSS sound systems.


[FILE:110:distinfo]
5d73b922397f60688e3c9530eb532bce46c30e262db1b5352fa32c40d870a0c7       497120 mate/libmatemixer-1.28.0.tar.xz


[FILE:372:manifests/plist.primary]
%%ONLY-DRAGONFLY%%lib/libmatemixer/libmatemixer-oss.so
%%ONLY-FREEBSD%%lib/libmatemixer/libmatemixer-oss.so
%%ONLY-LINUX%%lib/libmatemixer/libmatemixer-null.so
%%ONLY-MIDNIGHTBSD%%lib/libmatemixer/libmatemixer-oss.so
%%ONLY-NETBSD%%lib/libmatemixer/libmatemixer-oss.so
lib/
 libmatemixer.so.%%SOMAJOR%%
 libmatemixer.so.%%SOVERSION%%
lib/libmatemixer/libmatemixer-alsa.so


[FILE:765:manifests/plist.dev]
%%ONLY-DRAGONFLY%%lib/libmatemixer/libmatemixer-oss.a
%%ONLY-FREEBSD%%lib/libmatemixer/libmatemixer-oss.a
%%ONLY-LINUX%%lib/libmatemixer/libmatemixer-null.a
%%ONLY-MIDNIGHTBSD%%lib/libmatemixer/libmatemixer-oss.a
%%ONLY-NETBSD%%lib/libmatemixer/libmatemixer-oss.a
include/mate-mixer/libmatemixer/
 matemixer-app-info.h
 matemixer-context.h
 matemixer-device-switch.h
 matemixer-device.h
 matemixer-enum-types.h
 matemixer-enums.h
 matemixer-stored-control.h
 matemixer-stream-control.h
 matemixer-stream-switch.h
 matemixer-stream-toggle.h
 matemixer-stream.h
 matemixer-switch-option.h
 matemixer-switch.h
 matemixer-types.h
 matemixer-version.h
 matemixer.h
lib/
 libmatemixer.a
 libmatemixer.so
lib/libmatemixer/libmatemixer-alsa.a
lib/pkgconfig/libmatemixer.pc


[FILE:4903:manifests/plist.nls]
share/locale/af/LC_MESSAGES/libmatemixer.mo
share/locale/am/LC_MESSAGES/libmatemixer.mo
share/locale/ar/LC_MESSAGES/libmatemixer.mo
share/locale/as/LC_MESSAGES/libmatemixer.mo
share/locale/ast/LC_MESSAGES/libmatemixer.mo
share/locale/az/LC_MESSAGES/libmatemixer.mo
share/locale/be/LC_MESSAGES/libmatemixer.mo
share/locale/bg/LC_MESSAGES/libmatemixer.mo
share/locale/bn/LC_MESSAGES/libmatemixer.mo
share/locale/bn_IN/LC_MESSAGES/libmatemixer.mo
share/locale/br/LC_MESSAGES/libmatemixer.mo
share/locale/bs/LC_MESSAGES/libmatemixer.mo
share/locale/ca/LC_MESSAGES/libmatemixer.mo
share/locale/ca@valencia/LC_MESSAGES/libmatemixer.mo
share/locale/cmn/LC_MESSAGES/libmatemixer.mo
share/locale/crh/LC_MESSAGES/libmatemixer.mo
share/locale/cs/LC_MESSAGES/libmatemixer.mo
share/locale/cy/LC_MESSAGES/libmatemixer.mo
share/locale/da/LC_MESSAGES/libmatemixer.mo
share/locale/de/LC_MESSAGES/libmatemixer.mo
share/locale/dz/LC_MESSAGES/libmatemixer.mo
share/locale/el/LC_MESSAGES/libmatemixer.mo
share/locale/en_AU/LC_MESSAGES/libmatemixer.mo
share/locale/en_CA/LC_MESSAGES/libmatemixer.mo
share/locale/en_GB/LC_MESSAGES/libmatemixer.mo
share/locale/eo/LC_MESSAGES/libmatemixer.mo
share/locale/es/LC_MESSAGES/libmatemixer.mo
share/locale/es_CL/LC_MESSAGES/libmatemixer.mo
share/locale/es_CO/LC_MESSAGES/libmatemixer.mo
share/locale/es_MX/LC_MESSAGES/libmatemixer.mo
share/locale/et/LC_MESSAGES/libmatemixer.mo
share/locale/eu/LC_MESSAGES/libmatemixer.mo
share/locale/fa/LC_MESSAGES/libmatemixer.mo
share/locale/fi/LC_MESSAGES/libmatemixer.mo
share/locale/fr/LC_MESSAGES/libmatemixer.mo
share/locale/fr_CA/LC_MESSAGES/libmatemixer.mo
share/locale/frp/LC_MESSAGES/libmatemixer.mo
share/locale/fur/LC_MESSAGES/libmatemixer.mo
share/locale/fy/LC_MESSAGES/libmatemixer.mo
share/locale/ga/LC_MESSAGES/libmatemixer.mo
share/locale/gl/LC_MESSAGES/libmatemixer.mo
share/locale/gu/LC_MESSAGES/libmatemixer.mo
share/locale/he/LC_MESSAGES/libmatemixer.mo
share/locale/hi/LC_MESSAGES/libmatemixer.mo
share/locale/hr/LC_MESSAGES/libmatemixer.mo
share/locale/hu/LC_MESSAGES/libmatemixer.mo
share/locale/hy/LC_MESSAGES/libmatemixer.mo
share/locale/ia/LC_MESSAGES/libmatemixer.mo
share/locale/id/LC_MESSAGES/libmatemixer.mo
share/locale/ie/LC_MESSAGES/libmatemixer.mo
share/locale/is/LC_MESSAGES/libmatemixer.mo
share/locale/it/LC_MESSAGES/libmatemixer.mo
share/locale/ja/LC_MESSAGES/libmatemixer.mo
share/locale/jv/LC_MESSAGES/libmatemixer.mo
share/locale/ka/LC_MESSAGES/libmatemixer.mo
share/locale/kk/LC_MESSAGES/libmatemixer.mo
share/locale/kn/LC_MESSAGES/libmatemixer.mo
share/locale/ko/LC_MESSAGES/libmatemixer.mo
share/locale/ku/LC_MESSAGES/libmatemixer.mo
share/locale/ku_IQ/LC_MESSAGES/libmatemixer.mo
share/locale/ky/LC_MESSAGES/libmatemixer.mo
share/locale/lt/LC_MESSAGES/libmatemixer.mo
share/locale/lv/LC_MESSAGES/libmatemixer.mo
share/locale/mai/LC_MESSAGES/libmatemixer.mo
share/locale/mg/LC_MESSAGES/libmatemixer.mo
share/locale/mk/LC_MESSAGES/libmatemixer.mo
share/locale/ml/LC_MESSAGES/libmatemixer.mo
share/locale/mn/LC_MESSAGES/libmatemixer.mo
share/locale/mr/LC_MESSAGES/libmatemixer.mo
share/locale/ms/LC_MESSAGES/libmatemixer.mo
share/locale/nb/LC_MESSAGES/libmatemixer.mo
share/locale/nds/LC_MESSAGES/libmatemixer.mo
share/locale/ne/LC_MESSAGES/libmatemixer.mo
share/locale/nl/LC_MESSAGES/libmatemixer.mo
share/locale/nn/LC_MESSAGES/libmatemixer.mo
share/locale/nso/LC_MESSAGES/libmatemixer.mo
share/locale/oc/LC_MESSAGES/libmatemixer.mo
share/locale/or/LC_MESSAGES/libmatemixer.mo
share/locale/pa/LC_MESSAGES/libmatemixer.mo
share/locale/pl/LC_MESSAGES/libmatemixer.mo
share/locale/pms/LC_MESSAGES/libmatemixer.mo
share/locale/ps/LC_MESSAGES/libmatemixer.mo
share/locale/pt/LC_MESSAGES/libmatemixer.mo
share/locale/pt_BR/LC_MESSAGES/libmatemixer.mo
share/locale/ro/LC_MESSAGES/libmatemixer.mo
share/locale/ru/LC_MESSAGES/libmatemixer.mo
share/locale/rw/LC_MESSAGES/libmatemixer.mo
share/locale/si/LC_MESSAGES/libmatemixer.mo
share/locale/sk/LC_MESSAGES/libmatemixer.mo
share/locale/sl/LC_MESSAGES/libmatemixer.mo
share/locale/sq/LC_MESSAGES/libmatemixer.mo
share/locale/sr/LC_MESSAGES/libmatemixer.mo
share/locale/sr@latin/LC_MESSAGES/libmatemixer.mo
share/locale/sv/LC_MESSAGES/libmatemixer.mo
share/locale/ta/LC_MESSAGES/libmatemixer.mo
share/locale/te/LC_MESSAGES/libmatemixer.mo
share/locale/th/LC_MESSAGES/libmatemixer.mo
share/locale/tk/LC_MESSAGES/libmatemixer.mo
share/locale/tr/LC_MESSAGES/libmatemixer.mo
share/locale/ug/LC_MESSAGES/libmatemixer.mo
share/locale/uk/LC_MESSAGES/libmatemixer.mo
share/locale/ur/LC_MESSAGES/libmatemixer.mo
share/locale/uz/LC_MESSAGES/libmatemixer.mo
share/locale/vi/LC_MESSAGES/libmatemixer.mo
share/locale/wa/LC_MESSAGES/libmatemixer.mo
share/locale/xh/LC_MESSAGES/libmatemixer.mo
share/locale/zh_CN/LC_MESSAGES/libmatemixer.mo
share/locale/zh_HK/LC_MESSAGES/libmatemixer.mo
share/locale/zh_TW/LC_MESSAGES/libmatemixer.mo
share/locale/zu/LC_MESSAGES/libmatemixer.mo


[FILE:526:manifests/plist.docs]
share/gtk-doc/html/libmatemixer/
 MateMixerAppInfo.html
 MateMixerContext.html
 MateMixerDevice.html
 MateMixerDeviceSwitch.html
 MateMixerStoredControl.html
 MateMixerStream.html
 MateMixerStreamControl.html
 MateMixerStreamSwitch.html
 MateMixerStreamToggle.html
 MateMixerSwitch.html
 MateMixerSwitchOption.html
 api-index-full.html
 ch01.html
 home.png
 index.html
 left-insensitive.png
 left.png
 libmatemixer-MateMixer.html
 libmatemixer.devhelp2
 right-insensitive.png
 right.png
 style.css
 up-insensitive.png
 up.png


[FILE:967:patches/patch-backends_oss_oss-backend.c]
--- backends/oss/oss-backend.c.orig	2017-03-12 15:28:02 UTC
+++ backends/oss/oss-backend.c
@@ -40,6 +40,8 @@
      * from the sndstat file, but avoid even trying that on systems where this
      * is not needed and the file is not present */
 #define OSS_PATH_SNDSTAT  "/dev/sndstat"
+    /* remove SOUND_MIXER_INFO on FreeBSD, use OSS_PATH_SNDSTAT */
+#undef SOUND_MIXER_INFO
 #endif
 
 #define OSS_MAX_DEVICES   32
@@ -377,6 +379,10 @@ read_device_label (OssBackend *oss, cons
 {
     guint index;
 
+    /* default_device setting only in read_device_label_sndstat()
+     * on FreeBSD use OSS_PATH_SNDSTAT
+     */
+
 #ifdef SOUND_MIXER_INFO
     do {
         struct mixer_info info;
@@ -430,6 +436,7 @@ read_device_label_sndstat (OssBackend  *
 
     while (fgets (line, sizeof (line), fp) != NULL) {
         gchar *p;
+        g_strchomp(line); // required for g_str_has_suffix()
 
         if (g_str_has_prefix (line, prefix) == FALSE)
             continue;

