# Buildsheet autogenerated by ravenadm tool -- Do not edit.

NAMEBASE=		GraphicsMagick
VERSION=		1.3.37
KEYWORDS=		graphics
VARIANTS=		standard
SDESC[standard]=	Image processing system
HOMEPAGE=		http://www.graphicsmagick.org/
CONTACT=		nobody

DOWNLOAD_GROUPS=	main
SITES[main]=		SF/graphicsmagick/graphicsmagick/1.3.37
DISTFILE[1]=		GraphicsMagick-1.3.37.tar.xz:main
DF_INDEX=		1
SPKGS[standard]=	complete
			primary
			docs

OPTIONS_AVAILABLE=	none
OPTIONS_STANDARD=	none

BUILDRUN_DEPENDS=	freetype:primary:standard
			jasper:primary:standard
			jbigkit:single:standard
			lcms2:primary:standard
			WebP:single:standard
			libwmf:single:standard
			xz:single:standard
			ghostscript:primary:standard

USES=			cpe libtool jpeg png tiff zlib zstd fortran:primary
GNOME_COMPONENTS=	libxml2
XORG_COMPONENTS=	ice sm x11 xext

LICENSE=		MIT:primary
LICENSE_FILE=		MIT:{{WRKSRC}}/Copyright.txt
LICENSE_SCHEME=		solo

CPE_PRODUCT=		graphicsmagick
CPE_VENDOR=		graphicsmagick
FPC_EQUIVALENT=		graphics/GraphicsMagick

MUST_CONFIGURE=		gnu
CONFIGURE_ARGS=		--enable-shared
			--enable-static
			--with-bzlib
			--with-ttf
			--with-jp2
			--with-jbig
			--with-jpeg
			--with-png
			--with-tiff
			--with-webp
			--with-lcms2
			--with-lzma
			--with-wmf
			--with-xml
			--with-x
			--with-zlib
			--with-zstd
			--with-threads
			--with-quantum-depth=16
			--with-windows-font-dir="{{LOCALBASE}}/share/fonts/webfonts"
			--with-gs-font-dir="{{LOCALBASE}}/share/ghostscript/fonts"
			--enable-openmp
			--without-fpx
			--without-perl
			--without-trio
			--without-dps
			--without-modules
			--disable-openmp-slow
CONFIGURE_ENV=		PTHREAD_LIBS=-lpthread

INSTALL_TARGET=		install-strip
INSTALL_REQ_TOOLCHAIN=	yes
SOVERSION=		3.23.0
PLIST_SUB=		WAND_MAJOR=2
			WAND_VERSION=2.9.6
			XX_MAJOR=12
			XX_VERSION=12.5.1

post-install:
	${MKDIR} ${STAGEDIR}${PREFIX}/lib/GraphicsMagick/modules-Q16/coders \
		${STAGEDIR}${PREFIX}/lib/GraphicsMagick/modules-Q16/filters
	${RM} ${STAGEDIR}${STD_DOCDIR}/Copyright.txt

[FILE:1059:descriptions/desc.primary]
GraphicsMagick is the swiss army knife of image processing. Comprised of
267K physical lines (according to David A. Wheeler's SLOCCount) of source
code in the base package (or 1,225K including 3rd party libraries) it
provides a robust and efficient collection of tools and libraries which
support reading, writing, and manipulating an image in over 88 major
formats including important formats like DPX, GIF, JPEG, JPEG-2000, PNG,
PDF, PNM, and TIFF.

GraphicsMagick supports huge images and has been tested with gigapixel-size
images. GraphicsMagick can create new images on the fly, making it suitable
for building dynamic Web applications. GraphicsMagick may be used to
resize, rotate, sharpen, color reduce, or add special effects to an image
and save the result in the same or different image format. Image processing
operations are available from the command line, as well as through C, C++,
Lua, Perl, PHP, Python, Tcl, Ruby, Windows .NET, or Windows COM programming
interfaces. With some modification, language extensions for ImageMagick may
be used.


[FILE:107:distinfo]
90dc22f1a7bd240e4c9065a940962bf13da43c99bcc36cb111cc3c1a0d7477d4      5623688 GraphicsMagick-1.3.37.tar.xz


[FILE:2021:manifests/plist.primary]
bin/
 GraphicsMagick++-config
 GraphicsMagick-config
 GraphicsMagickWand-config
 gm
include/GraphicsMagick/Magick++.h
include/GraphicsMagick/Magick++/
 Blob.h
 CoderInfo.h
 Color.h
 Drawable.h
 Exception.h
 Geometry.h
 Image.h
 Include.h
 Montage.h
 Pixels.h
 STL.h
 TypeMetric.h
include/GraphicsMagick/magick/
 analyze.h
 api.h
 attribute.h
 average.h
 blob.h
 cdl.h
 channel.h
 color.h
 color_lookup.h
 colormap.h
 colorspace.h
 command.h
 common.h
 compare.h
 composite.h
 compress.h
 confirm_access.h
 constitute.h
 decorate.h
 delegate.h
 deprecate.h
 describe.h
 draw.h
 effect.h
 enhance.h
 enum_strings.h
 error.h
 forward.h
 fx.h
 gem.h
 gradient.h
 hclut.h
 image.h
 list.h
 log.h
 magic.h
 magick.h
 magick_config.h
 magick_types.h
 memory.h
 module.h
 monitor.h
 montage.h
 operator.h
 paint.h
 pixel_cache.h
 pixel_iterator.h
 plasma.h
 profile.h
 quantize.h
 random.h
 registry.h
 render.h
 resize.h
 resource.h
 shear.h
 signature.h
 statistics.h
 symbols.h
 texture.h
 timer.h
 transform.h
 type.h
 utility.h
 version.h
include/GraphicsMagick/wand/
 drawing_wand.h
 magick_wand.h
 pixel_wand.h
 wand_api.h
 wand_symbols.h
lib/
 libGraphicsMagick++.a
 libGraphicsMagick++.so
 libGraphicsMagick++.so.%%XX_MAJOR%%
 libGraphicsMagick++.so.%%XX_VERSION%%
 libGraphicsMagick.a
 libGraphicsMagick.so
 libGraphicsMagick.so.%%SOMAJOR%%
 libGraphicsMagick.so.%%SOVERSION%%
 libGraphicsMagickWand.a
 libGraphicsMagickWand.so
 libGraphicsMagickWand.so.%%WAND_MAJOR%%
 libGraphicsMagickWand.so.%%WAND_VERSION%%
lib/GraphicsMagick/config/
 delegates.mgk
 type-ghostscript.mgk
 type-solaris.mgk
 type-windows.mgk
 type.mgk
lib/pkgconfig/
 GraphicsMagick++.pc
 GraphicsMagick.pc
 GraphicsMagickWand.pc
share/GraphicsMagick/config/
 colors.mgk
 log.mgk
 modules.mgk
share/man/man1/
 GraphicsMagick++-config.1.gz
 GraphicsMagick-config.1.gz
 GraphicsMagickWand-config.1.gz
 gm.1.gz
share/man/man4/miff.4.gz
share/man/man5/quantize.5.gz
@dir lib/GraphicsMagick/modules-Q16/coders
@dir lib/GraphicsMagick/modules-Q16/filters


[FILE:3158:manifests/plist.docs]
share/doc/GraphicsMagick/
 ChangeLog
 ChangeLog.2001
 ChangeLog.2002
 ChangeLog.2003
 ChangeLog.2004
 ChangeLog.2005
 ChangeLog.2006
 ChangeLog.2007
 ChangeLog.2008
 ChangeLog.2009
 ChangeLog.2010
 ChangeLog.2011
 ChangeLog.2012
 ChangeLog.2013
 ChangeLog.2014
 ChangeLog.2015
 ChangeLog.2016
 ChangeLog.2017
 ChangeLog.2018
 ChangeLog.2019
 ChangeLog.2020
 NEWS.txt
share/doc/GraphicsMagick/www/
 ChangeLog-2001.html
 ChangeLog-2002.html
 ChangeLog-2003.html
 ChangeLog-2004.html
 ChangeLog-2005.html
 ChangeLog-2006.html
 ChangeLog-2007.html
 ChangeLog-2008.html
 ChangeLog-2009.html
 ChangeLog-2010.html
 ChangeLog-2011.html
 ChangeLog-2012.html
 ChangeLog-2013.html
 ChangeLog-2014.html
 ChangeLog-2015.html
 ChangeLog-2016.html
 ChangeLog-2017.html
 ChangeLog-2018.html
 ChangeLog-2019.html
 ChangeLog-2020.html
 Changelog.html
 Changes.html
 Copyright.html
 FAQ.html
 GraphicsMagick.html
 Hg.html
 INSTALL-unix.html
 INSTALL-windows.html
 ImageMagickObject.html
 NEWS.html
 OpenMP.html
 README.html
 animate.html
 authors.html
 batch.html
 benchmark.html
 benchmarks.html
 bugs.html
 color.html
 compare.html
 composite.html
 configure-target-setup.png
 conjure.html
 contribute.html
 convert.html
 display.html
 docutils-api.css
 docutils-articles.css
 download.html
 favicon.ico
 formats.html
 gm.html
 identify.html
 import.html
 index.html
 links.html
 magick.css
 miff.html
 mission.html
 mogrify.html
 montage.html
 motion-picture.html
 perl.html
 process.html
 programming.html
 project.html
 quantize.html
 reference.html
 security.html
 smile.c
 thanks.html
 time.html
 tools.html
 utilities.html
 version.html
share/doc/GraphicsMagick/www/Magick++/
 Blob.html
 Cache.png
 ChangeLog.html
 CoderInfo.html
 Color.html
 Drawable.html
 Drawable_example_1.png
 Enumerations.html
 Exception.html
 FormatCharacters.html
 Geometry.html
 Image.html
 Image.png
 ImageDesign.html
 Montage.html
 PixelPacket.html
 Pixels.html
 STL.html
 TypeMetric.html
 gm-188x120t.png
 index.html
 montage-sample-framed.jpg
 right_triangle.png
 thumbnail-anatomy-framed.jpg
 thumbnail-anatomy-plain.jpg
 thumbnail-sample-framed.jpg
 thumbnail-sample-plain.jpg
share/doc/GraphicsMagick/www/api/
 animate.html
 annotate.html
 api.html
 attribute.html
 average.html
 blob.html
 cdl.html
 channel.html
 color.html
 colormap.html
 compare.html
 composite.html
 confirm_access.html
 constitute.html
 decorate.html
 deprecate.html
 describe.html
 display.html
 draw.html
 effect.html
 enhance.html
 error.html
 export.html
 fx.html
 hclut.html
 image.html
 import.html
 list.html
 log.html
 magick.html
 memory.html
 monitor.html
 montage.html
 operator.html
 paint.html
 pixel_cache.html
 pixel_iterator.html
 plasma.html
 profile.html
 quantize.html
 registry.html
 render.html
 resize.html
 resource.html
 segment.html
 shear.html
 signature.html
 statistics.html
 texture.html
 transform.html
 types.html
 widget.html
share/doc/GraphicsMagick/www/images/
 ball.png
 banner_bg.png
 gm-107x76.gif
 gm-107x76.png
 gm-125x80t.png
 right_triangle.png
 right_triangle_option.png
share/doc/GraphicsMagick/www/wand/
 drawing_wand.html
 magick_wand.html
 pixel_wand.html
 wand.html


[FILE:385:patches/patch-Makefile.in]
--- Makefile.in.orig	2021-12-12 21:09:13 UTC
+++ Makefile.in
@@ -2568,7 +2568,7 @@ MagickFilterModulesPath = @MagickFilterM
 MagickLibConfigPath = @MagickLibConfigPath@
 MagickLibPath = @MagickLibPath@
 MagickShareConfigPath = @MagickShareConfigPath@
-MagickSharePath = @MagickSharePath@
+MagickSharePath = ${DATADIR}
 MogrifyDelegate = @MogrifyDelegate@
 NM = @NM@
 NMEDIT = @NMEDIT@


[FILE:2718:patches/patch-configure]
--- configure.orig	2021-12-12 21:09:14 UTC
+++ configure
@@ -13030,7 +13030,6 @@ fi
     # FreeBSD 3 and greater uses gcc -shared to do shared libraries.
     freebsd* | dragonfly*)
       archive_cmds='$CC -shared $pic_flag -o $lib $libobjs $deplibs $compiler_flags'
-      hardcode_libdir_flag_spec='-R$libdir'
       hardcode_direct=yes
       hardcode_shlibpath_var=no
       ;;
@@ -24360,60 +24359,6 @@ else
     X_CFLAGS="$X_CFLAGS -I$x_includes"
   fi
 
-  # It would also be nice to do this for all -L options, not just this one.
-  if test -n "$x_libraries"; then
-    X_LIBS="$X_LIBS -L$x_libraries"
-    # For Solaris; some versions of Sun CC require a space after -R and
-    # others require no space.  Words are not sufficient . . . .
-    { $as_echo "$as_me:${as_lineno-$LINENO}: checking whether -R must be followed by a space" >&5
-$as_echo_n "checking whether -R must be followed by a space... " >&6; }
-    ac_xsave_LIBS=$LIBS; LIBS="$LIBS -R$x_libraries"
-    ac_xsave_c_werror_flag=$ac_c_werror_flag
-    ac_c_werror_flag=yes
-    cat confdefs.h - <<_ACEOF >conftest.$ac_ext
-/* end confdefs.h.  */
-
-int
-main ()
-{
-
-  ;
-  return 0;
-}
-_ACEOF
-if ac_fn_c_try_link "$LINENO"; then :
-  { $as_echo "$as_me:${as_lineno-$LINENO}: result: no" >&5
-$as_echo "no" >&6; }
-       X_LIBS="$X_LIBS -R$x_libraries"
-else
-  LIBS="$ac_xsave_LIBS -R $x_libraries"
-       cat confdefs.h - <<_ACEOF >conftest.$ac_ext
-/* end confdefs.h.  */
-
-int
-main ()
-{
-
-  ;
-  return 0;
-}
-_ACEOF
-if ac_fn_c_try_link "$LINENO"; then :
-  { $as_echo "$as_me:${as_lineno-$LINENO}: result: yes" >&5
-$as_echo "yes" >&6; }
-	  X_LIBS="$X_LIBS -R $x_libraries"
-else
-  { $as_echo "$as_me:${as_lineno-$LINENO}: result: neither works" >&5
-$as_echo "neither works" >&6; }
-fi
-rm -f core conftest.err conftest.$ac_objext \
-    conftest$ac_exeext conftest.$ac_ext
-fi
-rm -f core conftest.err conftest.$ac_objext \
-    conftest$ac_exeext conftest.$ac_ext
-    ac_c_werror_flag=$ac_xsave_c_werror_flag
-    LIBS=$ac_xsave_LIBS
-  fi
 
   # Check for system-dependent libraries X programs must link with.
   # Do this before checking for the system-independent R6 libraries
@@ -28046,7 +27991,7 @@ done
 #
 
 # Subdirectory under lib to place GraphicsMagick lib files
-MagickLibSubdir="${PACKAGE_NAME}-${PACKAGE_VERSION}"
+MagickLibSubdir="${PACKAGE_NAME}"
 
 cat >>confdefs.h <<_ACEOF
 #define MagickLibSubdir "$MagickLibSubdir"
@@ -28150,7 +28095,7 @@ _ACEOF
 
 #
 # Path to GraphicsMagick share files
-MagickShareSubdir="${PACKAGE_NAME}-${PACKAGE_VERSION}"
+MagickShareSubdir="${PACKAGE_NAME}"
 MagickSharePath="${DATA_DIR}/${MagickShareSubdir}"
 MagickSharePathDefine="${MagickSharePath}/"
 case "${build_os}" in

