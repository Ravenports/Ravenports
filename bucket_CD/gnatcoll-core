# Buildsheet autogenerated by ravenadm tool -- Do not edit.

NAMEBASE=		gnatcoll-core
VERSION=		2019
REVISION=		1
KEYWORDS=		devel
VARIANTS=		standard
SDESC[standard]=	Core packages of GNAT Components Collection
HOMEPAGE=		https://github.com/AdaCore/gnatcoll-core
CONTACT=		John_Marino[draco@marino.st]

DOWNLOAD_GROUPS=	main
SITES[main]=		GITHUB/AdaCore:gnatcoll-core:31d6af5
DISTFILE[1]=		generated:main
DF_INDEX=		1
SPKGS[standard]=	complete
			primary
			examples

OPTIONS_AVAILABLE=	none
OPTIONS_STANDARD=	none

BUILDRUN_DEPENDS=	xmlada:primary:standard
			gprbuild:gprlib:standard

USES=			gprbuild gmake

LICENSE=		GPLv3+:primary
LICENSE_TERMS=		primary:{{WRKDIR}}/TERMS
LICENSE_FILE=		GPLv3+:{{WRKSRC}}/COPYING3
LICENSE_AWK=		TERMS:"^$$"
LICENSE_SOURCE=		TERMS:{{WRKSRC}}/src/gnatcoll.ads
LICENSE_SCHEME=		solo

BUILD_TARGET=		build
MAKE_ARGS=		prefix={{STAGEDIR}}{{PREFIX}}
			ENABLE_SHARED=yes
			BUILD=PROD
			PROCESSORS={{MAKE_JOBS_NUMBER}}
			TARGET={{CONFIGURE_TARGET}}
			NORMALIZED_TARGET={{CONFIGURE_TARGET}}
			INTEGRATED=no

INSTALL_REQ_TOOLCHAIN=	yes
SOVERSION=		0.0

post-patch:
	${REINPLACE_CMD} -e 's|@PREFIX@|${PREFIX}|' ${WRKSRC}/gnatcoll.gpr

post-install:
	${RM} -r ${STAGEDIR}${PREFIX}/lib/gnat/manifests
	${RM} -r ${STAGEDIR}${PREFIX}/share/doc/gnatcoll/html/_sources
	${STRIP_CMD} ${STAGEDIR}${PREFIX}/lib/libgnatcoll.so

do-configure:
	(cd ${WRKSRC} && ${SETENV} ${MAKE_ENV} ${MAKE_CMD} ${MAKE_ARGS} setup)

[FILE:736:descriptions/desc.primary]
This is the core module of the GNAT Components Collection.

The reusable library known as the GNAT Component Collection (GNATColl) is
based on one main principle: general-purpose packages that are part of the
GNAT technology should also be available to GNAT user application code.
The compiler front end, the GNAT Programming Studio (GPS) Interactive
Development Environment, and the GNAT Tracker web-based interface all
served as sources for the components.

The GNATColl components complement the predefined Ada and GNAT libraries
and deal with a range of common programming issues including string and
text processing, memory management, and file handling. Several of the
components are especially useful in enterprise applications.


[FILE:115:distinfo]
43100e87920e17cb6b568d7ba3c6c7e6baf99eb5d94daf7ac7b60bc27bbe216d       647793 AdaCore-gnatcoll-core-31d6af5.tar.gz


[FILE:8888:manifests/plist.primary]
include/gnatcoll/
 executable_path.c
 getRSS.c
 gnatcoll-any_types.adb
 gnatcoll-any_types.ads
 gnatcoll-arg_lists.adb
 gnatcoll-arg_lists.ads
 gnatcoll-asserts.adb
 gnatcoll-asserts.ads
 gnatcoll-atomic.adb
 gnatcoll-atomic.ads
 gnatcoll-boyer_moore.adb
 gnatcoll-boyer_moore.ads
 gnatcoll-coders-base64.adb
 gnatcoll-coders-base64.ads
 gnatcoll-coders-streams.adb
 gnatcoll-coders-streams.ads
 gnatcoll-coders.adb
 gnatcoll-coders.ads
 gnatcoll-config.adb
 gnatcoll-config.ads
 gnatcoll-email-mailboxes.adb
 gnatcoll-email-mailboxes.ads
 gnatcoll-email-parser.adb
 gnatcoll-email-parser.ads
 gnatcoll-email-utils.adb
 gnatcoll-email-utils.ads
 gnatcoll-email.adb
 gnatcoll-email.ads
 gnatcoll-format_columns_vertical.ads
 gnatcoll-formatters.adb
 gnatcoll-formatters.ads
 gnatcoll-geometry.adb
 gnatcoll-geometry.ads
 gnatcoll-io-native-codec__unix.adb
 gnatcoll-io-native.adb
 gnatcoll-io-native.ads
 gnatcoll-io-remote-unix.adb
 gnatcoll-io-remote-unix.ads
 gnatcoll-io-remote-windows.adb
 gnatcoll-io-remote-windows.ads
 gnatcoll-io-remote.adb
 gnatcoll-io-remote.ads
 gnatcoll-io.adb
 gnatcoll-io.ads
 gnatcoll-json-utility.adb
 gnatcoll-json-utility.ads
 gnatcoll-json.adb
 gnatcoll-json.ads
 gnatcoll-locks.adb
 gnatcoll-locks.ads
 gnatcoll-memory.adb
 gnatcoll-memory.ads
 gnatcoll-mmap-system__unix.adb
 gnatcoll-mmap-system__unix.ads
 gnatcoll-mmap.adb
 gnatcoll-mmap.ads
 gnatcoll-opt_parse.adb
 gnatcoll-opt_parse.ads
 gnatcoll-os-constants__unix.ads
 gnatcoll-os.ads
 gnatcoll-paragraph_filling-badnesses.adb
 gnatcoll-paragraph_filling-badnesses.ads
 gnatcoll-paragraph_filling-words.adb
 gnatcoll-paragraph_filling-words.ads
 gnatcoll-paragraph_filling.adb
 gnatcoll-paragraph_filling.ads
 gnatcoll-path.adb
 gnatcoll-path.ads
 gnatcoll-plugins.ads
 gnatcoll-plugins__unix.adb
 gnatcoll-pools.adb
 gnatcoll-pools.ads
 gnatcoll-projects-aux.adb
 gnatcoll-projects-aux.ads
 gnatcoll-projects-krunch.adb
 gnatcoll-projects-krunch.ads
 gnatcoll-projects-normalize.adb
 gnatcoll-projects-normalize.ads
 gnatcoll-projects.adb
 gnatcoll-projects.ads
 gnatcoll-promises.adb
 gnatcoll-promises.ads
 gnatcoll-refcount-weakref.adb
 gnatcoll-refcount-weakref.ads
 gnatcoll-refcount.adb
 gnatcoll-refcount.ads
 gnatcoll-remote-db.adb
 gnatcoll-remote-db.ads
 gnatcoll-remote.ads
 gnatcoll-scripts-files.adb
 gnatcoll-scripts-files.ads
 gnatcoll-scripts-impl.adb
 gnatcoll-scripts-impl.ads
 gnatcoll-scripts-projects.adb
 gnatcoll-scripts-projects.ads
 gnatcoll-scripts-shell.adb
 gnatcoll-scripts-shell.ads
 gnatcoll-scripts-utils.adb
 gnatcoll-scripts-utils.ads
 gnatcoll-scripts.adb
 gnatcoll-scripts.ads
 gnatcoll-storage_pools-alignment.adb
 gnatcoll-storage_pools-alignment.ads
 gnatcoll-storage_pools-headers.adb
 gnatcoll-storage_pools-headers.ads
 gnatcoll-storage_pools.ads
 gnatcoll-string_builders.adb
 gnatcoll-string_builders.ads
 gnatcoll-strings.ads
 gnatcoll-strings_impl.adb
 gnatcoll-strings_impl.ads
 gnatcoll-symbols.adb
 gnatcoll-symbols.ads
 gnatcoll-templates.adb
 gnatcoll-templates.ads
 gnatcoll-terminal.adb
 gnatcoll-terminal.ads
 gnatcoll-traces.adb
 gnatcoll-traces.ads
 gnatcoll-tribooleans.adb
 gnatcoll-tribooleans.ads
 gnatcoll-utils.adb
 gnatcoll-utils.ads
 gnatcoll-vfs.adb
 gnatcoll-vfs.ads
 gnatcoll-vfs_types.ads
 gnatcoll-vfs_utils.adb
 gnatcoll-vfs_utils.ads
 gnatcoll.ads
 gnatcoll_support.c
 link_max.c
 objlist_file.c
 run_path_option.c
 separate_run_path_option.c
 set_std_prefix.c
 terminals.c
 update_path.c
lib/
 libgnatcoll.so
 libgnatcoll.so.%%SOMAJOR%%
 libgnatcoll.so.%%SOVERSION%%
lib/gnat/gnatcoll.gpr
lib/gnatcoll.relocatable/
 gnatcoll-any_types.ali
 gnatcoll-arg_lists.ali
 gnatcoll-asserts.ali
 gnatcoll-atomic.ali
 gnatcoll-boyer_moore.ali
 gnatcoll-coders-base64.ali
 gnatcoll-coders-streams.ali
 gnatcoll-coders.ali
 gnatcoll-config.ali
 gnatcoll-email-mailboxes.ali
 gnatcoll-email-parser.ali
 gnatcoll-email-utils.ali
 gnatcoll-email.ali
 gnatcoll-format_columns_vertical.ali
 gnatcoll-formatters.ali
 gnatcoll-geometry.ali
 gnatcoll-io-native.ali
 gnatcoll-io-remote-unix.ali
 gnatcoll-io-remote-windows.ali
 gnatcoll-io-remote.ali
 gnatcoll-io.ali
 gnatcoll-json-utility.ali
 gnatcoll-json.ali
 gnatcoll-locks.ali
 gnatcoll-memory.ali
 gnatcoll-mmap-system__unix.ali
 gnatcoll-mmap.ali
 gnatcoll-opt_parse.ali
 gnatcoll-os-constants__unix.ali
 gnatcoll-os.ali
 gnatcoll-paragraph_filling-badnesses.ali
 gnatcoll-paragraph_filling-words.ali
 gnatcoll-paragraph_filling.ali
 gnatcoll-path.ali
 gnatcoll-plugins__unix.ali
 gnatcoll-pools.ali
 gnatcoll-projects-aux.ali
 gnatcoll-projects-krunch.ali
 gnatcoll-projects-normalize.ali
 gnatcoll-projects.ali
 gnatcoll-promises.ali
 gnatcoll-refcount-weakref.ali
 gnatcoll-refcount.ali
 gnatcoll-remote-db.ali
 gnatcoll-remote.ali
 gnatcoll-scripts-files.ali
 gnatcoll-scripts-impl.ali
 gnatcoll-scripts-projects.ali
 gnatcoll-scripts-shell.ali
 gnatcoll-scripts-utils.ali
 gnatcoll-scripts.ali
 gnatcoll-storage_pools-alignment.ali
 gnatcoll-storage_pools-headers.ali
 gnatcoll-storage_pools.ali
 gnatcoll-string_builders.ali
 gnatcoll-strings.ali
 gnatcoll-strings_impl.ali
 gnatcoll-symbols.ali
 gnatcoll-templates.ali
 gnatcoll-terminal.ali
 gnatcoll-traces.ali
 gnatcoll-tribooleans.ali
 gnatcoll-utils.ali
 gnatcoll-vfs.ali
 gnatcoll-vfs_types.ali
 gnatcoll-vfs_utils.ali
 gnatcoll.ali
 libgnatcoll.so
 libgnatcoll.so.%%SOMAJOR%%
 libgnatcoll.so.%%SOVERSION%%
lib/gnatcoll.static/
 gnatcoll-any_types.ali
 gnatcoll-arg_lists.ali
 gnatcoll-asserts.ali
 gnatcoll-atomic.ali
 gnatcoll-boyer_moore.ali
 gnatcoll-coders-base64.ali
 gnatcoll-coders-streams.ali
 gnatcoll-coders.ali
 gnatcoll-config.ali
 gnatcoll-email-mailboxes.ali
 gnatcoll-email-parser.ali
 gnatcoll-email-utils.ali
 gnatcoll-email.ali
 gnatcoll-format_columns_vertical.ali
 gnatcoll-formatters.ali
 gnatcoll-geometry.ali
 gnatcoll-io-native.ali
 gnatcoll-io-remote-unix.ali
 gnatcoll-io-remote-windows.ali
 gnatcoll-io-remote.ali
 gnatcoll-io.ali
 gnatcoll-json-utility.ali
 gnatcoll-json.ali
 gnatcoll-locks.ali
 gnatcoll-memory.ali
 gnatcoll-mmap-system__unix.ali
 gnatcoll-mmap.ali
 gnatcoll-opt_parse.ali
 gnatcoll-os-constants__unix.ali
 gnatcoll-os.ali
 gnatcoll-paragraph_filling-badnesses.ali
 gnatcoll-paragraph_filling-words.ali
 gnatcoll-paragraph_filling.ali
 gnatcoll-path.ali
 gnatcoll-plugins__unix.ali
 gnatcoll-pools.ali
 gnatcoll-projects-aux.ali
 gnatcoll-projects-krunch.ali
 gnatcoll-projects-normalize.ali
 gnatcoll-projects.ali
 gnatcoll-promises.ali
 gnatcoll-refcount-weakref.ali
 gnatcoll-refcount.ali
 gnatcoll-remote-db.ali
 gnatcoll-remote.ali
 gnatcoll-scripts-files.ali
 gnatcoll-scripts-impl.ali
 gnatcoll-scripts-projects.ali
 gnatcoll-scripts-shell.ali
 gnatcoll-scripts-utils.ali
 gnatcoll-scripts.ali
 gnatcoll-storage_pools-alignment.ali
 gnatcoll-storage_pools-headers.ali
 gnatcoll-storage_pools.ali
 gnatcoll-string_builders.ali
 gnatcoll-strings.ali
 gnatcoll-strings_impl.ali
 gnatcoll-symbols.ali
 gnatcoll-templates.ali
 gnatcoll-terminal.ali
 gnatcoll-traces.ali
 gnatcoll-tribooleans.ali
 gnatcoll-utils.ali
 gnatcoll-vfs.ali
 gnatcoll-vfs_types.ali
 gnatcoll-vfs_utils.ali
 gnatcoll.ali
 libgnatcoll.a
lib/gnatcoll.static-pic/
 gnatcoll-any_types.ali
 gnatcoll-arg_lists.ali
 gnatcoll-asserts.ali
 gnatcoll-atomic.ali
 gnatcoll-boyer_moore.ali
 gnatcoll-coders-base64.ali
 gnatcoll-coders-streams.ali
 gnatcoll-coders.ali
 gnatcoll-config.ali
 gnatcoll-email-mailboxes.ali
 gnatcoll-email-parser.ali
 gnatcoll-email-utils.ali
 gnatcoll-email.ali
 gnatcoll-format_columns_vertical.ali
 gnatcoll-formatters.ali
 gnatcoll-geometry.ali
 gnatcoll-io-native.ali
 gnatcoll-io-remote-unix.ali
 gnatcoll-io-remote-windows.ali
 gnatcoll-io-remote.ali
 gnatcoll-io.ali
 gnatcoll-json-utility.ali
 gnatcoll-json.ali
 gnatcoll-locks.ali
 gnatcoll-memory.ali
 gnatcoll-mmap-system__unix.ali
 gnatcoll-mmap.ali
 gnatcoll-opt_parse.ali
 gnatcoll-os-constants__unix.ali
 gnatcoll-os.ali
 gnatcoll-paragraph_filling-badnesses.ali
 gnatcoll-paragraph_filling-words.ali
 gnatcoll-paragraph_filling.ali
 gnatcoll-path.ali
 gnatcoll-plugins__unix.ali
 gnatcoll-pools.ali
 gnatcoll-projects-aux.ali
 gnatcoll-projects-krunch.ali
 gnatcoll-projects-normalize.ali
 gnatcoll-projects.ali
 gnatcoll-promises.ali
 gnatcoll-refcount-weakref.ali
 gnatcoll-refcount.ali
 gnatcoll-remote-db.ali
 gnatcoll-remote.ali
 gnatcoll-scripts-files.ali
 gnatcoll-scripts-impl.ali
 gnatcoll-scripts-projects.ali
 gnatcoll-scripts-shell.ali
 gnatcoll-scripts-utils.ali
 gnatcoll-scripts.ali
 gnatcoll-storage_pools-alignment.ali
 gnatcoll-storage_pools-headers.ali
 gnatcoll-storage_pools.ali
 gnatcoll-string_builders.ali
 gnatcoll-strings.ali
 gnatcoll-strings_impl.ali
 gnatcoll-symbols.ali
 gnatcoll-templates.ali
 gnatcoll-terminal.ali
 gnatcoll-traces.ali
 gnatcoll-tribooleans.ali
 gnatcoll-utils.ali
 gnatcoll-vfs.ali
 gnatcoll-vfs_types.ali
 gnatcoll-vfs_utils.ali
 gnatcoll.ali
 libgnatcoll.a


[FILE:149:manifests/plist.examples]
share/examples/gnatcoll/coders/
 base64-demo
 base64_coder.adb
 base64_coder.gpr
share/examples/gnatcoll/projects/
 gpr_sources.adb
 gpr_sources.gpr


[FILE:511:patches/patch-Makefile]
--- Makefile.orig	2019-11-22 16:44:53 UTC
+++ Makefile
@@ -113,7 +113,7 @@ GPRBUILD_OPTIONS=
 
 BUILDER=gprbuild -p -m $(GTARGET) $(RBD) -j$(PROCESSORS) $(GPR_VARS) \
 	$(GPRBUILD_OPTIONS)
-INSTALLER=gprinstall -p -f $(GTARGET) $(GPR_VARS) \
+INSTALLER=gprinstall -p -f $(GTARGET) $(GPR_VARS) --project-subdir=lib/gnat \
 	$(RBD) --sources-subdir=include/gnatcoll --prefix=$(prefix)$(integrated_install)
 CLEANER=gprclean -q $(RBD) $(GTARGET)
 UNINSTALLER=$(INSTALLER) -p -f --install-name=gnatcoll --uninstall


[FILE:849:patches/patch-gnatcoll.gpr]
--- gnatcoll.gpr.orig	2019-11-22 16:44:53 UTC
+++ gnatcoll.gpr
@@ -84,7 +84,7 @@ project GnatColl is
 
    case Library_Type is
       when "relocatable" =>
-         for Library_Options use Extra_Libs;
+         for Library_Options use Extra_Libs & gpr.Linker'Linker_options & ("-Wl,-R,@PREFIX@/lib");
 
          --  Put user options in front, for options like --as-needed.
          for Leading_Library_Options use External_As_List ("LDFLAGS", " ");
@@ -174,7 +174,7 @@ project GnatColl is
 
    package Install is
       for Artifacts ("share/examples/gnatcoll") use ("examples/*");
-      for Artifacts ("share/doc/gnatcoll/html") use ("docs/_build/html");
+      for Artifacts ("share/doc/gnatcoll/html") use ("docs/_build/html/*");
       for Artifacts ("share/doc/gnatcoll")
         use ("docs/_build/latex/GNATColl.pdf");
    end Install;

