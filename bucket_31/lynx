# Buildsheet autogenerated by ravenadm tool -- Do not edit.

NAMEBASE=		lynx
VERSION=		2.9.2
KEYWORDS=		www
VARIANTS=		std
SDESC[std]=		Text based browser for the world wide web
HOMEPAGE=		https://lynx.invisible-island.net/
CONTACT=		nobody

DOWNLOAD_GROUPS=	main
SITES[main]=		http://invisible-mirror.net/archives/lynx/tarballs/
			ftp://invisible-island.net/lynx/tarballs/
DISTFILE[1]=		lynx2.9.2.tar.bz2:main
DF_INDEX=		1
SPKGS[std]=		set
			primary
			docs
			man
			nls

OPTIONS_AVAILABLE=	none
OPTIONS_STANDARD=	none

BUILD_DEPENDS=		libidn:dev:std
BUILDRUN_DEPENDS=	libidn:primary:std
RUN_DEPENDS=		media-types:single:std

USES=			cpe ncurses bdb shebangfix ssl zlib bz2 gettext
C_USES[freebsd]=	iconv
C_USES[netbsd]=		iconv
C_USES[dragonfly]=	iconv
C_USES[midnightbsd]=	iconv

DISTNAME=		lynx2.9.2

LICENSE=		GPLv2:primary
LICENSE_TERMS=		primary:{{WRKSRC}}/COPYHEADER
LICENSE_FILE=		GPLv2:{{WRKSRC}}/COPYING
LICENSE_SCHEME=		solo

CPE_UPDATE=		rel0
CPE_VERSION=		2.9.2
FPC_EQUIVALENT=		www/lynx
SHEBANG_FILES=		samples/mailto-form.pl

MUST_CONFIGURE=		gnu
CONFIGURE_ARGS=		--with-zlib
			--with-bzlib
			--enable-nsl-fork
			--enable-nested-tables
			--enable-default-colors
			--enable-addrlist-page
			--enable-gzip-help
			--enable-idna
			--enable-ipv6
			--enable-nls
			--with-screen=ncurses
			--with-ssl="{{OPENSSLBASE}}"
			--with-libdir="{{PREFIX}}/etc"
			--with-mime-libdir="{{PREFIX}}/etc"

MAKEFILE=		makefile
MAKE_ARGS=		helpdir={{PREFIX}}/share/lynx_help
			docdir={{STD_DOCDIR}}
SINGLE_JOB=		yes

INSTALL_TARGET=		install-full

pre-configure:
	# use libidn2 instead of libidn
	${REINPLACE_CMD} -e 's|idna\.h|idn2.h|; s|-lidn|-lidn2|' \
		${WRKSRC}/configure

[FILE:199:descriptions/desc.primary]
lynx is a program which allows a user to access World-Wide Web servers and
other information servers.  It uses only ascii representation so that it
can be used from ascii-terminals and dialin-lines.


[FILE:96:distinfo]
7374b89936d991669e101f4e97f2c9592036e1e8cdaa7bafc259a77ab6fb07ce      2783769 lynx2.9.2.tar.bz2


[FILE:646:manifests/plist.primary]
@sample etc/lynx.cfg.sample
@sample etc/lynx.lss.sample
bin/lynx
share/lynx_help/
 Lynx_users_guide.html.gz
 about_lynx.html.gz
 lynx-dev.html.gz
 lynx_help_main.html.gz
 lynx_url_support.html.gz
share/lynx_help/keystrokes/
 alt_edit_help.html.gz
 bashlike_edit_help.html.gz
 bookmark_help.html.gz
 cookie_help.html.gz
 dired_help.html.gz
 edit_help.html.gz
 environments.html.gz
 follow_help.html.gz
 gopher_types_help.html.gz
 history_help.html.gz
 keystroke_help.html.gz
 movement_help.html.gz
 option_help.html.gz
 other_help.html.gz
 print_help.html.gz
 scrolling_help.html.gz
 test_display.html.gz
 visited_help.html.gz
 xterm_help.html.gz


[FILE:1351:manifests/plist.docs]
share/doc/lynx/
 CHANGES
 PROBLEMS
 README
share/doc/lynx/docs/
 CHANGES2.3.gz
 CHANGES2.4.gz
 CHANGES2.5.gz
 CHANGES2.6.gz
 CHANGES2.7.gz
 CHANGES2.8.gz
 CRAWL.announce.gz
 FM.announce.gz
 IBMPC-charsets.announce.gz
 OS-390.announce.gz
 README.TRST
 README.chartrans
 README.cookies
 README.defines
 README.jp
 README.metrics
 README.options
 README.release
 README.rootcerts
 README.ssl
 README.sslcerts
 SOCKETSHR.announce.gz
 TCPWARE.announce.gz
 VMSWAIS.announce.gz
 djgpp.key
 pdcurses.key
 slang.key
 win-386.announce.gz
share/doc/lynx/samples/
 blue-background.lss
 bright-blue.lss
 cernrules.txt
 home.htm
 installdirs.html
 jumps.htm
 jumpsUnix.html
 jumpsVMS.html
 keepviewer
 lynx-demo.cfg
 lynx-keymaps
 lynx.bat
 lynx.com
 lynx.ico
 lynx.lss
 lynx_bookmarks.htm
 lynxdump
 mailcap
 mailto-form.pl
 mhtml-tool
 midnight.lss
 mild-colors.lss
 mime.types
 oldlynx
 oldlynx.bat
 opaque.lss
share/doc/lynx/test/
 ALT88592.html
 ISO_LATIN1_test.html
 README.txt
 TestComment.html
 X
 bad-html.html
 c1.html
 circle.html
 cp-1252.html
 cp-1252a.html
 idna-tr46.html
 image.jpg
 iso-8859-1.html
 iso-8859-1a.html
 iso-8859-2.html
 iso-8859-2a.html
 koi8-r.html
 nobody
 quickbrown.html
 raw8bit.html
 sgml.html
 spaces.html
 special_urls.html
 square.html
 tabtest.html
 tags.html
 test-styles.html
 triangle.html
 unicode.html
 utf-8-demo.html


[FILE:22:manifests/plist.man]
share/man/man1/lynx.1


[FILE:873:manifests/plist.nls]
share/locale/ca/LC_MESSAGES/lynx.mo
share/locale/cs/LC_MESSAGES/lynx.mo
share/locale/da/LC_MESSAGES/lynx.mo
share/locale/de/LC_MESSAGES/lynx.mo
share/locale/en/LC_MESSAGES/lynx.mo
share/locale/eo/LC_MESSAGES/lynx.mo
share/locale/et/LC_MESSAGES/lynx.mo
share/locale/fi/LC_MESSAGES/lynx.mo
share/locale/fr/LC_MESSAGES/lynx.mo
share/locale/hu/LC_MESSAGES/lynx.mo
share/locale/id/LC_MESSAGES/lynx.mo
share/locale/it/LC_MESSAGES/lynx.mo
share/locale/ja/LC_MESSAGES/lynx.mo
share/locale/nl/LC_MESSAGES/lynx.mo
share/locale/pt_BR/LC_MESSAGES/lynx.mo
share/locale/ro/LC_MESSAGES/lynx.mo
share/locale/ru/LC_MESSAGES/lynx.mo
share/locale/sl/LC_MESSAGES/lynx.mo
share/locale/sv/LC_MESSAGES/lynx.mo
share/locale/tr/LC_MESSAGES/lynx.mo
share/locale/uk/LC_MESSAGES/lynx.mo
share/locale/vi/LC_MESSAGES/lynx.mo
share/locale/zh_CN/LC_MESSAGES/lynx.mo
share/locale/zh_TW/LC_MESSAGES/lynx.mo


[FILE:329:patches/patch-configure]
--- configure.orig	2024-01-15 00:25:14 UTC
+++ configure
@@ -30326,8 +30326,8 @@ echo $ECHO_N "checking for an rpath opti
 	(openbsd[2-9].*|mirbsd*)
 		LD_RPATH_OPT="-Wl,-rpath,"
 		;;
-	(dragonfly*)
-		LD_RPATH_OPT="-rpath "
+	(dragonfly*|midnight*)
+		LD_RPATH_OPT="-Wl,-rpath,"
 		;;
 	(netbsd*)
 		LD_RPATH_OPT="-Wl,-rpath,"


[FILE:2718:patches/patch-makefile.in]
--- makefile.in.orig	2024-01-15 16:06:06 UTC
+++ makefile.in
@@ -314,23 +314,13 @@ install-doc : $(DOCDIR) $(HELPDIR)
 	$(SHELL) -c '\
 		( umask 022; \
 		  cd $(srcdir) && \
-		  $(TAR_UP) C[HO]* PROBLEMS README docs samples test ) | \
+		  $(TAR_UP) CH* PROBLEMS README docs samples test ) | \
 		( umask 022; \
 		  cd $(DOCDIR) && \
 		  chmod -R u+w . && $(TAR_DOWN) )';\
 	$(SHELL) -c 'if test "$(COMPRESS_PROG)" != "" ; then \
 		(cd $(DOCDIR) && $(COMPRESS_PROG) -f docs/CHANGES*.[0-9] docs/*.announce ) \
 	fi';\
-	echo "Copying copyright files";\
-	$(SHELL) -c '\
-		r="`$(SHELL) $(scripts_dir)/relpath.sh "$(docdir)" "$(helpdir)"`"; \
-		echo ".. docdir:   $(docdir)"; \
-		echo ".. helpdir:  $(helpdir)"; \
-		echo ".. relative: $$r"; \
-		for name in COPYING COPYHEADER; do \
-		cd $(HELPDIR) && rm -f $$name;\
-		cd $(HELPDIR) && ( $(LN_S) $$r/$$name $$name || cp $(DOCDIR)/$$name . );\
-		done';\
 	$(SHELL) -c '\
 		i=`id|sed -e "s/(.*//"`; \
 		echo "Checking owner: $$i"; \
@@ -409,7 +399,7 @@ install-help : htmlized_cfg help_files.s
 		if test "$(COMPRESS_PROG)" != "" ; then \
 			(cd $(HELPDIR) && $(COMPRESS_PROG) $$files ) \
 		fi'
-	@echo "Updating $(sysconfdir)/lynx.cfg"
+	@echo "Updating $(sysconfdir)/lynx.cfg.sample"
 	@ECHO_CC@$(SHELL) -c \
 	'if test -f $(SYSCONFDIR)/lynx.cfg ; then \
 		mv $(SYSCONFDIR)/lynx.cfg $(SYSCONFDIR)/lynx.tmp ; \
@@ -424,8 +414,8 @@ install-help : htmlized_cfg help_files.s
 	$(SHELL) $(scripts_dir)/cfg_path.sh lynx_doc  $(helpdir) | \
 	sed	-e '/^HELPFILE:file/s!$$!$(COMPRESS_EXT)!' \
 		-e '/^HELPFILE:file/s!$(COMPRESS_EXT)$(COMPRESS_EXT)$$!$(COMPRESS_EXT)!' \
-		>$(SYSCONFDIR)/lynx.cfg ;\
-	chmod 644 $(SYSCONFDIR)/lynx.cfg ;\
+		>$(SYSCONFDIR)/lynx.cfg.sample ;\
+	chmod 644 $(SYSCONFDIR)/lynx.cfg.sample ;\
 	rm -f $(SYSCONFDIR)/lynx.tmp
 
 LYHelp.h : help_files.sed $(srcdir)/LYHelp.hin
@@ -448,10 +438,10 @@ cfg_defs.h : $(scripts_dir)/cfg_defs.sh
 	@$(SHELL) -c 'SHELL=$(SHELL) FGREP="$(FGREP)" $(SHELL) $(scripts_dir)/cfg_defs.sh $(srcdir)'
 
 install-cfg : $(SYSCONFDIR)
-	@$(SHELL) -c 'SHELL=$(SHELL) EGREP="$(EGREP)" FGREP="$(FGREP)" $(SHELL) $(scripts_dir)/install-cfg.sh "$(INSTALL_DATA)" $(srcdir)/lynx.cfg $(SYSCONFDIR)/lynx.cfg'
+	@$(SHELL) -c 'SHELL=$(SHELL) EGREP="$(EGREP)" FGREP="$(FGREP)" $(SHELL) $(scripts_dir)/install-cfg.sh "$(INSTALL_DATA)" $(srcdir)/lynx.cfg $(SYSCONFDIR)/lynx.cfg.sample'
 
 install-lss : $(SYSCONFDIR)
-	@$(SHELL) $(scripts_dir)/install-lss.sh "$(INSTALL_DATA)" $(srcdir)/samples/lynx.lss $(SYSCONFDIR)/lynx.lss
+	@$(SHELL) $(scripts_dir)/install-lss.sh "$(INSTALL_DATA)" $(srcdir)/samples/lynx.lss $(SYSCONFDIR)/lynx.lss.sample
 
 uninstall ::
 @MSG_DIR_MAKE@	( cd $(PO_DIR) && $(MAKE_RECUR) uninstall )

