# Buildsheet autogenerated by ravenadm tool -- Do not edit.

NAMEBASE=		dos2unix
VERSION=		7.5.2
KEYWORDS=		converters
VARIANTS=		std
SDESC[std]=		DOS/MAC to UNIX Text File Format Converter
HOMEPAGE=		https://waterlan.home.xs4all.nl/dos2unix.html
CONTACT=		nobody

DOWNLOAD_GROUPS=	main
SITES[main]=		https://waterlan.home.xs4all.nl/dos2unix/
DISTFILE[1]=		dos2unix-7.5.2.tar.gz:main
DF_INDEX=		1
SPKGS[std]=		set
			primary
			man
			docs
			nls

OPTIONS_AVAILABLE=	none
OPTIONS_STANDARD=	none

USES=			gmake gettext iconv

LICENSE=		BSD2CLAUSE:primary
LICENSE_FILE=		BSD2CLAUSE:{{WRKSRC}}/COPYING.txt
LICENSE_SCHEME=		solo

MAKE_ARGS=		prefix="{{PREFIX}}"
			ENABLE_NLS=yes

post-install:
	${STRIP_CMD} ${STAGEDIR}${PREFIX}/bin/dos2unix
	${STRIP_CMD} ${STAGEDIR}${PREFIX}/bin/unix2dos

[FILE:1116:descriptions/desc.primary]
Dos2Unix / Unix2Dos - Text file format converters

This is an update of Benjamin Lin's implementations of dos2unix and
unix2dos. Benjamin Lin's implementations of dos2unix and unix2dos were
distributed via SunSITE.unc.edu (later MetaLab.unc.edu, now ibiblio) and
became part of several Linux distributions such as RedHat, Suse, Gentoo,
and others. This update includes all RedHat patches and fixes several
other problems. Internationalization has been added and ports to DOS,
Windows, Cygwin and OS/2 Warp have been made.

These implementations of dos2unix and unix2dos have been modelled after
dos2unix/unix2dos under SunOS/Solaris. The first versions were made by
John Birchfield in 1989, and in 1995 rewritten from scratch by Benjamin
Lin. Mac to Unix conversion was added by Bernd Johannes Wuebben in 1998,
Unix to Mac conversion by Erwin Waterlander in 2010.

In 2010 the two separate dos2unix and unix2dos packages have been bundled
into a single dos2unix package (version 5.0). Support for Unicode UTF-16
was added in 2012 (version 6.0). Version 7.0, in 2014, was a major code
cleanup and added a test suite.


[FILE:100:distinfo]
264742446608442eb48f96c20af6da303cb3a92b364e72cb7e24f88239c4bf3a       991485 dos2unix-7.5.2.tar.gz


[FILE:45:manifests/plist.primary]
bin/
 dos2unix
 mac2unix
 unix2dos
 unix2mac


[FILE:1030:manifests/plist.man]
share/man/de/man1/
 dos2unix.1.gz
 mac2unix.1.gz
 unix2dos.1.gz
 unix2mac.1.gz
share/man/es/man1/
 dos2unix.1.gz
 mac2unix.1.gz
 unix2dos.1.gz
 unix2mac.1.gz
share/man/fr/man1/
 dos2unix.1.gz
 mac2unix.1.gz
 unix2dos.1.gz
 unix2mac.1.gz
share/man/ko/man1/
 dos2unix.1.gz
 mac2unix.1.gz
 unix2dos.1.gz
 unix2mac.1.gz
share/man/man1/
 dos2unix.1.gz
 mac2unix.1.gz
 unix2dos.1.gz
 unix2mac.1.gz
share/man/nl/man1/
 dos2unix.1.gz
 mac2unix.1.gz
 unix2dos.1.gz
 unix2mac.1.gz
share/man/pl/man1/
 dos2unix.1.gz
 mac2unix.1.gz
 unix2dos.1.gz
 unix2mac.1.gz
share/man/pt_BR/man1/
 dos2unix.1.gz
 mac2unix.1.gz
 unix2dos.1.gz
 unix2mac.1.gz
share/man/ro/man1/
 dos2unix.1.gz
 mac2unix.1.gz
 unix2dos.1.gz
 unix2mac.1.gz
share/man/sr/man1/
 dos2unix.1.gz
 mac2unix.1.gz
 unix2dos.1.gz
 unix2mac.1.gz
share/man/sv/man1/
 dos2unix.1.gz
 mac2unix.1.gz
 unix2dos.1.gz
 unix2mac.1.gz
share/man/uk/man1/
 dos2unix.1.gz
 mac2unix.1.gz
 unix2dos.1.gz
 unix2mac.1.gz
share/man/zh_CN/man1/
 dos2unix.1.gz
 mac2unix.1.gz
 unix2dos.1.gz
 unix2mac.1.gz


[FILE:749:manifests/plist.docs]
share/doc/dos2unix/
 BUGS.txt
 COPYING.txt
 ChangeLog.txt
 INSTALL.txt
 NEWS.txt
 README.txt
 TODO.txt
 dos2unix.htm
 dos2unix.txt
share/doc/dos2unix/de/
 dos2unix.htm
 dos2unix.txt
share/doc/dos2unix/es/
 dos2unix.htm
 dos2unix.txt
share/doc/dos2unix/fr/
 dos2unix.htm
 dos2unix.txt
share/doc/dos2unix/ko/
 dos2unix.htm
 dos2unix.txt
share/doc/dos2unix/nl/
 dos2unix.htm
 dos2unix.txt
share/doc/dos2unix/pl/
 dos2unix.htm
 dos2unix.txt
share/doc/dos2unix/pt_BR/
 dos2unix.htm
 dos2unix.txt
share/doc/dos2unix/ro/
 dos2unix.htm
 dos2unix.txt
share/doc/dos2unix/sr/
 dos2unix.htm
 dos2unix.txt
share/doc/dos2unix/sv/
 dos2unix.htm
 dos2unix.txt
share/doc/dos2unix/uk/
 dos2unix.htm
 dos2unix.txt
share/doc/dos2unix/zh_CN/
 dos2unix.htm
 dos2unix.txt


[FILE:930:manifests/plist.nls]
share/locale/ca/LC_MESSAGES/dos2unix.mo
share/locale/da/LC_MESSAGES/dos2unix.mo
share/locale/de/LC_MESSAGES/dos2unix.mo
share/locale/eo/LC_MESSAGES/dos2unix.mo
share/locale/es/LC_MESSAGES/dos2unix.mo
share/locale/fr/LC_MESSAGES/dos2unix.mo
share/locale/fur/LC_MESSAGES/dos2unix.mo
share/locale/hu/LC_MESSAGES/dos2unix.mo
share/locale/ja/LC_MESSAGES/dos2unix.mo
share/locale/ka/LC_MESSAGES/dos2unix.mo
share/locale/ko/LC_MESSAGES/dos2unix.mo
share/locale/nb/LC_MESSAGES/dos2unix.mo
share/locale/nl/LC_MESSAGES/dos2unix.mo
share/locale/pl/LC_MESSAGES/dos2unix.mo
share/locale/pt_BR/LC_MESSAGES/dos2unix.mo
share/locale/ro/LC_MESSAGES/dos2unix.mo
share/locale/ru/LC_MESSAGES/dos2unix.mo
share/locale/sr/LC_MESSAGES/dos2unix.mo
share/locale/sv/LC_MESSAGES/dos2unix.mo
share/locale/uk/LC_MESSAGES/dos2unix.mo
share/locale/vi/LC_MESSAGES/dos2unix.mo
share/locale/zh_CN/LC_MESSAGES/dos2unix.mo
share/locale/zh_TW/LC_MESSAGES/dos2unix.mo


[FILE:1111:patches/patch-Makefile]
--- Makefile.orig	2023-08-29 18:43:36 UTC
+++ Makefile
@@ -76,7 +76,7 @@ bindir          = $(exec_prefix)/bin
 datarootdir     = $(prefix)/share
 datadir         = $(datarootdir)
 
-docsubdir       = $(PACKAGE)-$(DOS2UNIX_VERSION)
+docsubdir       = $(PACKAGE)
 docdir          = $(datarootdir)/doc/$(docsubdir)
 localedir       = $(datarootdir)/locale
 mandir          = $(datarootdir)/man
@@ -290,25 +290,13 @@ endif
         EXTRA_DEFS += -Dfreemint -D__OS=\"freemint\"
 endif
 
-ifeq (freebsd,$(D2U_OS))
+# all systems including Linux
 ifdef ENABLE_NLS
-        CFLAGS_OS     = -I/usr/local/include
-        LDFLAGS_EXTRA = -L/usr/local/lib
-        LIBS_EXTRA    = -lintl
-endif
-endif
-
-ifeq (darwin,$(D2U_OS))
-ifdef ENABLE_NLS
-        CFLAGS_OS     = -I/usr/local/include
-        LDFLAGS_EXTRA = -L/usr/local/lib
-        LIBS_EXTRA    = -lintl
-endif
-endif
-
-ifeq (sun,$(D2U_OS))
-        # Running under SunOS/Solaris
-        LIBS_EXTRA = -lintl
+  ifeq (linux,$(D2U_OS))
+        LIBS_EXTRA    = -liconv
+  else
+        LIBS_EXTRA    = -lintl -liconv
+  endif
 endif
 
 ifeq (hp-ux,$(D2U_OS))

