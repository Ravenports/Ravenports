# Buildsheet autogenerated by ravenadm tool -- Do not edit.

NAMEBASE=		ORBit2
VERSION=		2.14.19
KEYWORDS=		devel
VARIANTS=		standard
SDESC[standard]=	High-Performance CORBA Object Request Broker
HOMEPAGE=		https://www.gnome.org/projects/ORBit2/
CONTACT=		nobody

DOWNLOAD_GROUPS=	main
SITES[main]=		GNOME/ORBit2/2.14
DISTFILE[1]=		ORBit2-2.14.19.tar.bz2:main
DIST_SUBDIR=		gnome2
DF_INDEX=		1
SPKGS[standard]=	complete
			primary
			docs

OPTIONS_AVAILABLE=	none
OPTIONS_STANDARD=	none

USES=			gmake libtool:keepla pkgconfig
GNOME_COMPONENTS=	libidl

FPC_EQUIVALENT=		devel/ORBit2

MUST_CONFIGURE=		gnu
CONFIGURE_ARGS=		--disable-gtk-doc
			--with-html-dir={{PREFIX}}/share/doc

SINGLE_JOB=		yes

INSTALL_TARGET=		install-strip
INSTALL_REQ_TOOLCHAIN=	yes

post-patch:
	${REINPLACE_CMD} -e 's|%%LOCALBASE%%|${LOCALBASE}|g' \
		${WRKSRC}/src/orb/orb-core/orbit-typelib.c
	${REINPLACE_CMD} -e 's|-DG_DISABLE_DEPRECATED||g' \
		${WRKSRC}/configure ${WRKSRC}/linc2/src/Makefile.in
	${REINPLACE_CMD} '/DESTDIR.*RANLIB/d' \
		${WRKSRC}/src/services/name/Makefile.in

post-install:
	${ECHO_CMD} "ORBIIOPIPv4=0" \
		> ${STAGEDIR}${PREFIX}/etc/orbit2rc.sample
	${ECHO_CMD} "ORBIIOPIPv6=0" \
		>> ${STAGEDIR}${PREFIX}/etc/orbit2rc.sample
	@${MKDIR} ${STAGEDIR}${PREFIX}/lib/orbit-2.0/idl-backends

[FILE:174:descriptions/desc.primary]
ORBit is a high-performance CORBA ORB with support for the C language.
It allows programs to communicate with each other, regardless of their
physical and logical locations.


[FILE:108:distinfo]
55c900a905482992730f575f3eef34d50bda717c197c97c08fa5a6eafd857550       764820 gnome2/ORBit2-2.14.19.tar.bz2


[FILE:1576:manifests/plist.primary]
bin/
 linc-cleanup-sockets
 orbit-idl-2
 orbit2-config
@sample etc/orbit2rc.sample
include/orbit-2.0/ORBitservices/
 CosNaming.h
 CosNaming_impl.h
 orbit-imodule.h
include/orbit-2.0/orbit-idl/orbit-idl-backend.h
include/orbit-2.0/orbit/dynamic/
 dynamic-defs.h
 dynamic.h
include/orbit-2.0/orbit/orb-core/
 allocators.h
 corba-any-type.h
 corba-any.h
 corba-context-type.h
 corba-context.h
 corba-defs.h
 corba-environment-type.h
 corba-environment.h
 corba-nvlist.h
 corba-object-type.h
 corba-object.h
 corba-orb-type.h
 corba-orb.h
 corba-pobj.h
 corba-policy-type.h
 corba-string.h
 corba-typecode-type.h
 corba-typecode.h
 iop-defs.h
 orb-core-types.h
 orb-core.h
 orb-types.h
 orbit-interface.h
 orbit-object.h
 orbit-small.h
include/orbit-2.0/orbit/
 orbit-config.h
 orbit-types.h
 orbit.h
include/orbit-2.0/orbit/poa/
 orbit-adaptor.h
 poa-basics.h
 poa-defs.h
 poa-policy.h
 poa-types.h
 poa.h
 portableserver-current-type.h
 portableserver-poa-type.h
include/orbit-2.0/orbit/util/
 basic_types.h
 orbit-genrand.h
 orbit-util.h
lib/
 libORBit-2.a
 libORBit-2.la
 libORBit-2.so
 libORBit-2.so.0
 libORBit-2.so.0.1.0
 libORBit-imodule-2.a
 libORBit-imodule-2.la
 libORBit-imodule-2.so
 libORBit-imodule-2.so.0
 libORBit-imodule-2.so.0.0.0
 libORBitCosNaming-2.a
 libORBitCosNaming-2.la
 libORBitCosNaming-2.so
 libORBitCosNaming-2.so.0
 libORBitCosNaming-2.so.0.1.0
 libname-server-2.a
lib/pkgconfig/
 ORBit-2.0.pc
 ORBit-CosNaming-2.0.pc
 ORBit-idl-2.0.pc
 ORBit-imodule-2.0.pc
share/aclocal/ORBit2.m4
share/idl/orbit-2.0/CosNaming.idl
@dir lib/orbit-2.0/idl-backends


[FILE:196:manifests/plist.docs]
share/doc/ORBit2/
 ORBit2-orbit2-allocators.html
 ORBit2-orbit2-small.html
 ORBit2.devhelp
 ORBit2.devhelp2
 general.html
 home.png
 index.html
 index.sgml
 left.png
 right.png
 style.css
 up.png


[FILE:355:patches/patch-Makefile.in]
--- Makefile.in.orig	2010-09-28 09:39:41 UTC
+++ Makefile.in
@@ -296,7 +296,7 @@ top_build_prefix = @top_build_prefix@
 top_builddir = @top_builddir@
 top_srcdir = @top_srcdir@
 DISTCHECK_CONFIGURE_FLAGS = --enable-gtk-doc
-SUBDIRS = linc2 src include test docs
+SUBDIRS = linc2 src include docs
 bin_SCRIPTS = orbit2-config
 EXTRA_DIST = \
 	ORBit2.m4	\


[FILE:412:patches/patch-src__orb__util__Makefile.in]
--- src/orb/util/Makefile.in.orig	2010-09-28 09:39:40 UTC
+++ src/orb/util/Makefile.in
@@ -227,7 +227,7 @@ noinst_LTLIBRARIES = liborb-util.la
 INCLUDES = \
 	-I$(top_srcdir)/include				\
 	-I$(top_builddir)/include			\
-	-DORBIT_SYSTEM_RCFILE=\"$(sysconfdir)/orbitrc\"	\
+	-DORBIT_SYSTEM_RCFILE=\"$(sysconfdir)/orbit2rc\"	\
 	-DORBIT2_INTERNAL_API				\
 	$(WARN_CFLAGS)					\
 	$(DISABLE_DEPRECATED_CFLAGS)			\


[FILE:365:patches/patch-src_orb_orb-core_orbit-typelib.c]
--- src/orb/orb-core/orbit-typelib.c.orig	2010-02-09 12:05:35 UTC
+++ src/orb/orb-core/orbit-typelib.c
@@ -218,6 +218,7 @@ ORBit_get_typelib_paths (void)
 	paths = g_ptr_array_sized_new (8);
 
 	g_ptr_array_add (paths, g_strdup (ORBIT_TYPELIB_DIR));
+	add_if_unique(paths, "%%LOCALBASE%%", TRUE);
 
 	if ((path = g_getenv ("ORBIT_TYPELIB_PATH"))) {
 		char **strv;

