# Buildsheet autogenerated by ravenadm tool -- Do not edit.

NAMEBASE=		aom
VERSION=		1.0.0.1
KEYWORDS=		multimedia
VARIANTS=		standard
SDESC[standard]=	Alliance for Open Media video codec
HOMEPAGE=		https://aomedia.org/
CONTACT=		nobody

DOWNLOAD_GROUPS=	main
SITES[main]=		GITHUB/jbeich:aom:v1.0.0-errata1-avif
DISTFILE[1]=		generated:main
DF_INDEX=		1
SPKGS[standard]=	single

OPTIONS_AVAILABLE=	none
OPTIONS_STANDARD=	none

BUILD_DEPENDS=		nasm:primary:standard

USES=			cmake perl:build

LICENSE=		BSD2CLAUSE:single
LICENSE_FILE=		BSD2CLAUSE:{{WRKSRC}}/LICENSE
LICENSE_SCHEME=		solo

FPC_EQUIVALENT=		multimedia/aom

SINGLE_JOB=		yes

SOVERSION=		0.0.0

CMAKE_ARGS=		-DBUILD_SHARED_LIBS:BOOL=ON
			-DENABLE_DOCS:BOOL=OFF
			-DENABLE_TESTS:BOOL=OFF

[FILE:311:descriptions/desc.single]
AOMedia Video 1 (AV1), is an open, royalty-free video coding format
designed for video transmissions over the Internet. It is being
developed by the Alliance for Open Media (AOMedia), a consortium of
firms from the semiconductor industry, video on demand providers, and
web browser developers, founded in 2015.


[FILE:115:distinfo]
5afdf68f3cc6916f3f16dba17be0ed554d1e13e4f67627445d2468311c60962b      3461663 jbeich-aom-1.0.0-errata1-avif.tar.gz


[FILE:210:manifests/plist.single]
bin/
 aomdec
 aomenc
include/aom/
 aom.h
 aom_codec.h
 aom_decoder.h
 aom_encoder.h
 aom_frame_buffer.h
 aom_image.h
 aom_integer.h
 aomcx.h
 aomdx.h
lib/
 libaom.so
 libaom.so.%%SOMAJOR%%
lib/pkgconfig/aom.pc


[FILE:554:patches/patch-build_cmake_aom__optimization.cmake]
--- build/cmake/aom_optimization.cmake.orig	2019-12-11 23:49:30 UTC
+++ build/cmake/aom_optimization.cmake
@@ -83,7 +83,7 @@ function(get_asm_obj_format out_format)
   if("${AOM_TARGET_CPU}" STREQUAL "x86_64")
     if("${AOM_TARGET_SYSTEM}" STREQUAL "Darwin")
       set(objformat "macho64")
-    elseif("${AOM_TARGET_SYSTEM}" STREQUAL "Linux")
+    elseif("${AOM_TARGET_SYSTEM}" MATCHES "Linux|FreeBSD|DragonFly")
       set(objformat "elf64")
     elseif("${AOM_TARGET_SYSTEM}" STREQUAL "MSYS"
            OR "${AOM_TARGET_SYSTEM}" STREQUAL "Windows")

