# Buildsheet autogenerated by ravenadm tool -- Do not edit.

NAMEBASE=		libburn
VERSION=		1.5.6
REVISION=		1
KEYWORDS=		devel
VARIANTS=		std
SDESC[std]=		Lib for reading/mastering/writing optical disks
HOMEPAGE=		https://dev.lovelyhq.com/libburnia/libburn
CONTACT=		Michael_Reim[kraileth@elderlinux.org]

DOWNLOAD_GROUPS=	main
SITES[main]=		https://files.libburnia-project.org/releases/
DISTFILE[1]=		libburn-1.5.6.tar.gz:main
DF_INDEX=		1
SPKGS[std]=		set
			primary
			tools
			dev
			man

OPTIONS_AVAILABLE=	none
OPTIONS_STANDARD=	none

EXRUN[tools]=		libburn:primary:std

USES=			libtool

LICENSE=		GPLv2+:primary
LICENSE_TERMS=		primary:{{WRKDIR}}/TERMS
LICENSE_FILE=		GPLv2+:{{WRKSRC}}/COPYING
LICENSE_AWK=		TERMS:"ifndef LIBBURN_H"
LICENSE_SOURCE=		TERMS:{{WRKSRC}}/libburn/libburn.h
LICENSE_SCHEME=		solo

FPC_EQUIVALENT=		devel/libburn

MUST_CONFIGURE=		gnu

INSTALL_TARGET=		install-strip
SOVERSION=		4.109.0

pre-configure:
	${REINPLACE_CMD} -e '/libdata/d' ${WRKSRC}/configure

[FILE:275:descriptions/desc.primary]
Libburn is a library to get data onto optical media: CD, DVD, Blu-Ray. It 
also offers a facility for reading data blocks from drives without using 
the normal block device i/o, which has its advantages and disadvantages. 
Reading and writing Audio CDs is supported as well.


[FILE:69:descriptions/desc.tools]
This package contains the cdrskin program based on the burn library.


[FILE:99:distinfo]
7295491b4be5eeac5e7a3fb2067e236e2955ffdc6bbd45f546466edee321644b       995353 libburn-1.5.6.tar.gz


[FILE:55:manifests/plist.primary]
lib/
 libburn.so.%%SOMAJOR%%
 libburn.so.%%SOVERSION%%


[FILE:12:manifests/plist.tools]
bin/cdrskin


[FILE:81:manifests/plist.dev]
include/libburn/libburn.h
lib/
 libburn.a
 libburn.so
lib/pkgconfig/libburn-1.pc


[FILE:28:manifests/plist.man]
share/man/man1/cdrskin.1.gz


[FILE:2176:patches/patch-configure]
--- configure.orig	2021-01-30 12:00:19 UTC
+++ configure
@@ -2410,7 +2410,7 @@ test -n "$target_alias" &&
 
 
 case $target_os in
-freebsd* | netbsd*)
+xxxxxx*)
         LDFLAGS="$LDFLAGS -L/usr/local/lib"
         CPPFLAGS="$CPPFLAGS -I/usr/local/include"
         ;;
@@ -6162,7 +6162,7 @@ darwin* | rhapsody*)
   lt_cv_deplibs_check_method=pass_all
   ;;
 
-freebsd* | dragonfly*)
+freebsd* | dragonfly* | midnight*)
   if echo __ELF__ | $CC -E - | $GREP __ELF__ > /dev/null; then
     case $host_cpu in
     i*86 )
@@ -10046,7 +10046,7 @@ fi
       ;;
 
     # FreeBSD 3 and greater uses gcc -shared to do shared libraries.
-    freebsd* | dragonfly*)
+    freebsd* | dragonfly* | midnight*)
       archive_cmds='$CC -shared $pic_flag -o $lib $libobjs $deplibs $compiler_flags'
       hardcode_libdir_flag_spec='-R$libdir'
       hardcode_direct=yes
@@ -11010,7 +11010,7 @@ dgux*)
   shlibpath_var=LD_LIBRARY_PATH
   ;;
 
-freebsd* | dragonfly*)
+freebsd* | dragonfly* | midnight*)
   # DragonFly does not have aout.  When/if they implement a new
   # versioning mechanism, adjust this.
   if test -x /usr/bin/objformat; then
@@ -11248,7 +11248,7 @@ netbsdelf*-gnu)
 
 netbsd*)
   # ts B51007 : changed version_type for lt_main.sh from "sunos" to "netbsd"
-  version_type=netbsd
+  version_type=freebsd-elf
   need_lib_prefix=no
   need_version=no
   if echo __ELF__ | $CC -E - | $GREP __ELF__ >/dev/null; then
@@ -11288,7 +11288,7 @@ openbsd*)
   # ts B60722 : changed version_type for lt_main.sh from "sunos" to "netbsd"
   #             http://www.openbsd.org/faq/ports/specialtopics.html
   #             "Understanding shared libraries number rules"
-  version_type=netbsd
+  version_type=freebsd-elf
   sys_lib_dlsearch_path_spec="/usr/lib"
   need_lib_prefix=no
   # Some older versions of OpenBSD (3.3 at least) *do* need versioned libs.
@@ -12257,7 +12257,7 @@ $as_echo_n "checking target operating sy
       LIBBURN_ARCH_LIBS=
       LIBBURNIA_LDCONFIG_CMD=ldconfig
       ;;
-    *-*-freebsd*)
+    *-*-freebsd*|*-*-midnight*)
       ARCH=freebsd
       LIBBURN_ARCH_LIBS=-lcam
       LIBBURNIA_PKGCONFDIR=$(echo "$libdir" | sed 's/\/lib$/\/libdata/')/pkgconfig

