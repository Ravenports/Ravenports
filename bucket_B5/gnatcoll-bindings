# Buildsheet autogenerated by ravenadm tool -- Do not edit.

NAMEBASE=		gnatcoll-bindings
VERSION=		2018
KEYWORDS=		devel
VARIANTS=		standard
SDESC[standard]=	Core packages of GNAT Components Collection
HOMEPAGE=		https://github.com/AdaCore/gnatcoll-core
CONTACT=		John_Marino[draco@marino.st]

DOWNLOAD_GROUPS=	main
SITES[main]=		http://downloads.dragonlace.net/src/
DISTFILE[1]=		gnatcoll-bindings-gpl-2018-20180524-src.tar.gz:main
DF_INDEX=		1
SPKGS[standard]=	complete
			gmp
			iconv
			python
			readline
			syslog
			examples

OPTIONS_AVAILABLE=	none
OPTIONS_STANDARD=	none

BUILD_DEPENDS=		gmp:static:standard
			gmp:shared:standard
			gprbuild:gprlib:standard
			readline:single:standard
BUILDRUN_DEPENDS=	gnatcoll-core:primary:standard
EXRUN[readline]=	readline:single:standard
EXRUN[iconv]=		libiconv:shared:standard
EXRUN[python]=		python27:single:standard
EXRUN[gmp]=		gmp:shared:standard

USES=			gprbuild gmake iconv:build python:py27,build

DISTNAME=		gnatcoll-bindings-gpl-2018-src

LICENSE=		GPLv3+:iconv
LICENSE_TERMS=		iconv:{{WRKDIR}}/TERMS
LICENSE_FILE=		GPLv3+:{{WRKSRC}}/COPYING3
LICENSE_AWK=		TERMS:"^$$"
LICENSE_SOURCE=		TERMS:{{WRKSRC}}/iconv/gnatcoll-iconv.ads
LICENSE_SCHEME=		solo

MAKE_ENV=		BUILD=PROD
			LIBRARY_TYPE=static
			GNATCOLL_PYTHON_CFLAGS="-I{{PYTHON_INCLUDEDIR}}"
			GNATCOLL_PYTHON_LIBS="-L{{PREFIX}}/lib/python{{PYTHON_VER}}/config -lpython{{PYTHON_VER}}"

INSTALL_REQ_TOOLCHAIN=	yes

post-patch:
	# no rpath linker commands necessary on static libraries
.for component in gmp iconv readline syslog
	${REINPLACE_CMD} \
	-e 's|Library_Options use|Library_Options use ("-L${PREFIX}/lib") \&|' \
	-e 's|Linker_Options use|Linker_Options use ("-L${PREFIX}/lib") \&|' \
	${WRKSRC}/${component}/gnatcoll_${component}.gpr
.endfor

do-build:
.for component in gmp iconv readline syslog python
	(cd ${WRKSRC} && ${SETENV} ${MAKE_ENV} \
		gprbuild -p -P ${component}/gnatcoll_${component}.gpr)
.endfor

do-install:
.for component in gmp iconv readline syslog python
	(cd ${WRKSRC} && ${SETENV} ${MAKE_ENV} gprinstall -p\
		--prefix=${STAGEDIR}${PREFIX}\
		--project-subdir=${STAGEDIR}${PREFIX}/lib/gnat\
		${component}/gnatcoll_${component}.gpr)
.endfor
	${RM} -r ${STAGEDIR}${PREFIX}/lib/gnat/manifests

[FILE:102:descriptions/desc.gmp]
This is the bindings module of the GNAT Components Collection.
This subpackage contains gmp bindings.


[FILE:104:descriptions/desc.iconv]
This is the bindings module of the GNAT Components Collection.
This subpackage contains iconv bindings.


[FILE:105:descriptions/desc.python]
This is the bindings module of the GNAT Components Collection.
This subpackage contains python bindings.


[FILE:107:descriptions/desc.readline]
This is the bindings module of the GNAT Components Collection.
This subpackage contains readline bindings.


[FILE:105:descriptions/desc.syslog]
This is the bindings module of the GNAT Components Collection.
This subpackage contains syslog bindings.


[FILE:125:distinfo]
bf1dc4e13d834b21ca195492aa73a6783ac1e91b4157a7ffb42cd8fece206e13       100068 gnatcoll-bindings-gpl-2018-20180524-src.tar.gz


[FILE:981:manifests/plist.gmp]
include/gnatcoll_gmp/
 gmp_support.c
 gnatcoll-gmp-integers-io.adb
 gnatcoll-gmp-integers-io.ads
 gnatcoll-gmp-integers-misc.adb
 gnatcoll-gmp-integers-misc.ads
 gnatcoll-gmp-integers-number_theoretic.adb
 gnatcoll-gmp-integers-number_theoretic.ads
 gnatcoll-gmp-integers-random.adb
 gnatcoll-gmp-integers-random.ads
 gnatcoll-gmp-integers-root_extraction.adb
 gnatcoll-gmp-integers-root_extraction.ads
 gnatcoll-gmp-integers.adb
 gnatcoll-gmp-integers.ads
 gnatcoll-gmp-lib.ads
 gnatcoll-gmp-mpz_even_p.c
 gnatcoll-gmp-mpz_odd_p.c
 gnatcoll-gmp-mpz_sign.c
 gnatcoll-gmp-random_state.adb
 gnatcoll-gmp-random_state.ads
 gnatcoll-gmp.ads
lib/gnat/gnatcoll_gmp.gpr
lib/gnatcoll_gmp/
 gnatcoll-gmp-integers-io.ali
 gnatcoll-gmp-integers-misc.ali
 gnatcoll-gmp-integers-number_theoretic.ali
 gnatcoll-gmp-integers-random.ali
 gnatcoll-gmp-integers-root_extraction.ali
 gnatcoll-gmp-integers.ali
 gnatcoll-gmp-lib.ali
 gnatcoll-gmp-random_state.ali
 gnatcoll-gmp.ali
 libgnatcoll_gmp.a


[FILE:170:manifests/plist.iconv]
include/gnatcoll_iconv/
 gnatcoll-iconv.adb
 gnatcoll-iconv.ads
 iconv_support.c
lib/gnat/gnatcoll_iconv.gpr
lib/gnatcoll_iconv/
 gnatcoll-iconv.ali
 libgnatcoll_iconv.a


[FILE:358:manifests/plist.python]
include/gnatcoll_python/
 gnatcoll-any_types-python.adb
 gnatcoll-any_types-python.ads
 gnatcoll-python.adb
 gnatcoll-python.ads
 gnatcoll-scripts-python.adb
 gnatcoll-scripts-python.ads
 python_support.c
lib/gnat/gnatcoll_python.gpr
lib/gnatcoll_python/
 gnatcoll-any_types-python.ali
 gnatcoll-python.ali
 gnatcoll-scripts-python.ali
 libgnatcoll_python.a


[FILE:174:manifests/plist.readline]
include/gnatcoll_readline/
 gnatcoll-readline.adb
 gnatcoll-readline.ads
lib/gnat/gnatcoll_readline.gpr
lib/gnatcoll_readline/
 gnatcoll-readline.ali
 libgnatcoll_readline.a


[FILE:199:manifests/plist.syslog]
include/gnatcoll_syslog/
 gnatcoll-traces-syslog.adb
 gnatcoll-traces-syslog.ads
 syslog_support.c
lib/gnat/gnatcoll_syslog.gpr
lib/gnatcoll_syslog/
 gnatcoll-traces-syslog.ali
 libgnatcoll_syslog.a

