# Buildsheet autogenerated by ravenadm tool -- Do not edit.

NAMEBASE=		gdbm
VERSION=		1.25
KEYWORDS=		databases
VARIANTS=		std
SDESC[std]=		GNU database manager
HOMEPAGE=		http://www.gnu.org/software/gdbm/
CONTACT=		nobody

DOWNLOAD_GROUPS=	main
SITES[main]=		GNU/gdbm
DISTFILE[1]=		gdbm-1.25.tar.gz:main
DF_INDEX=		1
SPKGS[std]=		set
			primary
			dev
			tools
			nls
			man
			info

OPTIONS_AVAILABLE=	none
OPTIONS_STANDARD=	none

BUILD_DEPENDS=		readline:primary:std
EXRUN[tools]=		gdbm:primary:std
			readline:primary:std

USES=			gmake libtool solfix readline:build gettext mbsdfix

LICENSE=		GPLv2+:primary
LICENSE_TERMS=		primary:{{WRKDIR}}/TERMS
LICENSE_FILE=		GPLv2+:{{WRKSRC}}/COPYING
LICENSE_AWK=		TERMS:"Protection for multiple"
LICENSE_SOURCE=		TERMS:{{WRKSRC}}/src/gdbm.h.in
LICENSE_SCHEME=		solo

INFO=			info:gdbm
FPC_EQUIVALENT=		databases/gdbm
INFO_SUBDIR=		.

MUST_CONFIGURE=		gnu
CONFIGURE_ARGS=		--enable-libgdbm-compat
			--enable-static
			--enable-shared
			--enable-nls

INSTALL_TARGET=		install-strip
INSTALL_REQ_TOOLCHAIN=	yes
SOVERSION=		6.0.0

pre-configure:
	${REINPLACE_CMD} -e "s|LIBS = @LIBS@ -lc|LIBS = @LIBS@|" \
		-e "s|BINOWN = bin|BINOWN = root|" \
		-e "s|BINGRP = bin|BINGRP = wheel|" \
		-e "s|libgdbm.la libgdbm_compat.la|& gdbm.info|" \
			${WRKSRC}/Makefile.in

[FILE:226:descriptions/desc.primary]
The GNU dbm is a library of database functions that use extensible hashing
and works similar to the standard UNIX dbm functions.  These routines are
provided to a programmer needing to create and manipulate a hashed
database.


[FILE:34:descriptions/desc.tools]
This package contains gdbm tools.


[FILE:95:distinfo]
d02db3c5926ed877f8817b81cd1f92f53ef74ca8c6db543fbba0271b34f393ec      1224180 gdbm-1.25.tar.gz


[FILE:101:manifests/plist.primary]
lib/
 libgdbm.so.%%SOMAJOR%%
 libgdbm.so.%%SOVERSION%%
 libgdbm_compat.so.4
 libgdbm_compat.so.4.0.0


[FILE:97:manifests/plist.dev]
include/
 dbm.h
 gdbm.h
 ndbm.h
lib/
 libgdbm.a
 libgdbm.so
 libgdbm_compat.a
 libgdbm_compat.so


[FILE:37:manifests/plist.tools]
bin/
 gdbm_dump
 gdbm_load
 gdbmtool


[FILE:579:manifests/plist.nls]
share/locale/da/LC_MESSAGES/gdbm.mo
share/locale/de/LC_MESSAGES/gdbm.mo
share/locale/eo/LC_MESSAGES/gdbm.mo
share/locale/es/LC_MESSAGES/gdbm.mo
share/locale/fi/LC_MESSAGES/gdbm.mo
share/locale/fr/LC_MESSAGES/gdbm.mo
share/locale/ja/LC_MESSAGES/gdbm.mo
share/locale/ka/LC_MESSAGES/gdbm.mo
share/locale/pl/LC_MESSAGES/gdbm.mo
share/locale/pt_BR/LC_MESSAGES/gdbm.mo
share/locale/ro/LC_MESSAGES/gdbm.mo
share/locale/ru/LC_MESSAGES/gdbm.mo
share/locale/sr/LC_MESSAGES/gdbm.mo
share/locale/sv/LC_MESSAGES/gdbm.mo
share/locale/uk/LC_MESSAGES/gdbm.mo
share/locale/vi/LC_MESSAGES/gdbm.mo


[FILE:76:manifests/plist.man]
share/man/man1/
 gdbm_dump.1
 gdbm_load.1
 gdbmtool.1
share/man/man3/gdbm.3


[FILE:249:patches/patch-src_lock.c]
--- src/lock.c.orig	2025-03-06 16:24:09 UTC
+++ src/lock.c
@@ -43,6 +43,10 @@
 # endif
 #endif
 
+# ifndef ETIME
+#  define ETIME ETIMEDOUT 
+# endif
+
 #if defined(F_SETLK) && defined(F_RDLCK) && defined(F_WRLCK)
 # define HAVE_FCNTL_LOCK 1
 #else

