# Buildsheet autogenerated by ravenadm tool -- Do not edit.

NAMEBASE=		cscope
VERSION=		15.9
REVISION=		1
KEYWORDS=		devel
VARIANTS=		std
SDESC[std]=		C source code tree search and browse tool
HOMEPAGE=		https://cscope.sourceforge.net/
CONTACT=		nobody

DOWNLOAD_GROUPS=	main
SITES[main]=		SF/cscope/cscope/v15.9
DISTFILE[1]=		cscope-15.9.tar.gz:main
DF_INDEX=		1
SPKGS[std]=		single

OPTIONS_AVAILABLE=	none
OPTIONS_STANDARD=	none

USES=			cpe ncurses

LICENSE=		BSD3CLAUSE:single
LICENSE_FILE=		BSD3CLAUSE:{{WRKSRC}}/COPYING
LICENSE_SCHEME=		solo

FPC_EQUIVALENT=		devel/cscope

MUST_CONFIGURE=		gnu
CONFIGURE_ARGS=		--with-ncurses={{NCURSESBASE}}

post-patch:
	${REINPLACE_CMD} -e '/CURSES_LIBS=/ s/-lncurses/-lncurses -ltinfo/'\
		${WRKSRC}/configure
	${REINPLACE_CMD} -e 's|/usr/local|${PREFIX}|g' \
		${WRKSRC}/contrib/xcscope/cscope-indexer \
		${WRKSRC}/contrib/ocs

post-install:
	${MKDIR} ${STAGEDIR}${PREFIX}/share/emacs/site-lisp \
		${STAGEDIR}${PREFIX}/lib/xemacs/site-lisp
	${INSTALL_SCRIPT} ${WRKSRC}/contrib/xcscope/cscope-indexer \
		${STAGEDIR}${PREFIX}/bin
	${INSTALL_DATA} ${WRKSRC}/contrib/xcscope/xcscope.el \
		${STAGEDIR}${PREFIX}/share/emacs/site-lisp
	${LN} -sf ${PREFIX}/share/emacs/site-lisp/xcscope.el \
		${STAGEDIR}${PREFIX}/lib/xemacs/site-lisp

[FILE:307:descriptions/desc.single]
This port of SCO / USL's 'cscope' lets one easily navigate large C
programs. It's designed to answer questions like where symbols are
defined and used, where variables are assigned, and much more.

The Santa Cruz Operation (SCO) has made this available under a very
friendly, BSD-style Open Source License.


[FILE:97:distinfo]
c5505ae075a871a9cd8d9801859b0ff1c09782075df281c72c23e72115d9f159       613948 cscope-15.9.tar.gz


[FILE:126:manifests/plist.single]
bin/
 cscope
 cscope-indexer
 ocs
lib/xemacs/site-lisp/xcscope.el
share/emacs/site-lisp/xcscope.el
share/man/man1/cscope.1.gz


[FILE:396:patches/patch-configure]
--- configure.orig	2018-07-24 18:26:28 UTC
+++ configure
@@ -5758,7 +5758,7 @@ if test "${with_ncurses+set}" = set; the
 		search_ncurses=false
 	  elif test x$withval != xyes ; then
 		CURSES_LIBS="$LIBS -L$withval/lib -lncurses"
-		CURSES_INCLUDEDIR="-I$withval/include"
+		CURSES_INCLUDEDIR="-I$withval/include -I$withval/include/ncurses"
 		search_ncurses=false
 		screen_manager="ncurses"
 

