# Buildsheet autogenerated by ravenadm tool -- Do not edit.

NAMEBASE=		m4
VERSION=		1.4.19
REVISION=		2
KEYWORDS=		devel
VARIANTS=		std noprefix
SDESC[std]=		GNU implementation of the Unix macro processor
SDESC[noprefix]=	GNU macro processor with unprefixed program name
HOMEPAGE=		https://www.gnu.org/software/m4/m4.html
CONTACT=		nobody

DOWNLOAD_GROUPS=	main
SITES[main]=		GNU/m4
DISTFILE[1]=		m4-1.4.19.tar.xz:main
DF_INDEX=		1
SPKGS[std]=		set
			primary
			examples
			man
			info
SPKGS[noprefix]=	set
			primary
			examples
			man
			info
			nls

OPTIONS_AVAILABLE=	NOPREFIX
OPTIONS_STANDARD=	none
VOPTS[noprefix]=	NOPREFIX=ON

BUILD_DEPENDS=		libsigsegv:dev:std

USES=			cpe

LICENSE=		GPLv3+:primary
LICENSE_TERMS=		primary:{{WRKDIR}}/TERMS
LICENSE_FILE=		GPLv3+:{{WRKSRC}}/COPYING
LICENSE_AWK=		TERMS:"^\#include"
LICENSE_SOURCE=		TERMS:{{WRKSRC}}/src/m4.c
LICENSE_SCHEME=		solo

CPE_VENDOR=		gnu
FPC_EQUIVALENT=		devel/m4
INFO_SUBDIR=		.

MUST_CONFIGURE=		gnu
CONFIGURE_ARGS=		--with-libsigsegv-prefix={{LOCALBASE}}

[NOPREFIX].DESCRIPTION=			Build without prefixing all programs with "g"
[NOPREFIX].CONFIGURE_ARGS_OFF=		--program-prefix=g
					--disable-nls
[NOPREFIX].CONFIGURE_ARGS_ON=		--enable-nls
[NOPREFIX].INFO_OFF=			info:gm4
[NOPREFIX].INFO_ON=			info:m4
[NOPREFIX].USES_ON=			gettext:build

post-patch:
	${REINPLACE_CMD} -e '/^install-exec-am: / s| .*||' \
		${WRKSRC}/lib/Makefile.in
	# force static build
	${RM} ${LOCALBASE}/lib/libsigsegv.so

post-install:
	${MKDIR} ${STAGEDIR}${PREFIX}/share/examples/m4
	${INSTALL_DATA} ${WRKSRC}/examples/*.m4 \
		${STAGEDIR}${PREFIX}/share/examples/m4

post-patch-NOPREFIX-OFF:
	${REINPLACE_CMD} -e 's|/m4.info|/gm4.info|' ${WRKSRC}/doc/Makefile.in
.for EXT in info info-1 info-2
	${MV} ${WRKSRC}/doc/m4.${EXT} ${WRKSRC}/doc/gm4.${EXT}
.endfor

[FILE:839:descriptions/desc.primary]
GNU M4 is an implementation of the traditional Unix macro processor. It is
mostly SVR4 compatible although it has some extensions (for example, handling
more than 9 positional parameters to macros). GNU M4 also has built-in functions
for including files, running shell commands, doing arithmetic, etc.

GNU M4 is a macro processor in the sense that it copies its input to the output
expanding macros as it goes. Macros are either builtin or user-defined and can
take any number of arguments. Besides just doing macro expansion, m4 has builtin
functions for including named files, running UNIX commands, doing integer
arithmetic, manipulating text in various ways, recursion etc... m4 can be used
either as a front-end to a compiler or as a macro processor in its own right.

One of the biggest users of GNU M4 is the GNU Autoconf project.


[FILE:95:distinfo]
63aede5c6d33b6d9b13511cd0be2cac046f2e70fd0a07aa9573a04a82783af96      1654908 m4-1.4.19.tar.xz


[FILE:8:manifests/plist.primary.std]
bin/gm4


[FILE:21:manifests/plist.man.std]
share/man/man1/gm4.1


[FILE:7:manifests/plist.primary.noprefix]
bin/m4


[FILE:20:manifests/plist.man.noprefix]
share/man/man1/m4.1

