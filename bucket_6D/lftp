# Buildsheet autogenerated by ravenadm tool -- Do not edit.

NAMEBASE=		lftp
VERSION=		4.8.0
KEYWORDS=		ftp
VARIANTS=		standard
SDESC[standard]=	Command-line ftp client
HOMEPAGE=		http://lftp.tech/
CONTACT=		nobody

DOWNLOAD_GROUPS=	main
SITES[main]=		http://lftp.tech/ftp/
			http://lftp.tech/ftp/old/
			http://ftp.st.ryukoku.ac.jp/pub/network/ftp/lftp/
DISTFILE[1]=		lftp-4.8.0.tar.gz:main
DF_INDEX=		1
SPKGS[standard]=	single

OPTIONS_AVAILABLE=	none
OPTIONS_STANDARD=	none

BUILD_DEPENDS=		expat:static:standard
BUILDRUN_DEPENDS=	expat:shared:standard
			libidn2:primary:standard

USES=			charsetfix iconv libtool readline shebangfix
			gettext-tools gettext-runtime ssl zlib c++:single

LICENSE=		GPLv3:single
LICENSE_SCHEME=		solo
LICENSE_FILE=		GPLv3:{{WRKSRC}}/COPYING

FPC_EQUIVALENT=		ftp/lftp
SHEBANG_FILES=		src/verify-file
			src/convert-mozilla-cookies
			src/xdg-move

MUST_CONFIGURE=		gnu
CONFIGURE_ARGS=		--enable-nls
			--with-openssl={{OPENSSLBASE}}
			--with-readline={{PREFIX}}
			--with-zlib={{PREFIX}}

post-install:
	${MV} ${STAGEDIR}${PREFIX}/etc/lftp.conf \
		${STAGEDIR}${PREFIX}/etc/lftp.conf.sample

[FILE:385:descriptions/desc.single]
LFTP is a sophisticated file transfer program supporting a number of
network protocols (ftp, http, sftp, fish, torrent). Like BASH, it has job
control and uses the readline library for input. It has bookmarks, a
built-in mirror command, and can transfer several files in parallel. It was
designed with reliability in mind. LFTP is free software, distributed under
the GNU GPL license.


[FILE:96:distinfo]
25c0a77da3da606eeca0bc721249f2ae85885f49d03e0f0e778da193e23c72d8      2800410 lftp-4.8.0.tar.gz


[FILE:842:manifests/plist.single]
@sample etc/lftp.conf.sample
bin/
 lftp
 lftpget
lib/
 liblftp-jobs.a
 liblftp-tasks.a
share/applications/lftp.desktop
share/icons/hicolor/48x48/apps/lftp-icon.png
share/lftp/
 convert-mozilla-cookies
 import-ncftp
 import-netscape
 verify-file
 xdg-move
share/locale/cs/LC_MESSAGES/lftp.mo
share/locale/de/LC_MESSAGES/lftp.mo
share/locale/es/LC_MESSAGES/lftp.mo
share/locale/fr/LC_MESSAGES/lftp.mo
share/locale/it/LC_MESSAGES/lftp.mo
share/locale/ja/LC_MESSAGES/lftp.mo
share/locale/ko/LC_MESSAGES/lftp.mo
share/locale/pl/LC_MESSAGES/lftp.mo
share/locale/pt_BR/LC_MESSAGES/lftp.mo
share/locale/ru/LC_MESSAGES/lftp.mo
share/locale/uk/LC_MESSAGES/lftp.mo
share/locale/zh_CN/LC_MESSAGES/lftp.mo
share/locale/zh_HK/LC_MESSAGES/lftp.mo
share/locale/zh_TW/LC_MESSAGES/lftp.mo
share/man/man1/
 lftp.1.gz
 lftpget.1.gz
share/man/man5/lftp.conf.5.gz


[FILE:2923:patches/patch-doc_lftp.1]
--- doc/lftp.1.orig	2017-05-12 09:06:37 UTC
+++ doc/lftp.1
@@ -165,7 +165,7 @@ any command that accepts input URLs usin
 .Sp
 .in +0.5i
 .TS
-l	lx	.
+l	l	.
 add <name> [<loc>]	T{
 add current place or given location to bookmarks and bind to given name
 T}
@@ -184,7 +184,7 @@ The following subcommands are recognized
 .Sp
 .in +0.5i
 .TS
-l	lx	.
+l	l	.
 stat	print cache status (default)
 on|off	turn on/off caching
 flush	flush cache
@@ -392,7 +392,7 @@ instances of \fIrfile\fP (and \-o \fIlfi
 .Sp
 .in +0.5i
 .TS
-l	lx	.
+l	l	.
 \-c	continue, reget
 \-E	delete source files after successful transfer
 \-e	delete target file before the transfer
@@ -421,7 +421,7 @@ Transfer a single file. Options:
 .Sp
 .in +0.5i
 .TS
-l	lx	.
+l	l	.
 \-o <lfile>	T{
 destination file name (default - basename of rfile)
 T}
@@ -448,7 +448,7 @@ Glob given patterns containing metachara
 .Sp
 .in +0.5i
 .TS
-l	lx	.
+l	l	.
 \-f	plain files (default)
 \-d	directories
 \-a	all types
@@ -539,7 +539,7 @@ Gets selected files with expanded wildca
 .Sp
 .in +0.5i
 .TS
-l	lx	.
+l	l	.
 \-c	continue, reget.
 \-d	T{
 create directories the same as file names and get the files into them instead of current directory.
@@ -565,7 +565,7 @@ directory name. Source and/or target can
 .Sp
 .in +0.5i
 .TS
-l1	l	lx	.
+l1	l	l	.
 \-c,	\-\-continue	T{
 continue a mirror job if possible
 T}
@@ -819,7 +819,7 @@ local name as remote one. This can be ch
 .Sp
 .in +0.5i
 .TS
-l	lx	.
+l	l	.
 \-c	continue, reput
 \-d	T{
 create directories the same as in file names and put the files into them instead of current directory
@@ -907,7 +907,7 @@ Options:
 .Sp
 .in +0.5i
 .TS
-l	lx	.
+l	l	.
 \-c	T{
 continue transfer. Requires \fIlfile.lftp-pget-status\fP file.
 T}
@@ -932,7 +932,7 @@ of \fIlfile\fP is used as remote name. D
 .Sp
 .in +0.5i
 .TS
-l	lx	.
+l	l	.
 \-o <rfile>	T{
 specifies remote file name (default - basename of lfile)
 T}
@@ -990,7 +990,7 @@ destination is given.
 .Sp
 .in +0.5i
 .TS
-l	lx	.
+l	l	.
 \-q	Be quiet.
 \-v	Be verbose.
 \-Q	T{
@@ -1012,7 +1012,7 @@ Examples:
 .Sp
 .in +0.5i
 .TS
-l	lx	.
+l	l	.
 queue \-d 3	Delete the third item in the queue.
 queue \-m 6 4	T{
 Move the sixth item in the queue before the fourth.
@@ -1076,7 +1076,7 @@ Default delay is one second, default com
 .Sp
 .in +0.5i
 .TS
-l	lx	.
+l	l	.
 \-c <count>	maximum number of iterations
 \-d <delay>	delay between iterations
 \-\-while\-ok	stop when command exits with non-zero code
@@ -1124,7 +1124,7 @@ It can be changed by options:
 .Sp
 .in +0.5i
 .TS
-l	lx	.
+l	l	.
 \-a	list all settings, including default values
 \-d	list only default values, not necessary current ones
 .TE
@@ -1184,7 +1184,7 @@ Options:
 .Sp
 .in +0.5i
 .TS
-l	lx	.
+l	l	.
 \-O <directory>	T{
 specifies base directory where files should be placed
 T}
@@ -1462,7 +1462,7 @@ The following escapes are supported:
 .Sp
 .in +0.5i
 .TS
-l	lx	.
+l	l	.
 \\a	bell
 \\e	escape
 \\n	new line


[FILE:808:patches/patch-po_Makevars]
--- po/Makevars.orig	2017-04-21 20:45:54 UTC
+++ po/Makevars
@@ -53,3 +53,15 @@ MSGID_BUGS_ADDRESS = lftp-bugs@lftp.yar.
 # This is the list of locale categories, beyond LC_MESSAGES, for which the
 # message catalogs shall be used.  It is usually empty.
 EXTRA_LOCALE_CATEGORIES = 
+
+# This tells whether or not to regenerate a PO file when $(DOMAIN).pot
+# has changed.  Possible values are "yes" and "no".  Set this to no if
+# the POT file is checked in the repository and the version control
+# program ignores timestamps.
+PO_DEPENDS_ON_POT = yes
+
+# This tells whether or not to forcibly update $(DOMAIN).pot and
+# regenerate PO files on "make dist".  Possible values are "yes" and
+# "no".  Set this to no if the POT file and PO files are maintained
+# externally.
+DIST_DEPENDS_ON_UPDATE_PO = yes


[FILE:324:patches/patch-src_Makefile.in]
--- src/Makefile.in.orig	2017-07-10 12:41:37 UTC
+++ src/Makefile.in
@@ -2540,7 +2540,7 @@ info: info-am
 
 info-am:
 
-install-data-am: install-pkgdataSCRIPTS install-pkgverlibLTLIBRARIES
+install-data-am: install-pkgdataSCRIPTS
 	@$(NORMAL_INSTALL)
 	$(MAKE) $(AM_MAKEFLAGS) install-data-hook
 install-dvi: install-dvi-am


[FILE:391:patches/patch-src_lftp__ssl.cc]
--- src/lftp_ssl.cc.orig	2017-03-16 13:34:44 UTC
+++ src/lftp_ssl.cc
@@ -772,7 +772,7 @@ error:
 #elif USE_OPENSSL
 //static int lftp_ssl_passwd_callback(char *buf,int size,int rwflag,void *userdata);
 
-#if OPENSSL_VERSION_NUMBER < 0x10100000L
+#if OPENSSL_VERSION_NUMBER < 0x10100000L || LIBRESSL_VERSION_NUMBER
 // for compatibility with older versions
 X509_OBJECT *X509_OBJECT_new()
 {

