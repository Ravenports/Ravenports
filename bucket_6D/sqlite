# Buildsheet autogenerated by ravenadm tool -- Do not edit.

NAMEBASE=		sqlite
VERSION=		3.51.2
REVISION=		1
KEYWORDS=		databases
VARIANTS=		std editline
SDESC[std]=		SQL database engine library (GNU/readline)
SDESC[editline]=	SQL database engine library (BSD/editline)
HOMEPAGE=		https://www.sqlite.org/
CONTACT=		nobody

DOWNLOAD_GROUPS=	main
SITES[main]=		https://www.sqlite.org/2026/
			http://www2.sqlite.org/2026/
			http://www3.sqlite.org/2026/
DISTFILE[1]=		sqlite-autoconf-3510200.tar.gz:main
DF_INDEX=		1
SPKGS[std]=		set
			primary
			dev
			man
SPKGS[editline]=	set
			primary
			dev
			man

OPTIONS_AVAILABLE=	SKIP_READLINE EDITLINE
OPTIONS_STANDARD=	none
VOPTS[editline]=	SKIP_READLINE=ON EDITLINE=ON

USES=			cpe libtool ncurses

DISTNAME=		sqlite-autoconf-3510200

LICENSE=		PUBDOM:primary
LICENSE_FILE=		PUBDOM:{{WRKDIR}}/LICENSE
LICENSE_AWK=		PUBDOM:"\*\*\*\*\*"
LICENSE_SOURCE=		PUBDOM:{{WRKSRC}}/sqlite3.h
LICENSE_SCHEME=		solo

FPC_EQUIVALENT=		databases/sqlite3

MUST_CONFIGURE=		gnu
CONFIGURE_ARGS=		--enable-threadsafe
			--soname=legacy
			--fts3
			--fts4
			--fts5

SINGLE_JOB=		yes

SOVERSION=		3.51.2

CPPFLAGS=		-DSQLITE_ENABLE_FTS3
			-DSQLITE_ENABLE_FTS3_TOKENIZER=1
			-DSQLITE_ENABLE_FTS3_PARENTHESIS=1
			-DSQLITE_ENABLE_UNLOCK_NOTIFY=1
			-DSQLITE_ENABLE_DBSTAT_VTAB=1
			-DSQLITE_ENABLE_COLUMN_METADATA=1
			-DSQLITE_SECURE_DELETE=1
			-DSQLITE_USE_URI=1
LDFLAGS=		-lpthread
			-lm

[EDITLINE].DESCRIPTION=			Build with editline shell history
[EDITLINE].BUILDRUN_DEPENDS_ON=		libedit:primary:std
[EDITLINE].BUILD_DEPENDS_ON=		libedit:dev:std
[EDITLINE].CONFIGURE_ARGS_ON=		--enable-editline

[SKIP_READLINE].DESCRIPTION=		Don't build with readline shell history
[SKIP_READLINE].CONFIGURE_ARGS_OFF=	--enable-readline
[SKIP_READLINE].CONFIGURE_ARGS_ON=	--disable-readline
[SKIP_READLINE].USES_OFF=		readline

post-install:
	${RM} ${STAGEDIR}${PREFIX}/include/msvc.h
	${STRIP_CMD} ${STAGEDIR}${PREFIX}/lib/libsqlite3.so
	${STRIP_CMD} ${STAGEDIR}${PREFIX}/bin/sqlite3

[FILE:352:descriptions/desc.primary]
SQLite is an SQL database engine in a C library. Programs that link the
SQLite library can have SQL database access without running a separate
RDBMS process. The distribution comes with a standalone command-line
access program (sqlite3) that can be used to administer an SQLite database
and which serves as an example of how to use the SQLite library.


[FILE:109:distinfo]
fbd89f866b1403bb66a143065440089dd76100f2238314d92274a082d4f2b7bb      3208444 sqlite-autoconf-3510200.tar.gz


[FILE:63:manifests/plist.primary]
bin/sqlite3
lib/
 libsqlite3.so.0
 libsqlite3.so.%%SOVERSION%%


[FILE:93:manifests/plist.dev]
include/
 sqlite3.h
 sqlite3ext.h
lib/
 libsqlite3.a
 libsqlite3.so
lib/pkgconfig/sqlite3.pc


[FILE:25:manifests/plist.man]
share/man/man1/sqlite3.1


[FILE:782:sunos/patch-autosetup_proj.tcl]
Sunos link complains when -Wl,-soname is applied to an executable
rather than a library.  The test is bad!!  Force test success.

--- autosetup/proj.tcl.orig	2025-11-28 17:50:50 UTC
+++ autosetup/proj.tcl
@@ -1196,17 +1196,8 @@ proc proj-check-rpath {} {
 #
 proc proj-check-soname {{libname "libfoo.so.0"}} {
   cc-with {-link 1} {
-    if {[cc-check-flags "-Wl,-soname,${libname}"]} {
-      define LDFLAGS_SONAME_PREFIX "-Wl,-soname,"
-      return 1
-    } elseif {[cc-check-flags "-Wl,+h,${libname}"]} {
-      # HP-UX: https://sqlite.org/forum/forumpost/d80ecdaddd
-      define LDFLAGS_SONAME_PREFIX "-Wl,+h,"
-      return 1
-    } else {
-      define LDFLAGS_SONAME_PREFIX ""
-      return 0
-    }
+    define LDFLAGS_SONAME_PREFIX "-Wl,-soname,"
+    return 1
   }
 }
 

