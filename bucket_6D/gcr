# Buildsheet autogenerated by ravenadm tool -- Do not edit.

NAMEBASE=		gcr
VERSION=		3.36
REVISION=		1
KEYWORDS=		security
VARIANTS=		standard
SDESC[standard]=	Library for bits of crypto UI and parsing
HOMEPAGE=		https://github.com/GNOME/gcr
CONTACT=		Michael_Reim[kraileth@elderlinux.org]

DOWNLOAD_GROUPS=	main
SITES[main]=		GITHUB/GNOME:gcr:3.36
DISTFILE[1]=		generated:main
DF_INDEX=		1
SPKGS[standard]=	complete
			primary
			docs

OPTIONS_AVAILABLE=	none
OPTIONS_STANDARD=	none

BUILD_DEPENDS=		gtk-doc:single:standard
			libtool:single:standard
			intltool:single:standard
			vala:single:standard
BUILDRUN_DEPENDS=	dbus:single:standard
			libgcrypt:single:standard
			libtasn1:primary:standard
			p11-kit:primary:standard

USES=			gettext-tools gmake libtool pkgconfig
			autoreconf:build schemas:primary
			desktop-utils:primary mime-info:primary
			solaris-funcs
GNOME_COMPONENTS=	gtk3 introspection

LICENSE=		LGPL21+:primary
LICENSE_TERMS=		primary:{{WRKDIR}}/TERMS
LICENSE_FILE=		LGPL21+:{{WRKSRC}}/COPYING
LICENSE_AWK=		TERMS:"^$$"
LICENSE_SOURCE=		TERMS:{{WRKSRC}}/gcr/gcr.h
LICENSE_SCHEME=		solo

FPC_EQUIVALENT=		security/gcr
GLIB_SCHEMAS=		org.gnome.crypto.pgp.gschema.xml
SOL_FUNCTIONS=		err.h:err.h
			timegm:gck/gck-slot.c

MUST_CONFIGURE=		gnu
CONFIGURE_ARGS=		--enable-gtk-doc
			--enable-debug=no
			--disable-valgrind
			--disable-dependency-tracking

INSTALL_TARGET=		install-strip
INSTALL_REQ_TOOLCHAIN=	yes
PLIST_SUB=		GCK_SOVER=0.0.0
			GCK_SOMAJOR=0
			GCR_SOVER=1.0.0
			GCR_SOMAJOR=1
			GCRBASE_SOVER=1.0.0
			GCRBASE_SOMAJOR=1
			GCRUI_SOVER=1.0.0
			GCRUI_SOMAJOR=1

post-patch:
	# timegm compat function untested by upstream in all cases
	${REINPLACE_CMD} -e 's|"egg/egg-timegm.h"|<time.h>|' \
		${WRKSRC}/gck/gck-slot.c

post-install:
	${MV} ${STAGEDIR}${PREFIX}/share/gtk-doc/html/gck \
		${STAGEDIR}${PREFIX}/share/doc/gck
	${MV} ${STAGEDIR}${PREFIX}/share/gtk-doc/html/gcr-3 \
		${STAGEDIR}${PREFIX}/share/doc/gcr-3
	${RM} -r ${STAGEDIR}${PREFIX}/share/gtk-doc

pre-configure:
	cd ${WRKSRC} && env NOCONFIGURE=1 ${SH} autogen.sh

[FILE:272:descriptions/desc.primary]
GCR is a library for displaying certificates and crypto UI, accessing key 
stores. It also allows accessing PKCS#11 modules like smart cards in a 
G(object)-oriented way and provides the viewer for crypto files on the 
GNOME desktop. It was splitt off from gnome-keyring.


[FILE:100:distinfo]
8cf88429f6852344629f654281081c377b2f81bac6362f24043e7e8e2181e830      2214674 GNOME-gcr-3.36.tar.gz


[FILE:6032:manifests/plist.primary]
bin/gcr-viewer
include/gck-1/gck/
 gck-deprecated.h
 gck-enum-types.h
 gck-version.h
 gck.h
 pkcs11.h
 pkcs11n.h
 pkcs11x.h
include/gcr-3/gcr/
 gcr-base.h
 gcr-certificate-chain.h
 gcr-certificate-request.h
 gcr-certificate.h
 gcr-collection.h
 gcr-column.h
 gcr-comparable.h
 gcr-deprecated-base.h
 gcr-enum-types-base.h
 gcr-filter-collection.h
 gcr-fingerprint.h
 gcr-icons.h
 gcr-import-interaction.h
 gcr-importer.h
 gcr-library.h
 gcr-mock-prompter.h
 gcr-parser.h
 gcr-pkcs11-certificate.h
 gcr-prompt.h
 gcr-secret-exchange.h
 gcr-secure-memory.h
 gcr-simple-certificate.h
 gcr-simple-collection.h
 gcr-ssh-askpass.h
 gcr-system-prompt.h
 gcr-system-prompter.h
 gcr-trust.h
 gcr-types.h
 gcr-union-collection.h
 gcr-unlock-options.h
 gcr-version.h
 gcr.h
include/gcr-3/ui/
 gcr-certificate-basics-widget.h
 gcr-certificate-details-widget.h
 gcr-certificate-renderer.h
 gcr-certificate-widget.h
 gcr-collection-model.h
 gcr-combo-selector.h
 gcr-deprecated.h
 gcr-enum-types.h
 gcr-failure-renderer.h
 gcr-import-button.h
 gcr-key-renderer.h
 gcr-key-widget.h
 gcr-list-selector.h
 gcr-prompt-dialog.h
 gcr-renderer.h
 gcr-secure-entry-buffer.h
 gcr-tree-selector.h
 gcr-ui.h
 gcr-unlock-options-widget.h
 gcr-viewer-widget.h
 gcr-viewer.h
lib/
 libgck-1.so
 libgck-1.so.%%GCK_SOMAJOR%%
 libgck-1.so.%%GCK_SOVER%%
 libgcr-3.so
 libgcr-3.so.%%GCR_SOMAJOR%%
 libgcr-3.so.%%GCR_SOVER%%
 libgcr-base-3.so
 libgcr-base-3.so.%%GCRBASE_SOMAJOR%%
 libgcr-base-3.so.%%GCRBASE_SOVER%%
 libgcr-ui-3.so
 libgcr-ui-3.so.%%GCRUI_SOMAJOR%%
 libgcr-ui-3.so.%%GCRUI_SOVER%%
lib/girepository-1.0/
 Gck-1.typelib
 Gcr-3.typelib
 GcrUi-3.typelib
lib/pkgconfig/
 gck-1.pc
 gcr-3.pc
 gcr-base-3.pc
 gcr-ui-3.pc
libexec/
 gcr-prompter
 gcr-ssh-askpass
share/GConf/gsettings/
 org.gnome.crypto.pgp.convert
 org.gnome.crypto.pgp_keyservers.convert
share/applications/
 gcr-prompter.desktop
 gcr-viewer.desktop
share/dbus-1/services/
 org.gnome.keyring.PrivatePrompter.service
 org.gnome.keyring.SystemPrompter.service
share/gir-1.0/
 Gck-1.gir
 Gcr-3.gir
 GcrUi-3.gir
share/icons/hicolor/16x16/apps/
 gcr-gnupg.png
 gcr-key-pair.png
 gcr-key.png
 gcr-password.png
 gcr-smart-card.png
share/icons/hicolor/22x22/apps/
 gcr-gnupg.png
 gcr-key-pair.png
 gcr-key.png
 gcr-password.png
 gcr-smart-card.png
share/icons/hicolor/24x24/apps/
 gcr-gnupg.png
 gcr-key-pair.png
 gcr-key.png
 gcr-password.png
 gcr-smart-card.png
share/icons/hicolor/256x256/apps/
 gcr-gnupg.png
 gcr-password.png
 gcr-smart-card.png
share/icons/hicolor/32x32/apps/
 gcr-gnupg.png
 gcr-key-pair.png
 gcr-key.png
 gcr-password.png
 gcr-smart-card.png
share/icons/hicolor/48x48/apps/
 gcr-gnupg.png
 gcr-key-pair.png
 gcr-key.png
 gcr-password.png
 gcr-smart-card.png
share/locale/af/LC_MESSAGES/gcr.mo
share/locale/ar/LC_MESSAGES/gcr.mo
share/locale/as/LC_MESSAGES/gcr.mo
share/locale/ast/LC_MESSAGES/gcr.mo
share/locale/az/LC_MESSAGES/gcr.mo
share/locale/be/LC_MESSAGES/gcr.mo
share/locale/be@latin/LC_MESSAGES/gcr.mo
share/locale/bg/LC_MESSAGES/gcr.mo
share/locale/bn/LC_MESSAGES/gcr.mo
share/locale/bn_IN/LC_MESSAGES/gcr.mo
share/locale/bs/LC_MESSAGES/gcr.mo
share/locale/ca/LC_MESSAGES/gcr.mo
share/locale/ca@valencia/LC_MESSAGES/gcr.mo
share/locale/ckb/LC_MESSAGES/gcr.mo
share/locale/cs/LC_MESSAGES/gcr.mo
share/locale/cy/LC_MESSAGES/gcr.mo
share/locale/da/LC_MESSAGES/gcr.mo
share/locale/de/LC_MESSAGES/gcr.mo
share/locale/dz/LC_MESSAGES/gcr.mo
share/locale/el/LC_MESSAGES/gcr.mo
share/locale/en@shaw/LC_MESSAGES/gcr.mo
share/locale/en_CA/LC_MESSAGES/gcr.mo
share/locale/en_GB/LC_MESSAGES/gcr.mo
share/locale/eo/LC_MESSAGES/gcr.mo
share/locale/es/LC_MESSAGES/gcr.mo
share/locale/et/LC_MESSAGES/gcr.mo
share/locale/eu/LC_MESSAGES/gcr.mo
share/locale/fa/LC_MESSAGES/gcr.mo
share/locale/fi/LC_MESSAGES/gcr.mo
share/locale/fr/LC_MESSAGES/gcr.mo
share/locale/fur/LC_MESSAGES/gcr.mo
share/locale/ga/LC_MESSAGES/gcr.mo
share/locale/gl/LC_MESSAGES/gcr.mo
share/locale/gu/LC_MESSAGES/gcr.mo
share/locale/he/LC_MESSAGES/gcr.mo
share/locale/hi/LC_MESSAGES/gcr.mo
share/locale/hr/LC_MESSAGES/gcr.mo
share/locale/hu/LC_MESSAGES/gcr.mo
share/locale/id/LC_MESSAGES/gcr.mo
share/locale/is/LC_MESSAGES/gcr.mo
share/locale/it/LC_MESSAGES/gcr.mo
share/locale/ja/LC_MESSAGES/gcr.mo
share/locale/ka/LC_MESSAGES/gcr.mo
share/locale/kk/LC_MESSAGES/gcr.mo
share/locale/kn/LC_MESSAGES/gcr.mo
share/locale/ko/LC_MESSAGES/gcr.mo
share/locale/lt/LC_MESSAGES/gcr.mo
share/locale/lv/LC_MESSAGES/gcr.mo
share/locale/mai/LC_MESSAGES/gcr.mo
share/locale/mg/LC_MESSAGES/gcr.mo
share/locale/mk/LC_MESSAGES/gcr.mo
share/locale/ml/LC_MESSAGES/gcr.mo
share/locale/mn/LC_MESSAGES/gcr.mo
share/locale/mr/LC_MESSAGES/gcr.mo
share/locale/ms/LC_MESSAGES/gcr.mo
share/locale/nb/LC_MESSAGES/gcr.mo
share/locale/ne/LC_MESSAGES/gcr.mo
share/locale/nl/LC_MESSAGES/gcr.mo
share/locale/nn/LC_MESSAGES/gcr.mo
share/locale/oc/LC_MESSAGES/gcr.mo
share/locale/or/LC_MESSAGES/gcr.mo
share/locale/pa/LC_MESSAGES/gcr.mo
share/locale/pl/LC_MESSAGES/gcr.mo
share/locale/pt/LC_MESSAGES/gcr.mo
share/locale/pt_BR/LC_MESSAGES/gcr.mo
share/locale/ro/LC_MESSAGES/gcr.mo
share/locale/ru/LC_MESSAGES/gcr.mo
share/locale/rw/LC_MESSAGES/gcr.mo
share/locale/si/LC_MESSAGES/gcr.mo
share/locale/sk/LC_MESSAGES/gcr.mo
share/locale/sl/LC_MESSAGES/gcr.mo
share/locale/sq/LC_MESSAGES/gcr.mo
share/locale/sr/LC_MESSAGES/gcr.mo
share/locale/sr@latin/LC_MESSAGES/gcr.mo
share/locale/sv/LC_MESSAGES/gcr.mo
share/locale/ta/LC_MESSAGES/gcr.mo
share/locale/te/LC_MESSAGES/gcr.mo
share/locale/tg/LC_MESSAGES/gcr.mo
share/locale/th/LC_MESSAGES/gcr.mo
share/locale/tr/LC_MESSAGES/gcr.mo
share/locale/ug/LC_MESSAGES/gcr.mo
share/locale/uk/LC_MESSAGES/gcr.mo
share/locale/vi/LC_MESSAGES/gcr.mo
share/locale/xh/LC_MESSAGES/gcr.mo
share/locale/zh_CN/LC_MESSAGES/gcr.mo
share/locale/zh_HK/LC_MESSAGES/gcr.mo
share/locale/zh_TW/LC_MESSAGES/gcr.mo
share/mime/packages/gcr-crypto-types.xml
share/vala/vapi/
 gck-1.deps
 gck-1.vapi
 gcr-3.deps
 gcr-3.vapi
 gcr-ui-3.deps
 gcr-ui-3.vapi
 pkcs11.vapi
@glib-schemas share/glib-2.0/schemas/org.gnome.crypto.pgp.gschema.xml


[FILE:1690:manifests/plist.docs]
share/doc/gck/
 GckAttributes.html
 GckEnumerator.html
 GckModule.html
 GckObject.html
 GckObjectCache.html
 GckSession.html
 GckSlot.html
 annotation-glossary.html
 gck-Errors.html
 gck-GckAttribute.html
 gck-GckModule-lists.html
 gck-Library-Utilities.html
 gck-Miscellaneous-Functions.html
 gck-PKCS11-URIs.html
 home.png
 index.html
 left-insensitive.png
 left.png
 pkcs11-links.html
 reference.html
 right-insensitive.png
 right.png
 style.css
 up-insensitive.png
 up.png
share/doc/gcr-3/
 GcrCertificate.html
 GcrCertificateChain.html
 GcrCertificateWidget.html
 GcrCollection.html
 GcrCollectionModel.html
 GcrComboSelector.html
 GcrComparable.html
 GcrImportButton.html
 GcrImporter.html
 GcrKeyWidget.html
 GcrListSelector.html
 GcrParser.html
 GcrPkcs11Certificate.html
 GcrPrompt.html
 GcrPromptDialog.html
 GcrRenderer.html
 GcrSecretExchange.html
 GcrSecureEntryBuffer.html
 GcrSimpleCertificate.html
 GcrSimpleCollection.html
 GcrSystemPrompt.html
 GcrSystemPrompter.html
 GcrTreeSelector.html
 GcrViewer.html
 GcrViewerWidget.html
 annotation-glossary.html
 certificate-widget.png
 certificates.html
 ch01.html
 collections.html
 combo-selector.png
 gcr-GcrCertificateRequest.html
 gcr-GcrColumn.html
 gcr-GcrImportInteraction.html
 gcr-GcrSshAskpass.html
 gcr-Key-Fingerprints.html
 gcr-Library-PKCS#11.html
 gcr-Library-Utilities.html
 gcr-Non-pageable-Memory.html
 gcr-Trust-Storage-and-Lookups.html
 home.png
 import-button.png
 index.html
 key-widget.png
 left-insensitive.png
 left.png
 list-selector.png
 misc.html
 prompts.html
 right-insensitive.png
 right.png
 storage.html
 style.css
 tree-selector.png
 up-insensitive.png
 up.png
 viewer-widget.png
 widgets.html


[FILE:458:patches/patch-gcr_test-secure-memory.c]
--- gcr/test-secure-memory.c.orig	2019-10-14 15:36:19 UTC
+++ gcr/test-secure-memory.c
@@ -55,6 +55,10 @@ extern int egg_secure_warnings;
 static gsize
 get_rlimit_memlock (void)
 {
+#ifdef __sun__
+	g_test_skip ("test unsupported on solaris");
+	return 0;
+#else
 	struct rlimit memlock;
 
 	/* If the test program is running as a privileged user, it is
@@ -83,6 +87,7 @@ get_rlimit_memlock (void)
 	}
 
 	return memlock.rlim_cur;
+#endif
 }
 
 static void


[FILE:594:patches/patch-ui_Makefile.am]
--- ui/Makefile.am.orig	2019-10-14 15:36:19 UTC
+++ ui/Makefile.am
@@ -201,7 +201,6 @@ gcr_viewer_CFLAGS = \
 
 gcr_viewer_LDADD = \
 	libgcr-ui-$(GCR_MAJOR).la \
-	libgcr-base-$(GCR_MAJOR).la \
 	libgck-@GCK_MAJOR@.la \
 	$(GLIB_LIBS) \
 	$(GTK_LIBS)
@@ -224,7 +223,6 @@ gcr_prompter_CFLAGS = \
 
 gcr_prompter_LDADD = \
 	libgcr-ui-$(GCR_MAJOR).la \
-	libgcr-base-$(GCR_MAJOR).la \
 	libgck-@GCK_MAJOR@.la \
 	$(GTK_LIBS)
 
@@ -292,7 +290,6 @@ ui_CFLAGS = \
 
 ui_LIBS = \
 	libgcr-ui-@GCR_MAJOR@.la \
-	libgcr-base-@GCR_MAJOR@.la \
 	libegg.la \
 	libgck-testable.la \
 	$(LIBGCRYPT_LIBS) \

