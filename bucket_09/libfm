# Buildsheet autogenerated by ravenadm tool -- Do not edit.

NAMEBASE=		libfm
VERSION=		1.3.2
REVISION=		1
KEYWORDS=		x11
VARIANTS=		std
SDESC[std]=		Core library of PCManFM file manager
HOMEPAGE=		https://github.com/lxde/libfm
CONTACT=		nobody

DOWNLOAD_GROUPS=	main
SITES[main]=		SF/pcmanfm/PCManFM%20%2B%20Libfm%20%28tarball%20release%29/LibFM/
DISTFILE[1]=		libfm-1.3.2.tar.xz:main
DF_INDEX=		1
SPKGS[std]=		set
			primary
			dev
			nls
			man

OPTIONS_AVAILABLE=	none
OPTIONS_STANDARD=	none

BUILD_DEPENDS=		vala:primary:std
			perl-XML-Parser:single:perl_default
			harfbuzz:dev:std
			libexif:dev:std
BUILDRUN_DEPENDS=	menu-cache:single:std
			libexif:primary:std

USES=			gmake libtool fontconfig pkgconfig mbsdfix
			desktop-utils:primary mime-info:primary
GNOME_COMPONENTS=	glib intltool gtk3 cairo gdkpixbuf

LICENSE=		LGPL21+:primary
LICENSE_TERMS=		primary:{{WRKDIR}}/TERMS
LICENSE_FILE=		LGPL21+:stock
LICENSE_AWK=		TERMS:"^$$"
LICENSE_SOURCE=		TERMS:{{WRKSRC}}/src/fm.h
LICENSE_SCHEME=		solo

FPC_EQUIVALENT=		x11/libfm

MUST_CONFIGURE=		gnu
CONFIGURE_ARGS=		--sysconfdir={{LOCALBASE}}/etc
			--disable-static
			--with-gtk=3
			--enable-nls

INSTALL_TARGET=		install-strip
INSTALL_REQ_TOOLCHAIN=	yes
SOVERSION=		4.1.3

CFLAGS=			-Wno-deprecated-declarations

post-patch:
	${REINPLACE_CMD} -e 's|^[[:blank:]]\{5,\}USE_NLS=yes|#&|' \
		${WRKSRC}/configure
	${REINPLACE_CMD} -e '/^pkgincludedir/s|-@FMLIBVER@||; \
		/@LN_S@ @PACKAGE@-@FMLIBVER@/d' \
		${WRKSRC}/src/Makefile.in
	${REINPLACE_CMD} -e 's|DATA = libfm-extra.pc|DATA =|' \
		${WRKSRC}/Makefile.in
	${REINPLACE_CMD} -e '/^LIBFM_EXTRA_INCLUDES/,+4 s|^|@EXTRALIB_ONLY_TRUE@|; \
		/FALSE@lib_LTLIBRARIES/s| libfm-extra.la||; \
		s|libfm-extra.la \\|-lfm-extra \\|' \
		${WRKSRC}/src/Makefile.in
	${REINPLACE_CMD} -e 's|-@FMLIBVER@||' ${WRKSRC}/src/actions/Makefile.in
	${REINPLACE_CMD} -e '/^vfs_menu_la_DEPENDENCIES/{s| \\||;n;d;}; \
		/^vfs_menu_la_LIBADD/s|$$(top.*|-lfm-extra|' \
		${WRKSRC}/src/modules/Makefile.in

post-install:
	${INSTALL_DATA} ${WRKSRC}/src/actions/fm-actions.h \
		${STAGEDIR}${PREFIX}/include/libfm
	${MV} ${STAGEDIR}${PREFIX}/etc/xdg/libfm/libfm.conf \
		${STAGEDIR}${PREFIX}/etc/xdg/libfm/libfm.conf.sample

[FILE:207:descriptions/desc.primary]
The PCMan File Manager (PCManFM) is a file manager application developed
by Hong Jen Yee from Taiwan which is meant to be a replacement for
Nautilus, Konqueror and Thunar.

The is the core library of PCMan.


[FILE:97:distinfo]
a5042630304cf8e5d8cff9d565c6bd546f228b48c960153ed366a34e87cad1e5       945532 libfm-1.3.2.tar.xz


[FILE:646:manifests/plist.primary]
@sample etc/xdg/libfm/libfm.conf.sample
bin/
 libfm-pref-apps
 lxshortcut
lib/
 libfm-gtk3.so.%%SOMAJOR%%
 libfm-gtk3.so.%%SOVERSION%%
 libfm.so.%%SOMAJOR%%
 libfm.so.%%SOVERSION%%
lib/libfm/modules/
 gtk-fileprop-x-desktop.so
 gtk-fileprop-x-shortcut.so
 gtk-menu-actions.so
 gtk-menu-trash.so
 vfs-menu.so
 vfs-search.so
share/applications/
 libfm-pref-apps.desktop
 lxshortcut.desktop
share/libfm/
 archivers.list
 terminals.list
share/libfm/images/
 folder.png
 unknown.png
share/libfm/ui/
 app-chooser.ui
 ask-rename.ui
 choose-icon.ui
 exec-file.ui
 file-prop.ui
 filesearch.ui
 preferred-apps.ui
 progress.ui
share/mime/packages/libfm.xml


[FILE:1250:manifests/plist.dev]
include/libfm/
 fm-action.h
 fm-actions.h
 fm-app-chooser-combo-box.h
 fm-app-chooser-dlg.h
 fm-app-info.h
 fm-app-menu-view.h
 fm-archiver.h
 fm-bookmarks.h
 fm-cell-renderer-pixbuf.h
 fm-cell-renderer-text.h
 fm-clipboard.h
 fm-config.h
 fm-deep-count-job.h
 fm-dir-list-job.h
 fm-dir-tree-model.h
 fm-dir-tree-view.h
 fm-dnd-auto-scroll.h
 fm-dnd-dest.h
 fm-dnd-src.h
 fm-dummy-monitor.h
 fm-file-info-job.h
 fm-file-info.h
 fm-file-launcher.h
 fm-file-menu.h
 fm-file-ops-job-change-attr.h
 fm-file-ops-job-delete.h
 fm-file-ops-job-xfer.h
 fm-file-ops-job.h
 fm-file-properties.h
 fm-file.h
 fm-folder-config.h
 fm-folder-model.h
 fm-folder-view.h
 fm-folder.h
 fm-gtk-file-launcher.h
 fm-gtk-marshal.h
 fm-gtk-utils.h
 fm-gtk.h
 fm-icon-pixbuf.h
 fm-icon.h
 fm-job.h
 fm-list.h
 fm-marshal.h
 fm-menu-tool-item.h
 fm-mime-type.h
 fm-module.h
 fm-monitor.h
 fm-nav-history.h
 fm-path-bar.h
 fm-path-entry.h
 fm-path.h
 fm-places-model.h
 fm-places-view.h
 fm-progress-dlg.h
 fm-seal.h
 fm-side-pane.h
 fm-simple-job.h
 fm-sortable.h
 fm-standard-view.h
 fm-tab-label.h
 fm-templates.h
 fm-terminal.h
 fm-thumbnail-loader.h
 fm-thumbnail.h
 fm-thumbnailer.h
 fm-utils.h
 fm.h
lib/
 libfm-gtk3.so
 libfm.so
lib/pkgconfig/
 libfm-gtk3.pc
 libfm.pc


[FILE:2210:manifests/plist.nls]
share/locale/af/LC_MESSAGES/libfm.mo
share/locale/ar/LC_MESSAGES/libfm.mo
share/locale/be/LC_MESSAGES/libfm.mo
share/locale/bg/LC_MESSAGES/libfm.mo
share/locale/bn/LC_MESSAGES/libfm.mo
share/locale/bn_IN/LC_MESSAGES/libfm.mo
share/locale/ca/LC_MESSAGES/libfm.mo
share/locale/cs/LC_MESSAGES/libfm.mo
share/locale/da/LC_MESSAGES/libfm.mo
share/locale/de/LC_MESSAGES/libfm.mo
share/locale/el/LC_MESSAGES/libfm.mo
share/locale/en_GB/LC_MESSAGES/libfm.mo
share/locale/es/LC_MESSAGES/libfm.mo
share/locale/et/LC_MESSAGES/libfm.mo
share/locale/eu/LC_MESSAGES/libfm.mo
share/locale/fa/LC_MESSAGES/libfm.mo
share/locale/fi/LC_MESSAGES/libfm.mo
share/locale/fo/LC_MESSAGES/libfm.mo
share/locale/fr/LC_MESSAGES/libfm.mo
share/locale/gl/LC_MESSAGES/libfm.mo
share/locale/he/LC_MESSAGES/libfm.mo
share/locale/hr/LC_MESSAGES/libfm.mo
share/locale/hu/LC_MESSAGES/libfm.mo
share/locale/id/LC_MESSAGES/libfm.mo
share/locale/is/LC_MESSAGES/libfm.mo
share/locale/it/LC_MESSAGES/libfm.mo
share/locale/ja/LC_MESSAGES/libfm.mo
share/locale/kk/LC_MESSAGES/libfm.mo
share/locale/ko/LC_MESSAGES/libfm.mo
share/locale/lg/LC_MESSAGES/libfm.mo
share/locale/lt/LC_MESSAGES/libfm.mo
share/locale/ml/LC_MESSAGES/libfm.mo
share/locale/ms/LC_MESSAGES/libfm.mo
share/locale/nb/LC_MESSAGES/libfm.mo
share/locale/nl/LC_MESSAGES/libfm.mo
share/locale/nn/LC_MESSAGES/libfm.mo
share/locale/pa/LC_MESSAGES/libfm.mo
share/locale/pl/LC_MESSAGES/libfm.mo
share/locale/ps/LC_MESSAGES/libfm.mo
share/locale/pt/LC_MESSAGES/libfm.mo
share/locale/pt_BR/LC_MESSAGES/libfm.mo
share/locale/ro/LC_MESSAGES/libfm.mo
share/locale/ru/LC_MESSAGES/libfm.mo
share/locale/sk/LC_MESSAGES/libfm.mo
share/locale/sl/LC_MESSAGES/libfm.mo
share/locale/sr/LC_MESSAGES/libfm.mo
share/locale/sr@latin/LC_MESSAGES/libfm.mo
share/locale/sv/LC_MESSAGES/libfm.mo
share/locale/te/LC_MESSAGES/libfm.mo
share/locale/th/LC_MESSAGES/libfm.mo
share/locale/tr/LC_MESSAGES/libfm.mo
share/locale/tt_RU/LC_MESSAGES/libfm.mo
share/locale/ug/LC_MESSAGES/libfm.mo
share/locale/uk/LC_MESSAGES/libfm.mo
share/locale/ur/LC_MESSAGES/libfm.mo
share/locale/ur_PK/LC_MESSAGES/libfm.mo
share/locale/vi/LC_MESSAGES/libfm.mo
share/locale/zh_CN/LC_MESSAGES/libfm.mo
share/locale/zh_TW/LC_MESSAGES/libfm.mo


[FILE:49:manifests/plist.man]
share/man/man1/
 libfm-pref-apps.1
 lxshortcut.1


[FILE:419:patches/patch-src_actions_action.c]
--- src/actions/action.c.orig	2018-04-16 19:26:29 UTC
+++ src/actions/action.c
@@ -2047,7 +2047,7 @@ void fm_load_all_actions (void) {
 	gchar* _tmp9_ = NULL;
 	_tmp0_ = fm_all_actions;
 	g_hash_table_remove_all (_tmp0_);
-	_tmp2_ = _tmp1_ = g_get_system_data_dirs ();
+	_tmp2_ = _tmp1_ = (gchar **)g_get_system_data_dirs ();
 	dirs = _tmp2_;
 	dirs_length1 = _vala_array_length (_tmp1_);
 	_dirs_size_ = dirs_length1;


[FILE:688:patches/patch-src_gtk_exo_exo-icon-view.c]
--- src/gtk/exo/exo-icon-view.c.orig	2021-01-29 21:02:49 UTC
+++ src/gtk/exo/exo-icon-view.c
@@ -2819,7 +2819,7 @@ exo_icon_view_key_press_event (GtkWidget
   /* allocate a new event to forward */
   new_event = gdk_event_copy ((GdkEvent *) event);
   g_object_unref (G_OBJECT (new_event->key.window));
-  new_event->key.window = g_object_ref (G_OBJECT (gtk_widget_get_window (icon_view->priv->search_entry)));
+  new_event->key.window = (GdkWindow *)g_object_ref (G_OBJECT (gtk_widget_get_window (icon_view->priv->search_entry)));
 
   /* send the event to the search entry. If the "preedit-changed" signal is
    * emitted during this event, priv->search_imcontext_changed will be set.


[FILE:581:patches/patch-src_gtk_fm-dnd-dest.c]
--- src/gtk/fm-dnd-dest.c.orig	2018-04-16 19:11:33 UTC
+++ src/gtk/fm-dnd-dest.c
@@ -458,7 +458,7 @@ static GdkDragAction _ask_action_on_drop
             gtk_action_set_sensitive(act, FALSE);
         }
     }
-    ri.menu = g_object_ref(gtk_ui_manager_get_widget(ui, "/popup"));
+    ri.menu = (GtkMenu *)g_object_ref(gtk_ui_manager_get_widget(ui, "/popup"));
     g_signal_connect(ri.menu, "selection-done", G_CALLBACK(gtk_widget_destroy), NULL);
     unmap_handler = g_signal_connect(ri.menu, "unmap",
                                      G_CALLBACK(run_unmap_handler), &ri);


[FILE:688:patches/patch-src_gtk_fm-standard-view.c]
--- src/gtk/fm-standard-view.c.orig	2018-04-16 19:11:33 UTC
+++ src/gtk/fm-standard-view.c
@@ -637,7 +637,7 @@ static inline void create_icon_view(FmSt
                                 "text", FM_FOLDER_MODEL_COL_NAME );
     if(fv->renderer_text)
         g_object_unref(fv->renderer_text);
-    fv->renderer_text = g_object_ref_sink(render);
+    fv->renderer_text = (FmCellRendererText *)g_object_ref_sink(render);
     exo_icon_view_set_search_column((ExoIconView*)fv->view, FM_FOLDER_MODEL_COL_NAME);
     g_signal_connect(fv->view, "item-activated", G_CALLBACK(on_icon_view_item_activated), fv);
     g_signal_connect(fv->view, "selection-changed", G_CALLBACK(on_sel_changed), fv);

