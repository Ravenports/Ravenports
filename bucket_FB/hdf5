# Buildsheet autogenerated by ravenadm tool -- Do not edit.

NAMEBASE=		hdf5
VERSION=		1.14.6
REVISION=		1
KEYWORDS=		archivers science
VARIANTS=		std
SDESC[std]=		General purpose file format for scientific data
HOMEPAGE=		https://www.hdfgroup.org/solutions/hdf5/
CONTACT=		nobody

DOWNLOAD_GROUPS=	main
SITES[main]=		https://github.com/HDFGroup/hdf5/releases/download/hdf5_1.14.6/
DISTFILE[1]=		hdf5-1.14.6.tar.gz:main
DF_INDEX=		1
SPKGS[std]=		set
			primary
			cxx
			fort
			tools
			dev

OPTIONS_AVAILABLE=	none
OPTIONS_STANDARD=	none

EXRUN[cxx]=		hdf5:primary:std
EXRUN[tools]=		hdf5:dev:std
EXRUN[fort]=		hdf5:primary:std

USES=			cpe libtool zlib c++:cxx fortran:fort mbsdfix

DISTNAME=		hdf5-1.14.6

LICENSE=		BSD3CLAUSE:primary
LICENSE_FILE=		BSD3CLAUSE:{{WRKSRC}}/COPYING
LICENSE_SCHEME=		solo

CPE_VENDOR=		hdfgroup
FPC_EQUIVALENT=		science/hdf5

MUST_CONFIGURE=		gnu
CONFIGURE_ARGS=		--enable-instrument
			--enable-cxx
			--enable-fortran
			--enable-build-mode=production
			--disable-tests
			--with-examplesdir={{STD_EXAMPLESDIR}}

SINGLE_JOB=		yes

INSTALL_TARGET=		install-strip
INSTALL_REQ_TOOLCHAIN=	yes
SOVERSION=		310.5.1
PLIST_SUB=		HL_SOVER=310.0.6
			HL_SOMAJOR=310
			HDF5_FORT_SOVER=310.3.2
			HDF5_FORT_SOMAJOR=310
			HL_FORT_SOVER=310.0.6
			HL_FORT_SOMAJOR=310
			CPP_SOVERSION=310.0.6
			CPP_SOMAJOR=310

CFLAGS=			-Wno-missing-include-dirs

post-patch:
	${REINPLACE_CMD} -e 's|-O3||g' ${WRKSRC}/config/gnu-flags
	${FIND} ${WRKSRC} -regex '.*/examples/Makefile.in' | ${XARGS} \
		${REINPLACE_CMD} \
		-e '/LD_LIBRARY_PATH/ s|^|#|' \
		-e 's|(INSTALL)|(BSD_INSTALL_DATA)|'
	${FIND} ${WRKSRC} -name \*.sh\* | ${XARGS} \
		${REINPLACE_CMD} -e 's|\[ -a|\[ -f|g'

[FILE:827:descriptions/desc.primary]
HDF5 is a completely new Hierarchical Data Format product consisting of a
data format specification and a supporting library implementation. HDF5 is
designed to address some of the limitations of the older HDF product and to
address current and anticipated requirements of modern systems and
applications.

HDF5 includes the following improvements:
- A new file format designed to address some of the deficiencies of HDF4.x,
  particularly the need to store larger files and more objects per file.
- A simpler, more comprehensive data model that includes only two basic
  structures: a multidimensional array of record structures, and a grouping
  structure.
- A simpler, better-engineered library and API, with improved support for
  parallel I/O, threads, and other requirements imposed by modern systems
  and applications.


[FILE:46:descriptions/desc.cxx]
This package contains the HDF5 C++ libraries.


[FILE:50:descriptions/desc.fort]
This package contains the HDF5 fortran libraries.


[FILE:35:descriptions/desc.tools]
This packages contains HDF5 tools.


[FILE:97:distinfo]
e4defbac30f50d64e1556374aa49e574417c9e72c6b1de7a4ff88c4b1bea6e9b     39289609 hdf5-1.14.6.tar.gz


[FILE:113:manifests/plist.primary]
lib/
 libhdf5.so.%%SOMAJOR%%
 libhdf5.so.%%SOVERSION%%
 libhdf5_hl.so.%%HL_SOMAJOR%%
 libhdf5_hl.so.%%HL_SOVER%%


[FILE:137:manifests/plist.cxx]
lib/
 libhdf5_cpp.so.%%CPP_SOMAJOR%%
 libhdf5_cpp.so.%%CPP_SOVERSION%%
 libhdf5_hl_cpp.so.%%HL_SOMAJOR%%
 libhdf5_hl_cpp.so.%%HL_SOVER%%


[FILE:169:manifests/plist.fort]
lib/
 libhdf5_fortran.so.%%HDF5_FORT_SOMAJOR%%
 libhdf5_fortran.so.%%HDF5_FORT_SOVER%%
 libhdf5hl_fortran.so.%%HL_FORT_SOMAJOR%%
 libhdf5hl_fortran.so.%%HL_FORT_SOVER%%


[FILE:207:manifests/plist.tools]
bin/
 h5c++
 h5cc
 h5clear
 h5copy
 h5debug
 h5delete
 h5diff
 h5dump
 h5fc
 h5format_convert
 h5fuse
 h5import
 h5jam
 h5ls
 h5mkgrp
 h5perf_serial
 h5redeploy
 h5repack
 h5repart
 h5stat
 h5unjam
 h5watch


[FILE:2012:manifests/plist.dev]
include/
 H5ACpublic.h
 H5AbstractDs.h
 H5Apublic.h
 H5ArrayType.h
 H5AtomType.h
 H5Attribute.h
 H5Classes.h
 H5CommonFG.h
 H5CompType.h
 H5Cpp.h
 H5CppDoc.h
 H5Cpublic.h
 H5DOpublic.h
 H5DSpublic.h
 H5DaccProp.h
 H5DataSet.h
 H5DataSpace.h
 H5DataType.h
 H5DcreatProp.h
 H5Dpublic.h
 H5DxferProp.h
 H5ESdevelop.h
 H5ESpublic.h
 H5EnumType.h
 H5Epubgen.h
 H5Epublic.h
 H5Exception.h
 H5FDcore.h
 H5FDdevelop.h
 H5FDdirect.h
 H5FDfamily.h
 H5FDhdfs.h
 H5FDioc.h
 H5FDlog.h
 H5FDmirror.h
 H5FDmpi.h
 H5FDmpio.h
 H5FDmulti.h
 H5FDonion.h
 H5FDpublic.h
 H5FDros3.h
 H5FDsec2.h
 H5FDsplitter.h
 H5FDstdio.h
 H5FDsubfiling.h
 H5FDwindows.h
 H5FaccProp.h
 H5FcreatProp.h
 H5File.h
 H5FloatType.h
 H5Fpublic.h
 H5Gpublic.h
 H5Group.h
 H5IMpublic.h
 H5IdComponent.h
 H5Idevelop.h
 H5Include.h
 H5IntType.h
 H5Ipublic.h
 H5LDpublic.h
 H5LTpublic.h
 H5LaccProp.h
 H5LcreatProp.h
 H5Ldevelop.h
 H5Library.h
 H5Location.h
 H5Lpublic.h
 H5MMpublic.h
 H5Mpublic.h
 H5Object.h
 H5OcreatProp.h
 H5Opublic.h
 H5PLextern.h
 H5PLpublic.h
 H5PTpublic.h
 H5PacketTable.h
 H5Ppublic.h
 H5PredType.h
 H5PropList.h
 H5Rpublic.h
 H5Spublic.h
 H5StrType.h
 H5TBpublic.h
 H5TSdevelop.h
 H5Tdevelop.h
 H5Tpublic.h
 H5VLconnector.h
 H5VLconnector_passthru.h
 H5VLnative.h
 H5VLpassthru.h
 H5VLpublic.h
 H5VarLenType.h
 H5Zdevelop.h
 H5Zpublic.h
 H5api_adpt.h
 H5config_f.inc
 H5f90i.h
 H5f90i_gen.h
 H5overflow.h
 H5pubconf.h
 H5public.h
 H5version.h
 h5_gen.mod
 h5a.mod
 h5d.mod
 h5do.mod
 h5ds.mod
 h5e.mod
 h5es.mod
 h5f.mod
 h5fortkit.mod
 h5fortran_types.mod
 h5g.mod
 h5global.mod
 h5i.mod
 h5im.mod
 h5l.mod
 h5lib.mod
 h5lt.mod
 h5lt_const.mod
 h5o.mod
 h5p.mod
 h5r.mod
 h5s.mod
 h5t.mod
 h5tb.mod
 h5tb_const.mod
 h5vl.mod
 h5z.mod
 hdf5.h
 hdf5.mod
 hdf5_hl.h
lib/
 libhdf5.a
 libhdf5.settings
 libhdf5.so
 libhdf5_cpp.a
 libhdf5_cpp.so
 libhdf5_fortran.a
 libhdf5_fortran.so
 libhdf5_hl.a
 libhdf5_hl.so
 libhdf5_hl_cpp.a
 libhdf5_hl_cpp.so
 libhdf5_hl_fortran.a
 libhdf5_hl_fortran.so
 libhdf5hl_fortran.a
 libhdf5hl_fortran.so


[FILE:6979:patches/patch-tools_lib_h5diff__array.c]
--- tools/lib/h5diff_array.c.orig	2025-02-05 14:11:32 UTC
+++ tools/lib/h5diff_array.c
@@ -1719,8 +1719,8 @@ diff_float_element(unsigned char *mem1,
          *-------------------------------------------------------------------------
          */
         if (opts->do_nans) {
-            isnan1 = isnan(temp1_float);
-            isnan2 = isnan(temp2_float);
+            isnan1 = __builtin_isnan(temp1_float);
+            isnan2 = __builtin_isnan(temp2_float);
         }
 
         /* both not NaN, do the comparison */
@@ -1756,8 +1756,8 @@ diff_float_element(unsigned char *mem1,
          *-------------------------------------------------------------------------
          */
         if (opts->do_nans) {
-            isnan1 = isnan(temp1_float);
-            isnan2 = isnan(temp2_float);
+            isnan1 = __builtin_isnan(temp1_float);
+            isnan2 = __builtin_isnan(temp2_float);
         }
         /* both not NaN, do the comparison */
         if ((!isnan1 && !isnan2)) {
@@ -1804,8 +1804,8 @@ diff_float_element(unsigned char *mem1,
          *-------------------------------------------------------------------------
          */
         if (opts->do_nans) {
-            isnan1 = isnan(temp1_float);
-            isnan2 = isnan(temp2_float);
+            isnan1 = __builtin_isnan(temp1_float);
+            isnan2 = __builtin_isnan(temp2_float);
         }
 
         /* both not NaN, do the comparison */
@@ -1897,8 +1897,8 @@ diff_double_element(unsigned char *mem1,
          *-------------------------------------------------------------------------
          */
         if (opts->do_nans) {
-            isnan1 = isnan(temp1_double);
-            isnan2 = isnan(temp2_double);
+            isnan1 = __builtin_isnan(temp1_double);
+            isnan2 = __builtin_isnan(temp2_double);
         }
 
         /* both not NaN, do the comparison */
@@ -1933,8 +1933,8 @@ diff_double_element(unsigned char *mem1,
          *-------------------------------------------------------------------------
          */
         if (opts->do_nans) {
-            isnan1 = isnan(temp1_double);
-            isnan2 = isnan(temp2_double);
+            isnan1 = __builtin_isnan(temp1_double);
+            isnan2 = __builtin_isnan(temp2_double);
         }
         /* both not NaN, do the comparison */
         if (!isnan1 && !isnan2) {
@@ -1979,8 +1979,8 @@ diff_double_element(unsigned char *mem1,
          *-------------------------------------------------------------------------
          */
         if (opts->do_nans) {
-            isnan1 = isnan(temp1_double);
-            isnan2 = isnan(temp2_double);
+            isnan1 = __builtin_isnan(temp1_double);
+            isnan2 = __builtin_isnan(temp2_double);
         }
 
         /* both not NaN, do the comparison */
@@ -2072,8 +2072,8 @@ diff_ldouble_element(unsigned char *mem1
          *-------------------------------------------------------------------------
          */
         if (opts->do_nans) {
-            isnan1 = isnan(temp1_double);
-            isnan2 = isnan(temp2_double);
+            isnan1 = __builtin_isnan(temp1_double);
+            isnan2 = __builtin_isnan(temp2_double);
         }
 
         /* both not NaN, do the comparison */
@@ -2107,8 +2107,8 @@ diff_ldouble_element(unsigned char *mem1
          *-------------------------------------------------------------------------
          */
         if (opts->do_nans) {
-            isnan1 = isnan(temp1_double);
-            isnan2 = isnan(temp2_double);
+            isnan1 = __builtin_isnan(temp1_double);
+            isnan2 = __builtin_isnan(temp2_double);
         }
 
         /* both not NaN, do the comparison */
@@ -2154,8 +2154,8 @@ diff_ldouble_element(unsigned char *mem1
          *-------------------------------------------------------------------------
          */
         if (opts->do_nans) {
-            isnan1 = isnan(temp1_double);
-            isnan2 = isnan(temp2_double);
+            isnan1 = __builtin_isnan(temp1_double);
+            isnan2 = __builtin_isnan(temp2_double);
         }
 
         /* both not NaN, do the comparison */
@@ -2247,8 +2247,8 @@ diff_float16_element(unsigned char *mem1
          *-------------------------------------------------------------------------
          */
         if (opts->do_nans) {
-            isnan1 = isnan(temp1_float16);
-            isnan2 = isnan(temp2_float16);
+            isnan1 = __builtin_isnan(temp1_float16);
+            isnan2 = __builtin_isnan(temp2_float16);
         }
 
         /* both not NaN, do the comparison */
@@ -2284,8 +2284,8 @@ diff_float16_element(unsigned char *mem1
          *-------------------------------------------------------------------------
          */
         if (opts->do_nans) {
-            isnan1 = isnan(temp1_float16);
-            isnan2 = isnan(temp2_float16);
+            isnan1 = __builtin_isnan(temp1_float16);
+            isnan2 = __builtin_isnan(temp2_float16);
         }
         /* both not NaN, do the comparison */
         if ((!isnan1 && !isnan2)) {
@@ -2332,8 +2332,8 @@ diff_float16_element(unsigned char *mem1
          *-------------------------------------------------------------------------
          */
         if (opts->do_nans) {
-            isnan1 = isnan(temp1_float16);
-            isnan2 = isnan(temp2_float16);
+            isnan1 = __builtin_isnan(temp1_float16);
+            isnan2 = __builtin_isnan(temp2_float16);
         }
 
         /* both not NaN, do the comparison */
@@ -3354,8 +3354,8 @@ equal_double(double value, double expect
          * detect NaNs
          *-------------------------------------------------------------------------
          */
-        bool isnan1 = isnan(value);
-        bool isnan2 = isnan(expected);
+        bool isnan1 = __builtin_isnan(value);
+        bool isnan2 = __builtin_isnan(expected);
 
         /*-------------------------------------------------------------------------
          * we consider NaN == NaN to be true
@@ -3401,8 +3401,8 @@ equal_ldouble(long double value, long do
          * detect NaNs
          *-------------------------------------------------------------------------
          */
-        bool isnan1 = isnan(value);
-        bool isnan2 = isnan(expected);
+        bool isnan1 = __builtin_isnan(value);
+        bool isnan2 = __builtin_isnan(expected);
 
         /*-------------------------------------------------------------------------
          * we consider NaN == NaN to be true
@@ -3447,8 +3447,8 @@ equal_float(float value, float expected,
          * detect NaNs
          *-------------------------------------------------------------------------
          */
-        bool isnan1 = isnan(value);
-        bool isnan2 = isnan(expected);
+        bool isnan1 = __builtin_isnan(value);
+        bool isnan2 = __builtin_isnan(expected);
 
         /*-------------------------------------------------------------------------
          * we consider NaN == NaN to be true

