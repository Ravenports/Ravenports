# Buildsheet autogenerated by ravenadm tool -- Do not edit.

NAMEBASE=		liborcus-0.20
VERSION=		0.20.0
KEYWORDS=		devel misc
VARIANTS=		std
SDESC[std]=		File import library for spreadsheet documents
HOMEPAGE=		https://gitlab.com/orcus/orcus
CONTACT=		nobody

DOWNLOAD_GROUPS=	main
SITES[main]=		GITLAB/orcus:orcus:0.20.0
DISTFILE[1]=		generated:main
DF_INDEX=		1
SPKGS[std]=		set
			primary
			tools
			dev

OPTIONS_AVAILABLE=	none
OPTIONS_STANDARD=	none

BUILD_DEPENDS=		mdds-3.0:single:std
			ixion-0.20:dev:std
			boost-libraries:dev:std
BUILDRUN_DEPENDS=	boost-libraries:primary:std
			ixion-0.20:primary:std
EXRUN[tools]=		primary

USES=			pkgconfig zlib cmake python:build bz2:build

DISTNAME=		orcus-0.20.0

LICENSE=		MPL:primary
LICENSE_FILE=		MPL:{{WRKSRC}}/LICENSE
LICENSE_SCHEME=		solo

FPC_EQUIVALENT=		devel/liborcus

INSTALL_REQ_TOOLCHAIN=	yes
SOVERSION=		0.0.0
PLIST_SUB=		VER=0.20

LDFLAGS=		-lboost_program_options
			-lboost_thread
			-lboost_filesystem
			-lboost_iostreams
CMAKE_ARGS=		-DMDDS_INCLUDEDIR:STRING="{{LOCALBASE}}/include/mdds-1.2"
			-DIXION_INCLUDEDIR:STRING="{{LOCALBASE}}/include/ixion-0.20"

post-install:
	${STRIP_CMD} ${STAGEDIR}${PREFIX}/bin/orcus*
	${STRIP_CMD} ${STAGEDIR}${PREFIX}/lib/lib*.so
	# manually create pkgconfig file
	${SED} -e 's|@prefix@|${PREFIX}|; s|@exec_prefix@|${PREFIX}|' \
	-e 's|@libdir@|${PREFIX}/lib|; s|@includedir@|${PREFIX}/include|' \
	-e 's|liborcus-@ORCUS_API_VERSION@|orcus-0.20|' \
	-e 's|@ORCUS_API_VERSION@|0.20|g' \
	-e ' s|@VERSION@|0.20.0|g' ${WRKSRC}/liborcus.pc.in \
	> ${STAGEDIR}${PREFIX}/lib/pkgconfig/liborcus-0.20.pc

[FILE:274:descriptions/desc.primary]
Orcus is a library that provides a collection of standalone file processing
filters.  It is currently focused on providing filters for spreadsheet
documents, but filters for other productivity application types (such as
wordprocessor and presentation) are in consideration.


[FILE:47:descriptions/desc.tools]
This package contains tools based on liborcus.


[FILE:104:distinfo]
6b5afd71a85ba402ca6932fdeef8cd6d70142a2d8cdb816556c39d546d86e05a      8829480 orcus-orcus-0.20.0.tar.gz


[FILE:93:manifests/plist.primary]
lib/
 liborcus-%%VER%%.so
 liborcus-parser-%%VER%%.so
 liborcus-spreadsheet-model-%%VER%%.so


[FILE:153:manifests/plist.tools]
bin/
 orcus-css-dump
 orcus-csv
 orcus-detect
 orcus-json
 orcus-ods
 orcus-styles-ods
 orcus-xls-xml
 orcus-xlsx
 orcus-xml
 orcus-yaml
 orcus-zip-dump


[FILE:1575:manifests/plist.dev]
include/orcus-%%VER%%/orcus/
 base64.hpp
 cell_buffer.hpp
 config.hpp
 css_document_tree.hpp
 css_parser.hpp
 css_parser_base.hpp
 css_selector.hpp
 css_types.hpp
 csv_parser.hpp
 csv_parser_base.hpp
 dom_tree.hpp
 env.hpp
 exception.hpp
 format_detection.hpp
 info.hpp
 interface.hpp
 json_document_tree.hpp
 json_global.hpp
 json_parser.hpp
 json_parser_base.hpp
 json_parser_thread.hpp
 json_structure_tree.hpp
 measurement.hpp
 orcus_csv.hpp
 orcus_gnumeric.hpp
 orcus_import_ods.hpp
 orcus_import_xlsx.hpp
 orcus_json.hpp
 orcus_ods.hpp
 orcus_xls_xml.hpp
 orcus_xlsx.hpp
 orcus_xml.hpp
 parser_base.hpp
 parser_global.hpp
 sax_ns_parser.hpp
 sax_parser.hpp
 sax_parser_base.hpp
 sax_token_parser.hpp
 sax_token_parser_thread.hpp
 stream.hpp
 string_pool.hpp
 threaded_json_parser.hpp
 threaded_sax_token_parser.hpp
 tokens.hpp
 types.hpp
 xml_namespace.hpp
 xml_structure_tree.hpp
 xml_writer.hpp
 yaml_document_tree.hpp
 yaml_parser.hpp
 yaml_parser_base.hpp
 zip_archive.hpp
 zip_archive_stream.hpp
include/orcus-%%VER%%/orcus/detail/
 parser_token_buffer.hpp
 thread.hpp
include/orcus-%%VER%%/orcus/spreadsheet/
 auto_filter.hpp
 config.hpp
 document.hpp
 document_types.hpp
 export_interface.hpp
 factory.hpp
 import_interface.hpp
 import_interface_auto_filter.hpp
 import_interface_pivot.hpp
 import_interface_strikethrough.hpp
 import_interface_styles.hpp
 import_interface_underline.hpp
 import_interface_view.hpp
 pivot.hpp
 shared_strings.hpp
 sheet.hpp
 styles.hpp
 table.hpp
 tables.hpp
 types.hpp
 view.hpp
 view_types.hpp
lib/pkgconfig/liborcus-%%VER%%.pc


[FILE:1405:patches/patch-src_liborcus_CMakeLists.txt]
--- src/liborcus/CMakeLists.txt.orig	2025-02-05 03:15:28 UTC
+++ src/liborcus/CMakeLists.txt
@@ -100,21 +100,18 @@ list(APPEND _SOURCES
     odf_helper.cpp
     orcus_ods.cpp
     orcus_import_ods.cpp
-# gnumeric filter
-# TODO : document a way to build boost with bzip2 and zlib options, or find
-# a way to make this a build-time option.
-#   gnumeric_detection_handler.cpp
-#   gnumeric_cell_context.cpp
-#   gnumeric_filter_context.cpp
-#   gnumeric_context.cpp
-#   gnumeric_handler.cpp
-#   gnumeric_sheet_context.cpp
-#   gnumeric_styles_context.cpp
-#   gnumeric_names_context.cpp
-#   gnumeric_tokens.cpp
-#   gnumeric_types.cpp
-#   gnumeric_value_format_parser.cpp
-#   orcus_gnumeric.cpp
+    gnumeric_detection_handler.cpp
+    gnumeric_cell_context.cpp
+    gnumeric_filter_context.cpp
+    gnumeric_context.cpp
+    gnumeric_handler.cpp
+    gnumeric_sheet_context.cpp
+    gnumeric_styles_context.cpp
+    gnumeric_names_context.cpp
+    gnumeric_tokens.cpp
+    gnumeric_types.cpp
+    gnumeric_value_format_parser.cpp
+    orcus_gnumeric.cpp
 )
 
 list(APPEND _COMPILE_DEFS
@@ -150,8 +147,8 @@ set(_TESTS
     common-test
     css-document-tree-test
     dom-tree-test
-#   gnumeric-cell-context-test
-#   gnumeric-sheet-context-test
+    gnumeric-cell-context-test
+    gnumeric-sheet-context-test
     json-document-tree-test
     json-structure-tree-test
     xml-structure-tree-test

