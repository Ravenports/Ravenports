# Buildsheet autogenerated by ravenadm tool -- Do not edit.

NAMEBASE=		libxkbcommon
VERSION=		0.8.4
KEYWORDS=		x11
VARIANTS=		standard
SDESC[standard]=	Keymap handling library for toolkits and X windows
HOMEPAGE=		https://xkbcommon.org/
CONTACT=		nobody

DOWNLOAD_GROUPS=	main
SITES[main]=		https://xkbcommon.org/download/
DISTFILE[1]=		libxkbcommon-0.8.4.tar.xz:main
DF_INDEX=		1
SPKGS[standard]=	single

OPTIONS_AVAILABLE=	none
OPTIONS_STANDARD=	none

B_DEPS[sunos]=		libbsd4sol:single:standard

USES=			bison gmake libtool
XORG_COMPONENTS=	xcb xorgproto

FPC_EQUIVALENT=		x11/libxkbcommon

MUST_CONFIGURE=		gnu
CONFIGURE_ARGS=		--without-doxygen
			--with-default-rules="xorg"
			--with-x-locale-root={{PREFIX}}/lib/X11/locale

INSTALL_TARGET=		install-strip
INSTALL_REQ_TOOLCHAIN=	yes

VAR_OPSYS[sunos]=	CFLAGS=-I{{LOCALBASE}}/include/bsd

post-patch:
	${REINPLACE_CMD} -e '/version-script=/ s/script=/script,/' \
		${WRKSRC}/Makefile.in \
		${WRKSRC}/configure \
		${WRKSRC}/meson.build
	${REINPLACE_CMD} \
		-e 's|DFLT_XKB_CONFIG_ROOT|"${PREFIX}/share/X11/xkb"|' \
		${WRKSRC}/src/context.c
	${REINPLACE_CMD} \
		-e 's|= XLOCALEDIR|= "${PREFIX}/lib/X11/locale"|' \
		${WRKSRC}/src/compose/paths.c

[FILE:286:descriptions/desc.single]
xkbcommon is a library to handle keyboard descriptions, including loading
them from disk, parsing them and handling their state. It's mainly meant
for client toolkits, window systems, and other system applications.
 It is also used by some XCB applications for proper keyboard support.


[FILE:104:distinfo]
60ddcff932b7fd352752d51a5c4f04f3d0403230a584df9a2e0d5ed87c486c8b       648592 libxkbcommon-0.8.4.tar.xz


[FILE:348:manifests/plist.single]
include/xkbcommon/
 xkbcommon-compat.h
 xkbcommon-compose.h
 xkbcommon-keysyms.h
 xkbcommon-names.h
 xkbcommon-x11.h
 xkbcommon.h
lib/
 libxkbcommon-x11.a
 libxkbcommon-x11.so
 libxkbcommon-x11.so.0
 libxkbcommon-x11.so.0.0.0
 libxkbcommon.a
 libxkbcommon.so
 libxkbcommon.so.0
 libxkbcommon.so.0.0.0
lib/pkgconfig/
 xkbcommon-x11.pc
 xkbcommon.pc


[FILE:415:patches/patch-Makefile.in]
--- Makefile.in.orig	2019-02-22 20:28:05 UTC
+++ Makefile.in
@@ -889,8 +889,6 @@ EXTRA_DIST = \
 # The constants are added here instead of using AC_DEFINE_UNQUOTED
 # because it does not expand variables recursively.
 AM_CPPFLAGS = \
-	-DDFLT_XKB_CONFIG_ROOT='"$(XKBCONFIGROOT)"' \
-	-DXLOCALEDIR='"$(XLOCALEDIR)"' \
 	-I$(top_srcdir)/src \
 	-I$(top_builddir)/src/xkbcomp \
 	-include $(top_builddir)/src/config.h

