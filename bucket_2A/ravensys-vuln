# Buildsheet autogenerated by ravenadm tool -- Do not edit.

NAMEBASE=		ravensys-vuln
VERSION=		1.0
KEYWORDS=		raven
VARIANTS=		std
SDESC[std]=		Ravenports Vulnerability Database
HOMEPAGE=		https://github.com/Ravenports/vulnerability_server
CONTACT=		John_Marino[draco@marino.st]

DOWNLOAD_GROUPS=	main
SITES[main]=		GITHUB/Ravenports:vulnerability_server:v0.5
DISTFILE[1]=		generated:main
DF_INDEX=		1
SPKGS[std]=		single

OPTIONS_AVAILABLE=	none
OPTIONS_STANDARD=	none

RUN_DEPENDS=		mariadb114:server:std

USES=			python:run

LICENSE=		ISCL:single
LICENSE_FILE=		ISCL:{{WRKSRC}}/LICENSE
LICENSE_SCHEME=		solo

MAKE_ARGS=		PORTNAME={{NAMEBASE}}

SUB_FILES=		messages-single.ucl

INFRASTRUCTURE=		yes

[FILE:336:descriptions/desc.single]
This package installs the service that queries the National Vulnerability
Database for all Ravenports that have a defined CPE string.  This is
done once per day.

It also install a dedicated web server on port (configurable but 8008
is the default).  This web server queries the local database for
queries by remote rvn audit commands.


[FILE:121:distinfo]
d90f8ef9ec8570caa780bbedbfd6c712e2e245c03a30603a35b91880ef20a971         6523 Ravenports-vulnerability_server-0.5.tar.gz


[FILE:151:manifests/plist.single]
@sample etc/vuln.conf.sample
etc/periodic/daily/125.ravenports_nvd
share/ravensys-vuln/
 check_vulnerabilties.py
 scan_repology_json.py
 structure.sql


[FILE:432:files/messages-single.ucl.in]
primary: {
  type: "install"
  message: <<EOM
To populate the database, see comments in the 
%%PREFIX%%/share/ravensys-vuln/structure.sql file.
Once the mysql/mariadb server is ready, start the daily cron task by
adding the following lines to /etc/periodic.conf:

local_periodic="%%PREFIX%%/etc/periodic /usr/local/etc/periodic"
daily_rp_audit_enable="YES"

Then finish the configuration by editing %%PREFIX%%/etc/vuln.conf .
EOM
}

