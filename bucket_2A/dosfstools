# Buildsheet autogenerated by ravenadm tool -- Do not edit.

NAMEBASE=		dosfstools
VERSION=		4.2
KEYWORDS=		sysutils
VARIANTS=		standard
SDESC[standard]=	DOS filesystem utilities
HOMEPAGE=		https://github.com/dosfstools/dosfstools
CONTACT=		nobody

DOWNLOAD_GROUPS=	main
SITES[main]=		https://github.com/dosfstools/dosfstools/releases/download/v4.2/
DISTFILE[1]=		dosfstools-4.2.tar.gz:main
DF_INDEX=		1
SPKGS[standard]=	complete
			primary
			docs

OPTIONS_AVAILABLE=	none
OPTIONS_STANDARD=	none

USES=			cpe iconv

LICENSE=		GPLv3+:primary
LICENSE_TERMS=		primary:{{WRKDIR}}/TERMS
LICENSE_FILE=		GPLv3+:{{WRKSRC}}/COPYING
LICENSE_AWK=		TERMS:"_FAT_H"
LICENSE_SOURCE=		TERMS:{{WRKSRC}}/src/fat.h
LICENSE_SCHEME=		solo

CPE_VENDOR=		dosfstools_project

MUST_CONFIGURE=		gnu

[FILE:128:descriptions/desc.primary]
dosfstools consists of the programs mkfs.fat, fsck.fat and fatlabel to
create, check and label file systems of the FAT family. 


[FILE:100:distinfo]
64926eebf90092dca21b14259a5301b7b98e7b1943e8a201c7d726084809b527       320917 dosfstools-4.2.tar.gz


[FILE:97:manifests/plist.primary]
sbin/
 fatlabel
 fsck.fat
 mkfs.fat
share/man/man8/
 fatlabel.8.gz
 fsck.fat.8.gz
 mkfs.fat.8.gz


[FILE:214:manifests/plist.docs]
share/doc/dosfstools/
 ANNOUNCE.mkdosfs
 COPYING
 ChangeLog
 ChangeLog.dosfsck
 ChangeLog.dosfstools-2.x
 ChangeLog.mkdosfs
 NEWS
 README
 README.dosfsck
 README.dosfstools-2.x
 README.mkdosfs
 TODO.dosfstools-2.x


[FILE:694:patches/patch-src_blkdev_blkdev.c]
--- src/blkdev/blkdev.c.orig	2021-01-31 12:49:12 UTC
+++ src/blkdev/blkdev.c
@@ -7,7 +7,9 @@
 #include <sys/types.h>
 #include <sys/stat.h>
 #include <sys/ioctl.h>
+#if !defined(__DragonFly__) && !defined(__FreeBSD__)
 #include <sys/sysmacros.h>
+#endif
 #include <unistd.h>
 #include <stdint.h>
 #include <stdio.h>
@@ -137,6 +139,7 @@ blkdev_get_size(int fd, unsigned long lo
 #endif /* FDGETPRM */
 
 #ifdef HAVE_SYS_DISKLABEL_H
+# if !defined(__DragonFly__) && !defined(__FreeBSD__)
 	{
 		/*
 		 * This code works for FreeBSD 4.11 i386, except for the full device
@@ -164,6 +167,7 @@ blkdev_get_size(int fd, unsigned long lo
 			}
 		}
 	}
+# endif
 #endif /* HAVE_SYS_DISKLABEL_H */
 
 	{


[FILE:305:patches/patch-src_device__info.c]
--- src/device_info.c.orig	2021-01-31 12:49:12 UTC
+++ src/device_info.c
@@ -24,7 +24,9 @@
 #include <sys/types.h>
 #include <sys/stat.h>
 #include <sys/ioctl.h>
+#if !defined(__DragonFly__) && !defined(__FreeBSD__)
 #include <sys/sysmacros.h>
+#endif
 
 #ifdef HAVE_LINUX_LOOP_H
 #include <linux/loop.h>

