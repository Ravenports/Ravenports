# Buildsheet autogenerated by ravenadm tool -- Do not edit.

NAMEBASE=		rvn
VERSION=		1.0.5
KEYWORDS=		raven
VARIANTS=		std
SDESC[std]=		Ravenports binary package manager
HOMEPAGE=		https://github.com/ravenports/rvn
CONTACT=		John_Marino[draco@marino.st]

DOWNLOAD_GROUPS=	main format sqlite
SITES[main]=		GITHUB/ravenports:rvn:v1.0.5
SITES[format]=		GITHUB/ravenports:rvn-format:v4.7:src/rvn-format
SITES[sqlite]=		https://www.sqlite.org/2023/
			http://www2.sqlite.org/2023/
DISTFILE[1]=		generated:main
DISTFILE[2]=		generated:format
DISTFILE[3]=		sqlite-autoconf-3440200.tar.gz:sqlite
DF_INDEX=		1 2 3
SPKGS[std]=		set
			primary
			man

OPTIONS_AVAILABLE=	RUNTESTS
OPTIONS_STANDARD=	RUNTESTS

BUILD_DEPENDS=		lua54:dev:std
			libucl:dev:ravensw
			linenoise:single:std
			libblake3:dev:std
			mbedtls:dev:std
			curl:dev:embed
			libssh2:dev:embed

USERS=			rvnsign
GROUPS=			rvnsign
USERGROUP_SPKG=		primary

USES=			pkgconfig zstd:build zlib:build gprbuild

LICENSE=		ISCL:primary
LICENSE_FILE=		ISCL:{{WRKSRC}}/License.txt
LICENSE_SCHEME=		solo

MAKE_ENV=		WRKSRC={{WRKSRC}}
			RVNUSER=rvnsign
			RVNGROUP=rvnsign
			PY3COMMAND={{LOCALBASE}}/bin/python3.13
			PROCESSORS={{MAKE_JOBS_NUMBER}}

INFRASTRUCTURE=		yes
SET_DEBUGGING_ON=	yes
OPTIMIZER_LEVEL=	0
VAR_OPSYS[sunos]=	MAKE_ENV=OS_TYPE=solaris

[RUNTESTS].DESCRIPTION=			Run kyua tests after build
[RUNTESTS].BUILD_DEPENDS_ON=		kyua:primary:std

post-build-RUNTESTS-ON:
	(cd ${WRKSRC} && ${SETENV} KEYWORDS_DIR=/xports/Mk/Keywords \
	${MAKE_CMD} kyua-test)

post-extract:
	${MV} ${WRKDIR}/sqlite-autoconf-3440200 ${WRKSRC}/vendor/sqlite3

[FILE:551:descriptions/desc.primary]
The rvn program is the package management tool used by Ravenports.

It handles the manipulation of both locally built and remotely available
binary packages.  It operates very similarily to FreeBSD's pkg manager
with almost identical commands in some cases, but it's been completely
rewritten in Ada.

Besides dropping cruft, the main differences is handling subpackages
and variants, something pkg was never designed to do.

This package also contains xvrn, a little program that can inspect and
extract the rvn-formatted packages that rvn produces.


[FILE:326:distinfo]
bc7939e42a09831744fc12349ec694dd656648252746d77699cb2f900f6edae1       288580 ravenports-rvn-1.0.5.tar.gz
24b633249a4c99a838a753b3c59b31ac9a6956a598cdcb6ae716dcd34f463278       128231 ravenports-rvn-format-4.7.tar.gz
1c6719a148bc41cf0f2bbbe3926d7ce3f5ca09d878f1246fcc20767b175bb407      3204841 sqlite-autoconf-3440200.tar.gz


[FILE:207:manifests/plist.primary]
@sample etc/rvn.conf.sample
bin/
 ravensign
 xrvn
etc/rc.d/ravensign
sbin/
 rvn
 signserver.py
share/rvn/signserver.service
@dir etc/ravensign
@dir etc/rvn/repos
@dir(rvnsign,rvnsign,666) /var/run/ravensign


[FILE:505:manifests/plist.man]
share/man/man5/
 rvn-keywords.5
 rvn-lua-scripts.5
 rvn-repository.5
 rvn-scripts.5
 rvn-triggers.5
 rvn.conf.5
share/man/man7/
 ravensign.7
 rvn-query-format.7
share/man/man8/
 rvn-alias.8
 rvn-annotate.8
 rvn-audit.8
 rvn-autoremove.8
 rvn-catalog.8
 rvn-check.8
 rvn-clean.8
 rvn-config.8
 rvn-create.8
 rvn-fetch.8
 rvn-genrepo.8
 rvn-info.8
 rvn-install.8
 rvn-query.8
 rvn-remove.8
 rvn-rquery.8
 rvn-search.8
 rvn-shell.8
 rvn-shlib.8
 rvn-stats.8
 rvn-upgrade.8
 rvn-version.8
 rvn-which.8
 rvn.8

