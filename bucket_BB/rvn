# Buildsheet autogenerated by ravenadm tool -- Do not edit.

NAMEBASE=		rvn
VERSION=		0.2.6
REVISION=		1
KEYWORDS=		raven
VARIANTS=		standard
SDESC[standard]=	Ravenports binary package manager
HOMEPAGE=		https://github.com/ravenports/rvn
CONTACT=		John_Marino[draco@marino.st]

DOWNLOAD_GROUPS=	main format sqlite
SITES[main]=		GITHUB/ravenports:rvn:v0.2.6
SITES[format]=		GITHUB/ravenports:rvn-format:v3.0:src/rvn-format
SITES[sqlite]=		https://www.sqlite.org/2023/
			http://www2.sqlite.org/2023/
DISTFILE[1]=		generated:main
DISTFILE[2]=		generated:format
DISTFILE[3]=		sqlite-autoconf-3440200.tar.gz:sqlite
DF_INDEX=		1 2 3
SPKGS[standard]=	complete
			primary
			man

OPTIONS_AVAILABLE=	RUNTESTS
OPTIONS_STANDARD=	RUNTESTS

BUILD_DEPENDS=		lua54:dev:standard
			libucl:single:ravensw
			linenoise:single:standard
			libblake3:single:standard
			mbedtls:dev:standard
			curl:dev:embed
			libssh2:dev:embed

USERS=			rvnsign
GROUPS=			rvnsign
USERGROUP_SPKG=		primary

USES=			pkgconfig zstd:build zlib:build gprbuild

LICENSE=		ISCL:primary
LICENSE_FILE=		ISCL:{{WRKSRC}}/License.txt
LICENSE_SCHEME=		solo

MAKE_ENV=		WRKSRC={{WRKSRC}}
			RVNUSER=rvnsign
			RVNGROUP=rvnsign
			PY3COMMAND={{LOCALBASE}}/bin/python3.12

INFRASTRUCTURE=		yes

[RUNTESTS].DESCRIPTION=			Run kyua tests after build
[RUNTESTS].BUILD_DEPENDS_ON=		kyua:single:standard

post-build-RUNTESTS-ON:
	(cd ${WRKSRC} && ${SETENV} KEYWORDS_DIR=/xports/Mk/Keywords \
	${MAKE_CMD} kyua-test)

post-extract:
	${MV} ${WRKDIR}/sqlite-autoconf-3440200 ${WRKSRC}/vendor/sqlite3

[FILE:551:descriptions/desc.primary]
The rvn program is the package management tool used by Ravenports.

It handles the manipulation of both locally built and remotely available
binary packages.  It operates very similarily to FreeBSD's pkg manager
with almost identical commands in some cases, but it's been completely
rewritten in Ada.

Besides dropping cruft, the main differences is handling subpackages
and variants, something pkg was never designed to do.

This package also contains xvrn, a little program that can inspect and
extract the rvn-formatted packages that rvn produces.


[FILE:326:distinfo]
49f712f4c48ebeb66bba33e3ccea24d1e8fca9a10c7f556406f79c28dd93ee4c       270243 ravenports-rvn-0.2.6.tar.gz
e1a384325ee410dfde99a5560c1d3a2d1a6d7ce87acd28ca0658ea1fd7ac692f       126781 ravenports-rvn-format-3.0.tar.gz
1c6719a148bc41cf0f2bbbe3926d7ce3f5ca09d878f1246fcc20767b175bb407      3204841 sqlite-autoconf-3440200.tar.gz


[FILE:162:manifests/plist.primary]
@sample etc/rvn.conf.sample
bin/
 ravensign
 xrvn
etc/rc.d/ravensign
sbin/
 rvn
 signserver.py
share/rvn/signserver.service
@dir etc/ravensign
@dir etc/rvn/repos


[FILE:601:manifests/plist.man]
share/man/man5/
 rvn-keywords.5.gz
 rvn-lua-scripts.5.gz
 rvn-repository.5.gz
 rvn-scripts.5.gz
 rvn-triggers.5.gz
 rvn.conf.5.gz
share/man/man7/
 ravensign.7.gz
 rvn-query-format.7.gz
share/man/man8/
 rvn-alias.8.gz
 rvn-annotate.8.gz
 rvn-audit.8.gz
 rvn-autoremove.8.gz
 rvn-catalog.8.gz
 rvn-check.8.gz
 rvn-clean.8.gz
 rvn-config.8.gz
 rvn-create.8.gz
 rvn-fetch.8.gz
 rvn-genrepo.8.gz
 rvn-info.8.gz
 rvn-install.8.gz
 rvn-query.8.gz
 rvn-remove.8.gz
 rvn-rquery.8.gz
 rvn-search.8.gz
 rvn-shell.8.gz
 rvn-shlib.8.gz
 rvn-stats.8.gz
 rvn-upgrade.8.gz
 rvn-version.8.gz
 rvn-which.8.gz
 rvn.8.gz

