# Buildsheet autogenerated by ravenadm tool -- Do not edit.

NAMEBASE=		gtk-doc
VERSION=		1.34.0
REVISION=		1
KEYWORDS=		textproc
VARIANTS=		std
SDESC[std]=		GTK+ DocBook Documentation Generator
HOMEPAGE=		https://www.gtk.org
CONTACT=		nobody

DOWNLOAD_GROUPS=	main
SITES[main]=		GNOME/gtk-doc/1.34
DISTFILE[1]=		gtk-doc-1.34.0.tar.xz:main
DF_INDEX=		1
SPKGS[std]=		single

OPTIONS_AVAILABLE=	none
OPTIONS_STANDARD=	none

BUILD_DEPENDS=		itstool:single:std
BUILDRUN_DEPENDS=	docbook-xml:single:std
			docbook-xsl:primary:std
			python-Pygments:single:python_default

USES=			meson gettext:build pkgconfig
GNOME_COMPONENTS=	libxml2 libxslt glib

LICENSE=		GPLv2+:single
LICENSE_TERMS=		single:{{WRKDIR}}/TERMS
LICENSE_FILE=		GPLv2+:{{WRKSRC}}/COPYING
LICENSE_AWK=		TERMS:"^$$"
LICENSE_SOURCE=		TERMS:{{WRKSRC}}/gtkdoc-check.in
LICENSE_SCHEME=		solo

FPC_EQUIVALENT=		textproc/gtk-doc
MESON_ARGS=		-Dtests=false

post-install:
	(cd ${STAGEDIR}${PREFIX}/share/gtk-doc/python && python -m compileall -d / . ||:)

pre-configure:
	${REINPLACE_CMD} -e "s|%%LOCALBASE%%|${LOCALBASE}|g" ${WRKSRC}/gtk-doc.xsl
	${GREP} -rl "http://docbook.sourceforge.net" ${WRKSRC} | \
		${SED} '/configure\.ac/d' | ${XARGS} \
		${SED} -i'' -e 's|/docbook.sourceforge.net/|/cdn.docbook.org/|'

[FILE:129:descriptions/desc.single]
This package automatically generates DocBook documentation for GTK+ and
Gnome, and converts the DocBook documentation into HTML.


[FILE:100:distinfo]
b20b72b32a80bc18c7f975c9d4c16460c2276566a0b50f87d6852dff3aa7861c       494116 gtk-doc-1.34.0.tar.xz


[FILE:2628:manifests/plist.single]
bin/
 gtkdoc-check
 gtkdoc-depscan
 gtkdoc-fixxref
 gtkdoc-mkdb
 gtkdoc-mkhtml
 gtkdoc-mkhtml2
 gtkdoc-mkman
 gtkdoc-mkpdf
 gtkdoc-rebase
 gtkdoc-scan
 gtkdoc-scangobj
 gtkdocize
lib/cmake/GtkDoc/
 GtkDocConfig.cmake
 GtkDocConfigVersion.cmake
 GtkDocScanGObjWrapper.cmake
lib/pkgconfig/gtk-doc.pc
share/aclocal/gtk-doc.m4
share/gtk-doc/data/
 devhelp2.xsd
 devhelp2.xsl
 gtk-doc.flat.make
 gtk-doc.make
 gtk-doc.no-xslt-flat.make
 gtk-doc.no-xslt.make
 gtk-doc.xsl
 home.png
 left-insensitive.png
 left.png
 right-insensitive.png
 right.png
 style.css
 up-insensitive.png
 up.png
 version-greater-or-equal.xsl
share/gtk-doc/python/gtkdoc/
 __init__.py
 check.py
 common.py
 config.py
 config_data.py
 fixxref.py
 highlight.py
 md_to_db.py
 mkdb.py
 mkhtml.py
 mkhtml2.py
 mkman.py
 mkpdf.py
 rebase.py
 scan.py
 scangobj.py
share/gtk-doc/python/gtkdoc/__pycache__/
 __init__.cpython-%%PYTHON_SUFFIX%%.pyc
 check.cpython-%%PYTHON_SUFFIX%%.pyc
 common.cpython-%%PYTHON_SUFFIX%%.pyc
 config.cpython-%%PYTHON_SUFFIX%%.pyc
 config_data.cpython-%%PYTHON_SUFFIX%%.pyc
 fixxref.cpython-%%PYTHON_SUFFIX%%.pyc
 highlight.cpython-%%PYTHON_SUFFIX%%.pyc
 md_to_db.cpython-%%PYTHON_SUFFIX%%.pyc
 mkdb.cpython-%%PYTHON_SUFFIX%%.pyc
 mkhtml.cpython-%%PYTHON_SUFFIX%%.pyc
 mkhtml2.cpython-%%PYTHON_SUFFIX%%.pyc
 mkman.cpython-%%PYTHON_SUFFIX%%.pyc
 mkpdf.cpython-%%PYTHON_SUFFIX%%.pyc
 rebase.cpython-%%PYTHON_SUFFIX%%.pyc
 scan.cpython-%%PYTHON_SUFFIX%%.pyc
 scangobj.cpython-%%PYTHON_SUFFIX%%.pyc
share/help/C/gtk-doc-manual/
 fdl-appendix.xml
 index.docbook
share/help/bn_IN/gtk-doc-manual/
 fdl-appendix.xml
 index.docbook
share/help/cs/gtk-doc-manual/
 fdl-appendix.xml
 index.docbook
share/help/de/gtk-doc-manual/
 fdl-appendix.xml
 index.docbook
share/help/el/gtk-doc-manual/
 fdl-appendix.xml
 index.docbook
share/help/en_GB/gtk-doc-manual/
 fdl-appendix.xml
 index.docbook
share/help/es/gtk-doc-manual/
 fdl-appendix.xml
 index.docbook
share/help/eu/gtk-doc-manual/
 fdl-appendix.xml
 index.docbook
share/help/fr/gtk-doc-manual/
 fdl-appendix.xml
 index.docbook
share/help/gl/gtk-doc-manual/
 fdl-appendix.xml
 index.docbook
share/help/gu/gtk-doc-manual/
 fdl-appendix.xml
 index.docbook
share/help/hu/gtk-doc-manual/
 fdl-appendix.xml
 index.docbook
share/help/pt_BR/gtk-doc-manual/
 fdl-appendix.xml
 index.docbook
share/help/sl/gtk-doc-manual/
 fdl-appendix.xml
 index.docbook
share/help/sv/gtk-doc-manual/
 fdl-appendix.xml
 index.docbook
share/help/ta/gtk-doc-manual/
 fdl-appendix.xml
 index.docbook
share/help/te/gtk-doc-manual/
 fdl-appendix.xml
 index.docbook
share/help/zh_CN/gtk-doc-manual/
 fdl-appendix.xml
 index.docbook


[FILE:1110:patches/patch-gtk-doc.xsl]
--- gtk-doc.xsl.orig	2024-03-05 18:09:52 UTC
+++ gtk-doc.xsl
@@ -8,7 +8,7 @@
   <!-- http://www.sagehill.net/docbookxsl/Chunking.html#FastChunking says we should use
        "chunkfast.xsl", but I can't see a difference. Also it is not clear whether
        one should still set "chunk.fast". Again, no meassuable difference. -->
-  <xsl:import href="http://docbook.sourceforge.net/release/xsl/current/html/chunk.xsl"/>
+  <xsl:import href="file://%%LOCALBASE%%/share/xsl/docbook/html/chunk.xsl"/>
   <xsl:include href="devhelp2.xsl"/>
   <xsl:include href="version-greater-or-equal.xsl"/>
 
@@ -70,7 +70,7 @@
        this at least avoid the re-evaluation -->
   <xsl:template name="l10n.language">en</xsl:template>
 
-  <xsl:param name="gtkdoc.l10n.xml" select="document('http://docbook.sourceforge.net/release/xsl/current/common/en.xml')"/>
+  <xsl:param name="gtkdoc.l10n.xml" select="document('file://%%LOCALBASE%%/share/xsl/docbook/common/en.xml')"/>
 
   <xsl:key name="gtkdoc.gentext.key" match="l:gentext[@key]" use="@key"/>
   <xsl:key name="gtkdoc.context.key" match="l:context[@name]" use="@name"/>


[FILE:295:patches/patch-meson.build]
--- meson.build.orig	2024-03-05 18:09:52 UTC
+++ meson.build
@@ -134,7 +134,7 @@ configure_file(
   output: 'gtk-doc.pc',
   configuration: gtkdoc_pc,
   install: true,
-  install_dir: get_option('datadir') / 'pkgconfig',
+  install_dir: get_option('libdir') / 'pkgconfig',
 )
 
 subdir('help')

