# Buildsheet autogenerated by ravenadm tool -- Do not edit.

NAMEBASE=		gtk-doc
VERSION=		1.32
KEYWORDS=		textproc
VARIANTS=		standard
SDESC[standard]=	GTK+ DocBook Documentation Generator
HOMEPAGE=		https://www.gtk.org/gtk-doc/
CONTACT=		nobody

DOWNLOAD_GROUPS=	main
SITES[main]=		GNOME/gtk-doc/1.32
DISTFILE[1]=		gtk-doc-1.32.tar.xz:main
DF_INDEX=		1
SPKGS[standard]=	single

OPTIONS_AVAILABLE=	none
OPTIONS_STANDARD=	none

BUILD_DEPENDS=		itstool:single:standard
BUILDRUN_DEPENDS=	jade:primary:standard
			docbook-xml:single:standard
			docbook-xsl:primary:standard
			rarian:single:standard
RUN_DEPENDS=		python-six:single:python_default
			python-Pygments:single:python_default

USES=			gmake gettext-tools perl pkgconfig python
GNOME_COMPONENTS=	libxslt

LICENSE=		GPLv2+:single
LICENSE_TERMS=		single:{{WRKDIR}}/TERMS
LICENSE_FILE=		GPLv2+:{{WRKSRC}}/COPYING
LICENSE_AWK=		TERMS:"^$$"
LICENSE_SOURCE=		TERMS:{{WRKSRC}}/gtkdoc-check.in
LICENSE_SCHEME=		solo

FPC_EQUIVALENT=		textproc/gtk-doc

INVALID_RPATH=		yes
MUST_CONFIGURE=		gnu
CONFIGURE_ARGS=		--with-xml-catalog={{LOCALBASE}}/share/xml/catalog.ports
			--localstatedir={{PREFIX}}/share
CONFIGURE_ENV=		GTKDOC="false"

MAKE_ARGS=		pkgconfigdir={{PREFIX}}/lib/pkgconfig

post-patch:
	${GREP} -rl "http://docbook.sourceforge.net" ${WRKSRC} | \
		${SED} '/configure\.ac/d' | ${XARGS} \
		${SED} -i'' -e 's|/docbook.sourceforge.net/|/cdn.docbook.org/|'
	# itstool segfaults on french and chinese documentation
	${REINPLACE_CMD} \
		-e '/HELP_LINGUAS =/ s/ fr / /' \
		-e '/HELP_LINGUAS =/ s/ zh_CN//' \
		${WRKSRC}/help/manual/Makefile.in

[FILE:129:descriptions/desc.single]
This package automatically generates DocBook documentation for GTK+ and
Gnome, and converts the DocBook documentation into HTML.


[FILE:98:distinfo]
de0ef034fb17cb21ab0c635ec730d19746bce52984a6706e7bbec6fb5e0b907c       762000 gtk-doc-1.32.tar.xz


[FILE:1572:manifests/plist.single]
bin/
 gtkdoc-check
 gtkdoc-depscan
 gtkdoc-fixxref
 gtkdoc-mkdb
 gtkdoc-mkhtml
 gtkdoc-mkhtml2
 gtkdoc-mkman
 gtkdoc-mkpdf
 gtkdoc-rebase
 gtkdoc-scan
 gtkdoc-scangobj
 gtkdocize
lib/pkgconfig/gtk-doc.pc
share/aclocal/gtk-doc.m4
share/cmake/GtkDoc/
 GtkDocConfig.cmake
 GtkDocConfigVersion.cmake
 GtkDocScanGObjWrapper.cmake
share/gtk-doc/data/
 devhelp2.xsd
 devhelp2.xsl
 gtk-doc.flat.make
 gtk-doc.make
 gtk-doc.no-xslt-flat.make
 gtk-doc.no-xslt.make
 gtk-doc.xsl
 home.png
 left-insensitive.png
 left.png
 right-insensitive.png
 right.png
 style.css
 up-insensitive.png
 up.png
 version-greater-or-equal.xsl
share/gtk-doc/python/gtkdoc/
 __init__.py
 check.py
 common.py
 config.py
 fixxref.py
 highlight.py
 md_to_db.py
 mkdb.py
 mkhtml.py
 mkhtml2.py
 mkman.py
 mkpdf.py
 rebase.py
 scan.py
 scangobj.py
share/help/C/gtk-doc-manual/
 fdl-appendix.xml
 index.docbook
share/help/bn_IN/gtk-doc-manual/
 fdl-appendix.xml
 index.docbook
share/help/cs/gtk-doc-manual/
 fdl-appendix.xml
 index.docbook
share/help/el/gtk-doc-manual/
 fdl-appendix.xml
 index.docbook
share/help/en_GB/gtk-doc-manual/
 fdl-appendix.xml
 index.docbook
share/help/es/gtk-doc-manual/
 fdl-appendix.xml
 index.docbook
share/help/gl/gtk-doc-manual/
 fdl-appendix.xml
 index.docbook
share/help/gu/gtk-doc-manual/
 fdl-appendix.xml
 index.docbook
share/help/sl/gtk-doc-manual/
 fdl-appendix.xml
 index.docbook
share/help/sv/gtk-doc-manual/
 fdl-appendix.xml
 index.docbook
share/help/ta/gtk-doc-manual/
 fdl-appendix.xml
 index.docbook
share/help/te/gtk-doc-manual/
 fdl-appendix.xml
 index.docbook


[FILE:492:patches/patch-help_manual_Makefile.in]
itstool segfaults on fr, zh_CN and on solaris: de and pt_BR
--- help/manual/Makefile.in.orig	2019-08-05 21:01:17 UTC
+++ help/manual/Makefile.in
@@ -274,7 +274,7 @@ HELP_FILES = \
     index.docbook \
     fdl-appendix.xml
 
-HELP_LINGUAS = bn_IN cs de el en_GB es fr gl gu pt_BR sl sv ta te zh_CN
+HELP_LINGUAS = bn_IN cs el en_GB es gl gu sl sv ta te 
 CLEANFILES = $(_HELP_LC_FILES) $(_HELP_LC_STAMPS) $(_HELP_MOFILES)
 GITIGNOREFILES = ??_??/$(HELP_ID).xml ??/$(HELP_ID).xml
 all: all-am

