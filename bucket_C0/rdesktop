# Buildsheet autogenerated by ravenadm tool -- Do not edit.

NAMEBASE=		rdesktop
VERSION=		1.8.6
REVISION=		1
KEYWORDS=		net comms
VARIANTS=		standard
SDESC[standard]=	RDP client - Windows NT/2000/2003 Terminal Server
HOMEPAGE=		https://www.rdesktop.org/
CONTACT=		nobody

DOWNLOAD_GROUPS=	main
SITES[main]=		https://github.com/rdesktop/rdesktop/releases/download/v1.8.6/
DISTFILE[1]=		rdesktop-1.8.6.tar.gz:main
DF_INDEX=		1
SPKGS[standard]=	complete
			primary
			docs

OPTIONS_AVAILABLE=	none
OPTIONS_STANDARD=	none

BUILDRUN_DEPENDS=	libao:primary:standard
			libsamplerate:primary:standard
			pcsc-lite:primary:standard

USES=			autoreconf gmake iconv pkgconfig ssl
XORG_COMPONENTS=	x11

LICENSE=		GPLv3+:primary
LICENSE_TERMS=		primary:{{WRKDIR}}/TERMS
LICENSE_FILE=		GPLv3+:{{WRKSRC}}/COPYING
LICENSE_AWK=		TERMS:"^\#include"
LICENSE_SOURCE=		TERMS:{{WRKSRC}}/rdesktop.h
LICENSE_SCHEME=		solo

FPC_EQUIVALENT=		net/rdesktop

MUST_CONFIGURE=		gnu
CONFIGURE_ARGS=		--disable-credssp
			--with-ipv6
			--with-sound=libao
			--with-openssl={{OPENSSLBASE}}
			{{ICONV_CONFIGURE_ARG}}

do-install:
	${MKDIR} ${STAGEDIR}${PREFIX}/share/rdesktop/keymaps
	${MKDIR} ${STAGEDIR}${STD_DOCDIR}
	${INSTALL_PROGRAM} ${WRKSRC}/rdesktop ${STAGEDIR}${PREFIX}/bin
	${INSTALL_MAN} ${WRKSRC}/doc/rdesktop.1 \
		${STAGEDIR}${MAN1PREFIX}/man/man1
	${INSTALL_DATA} ${WRKSRC}/keymaps/* \
		${STAGEDIR}${PREFIX}/share/rdesktop/keymaps
	(cd ${WRKSRC} && ${INSTALL_DATA} doc/AUTHORS doc/TODO doc/*.txt \
		${STAGEDIR}${STD_DOCDIR})

[FILE:242:descriptions/desc.primary]
Rdesktop is an open source client for Windows NT/2000/2003 Terminal Server,
capable of natively speaking its Remote Desktop Protocol (RDP) in
order to present the user's Windows desktop.  Unlike Citrix ICA, no server
extensions are required.


[FILE:100:distinfo]
4131c5cc3d6a2e1a6515180502093c2b1b94cc8c34dd3f86aa8b3475399634ef       322459 rdesktop-1.8.6.tar.gz


[FILE:277:manifests/plist.primary]
bin/rdesktop
share/man/man1/rdesktop.1.gz
share/rdesktop/keymaps/
 ar
 common
 convert-map
 cs
 da
 de
 de-ch
 en-dv
 en-gb
 en-us
 es
 et
 fi
 fo
 fr
 fr-be
 fr-ca
 fr-ch
 he
 hr
 hu
 is
 it
 ja
 ko
 lt
 lv
 mk
 modifiers
 nl
 nl-be
 no
 pl
 pt
 pt-br
 ru
 sk
 sl
 sv
 th
 tr


[FILE:124:manifests/plist.docs]
share/doc/rdesktop/
 AUTHORS
 TODO
 ipv6.txt
 keymap-names.txt
 keymapping.txt
 licensing.txt
 patches.txt
 redirection.txt


[FILE:286:patches/patch-configure]
--- configure.orig	2019-05-16 10:57:05 UTC
+++ configure
@@ -3111,7 +3111,7 @@ if test "$ac_test_CFLAGS" = set; then
   CFLAGS=$ac_save_CFLAGS
 elif test $ac_cv_prog_cc_g = yes; then
   if test "$GCC" = yes; then
-    CFLAGS="-g -O2"
+    NOFLAGS="no-op"
   else
     CFLAGS="-g"
   fi


[FILE:192:patches/patch-xwin.c]
--- xwin.c.orig	2019-05-09 08:14:04 UTC
+++ xwin.c
@@ -2160,6 +2160,8 @@ ui_resize_window()
 		XFreePixmap(g_display, g_backstore);
 		g_backstore = bs;
 	}
+
+	ui_reset_clip();
 }
 
 RD_BOOL

