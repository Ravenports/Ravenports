# Buildsheet autogenerated by ravenadm tool -- Do not edit.

NAMEBASE=		argon2
VERSION=		20190702
KEYWORDS=		security
VARIANTS=		standard
SDESC[standard]=	Reference C implementation of the Argon2 hash
HOMEPAGE=		https://github.com/P-H-C/phc-winner-argon2
CONTACT=		Michael_Reim[kraileth@elderlinux.org]

DOWNLOAD_GROUPS=	main
SITES[main]=		https://github.com/P-H-C/phc-winner-argon2/archive/
DISTFILE[1]=		20190702.tar.gz:main
DF_INDEX=		1
SPKGS[standard]=	single

OPTIONS_AVAILABLE=	none
OPTIONS_STANDARD=	none

USES=			gmake

DISTNAME=		phc-winner-argon2-20190702

LICENSE=		CC0_10:single APACHE20:single
LICENSE_TERMS=		single:{{WRKDIR}}/TERMS
LICENSE_FILE=		CC0_10:stock
			APACHE20:stock
LICENSE_AWK=		TERMS:"^$$"
LICENSE_SOURCE=		TERMS:{{WRKSRC}}/src/core.h
LICENSE_SCHEME=		dual

FPC_EQUIVALENT=		security/libargon2

INVALID_RPATH=		yes

MAKE_ARGS=		PKGCONFIG_REL=lib
			LIBRARY_REL=lib

INSTALL_REQ_TOOLCHAIN=	yes

post-patch:
	${REINPLACE_CMD} -e "s|PREFIX = /usr|PREFIX = ${PREFIX}|" \
		${WRKSRC}/Makefile

post-install:
	${STRIP_CMD} ${STAGEDIR}${PREFIX}/bin/argon2
	${STRIP_CMD} ${STAGEDIR}${PREFIX}/lib/libargon2.${LIBEXT}

[FILE:554:descriptions/desc.single]
Argon2 is a password-hashing function created by by Alex Biryukov, Daniel 
Dinu, and Dmitry Khovratovich. It was declared the winner of the Password 
Hashing Competition (PHC) in 2015. The PHC recommends using it rather than 
legacy algorithms. Argon2 is in the public domain.

There are two versions of Argon2. Argon2d provides the highest resistance 
against GPU cracking attacks. Argon2i is designed to resist side-channel 
attacks. Argon2id is a hybrid that should generally be used unless special 
reasons exist to prefer one of the other versions.


[FILE:94:distinfo]
daf972a89577f8772602bf2eb38b6a3dd3d922bf5724d45e7f9589b5e830442c      1505307 20190702.tar.gz


[FILE:103:manifests/plist.single]
bin/argon2
include/argon2.h
lib/
 libargon2.a
 libargon2.so
 libargon2.so.1
lib/pkgconfig/libargon2.pc


[FILE:432:patches/patch-Makefile]
--- Makefile.orig	2019-07-02 16:38:45 UTC
+++ Makefile
@@ -77,8 +77,10 @@ ifeq ($(KERNEL_NAME), Linux)
 	PC_EXTRA_LIBS ?= -lrt -ldl
 endif
 ifeq ($(KERNEL_NAME), $(filter $(KERNEL_NAME),DragonFly FreeBSD NetBSD OpenBSD))
-	LIB_EXT := so
+	LIB_EXT := so.$(ABI_VERSION)
 	LIB_CFLAGS := -shared -fPIC
+	SO_LDFLAGS := -Wl,-soname,lib$(LIB_NAME).$(LIB_EXT)
+	LINKED_LIB_EXT := so
 	PC_EXTRA_LIBS ?=
 endif
 ifeq ($(KERNEL_NAME), Darwin)

