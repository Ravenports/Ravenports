# Buildsheet autogenerated by ravenadm tool -- Do not edit.

NAMEBASE=		argon2
VERSION=		20190702
REVISION=		1
KEYWORDS=		security
VARIANTS=		std
SDESC[std]=		Reference C implementation of the Argon2 hash
HOMEPAGE=		https://github.com/P-H-C/phc-winner-argon2
CONTACT=		Michael_Reim[kraileth@elderlinux.org]

DOWNLOAD_GROUPS=	main
SITES[main]=		https://github.com/P-H-C/phc-winner-argon2/archive/
DISTFILE[1]=		20190702.tar.gz:main
DF_INDEX=		1
SPKGS[std]=		set
			primary
			dev
			tools

OPTIONS_AVAILABLE=	none
OPTIONS_STANDARD=	none

USES=			gmake

DISTNAME=		phc-winner-argon2-20190702

LICENSE=		CC0_10:primary APACHE20:primary
LICENSE_TERMS=		primary:{{WRKDIR}}/TERMS
LICENSE_FILE=		CC0_10:stock
			APACHE20:stock
LICENSE_AWK=		TERMS:"^$$"
LICENSE_SOURCE=		TERMS:{{WRKSRC}}/src/core.h
LICENSE_SCHEME=		dual

FPC_EQUIVALENT=		security/libargon2

MAKE_ARGS=		PKGCONFIG_REL=lib
			LIBRARY_REL=lib

INSTALL_REQ_TOOLCHAIN=	yes

post-install:
	${STRIP_CMD} ${STAGEDIR}${PREFIX}/bin/argon2
	${STRIP_CMD} ${STAGEDIR}${PREFIX}/lib/libargon2.so

pre-configure:
	${REINPLACE_CMD} -e "s|PREFIX = /usr|PREFIX = ${PREFIX}|" \
		${WRKSRC}/Makefile

[FILE:554:descriptions/desc.primary]
Argon2 is a password-hashing function created by by Alex Biryukov, Daniel 
Dinu, and Dmitry Khovratovich. It was declared the winner of the Password 
Hashing Competition (PHC) in 2015. The PHC recommends using it rather than 
legacy algorithms. Argon2 is in the public domain.

There are two versions of Argon2. Argon2d provides the highest resistance 
against GPU cracking attacks. Argon2i is designed to resist side-channel 
attacks. Argon2id is a hybrid that should generally be used unless special 
reasons exist to prefer one of the other versions.


[FILE:39:descriptions/desc.tools]
This package contains the argon2 tool.


[FILE:94:distinfo]
daf972a89577f8772602bf2eb38b6a3dd3d922bf5724d45e7f9589b5e830442c      1505307 20190702.tar.gz


[FILE:19:manifests/plist.primary]
lib/libargon2.so.1


[FILE:76:manifests/plist.dev]
include/argon2.h
lib/
 libargon2.a
 libargon2.so
lib/pkgconfig/libargon2.pc


[FILE:11:manifests/plist.tools]
bin/argon2


[FILE:549:patches/patch-Makefile]
--- Makefile.orig	2019-05-20 09:18:00 UTC
+++ Makefile
@@ -76,9 +76,11 @@ ifeq ($(KERNEL_NAME), Linux)
 	LINKED_LIB_EXT := so
 	PC_EXTRA_LIBS ?= -lrt -ldl
 endif
-ifeq ($(KERNEL_NAME), $(filter $(KERNEL_NAME),DragonFly FreeBSD NetBSD OpenBSD))
-	LIB_EXT := so
+ifeq ($(KERNEL_NAME), $(filter $(KERNEL_NAME),DragonFly FreeBSD NetBSD OpenBSD MidnightBSD))
+	LIB_EXT := so.$(ABI_VERSION)
 	LIB_CFLAGS := -shared -fPIC
+	SO_LDFLAGS := -Wl,-soname,lib$(LIB_NAME).$(LIB_EXT)
+	LINKED_LIB_EXT := so
 	PC_EXTRA_LIBS ?=
 endif
 ifeq ($(KERNEL_NAME), Darwin)

