# Buildsheet autogenerated by ravenadm tool -- Do not edit.

NAMEBASE=		xorg-driver-video-vesa
VERSION=		2.6.0
KEYWORDS=		x11_drivers
VARIANTS=		standard
SDESC[standard]=	X.org vesa video driver
HOMEPAGE=		https://www.x.org/
CONTACT=		nobody

DOWNLOAD_GROUPS=	main
SITES[main]=		XORG/individual/driver
DISTFILE[1]=		xf86-video-vesa-2.6.0.tar.xz:main
DF_INDEX=		1
SPKGS[standard]=	single

OPTIONS_AVAILABLE=	none
OPTIONS_STANDARD=	none

BUILD_DEPENDS=		xorg-server:dev:standard
BUILDRUN_DEPENDS=	xorg-server:primary:standard

USES=			libtool
XORG_COMPONENTS=	xorgproto

DISTNAME=		xf86-video-vesa-2.6.0

LICENSE=		MIT:single
LICENSE_FILE=		MIT:{{WRKSRC}}/COPYING
LICENSE_SCHEME=		solo

FPC_EQUIVALENT=		x11-drivers/xf86-video-vesa

MUST_CONFIGURE=		gnu
CONFIGURE_ENV=		DRIVER_MAN_SUFFIX=4

INSTALL_TARGET=		install-strip

[FILE:56:descriptions/desc.single]
This package contains the X.Org xf86-video-vesa driver.


[FILE:107:distinfo]
10082771b1a8f659c60b3d9b70456a4b59948a75b3cade2dfa33b8b05e549bb1       275572 xf86-video-vesa-2.6.0.tar.xz


[FILE:62:manifests/plist.single]
lib/xorg/modules/drivers/vesa_drv.so
share/man/man4/vesa.4.gz


[FILE:419:patches/patch-src_vesa.c]
--- src/vesa.c.orig	2022-12-09 20:27:18 UTC
+++ src/vesa.c
@@ -491,10 +491,12 @@ VESAPciProbe(DriverPtr drv, int entity_n
     if (pScrn != NULL) {
 	VESAPtr pVesa;
 
+#if !(defined(__FreeBSD__) || defined(__DragonFly__))
 	if (pci_device_has_kernel_driver(dev)) {
 	    ErrorF("vesa: Ignoring device with a bound kernel driver\n");
 	    return FALSE;
 	}
+#endif
 
 	pVesa = VESAGetRec(pScrn);
 	VESAInitScrn(pScrn);

