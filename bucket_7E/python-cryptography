# Buildsheet autogenerated by ravenadm tool -- Do not edit.

NAMEBASE=		python-cryptography
VERSION=		3.4.8
KEYWORDS=		python rust
VARIANTS=		py38 py39
SDESC[py38]=		Cryptographic recipes and primitives (PY38)
SDESC[py39]=		Cryptographic recipes and primitives (PY39)
HOMEPAGE=		https://github.com/pyca/cryptography
CONTACT=		Python_Automaton[python@ironwolf.systems]

DOWNLOAD_GROUPS=	main cr01 cr02 cr03 cr04 cr05 cr06 cr07 cr08 cr09 cr10 cr11 cr12 cr13 cr14 cr15 cr16 cr17 cr18 cr19 cr20 cr21 cr22 cr23 cr24 cr25 cr26 cr27 cr28 cr29 cr30
SITES[main]=		PYPI/c/cryptography
SITES[cr01]=		CRATES/bitflags:1.2.1
SITES[cr02]=		CRATES/cfg-if:1.0.0
SITES[cr03]=		CRATES/ctor:0.1.19
SITES[cr04]=		CRATES/ghost:0.1.2
SITES[cr05]=		CRATES/indoc:0.3.6
SITES[cr06]=		CRATES/indoc-impl:0.3.6
SITES[cr07]=		CRATES/instant:0.1.9
SITES[cr08]=		CRATES/inventory:0.1.10
SITES[cr09]=		CRATES/inventory-impl:0.1.10
SITES[cr10]=		CRATES/libc:0.2.85
SITES[cr11]=		CRATES/lock_api:0.4.2
SITES[cr12]=		CRATES/parking_lot:0.11.1
SITES[cr13]=		CRATES/parking_lot_core:0.8.3
SITES[cr14]=		CRATES/paste:0.1.18
SITES[cr15]=		CRATES/paste-impl:0.1.18
SITES[cr16]=		CRATES/proc-macro-hack:0.5.19
SITES[cr17]=		CRATES/proc-macro2:1.0.24
SITES[cr18]=		CRATES/pyo3:0.13.2
SITES[cr19]=		CRATES/pyo3-macros:0.13.2
SITES[cr20]=		CRATES/pyo3-macros-backend:0.13.2
SITES[cr21]=		CRATES/quote:1.0.9
SITES[cr22]=		CRATES/redox_syscall:0.2.4
SITES[cr23]=		CRATES/scopeguard:1.1.0
SITES[cr24]=		CRATES/smallvec:1.6.1
SITES[cr25]=		CRATES/syn:1.0.60
SITES[cr26]=		CRATES/unicode-xid:0.2.1
SITES[cr27]=		CRATES/unindent:0.1.7
SITES[cr28]=		CRATES/winapi:0.3.9
SITES[cr29]=		CRATES/winapi-i686-pc-windows-gnu:0.4.0
SITES[cr30]=		CRATES/winapi-x86_64-pc-windows-gnu:0.4.0
DISTFILE[1]=		cryptography-3.4.8.tar.gz:main
DISTFILE[2]=		generated:cr01
DISTFILE[3]=		generated:cr02
DISTFILE[4]=		generated:cr03
DISTFILE[5]=		generated:cr04
DISTFILE[6]=		generated:cr05
DISTFILE[7]=		generated:cr06
DISTFILE[8]=		generated:cr07
DISTFILE[9]=		generated:cr08
DISTFILE[10]=		generated:cr09
DISTFILE[11]=		generated:cr10
DISTFILE[12]=		generated:cr11
DISTFILE[13]=		generated:cr12
DISTFILE[14]=		generated:cr13
DISTFILE[15]=		generated:cr14
DISTFILE[16]=		generated:cr15
DISTFILE[17]=		generated:cr16
DISTFILE[18]=		generated:cr17
DISTFILE[19]=		generated:cr18
DISTFILE[20]=		generated:cr19
DISTFILE[21]=		generated:cr20
DISTFILE[22]=		generated:cr21
DISTFILE[23]=		generated:cr22
DISTFILE[24]=		generated:cr23
DISTFILE[25]=		generated:cr24
DISTFILE[26]=		generated:cr25
DISTFILE[27]=		generated:cr26
DISTFILE[28]=		generated:cr27
DISTFILE[29]=		generated:cr28
DISTFILE[30]=		generated:cr29
DISTFILE[31]=		generated:cr30
DIST_SUBDIR=		rust/crates
DF_INDEX=		1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20
			21 22 23 24 25 26 27 28 29 30 31
SPKGS[py38]=		single
SPKGS[py39]=		single

OPTIONS_AVAILABLE=	PY38 PY39
OPTIONS_STANDARD=	none
VOPTS[py38]=		PY38=ON PY39=OFF
VOPTS[py39]=		PY38=OFF PY39=ON

USES=			cpe cargo ssl cclibs:single

DISTNAME=		cryptography-3.4.8

CARGO_CARGOLOCK=	{{WRKSRC}}/src/rust/Cargo.lock
CARGO_CARGOTOML=	{{WRKSRC}}/src/rust/Cargo.toml
CPE_PRODUCT=		python-cryptography
CPE_VENDOR=		python-cryptography_project

CARGO_SKIP_CONFIGURE=	yes
CARGO_SKIP_BUILD=	yes
CARGO_SKIP_INSTALL=	yes

[PY38].BUILDRUN_DEPENDS_ON=		python-cffi:single:py38
					python-setuptools-rust:single:py38
[PY38].USES_ON=				python:py38,sutools

[PY39].BUILDRUN_DEPENDS_ON=		python-cffi:single:py39
					python-setuptools-rust:single:py39
[PY39].USES_ON=				python:py39,sutools

post-patch:
	${MKDIR} ${WRKSRC}/.cargo
	echo "[source.cargo]" >> ${WRKSRC}/.cargo/config.toml
	echo "directory = '${CARGO_VENDOR_DIR}'" >> ${WRKSRC}/.cargo/config.toml
	echo "[source.crates-io]" >> ${WRKSRC}/.cargo/config.toml
	echo "replace-with = 'cargo'" >> ${WRKSRC}/.cargo/config.toml

[FILE:1834:descriptions/desc.single]
pyca/cryptography
=================

    :alt: Latest Version

    :alt: Latest Docs

cryptography is a package which provides cryptographic recipes and
primitives to Python developers.  Our goal is for it to be your
"cryptographic
standard library". It supports Python 3.6+ and PyPy3 7.2+.

cryptography includes both high level recipes and low level interfaces to
common cryptographic algorithms such as symmetric ciphers, message digests,
and
key derivation functions. For example, to encrypt something with
cryptography's high level symmetric encryption recipe:

.. code-block:: pycon

    >>> from cryptography.fernet import Fernet
    >>> # Put this somewhere safe!
    >>> key = Fernet.generate_key()
    >>> f = Fernet(key)
    >>> token = f.encrypt(b"A really secret message. Not for prying eyes.")
    >>> token
    '...'
    >>> f.decrypt(token)
    'A really secret message. Not for prying eyes.'

You can find more information in the `documentation`_.

You can install cryptography with:

.. code-block:: console

    $ pip install cryptography

For full details see `the installation documentation`_.

Discussion
~~~~~~~~~~

If you run into bugs, you can file them in our `issue tracker`_.

We maintain a `cryptography-dev`_ mailing list for development discussion.

You can also join ``#cryptography-dev`` on Freenode to ask questions or get
involved.

Security
~~~~~~~~

Need to report a security issue? Please consult our `security reporting`_
documentation.

.. _`documentation`: https://cryptography.io/
.. _`the installation documentation`:
https://cryptography.io/en/latest/installation.html
.. _`issue tracker`: https://github.com/pyca/cryptography/issues
.. _`cryptography-dev`:
https://mail.python.org/mailman/listinfo/cryptography-dev
.. _`security reporting`: https://cryptography.io/en/latest/security.html


[FILE:3549:distinfo]
94cc5ed4ceaefcbe5bf38c8fba6a21fc1d365bb8fb826ea1688e3370b2e24a1c       546907 rust/crates/cryptography-3.4.8.tar.gz
cf1de2fe8c75bc145a2f577add951f8134889b4795d47466a54a5c846d691693        16745 rust/crates/bitflags-1.2.1.tar.gz
baf1de4339761588bc0619e3cbc0120ee582ebb74b53b4efbf79117bd2da40fd         7934 rust/crates/cfg-if-1.0.0.tar.gz
e8f45d9ad417bcef4817d614a501ab55cdd96a6fdb24f49aab89a54acfd66b19         9307 rust/crates/ctor-0.1.19.tar.gz
1a5bcf1bbeab73aa4cf2fde60a846858dc036163c7c33bec309f8d17de785479        12777 rust/crates/ghost-0.1.2.tar.gz
47741a8bc60fb26eb8d6e0238bbb26d8575ff623fdc97b1a2c00c050b9684ed8         9663 rust/crates/indoc-0.3.6.tar.gz
ce046d161f000fffde5f432a0d034d0341dc152643b2598ed5bfce44c4f3a8f0         7933 rust/crates/indoc-impl-0.3.6.tar.gz
61124eeebbd69b8190558df225adf7e4caafce0d743919e5d6b19652314ec5ec         5213 rust/crates/instant-0.1.9.tar.gz
0f0f7efb804ec95e33db9ad49e4252f049e37e8b0a4652e3cd61f7999f2eff7f        11572 rust/crates/inventory-0.1.10.tar.gz
75c094e94816723ab936484666968f5b58060492e880f3c8d00489a1e244fa51         6228 rust/crates/inventory-impl-0.1.10.tar.gz
7ccac4b00700875e6a07c6cde370d44d32fa01c5a65cdd2fca6858c479d28bb3       516872 rust/crates/libc-0.2.85.tar.gz
dd96ffd135b2fd7b973ac026d28085defbe8983df057ced3eb4f2130b0831312        20375 rust/crates/lock_api-0.4.2.tar.gz
6d7744ac029df22dca6284efe4e898991d28e3085c706c972bcd7da4a27a15eb        39854 rust/crates/parking_lot-0.11.1.tar.gz
fa7a782938e745763fe6907fc6ba86946d72f49fe7e21de074e08128a99fb018        32147 rust/crates/parking_lot_core-0.8.3.tar.gz
45ca20c77d80be666aef2b45486da86238fabe33e38306bd3118fe4af33fa880        12259 rust/crates/paste-0.1.18.tar.gz
d95a7db200b97ef370c8e6de0088252f7e0dfff7d047a28528e47456c0fc98b6         9451 rust/crates/paste-impl-0.1.18.tar.gz
dbf0c48bc1d91375ae5c3cd81e3722dff1abcf81a30960240640d223f59fe0e5        15556 rust/crates/proc-macro-hack-0.5.19.tar.gz
1e0704ee1a7e00d7bb417d0770ea303c1bccbabf0ef1667dae92b5967f5f8a71        37716 rust/crates/proc-macro2-1.0.24.tar.gz
4837b8e8e18a102c23f79d1e9a110b597ea3b684c95e874eb1ad88f8683109c3       281372 rust/crates/pyo3-0.13.2.tar.gz
a47f2c300ceec3e58064fd5f8f5b61230f2ffd64bde4970c81fdd0563a2db1bb         5434 rust/crates/pyo3-macros-0.13.2.tar.gz
87b097e5d84fcbe3e167f400fbedd657820a375b034c78bd852050749a575d66        33106 rust/crates/pyo3-macros-backend-0.13.2.tar.gz
c3d0b9745dc2debf507c8422de05d7226cc1f0644216dfdfead988f9b1ab32a7        25042 rust/crates/quote-1.0.9.tar.gz
05ec8ca9416c5ea37062b502703cd7fcb207736bc294f6e0cf367ac6fc234570        23234 rust/crates/redox_syscall-0.2.4.tar.gz
d29ab0c6d3fc0ee92fe66e2d99f700eab17a8d57d1c1d3b748380fb20baa78cd        11470 rust/crates/scopeguard-1.1.0.tar.gz
fe0f37c9e8f3c5a4a66ad655a93c74daac4ad00c441533bf5c6e7990bb42604e        26444 rust/crates/smallvec-1.6.1.tar.gz
c700597eca8a5a762beb35753ef6b94df201c81cca676604f547495a0d7f0081       231087 rust/crates/syn-1.0.60.tar.gz
f7fe0bb3479651439c9112f72b6c505038574c9fbb575ed1bf3b797fa39dd564        14392 rust/crates/unicode-xid-0.2.1.tar.gz
f14ee04d9415b52b3aeab06258a3f07093182b88ba0f9b8d203f211a7a7d41c7         8346 rust/crates/unindent-0.1.7.tar.gz
5c839a674fcd7a98952e593242ea400abe93992746761e38641405d28b00f419      1200382 rust/crates/winapi-0.3.9.tar.gz
ac3b87c63620426dd9b991e5ce0329eff545bccbbb34f3be09ff6fb6ab51b7b6      2918815 rust/crates/winapi-i686-pc-windows-gnu-0.4.0.tar.gz
712e227841d057c1ee1cd2fb22fa7e5a5461ae8e48fa2ca79ec42cfc1931183f      2947998 rust/crates/winapi-x86_64-pc-windows-gnu-0.4.0.tar.gz


[FILE:1733:patches/patch-fix-build-with-LibreSSL-3.3.2]
From 94590a9aecc9e5ef6fc8eda52bae43643a4c44bd Mon Sep 17 00:00:00 2001
From: Charlie Li <vishwin@users.noreply.github.com>
Date: Mon, 19 Apr 2021 18:38:38 -0400
Subject: [PATCH] Fix build with LibreSSL 3.3.2 (#5988)

* LibreSSL 3.3.2 supports SSL_OP_NO_DTLS*

While here, bump CI

* Fix preprocessor guards for LibreSSL's SSL_OP_NO_DTLS*

DTLS_set_link_mtu and DTLS_get_link_min_mtu are not part of 3.3.2

* Switch to LESS_THAN context for LibreSSL 3.3.2

While here, fix indents

* Remove extra C variable declaration

The variable is not actually used from Python
---
 .github/workflows/ci.yml              | 2 +-
 src/_cffi_src/openssl/cryptography.py | 7 +++++++
 src/_cffi_src/openssl/ssl.py          | 2 ++
 3 files changed, 10 insertions(+), 1 deletion(-)

--- src/_cffi_src/openssl/cryptography.py
+++ src/_cffi_src/openssl/cryptography.py
@@ -32,6 +32,13 @@ INCLUDES = """
 #include <Winsock2.h>
 #endif
 
+#if CRYPTOGRAPHY_IS_LIBRESSL
+#define CRYPTOGRAPHY_LIBRESSL_LESS_THAN_332 \
+    (LIBRESSL_VERSION_NUMBER < 0x3030200f)
+#else
+#define CRYPTOGRAPHY_LIBRESSL_LESS_THAN_332 (0)
+#endif
+
 #define CRYPTOGRAPHY_OPENSSL_110F_OR_GREATER \
     (OPENSSL_VERSION_NUMBER >= 0x1010006f && !CRYPTOGRAPHY_IS_LIBRESSL)
 
diff --git src/_cffi_src/openssl/ssl.py src/_cffi_src/openssl/ssl.py
index 11a7d63a..081ef041 100644
--- src/_cffi_src/openssl/ssl.py
+++ src/_cffi_src/openssl/ssl.py
@@ -586,8 +586,10 @@ static const long TLS_ST_OK = 0;
 #endif
 
 #if CRYPTOGRAPHY_IS_LIBRESSL
+#if CRYPTOGRAPHY_LIBRESSL_LESS_THAN_332
 static const long SSL_OP_NO_DTLSv1 = 0;
 static const long SSL_OP_NO_DTLSv1_2 = 0;
+#endif
 long (*DTLS_set_link_mtu)(SSL *, long) = NULL;
 long (*DTLS_get_link_min_mtu)(SSL *) = NULL;
 #endif
-- 
2.31.1


