# Buildsheet autogenerated by ravenadm tool -- Do not edit.

NAMEBASE=		neovim
VERSION=		0.11.2
KEYWORDS=		editors
VARIANTS=		std
SDESC[std]=		Next generation Vim
HOMEPAGE=		https://neovim.io/
CONTACT=		nobody

DOWNLOAD_GROUPS=	main
SITES[main]=		GITHUB/neovim:neovim:v0.11.2
DISTFILE[1]=		generated:main
DF_INDEX=		1
SPKGS[std]=		set
			primary
			man

OPTIONS_AVAILABLE=	none
OPTIONS_STANDARD=	none

BUILD_DEPENDS=		gperf:primary:std
			libluv:dev:std
			libuv:dev:std
			libvterm:dev:std
			luajit-openresty:dev:std
			msgpack:dev:std
			tree-sitter:dev:std
			libtermkey:dev:std
			unibilium:dev:std
			lua51:dev:std
			lua51:primary:std
			lua51:tools:std
			utf8proc:dev:std
BUILDRUN_DEPENDS=	libluv:primary:std
			lua-lpeg:single:lua51
			lua-bitop:single:lua51
			utf8proc:primary:std

USES=			cmake libtool pkgconfig cclibs:primary gettext
			desktop-utils:primary

LICENSE=		APACHE20:primary CUSTOM1:primary
LICENSE_TERMS=		primary:{{WRKDIR}}/TERMS
LICENSE_NAME=		CUSTOM1:"VIM license"
LICENSE_FILE=		APACHE20:{{WRKDIR}}/LICENSE_APACHE
			CUSTOM1:{{WRKDIR}}/LICENSE_VIM
LICENSE_SCHEME=		multi

FPC_EQUIVALENT=		editors/neovim

INSTALL_REQ_TOOLCHAIN=	yes

CMAKE_ARGS=		-DCMAKE_SKIP_BUILD_RPATH:BOOL=YES
			-DDEPS_PREFIX:PATH="{{LOCALBASE}}"
			-DLUA_PRG:FILEPATH="{{LOCALBASE}}/bin/lua51"

post-install:
	${STRIP_CMD} ${STAGEDIR}${PREFIX}/bin/nvim
	${RMDIR} ${STAGEDIR}${PREFIX}/lib/nvim

post-extract:
	${AWK} '/Apache License/,/^====$$/' \
		${WRKSRC}/LICENSE.txt > ${WRKDIR}/LICENSE_APACHE
	${AWK} '/^VIM LICENSE/,/at your option/' \
		${WRKSRC}/LICENSE.txt > ${WRKDIR}/LICENSE_VIM
	${AWK} '/^====/{exit}; {print}' \
		${WRKSRC}/LICENSE.txt > ${WRKDIR}/TERMS
	echo "[See APACHE20.standard file]" >> ${WRKDIR}/TERMS
	echo >> ${WRKDIR}/TERMS
	${AWK} '/^The above license/,/^The Vim license follows/' \
		${WRKSRC}/LICENSE.txt >> ${WRKDIR}/TERMS
	echo "[See CUSTOM1.standard file]" >> ${WRKDIR}/TERMS

[FILE:395:descriptions/desc.primary]
Neovim is a refactor, and sometimes redactor, in the tradition of Vim
(which itself derives from Stevie). It is not a rewrite but a continuation
and extension of Vim. Many clones and derivatives exist, some very
clever -- but none are Vim.

Neovim strives to be a superset of Vim except for some intentionally
removed misfeatures. It is built for users who want the good parts of
Vim, and more.


[FILE:106:distinfo]
324759a1bcd1a80b32a7eae1516ee761ec3e566d08284a24c4c7ca59079aabfa     12923046 neovim-neovim-0.11.2.tar.gz


[FILE:26888:manifests/plist.primary]
bin/nvim
share/applications/nvim.desktop
share/icons/hicolor/128x128/apps/nvim.png
share/nvim/runtime/
 delmenu.vim
 example_init.lua
 filetype.lua
 ftoff.vim
 ftplugin.vim
 ftplugof.vim
 indent.vim
 indoff.vim
 makemenu.vim
 menu.vim
 neovim.ico
 optwin.vim
 synmenu.vim
share/nvim/runtime/autoload/
 README.txt
 RstFold.vim
 ada.vim
 adacomplete.vim
 bitbake.vim
 cargo.vim
 ccomplete.lua
 ccomplete.vim
 clojurecomplete.vim
 context.vim
 contextcomplete.vim
 csscomplete.vim
 decada.vim
 freebasic.vim
 gnat.vim
 gzip.vim
 hare.vim
 haskellcomplete.vim
 hcl.vim
 htmlcomplete.vim
 javaformat.vim
 javascriptcomplete.vim
 modula2.vim
 msgpack.vim
 paste.vim
 phpcomplete.vim
 provider.vim
 python.vim
 python3complete.vim
 pythoncomplete.vim
 rubycomplete.vim
 rust.vim
 rustfmt.vim
 shada.vim
 spellfile.vim
 spotbugs.vim
 sqlcomplete.vim
 syntaxcomplete.vim
 tar.vim
 tutor.vim
 typst.vim
 vimexpect.vim
 xmlcomplete.vim
 xmlformat.vim
 zip.vim
share/nvim/runtime/autoload/cargo/quickfix.vim
share/nvim/runtime/autoload/dist/vim.vim
share/nvim/runtime/autoload/provider/
 clipboard.vim
 node.vim
 perl.vim
 python3.vim
 ruby.vim
 script_host.rb
share/nvim/runtime/autoload/remote/
 define.vim
 host.vim
share/nvim/runtime/autoload/rust/debugging.vim
share/nvim/runtime/autoload/xml/
 html32.vim
 html401f.vim
 html401s.vim
 html401t.vim
 html40f.vim
 html40s.vim
 html40t.vim
 xhtml10f.vim
 xhtml10s.vim
 xhtml10t.vim
 xhtml11.vim
 xsd.vim
 xsl.vim
share/nvim/runtime/colors/
 README.txt
 blue.vim
 darkblue.vim
 default.vim
 delek.vim
 desert.vim
 elflord.vim
 evening.vim
 habamax.vim
 industry.vim
 koehler.vim
 lunaperche.vim
 morning.vim
 murphy.vim
 pablo.vim
 peachpuff.vim
 quiet.vim
 retrobox.vim
 ron.vim
 shine.vim
 slate.vim
 sorbet.vim
 torte.vim
 unokai.vim
 vim.lua
 wildcharm.vim
 zaibatsu.vim
 zellner.vim
share/nvim/runtime/compiler/
 README.txt
 ant.vim
 bash.vim
 bcc.vim
 bdf.vim
 cargo.vim
 checkstyle.vim
 cm3.vim
 context.vim
 cppcheck.vim
 cs.vim
 csslint.vim
 cucumber.vim
 dart.vim
 dart2js.vim
 dart2native.vim
 dartanalyser.vim
 dartdevc.vim
 dartdoc.vim
 dartfmt.vim
 decada.vim
 dot.vim
 dotnet.vim
 erlang.vim
 eruby.vim
 eslint.vim
 fbc.vim
 fortran_F.vim
 fortran_cv.vim
 fortran_elf90.vim
 fortran_g77.vim
 fortran_lf95.vim
 fpc.vim
 g95.vim
 gawk.vim
 gcc.vim
 gfortran.vim
 ghc.vim
 gjs.vim
 gm2.vim
 gnat.vim
 go.vim
 groff.vim
 haml.vim
 hare.vim
 hp_acc.vim
 icc.vim
 icon.vim
 ifort.vim
 intel.vim
 irix5_c.vim
 irix5_cpp.vim
 javac.vim
 jest.vim
 jikes.vim
 jjs.vim
 jq.vim
 jshint.vim
 jsonlint.vim
 make.vim
 maven.vim
 mcs.vim
 mips_c.vim
 mipspro_c89.vim
 mipspro_cpp.vim
 modelsim_vcom.vim
 msbuild.vim
 msvc.vim
 mypy.vim
 neato.vim
 ocaml.vim
 onsgmls.vim
 pandoc.vim
 pbx.vim
 perl.vim
 perlcritic.vim
 php.vim
 pip_compile.vim
 podchecker.vim
 powershell.vim
 pylint.vim
 pytest.vim
 pyunit.vim
 raco.vim
 racomake.vim
 racosetup.vim
 racotest.vim
 rake.vim
 rhino.vim
 rime_deployer.vim
 rspec.vim
 rst.vim
 rubocop.vim
 ruby.vim
 rubyunit.vim
 ruff.vim
 rustc.vim
 sass.vim
 scdoc.vim
 se.vim
 shellcheck.vim
 sml.vim
 spectral.vim
 splint.vim
 spotbugs.vim
 stack.vim
 standard.vim
 stylelint.vim
 svelte-check.vim
 tcl.vim
 tex.vim
 tidy.vim
 ts-node.vim
 tsc.vim
 typedoc.vim
 typst.vim
 vimdoc.vim
 xbuild.vim
 xmllint.vim
 xmlwf.vim
 xo.vim
 yamllint.vim
 zig.vim
 zig_build.vim
 zig_build_exe.vim
 zig_test.vim
 zsh.vim
share/nvim/runtime/doc/
 api.txt
 arabic.txt
 autocmd.txt
 builtin.txt
 change.txt
 channel.txt
 cmdline.txt
 credits.txt
 debug.txt
 deprecated.txt
 dev_arch.txt
 dev_style.txt
 dev_theme.txt
 dev_tools.txt
 dev_vimpatch.txt
 develop.txt
 diagnostic.txt
 diff.txt
 digraph.txt
 editing.txt
 editorconfig.txt
 eval.txt
 faq.txt
 filetype.txt
 fold.txt
 ft_ada.txt
 ft_hare.txt
 ft_ps1.txt
 ft_raku.txt
 ft_rust.txt
 ft_sql.txt
 gui.txt
 health.txt
 hebrew.txt
 help.txt
 helphelp.txt
 if_perl.txt
 if_pyth.txt
 if_ruby.txt
 indent.txt
 index.txt
 insert.txt
 intro.txt
 job_control.txt
 lsp.txt
 lua-bit.txt
 lua-guide.txt
 lua.txt
 luaref.txt
 luvref.txt
 map.txt
 mbyte.txt
 message.txt
 mlang.txt
 motion.txt
 news-0.10.txt
 news-0.9.txt
 news.txt
 nvim.txt
 options.txt
 pattern.txt
 pi_gzip.txt
 pi_msgpack.txt
 pi_paren.txt
 pi_spec.txt
 pi_tar.txt
 pi_tutor.txt
 pi_zip.txt
 provider.txt
 quickfix.txt
 quickref.txt
 recover.txt
 remote.txt
 remote_plugin.txt
 repeat.txt
 rileft.txt
 russian.txt
 scroll.txt
 sign.txt
 spell.txt
 starting.txt
 support.txt
 syntax.txt
 tabpage.txt
 tags
 tagsrch.txt
 terminal.txt
 testing.txt
 tips.txt
 treesitter.txt
 tui.txt
 uganda.txt
 ui.txt
 undo.txt
 userfunc.txt
 usr_01.txt
 usr_02.txt
 usr_03.txt
 usr_04.txt
 usr_05.txt
 usr_06.txt
 usr_07.txt
 usr_08.txt
 usr_09.txt
 usr_10.txt
 usr_11.txt
 usr_12.txt
 usr_20.txt
 usr_21.txt
 usr_22.txt
 usr_23.txt
 usr_24.txt
 usr_25.txt
 usr_26.txt
 usr_27.txt
 usr_28.txt
 usr_29.txt
 usr_30.txt
 usr_31.txt
 usr_32.txt
 usr_40.txt
 usr_41.txt
 usr_42.txt
 usr_43.txt
 usr_44.txt
 usr_45.txt
 usr_toc.txt
 various.txt
 vi_diff.txt
 vietnamese.txt
 vim_diff.txt
 visual.txt
 vvars.txt
 windows.txt
share/nvim/runtime/ftplugin/
 8th.vim
 README.txt
 a2ps.vim
 aap.vim
 abap.vim
 abaqus.vim
 ada.vim
 alsaconf.vim
 ant.vim
 antlr4.vim
 apache.vim
 arch.vim
 arduino.lua
 arduino.vim
 art.vim
 asciidoc.vim
 asm.vim
 aspvbs.vim
 astro.vim
 asy.vim
 autohotkey.vim
 automake.vim
 awk.vim
 bash.vim
 basic.vim
 bdf.vim
 bindzone.vim
 bitbake.vim
 bp.vim
 bst.vim
 btm.vim
 bzl.vim
 c.lua
 c.vim
 c3.vim
 cabal.vim
 calendar.vim
 cdrdaoconf.vim
 cedar.vim
 cfg.vim
 cgdbrc.vim
 ch.lua
 ch.vim
 changelog.vim
 chatito.vim
 checkhealth.lua
 checkhealth.vim
 chicken.vim
 clojure.vim
 cmake.vim
 cmakecache.vim
 cobol.vim
 conf.vim
 config.vim
 confini.vim
 context.vim
 cook.vim
 corn.vim
 cpp.vim
 crm.vim
 crontab.vim
 cs.lua
 cs.vim
 csc.vim
 csh.vim
 css.vim
 csv.vim
 cucumber.vim
 cuda.vim
 cvsrc.vim
 d.lua
 dart.vim
 deb822sources.vim
 debchangelog.vim
 debcontrol.vim
 debsources.vim
 denyhosts.vim
 desktop.vim
 dictconf.vim
 dictdconf.vim
 diff.vim
 dircolors.vim
 dnsmasq.vim
 docbk.vim
 dockerfile.vim
 dosbatch.vim
 dosini.vim
 dot.lua
 dtd.vim
 dtrace.vim
 dts.vim
 dune.vim
 editorconfig.vim
 eiffel.vim
 elinks.vim
 elixir.vim
 elm.vim
 erlang.vim
 eruby.vim
 eterm.vim
 expect.vim
 exports.vim
 falcon.vim
 faust.lua
 fennel.vim
 fetchmail.vim
 fish.vim
 flexwiki.vim
 forth.vim
 fortran.vim
 fpcmake.vim
 framescript.vim
 freebasic.vim
 fstab.vim
 fvwm.vim
 gdb.vim
 gdscript.vim
 gdshader.vim
 gel.vim
 git.vim
 gitattributes.vim
 gitcommit.vim
 gitconfig.vim
 gitignore.vim
 gitrebase.vim
 gitsendemail.vim
 gleam.vim
 glsl.lua
 go.vim
 goaccess.vim
 gomod.vim
 gpg.vim
 gprof.vim
 graphql.vim
 groovy.vim
 group.vim
 grub.vim
 gyp.vim
 haml.vim
 hamster.vim
 hare.vim
 haredoc.vim
 haskell.vim
 hcl.vim
 heex.vim
 help.lua
 help.vim
 hgcommit.vim
 hlsplaylist.vim
 hog.vim
 hostconf.vim
 hostsaccess.vim
 html.vim
 htmlangular.vim
 htmldjango.vim
 http.vim
 hurl.vim
 hyprlang.vim
 i3config.vim
 icon.vim
 idris2.vim
 indent.lua
 indent.vim
 initex.vim
 ipkg.vim
 ishd.vim
 j.vim
 java.vim
 javacc.vim
 javascript.vim
 javascriptreact.vim
 jjdescription.vim
 jproperties.vim
 jq.vim
 json.vim
 json5.vim
 jsonc.vim
 jsonnet.vim
 jsp.vim
 julia.vim
 just.vim
 karel.vim
 kconfig.vim
 kdl.vim
 kivy.vim
 kotlin.vim
 kwt.vim
 lc.vim
 ld.vim
 ldapconf.vim
 leo.vim
 less.vim
 lex.vim
 lftp.vim
 libao.vim
 limits.vim
 liquid.vim
 lisp.vim
 livebook.vim
 llvm.vim
 lnk.vim
 lnkmap.vim
 logcheck.vim
 loginaccess.vim
 logindefs.vim
 logtalk.dict
 logtalk.vim
 lprolog.vim
 lua.lua
 lua.vim
 luau.vim
 lynx.vim
 m17ndb.vim
 m3build.vim
 m3quake.vim
 m4.vim
 mail.vim
 mailaliases.vim
 mailcap.vim
 make.vim
 man.vim
 manconf.vim
 markdown.lua
 markdown.vim
 masm.vim
 matlab.vim
 mediawiki.vim
 mermaid.vim
 meson.vim
 mf.vim
 mlir.vim
 mma.vim
 modconf.vim
 modula2.vim
 modula3.vim
 mojo.vim
 mp.vim
 mplayerconf.vim
 mrxvtrc.vim
 msmessages.vim
 mss.vim
 muttrc.vim
 mysql.vim
 nanorc.vim
 neomuttrc.vim
 netrc.vim
 nginx.vim
 nim.vim
 nix.vim
 nroff.vim
 nsis.vim
 nu.vim
 objc.lua
 objc.vim
 objcpp.vim
 objdump.vim
 obse.vim
 ocaml.vim
 occam.vim
 octave.vim
 odin.vim
 ondir.vim
 opencl.vim
 openvpn.vim
 org.vim
 pamconf.vim
 pascal.vim
 passwd.vim
 pbtxt.vim
 pdf.vim
 perl.vim
 php.vim
 pinfo.vim
 plaintex.vim
 plsql.vim
 pod.vim
 poefilter.vim
 poke.vim
 postscr.vim
 prisma.vim
 procmail.vim
 prolog.vim
 proto.vim
 protocols.vim
 ps1.vim
 ps1xml.vim
 ptx.vim
 purescript.vim
 pymanifest.vim
 pyrex.vim
 python.vim
 qb64.vim
 qf.vim
 qml.vim
 quake.vim
 quarto.vim
 query.lua
 r.vim
 racc.vim
 racket.vim
 raku.vim
 rasi.vim
 readline.vim
 registry.vim
 requirements.vim
 rescript.vim
 reva.vim
 rhelp.vim
 rmd.vim
 rnc.vim
 rnoweb.vim
 roc.vim
 routeros.vim
 rpl.vim
 rrst.vim
 rst.vim
 ruby.vim
 rust.vim
 samba.vim
 sass.vim
 sbt.vim
 scala.vim
 scdoc.vim
 scheme.vim
 screen.vim
 scss.vim
 sed.vim
 sensors.vim
 services.vim
 setserial.vim
 sexplib.vim
 sgml.vim
 sh.vim
 shada.vim
 shaderslang.vim
 sieve.vim
 slint.vim
 slpconf.vim
 slpreg.vim
 slpspi.vim
 snakemake.vim
 solidity.vim
 solution.vim
 spajson.vim
 spec.vim
 sql.vim
 squirrel.vim
 ssa.vim
 sshconfig.vim
 sshdconfig.vim
 stata.lua
 stylus.vim
 sudoers.vim
 supercollider.lua
 svelte.vim
 svg.vim
 sway.vim
 swayconfig.vim
 swift.lua
 swift.vim
 swiftgyb.vim
 swig.vim
 sysctl.vim
 systemd.vim
 systemverilog.vim
 tap.vim
 tcl.vim
 tcsh.vim
 tera.vim
 terminfo.vim
 terraform.vim
 tex.vim
 text.vim
 tf.vim
 thrift.vim
 tiasm.vim
 tidy.vim
 tmux.vim
 toml.vim
 treetop.vim
 tt2html.vim
 tutor.vim
 typescript.vim
 typescriptreact.vim
 typst.vim
 uci.vim
 udevconf.vim
 udevperm.vim
 udevrules.vim
 unison.vim
 updatedb.vim
 urlshortcut.vim
 usd.vim
 v.vim
 vb.vim
 vdf.vim
 verilog.vim
 vhdl.vim
 vim.vim
 vroom.vim
 vue.vim
 wat.vim
 wget.vim
 wget2.vim
 xcompose.vim
 xdefaults.vim
 xf86conf.vim
 xhtml.vim
 xinetd.vim
 xml.vim
 xmodmap.vim
 xs.lua
 xs.vim
 xsd.vim
 xslt.vim
 yacc.vim
 yaml.vim
 zathurarc.vim
 zig.vim
 zimbu.vim
 zsh.vim
share/nvim/runtime/indent/
 Makefile
 README.txt
 aap.vim
 ada.vim
 ant.vim
 arduino.vim
 astro.vim
 automake.vim
 awk.vim
 bash.vim
 basic.vim
 bib.vim
 bitbake.vim
 bst.vim
 bzl.vim
 c.vim
 cdl.vim
 ch.vim
 chaiscript.vim
 changelog.vim
 chatito.vim
 clojure.vim
 cmake.vim
 cobol.vim
 config.vim
 context.vim
 cpp.vim
 cs.vim
 css.vim
 cucumber.vim
 cuda.vim
 d.vim
 dictconf.vim
 dictdconf.vim
 docbk.vim
 dosbatch.vim
 dtd.vim
 dtrace.vim
 dts.vim
 dune.vim
 dylan.vim
 eiffel.vim
 elm.vim
 erlang.vim
 eruby.vim
 eterm.vim
 expect.vim
 falcon.vim
 fennel.vim
 fish.vim
 fortran.vim
 framescript.vim
 freebasic.vim
 gdscript.vim
 gitconfig.vim
 gitolite.vim
 glsl.vim
 go.vim
 graphql.vim
 gyp.vim
 haml.vim
 hamster.vim
 hare.vim
 hcl.vim
 hog.vim
 html.vim
 htmldjango.vim
 idlang.vim
 idris2.vim
 ishd.vim
 j.vim
 java.vim
 javascript.vim
 javascriptreact.vim
 json.vim
 json5.vim
 jsonc.vim
 jsp.vim
 julia.vim
 just.vim
 kdl.vim
 kotlin.vim
 krl.vim
 ld.vim
 less.vim
 lifelines.vim
 liquid.vim
 lisp.vim
 livebook.vim
 logtalk.vim
 lua.vim
 luau.vim
 m17ndb.vim
 mail.vim
 make.vim
 matlab.vim
 meson.vim
 mf.vim
 mma.vim
 mojo.vim
 mp.vim
 nginx.vim
 nsis.vim
 objc.vim
 obse.vim
 ocaml.vim
 occam.vim
 odin.vim
 pascal.vim
 perl.vim
 php.vim
 postscr.vim
 pov.vim
 prolog.vim
 proto.vim
 ps1.vim
 pyrex.vim
 python.vim
 qb64.vim
 qml.vim
 quarto.vim
 query.lua
 r.vim
 racket.vim
 raku.vim
 raml.vim
 rapid.vim
 readline.vim
 rhelp.vim
 rmd.vim
 rnoweb.vim
 rpl.vim
 rrst.vim
 rst.vim
 ruby.vim
 rust.vim
 sas.vim
 sass.vim
 scala.vim
 scheme.vim
 scss.vim
 sdl.vim
 sh.vim
 sml.vim
 solidity.vim
 spajson.vim
 sql.vim
 sqlanywhere.vim
 sshconfig.vim
 stylus.vim
 systemverilog.vim
 tcl.vim
 tcsh.vim
 teraterm.vim
 terraform.vim
 tex.vim
 tf.vim
 thrift.vim
 tilde.vim
 treetop.vim
 typescript.vim
 typescriptreact.vim
 typst.vim
 vb.vim
 verilog.vim
 vhdl.vim
 vim.vim
 vroom.vim
 vue.vim
 wat.vim
 xf86conf.vim
 xhtml.vim
 xinetd.vim
 xml.vim
 xsd.vim
 xslt.vim
 yacc.vim
 yaml.vim
 zig.vim
 zimbu.vim
 zsh.vim
share/nvim/runtime/indent/testdir/
 README.txt
 bash.in
 bash.ok
 bitbake.in
 bitbake.ok
 dts.in
 dts.ok
 html.in
 html.ok
 krl.in
 krl.ok
 lua.in
 lua.ok
 matlab.in
 matlab.ok
 python.in
 python.ok
 rapid.in
 rapid.ok
 runtest.vim
 sshconfig.in
 sshconfig.ok
 tcl.in
 tcl.ok
 thrift.in
 thrift.ok
 vb.in
 vb.ok
 vim.in
 vim.ok
 xml.in
 xml.ok
 yaml.in
 yaml.ok
share/nvim/runtime/keymap/
 README.txt
 accents.vim
 arabic.vim
 arabic_utf-8.vim
 armenian-eastern_utf-8.vim
 armenian-western_utf-8.vim
 belarusian-jcuken.vim
 bulgarian-bds.vim
 bulgarian-phonetic.vim
 canfr-win.vim
 croatian.vim
 croatian_cp1250.vim
 croatian_iso-8859-2.vim
 croatian_utf-8.vim
 czech.vim
 czech_utf-8.vim
 dvorak.vim
 esperanto.vim
 esperanto_utf-8.vim
 french-azerty.vim
 georgian-qwerty.vim
 german-qwertz.vim
 greek.vim
 greek_cp1253.vim
 greek_cp737.vim
 greek_iso-8859-7.vim
 greek_utf-8.vim
 hebrew.vim
 hebrew_cp1255.vim
 hebrew_iso-8859-8.vim
 hebrew_utf-8.vim
 hebrewp.vim
 hebrewp_cp1255.vim
 hebrewp_iso-8859-8.vim
 hebrewp_utf-8.vim
 kana.vim
 kazakh-jcuken.vim
 korean-dubeolsik_utf-8.vim
 korean.vim
 lithuanian-baltic.vim
 magyar_utf-8.vim
 mongolian_utf-8.vim
 oldturkic-orkhon_utf-8.vim
 oldturkic-yenisei_utf-8.vim
 persian-iranian_utf-8.vim
 persian.vim
 pinyin.vim
 polish-slash.vim
 polish-slash_cp1250.vim
 polish-slash_cp852.vim
 polish-slash_iso-8859-2.vim
 polish-slash_utf-8.vim
 russian-dvorak.vim
 russian-jcuken.vim
 russian-jcukenmac.vim
 russian-jcukenwin.vim
 russian-jcukenwintype.vim
 russian-typograph.vim
 russian-yawerty.vim
 serbian-latin.vim
 serbian-latin_utf-8.vim
 serbian.vim
 serbian_cp1250.vim
 serbian_cp1251.vim
 serbian_iso-8859-2.vim
 serbian_iso-8859-5.vim
 serbian_utf-8.vim
 sinhala-phonetic_utf-8.vim
 sinhala.vim
 slovak.vim
 slovak_cp1250.vim
 slovak_iso-8859-2.vim
 slovak_utf-8.vim
 tamil_tscii.vim
 thaana-phonetic_utf-8.vim
 thaana.vim
 turkish-f.vim
 turkish-q.vim
 ukrainian-dvorak.vim
 ukrainian-enhanced.vim
 ukrainian-jcuken.vim
 vietnamese-telex_utf-8.vim
 vietnamese-viqr_utf-8.vim
 vietnamese-vni_utf-8.vim
share/nvim/runtime/lua/
 _vim9script.lua
 coxpcall.lua
 editorconfig.lua
 man.lua
 tohtml.lua
share/nvim/runtime/lua/vim/
 F.lua
 _buf.lua
 _comment.lua
 _defaults.lua
 _editor.lua
 _init_packages.lua
 _inspector.lua
 _meta.lua
 _options.lua
 _system.lua
 _watch.lua
 diagnostic.lua
 filetype.lua
 fs.lua
 func.lua
 glob.lua
 health.lua
 hl.lua
 inspect.lua
 iter.lua
 keymap.lua
 loader.lua
 lsp.lua
 provider.lua
 re.lua
 secure.lua
 shared.lua
 snippet.lua
 termcap.lua
 text.lua
 treesitter.lua
 ui.lua
 uri.lua
 version.lua
share/nvim/runtime/lua/vim/_ftplugin/lua.lua
share/nvim/runtime/lua/vim/_meta/
 api.lua
 api_keysets.lua
 api_keysets_extra.lua
 base64.lua
 builtin.lua
 builtin_types.lua
 diff.lua
 json.lua
 lpeg.lua
 misc.lua
 mpack.lua
 options.lua
 re.lua
 regex.lua
 spell.lua
 vimfn.lua
 vvars.lua
 vvars_extra.lua
share/nvim/runtime/lua/vim/deprecated/health.lua
share/nvim/runtime/lua/vim/filetype/
 detect.lua
 options.lua
share/nvim/runtime/lua/vim/func/_memoize.lua
share/nvim/runtime/lua/vim/health/health.lua
share/nvim/runtime/lua/vim/lsp/
 _changetracking.lua
 _folding_range.lua
 _meta.lua
 _snippet_grammar.lua
 _tagfunc.lua
 _transport.lua
 _watchfiles.lua
 buf.lua
 client.lua
 codelens.lua
 completion.lua
 diagnostic.lua
 handlers.lua
 health.lua
 inlay_hint.lua
 log.lua
 protocol.lua
 rpc.lua
 semantic_tokens.lua
 sync.lua
 util.lua
share/nvim/runtime/lua/vim/lsp/_meta/protocol.lua
share/nvim/runtime/lua/vim/provider/
 health.lua
 perl.lua
 python.lua
 ruby.lua
share/nvim/runtime/lua/vim/treesitter/
 _fold.lua
 _headings.lua
 _query_linter.lua
 _range.lua
 dev.lua
 health.lua
 highlighter.lua
 language.lua
 languagetree.lua
 query.lua
share/nvim/runtime/lua/vim/treesitter/_meta/
 misc.lua
 tsnode.lua
 tsquery.lua
 tstree.lua
share/nvim/runtime/lua/vim/ui/clipboard/osc52.lua
share/nvim/runtime/pack/dist/opt/cfilter/plugin/cfilter.lua
share/nvim/runtime/pack/dist/opt/justify/plugin/justify.vim
share/nvim/runtime/pack/dist/opt/matchit/autoload/matchit.vim
share/nvim/runtime/pack/dist/opt/matchit/doc/
 matchit.txt
 tags
share/nvim/runtime/pack/dist/opt/matchit/plugin/matchit.vim
share/nvim/runtime/pack/dist/opt/netrw/
 LICENSE.txt
 README.md
share/nvim/runtime/pack/dist/opt/netrw/autoload/
 netrw.vim
 netrwSettings.vim
 netrw_gitignore.vim
share/nvim/runtime/pack/dist/opt/netrw/doc/
 netrw.txt
 tags
share/nvim/runtime/pack/dist/opt/netrw/plugin/netrwPlugin.vim
share/nvim/runtime/pack/dist/opt/netrw/syntax/netrw.vim
share/nvim/runtime/pack/dist/opt/nohlsearch/plugin/nohlsearch.vim
share/nvim/runtime/pack/dist/opt/shellmenu/plugin/shellmenu.vim
share/nvim/runtime/pack/dist/opt/swapmouse/plugin/swapmouse.vim
share/nvim/runtime/pack/dist/opt/termdebug/plugin/termdebug.vim
share/nvim/runtime/plugin/
 editorconfig.lua
 gzip.vim
 man.lua
 matchit.vim
 matchparen.vim
 netrwPlugin.vim
 osc52.lua
 rplugin.vim
 shada.vim
 spellfile.vim
 tarPlugin.vim
 tohtml.lua
 tutor.vim
 zipPlugin.vim
share/nvim/runtime/queries/c/
 folds.scm
 highlights.scm
 injections.scm
share/nvim/runtime/queries/lua/
 folds.scm
 highlights.scm
 injections.scm
share/nvim/runtime/queries/markdown/
 folds.scm
 highlights.scm
 injections.scm
share/nvim/runtime/queries/markdown_inline/
 highlights.scm
 injections.scm
share/nvim/runtime/queries/query/
 folds.scm
 highlights.scm
share/nvim/runtime/queries/vim/
 folds.scm
 highlights.scm
 injections.scm
share/nvim/runtime/queries/vimdoc/
 highlights.scm
 injections.scm
share/nvim/runtime/scripts/
 emoji_list.lua
 less.bat
 less.sh
 less.vim
 mswin.vim
share/nvim/runtime/spell/
 cleanadd.vim
 en.utf-8.spl
share/nvim/runtime/syntax/
 8th.vim
 README.txt
 a2ps.vim
 a65.vim
 aap.vim
 abap.vim
 abaqus.vim
 abc.vim
 abel.vim
 abnf.vim
 acedb.vim
 ada.vim
 aflex.vim
 ahdl.vim
 aidl.vim
 alsaconf.vim
 amiga.vim
 aml.vim
 ampl.vim
 ant.vim
 antlr.vim
 antlr4.vim
 apache.vim
 apachestyle.vim
 apkbuild.vim
 aptconf.vim
 arch.vim
 arduino.vim
 art.vim
 asciidoc.vim
 asm.vim
 asm68k.vim
 asmh8300.vim
 asn.vim
 aspperl.vim
 aspvbs.vim
 asterisk.vim
 asteriskvm.vim
 astro.vim
 asy.vim
 atlas.vim
 autodoc.vim
 autohotkey.vim
 autoit.vim
 automake.vim
 ave.vim
 avra.vim
 awk.vim
 ayacc.vim
 b.vim
 baan.vim
 bash.vim
 basic.vim
 bc.vim
 bdf.vim
 bib.vim
 bindzone.vim
 bitbake.vim
 blank.vim
 bsdl.vim
 bst.vim
 btm.vim
 bzl.vim
 bzr.vim
 c.vim
 cabal.vim
 cabalconfig.vim
 cabalproject.vim
 calendar.vim
 catalog.vim
 cdl.vim
 cdrdaoconf.vim
 cdrtoc.vim
 cf.vim
 cfg.vim
 cgdbrc.vim
 ch.vim
 chaiscript.vim
 change.vim
 changelog.vim
 chaskell.vim
 chatito.vim
 checkhealth.vim
 cheetah.vim
 chicken.vim
 chill.vim
 chordpro.vim
 chuck.vim
 cl.vim
 clean.vim
 clipper.vim
 clojure.vim
 cmacro.vim
 cmake.vim
 cmakecache.vim
 cmod.vim
 cmusrc.vim
 cobol.vim
 coco.vim
 colortest.vim
 conaryrecipe.vim
 conf.vim
 config.vim
 confini.vim
 context.vim
 cpp.vim
 crm.vim
 crontab.vim
 cs.vim
 csc.vim
 csdl.vim
 csh.vim
 csp.vim
 css.vim
 csv.vim
 cterm.vim
 ctrlh.vim
 cucumber.vim
 cuda.vim
 cupl.vim
 cuplsim.vim
 cvs.vim
 cvsrc.vim
 cweb.vim
 cynlib.vim
 cynpp.vim
 d.vim
 dart.vim
 datascript.vim
 dcd.vim
 dcl.vim
 deb822sources.vim
 debchangelog.vim
 debcontrol.vim
 debcopyright.vim
 debsources.vim
 def.vim
 denyhosts.vim
 dep3patch.vim
 desc.vim
 desktop.vim
 dictconf.vim
 dictdconf.vim
 diff.vim
 dircolors.vim
 dirpager.vim
 diva.vim
 django.vim
 dns.vim
 dnsmasq.vim
 docbk.vim
 docbksgml.vim
 docbkxml.vim
 dockerfile.vim
 dosbatch.vim
 dosini.vim
 dot.vim
 doxygen.vim
 dracula.vim
 dsl.vim
 dtd.vim
 dtml.vim
 dtrace.vim
 dts.vim
 dune.vim
 dylan.vim
 dylanintr.vim
 dylanlid.vim
 ecd.vim
 edif.vim
 editorconfig.vim
 eiffel.vim
 elf.vim
 elinks.vim
 elm.vim
 elmfilt.vim
 erlang.vim
 eruby.vim
 esmtprc.vim
 esqlc.vim
 esterel.vim
 eterm.vim
 euphoria3.vim
 euphoria4.vim
 eviews.vim
 exim.vim
 expect.vim
 exports.vim
 falcon.vim
 fan.vim
 fasm.vim
 fdcc.vim
 fetchmail.vim
 fgl.vim
 fish.vim
 flexwiki.vim
 focexec.vim
 form.vim
 forth.vim
 fortran.vim
 foxpro.vim
 fpcmake.vim
 framescript.vim
 freebasic.vim
 fstab.vim
 fvwm.vim
 fvwm2m4.vim
 gdb.vim
 gdmo.vim
 gdresource.vim
 gdscript.vim
 gdshader.vim
 gedcom.vim
 gel.vim
 gemtext.vim
 gift.vim
 git.vim
 gitattributes.vim
 gitcommit.vim
 gitconfig.vim
 gitignore.vim
 gitolite.vim
 gitrebase.vim
 gitsendemail.vim
 gkrellmrc.vim
 glsl.vim
 gnash.vim
 gnuplot.vim
 go.vim
 goaccess.vim
 godoc.vim
 gp.vim
 gpg.vim
 gprof.vim
 grads.vim
 graphql.vim
 gretl.vim
 groff.vim
 groovy.vim
 group.vim
 grub.vim
 gsp.vim
 gtkrc.vim
 gvpr.vim
 gyp.vim
 haml.vim
 hamster.vim
 hare.vim
 haredoc.vim
 haskell.vim
 haste.vim
 hastepreproc.vim
 hb.vim
 hcl.vim
 help.vim
 help_it.vim
 help_ru.vim
 hercules.vim
 hex.vim
 hgcommit.vim
 hitest.vim
 hlsplaylist.vim
 hog.vim
 hollywood.vim
 hostconf.vim
 hostsaccess.vim
 html.vim
 htmlangular.vim
 htmlcheetah.vim
 htmldjango.vim
 htmlm4.vim
 htmlos.vim
 hyprlang.vim
 i3config.vim
 ia64.vim
 ibasic.vim
 icemenu.vim
 icon.vim
 idl.vim
 idlang.vim
 idris2.vim
 indent.vim
 inform.vim
 initex.vim
 initng.vim
 inittab.vim
 ipfilter.vim
 ipkg.vim
 ishd.vim
 iss.vim
 ist.vim
 j.vim
 jal.vim
 jam.vim
 jargon.vim
 java.vim
 javacc.vim
 javascript.vim
 javascriptreact.vim
 jess.vim
 jgraph.vim
 jinja.vim
 jjdescription.vim
 jovial.vim
 jproperties.vim
 jq.vim
 json.vim
 json5.vim
 jsonc.vim
 jsp.vim
 julia.vim
 just.vim
 karel.vim
 kconfig.vim
 kdl.vim
 kivy.vim
 kix.vim
 kotlin.vim
 krl.vim
 kscript.vim
 kwt.vim
 lace.vim
 latte.vim
 lc.vim
 ld.vim
 ldapconf.vim
 ldif.vim
 less.vim
 lex.vim
 lf.vim
 lftp.vim
 lhaskell.vim
 libao.vim
 lidris2.vim
 lifelines.vim
 lilo.vim
 limits.vim
 liquid.vim
 lisp.vim
 lite.vim
 litestep.vim
 livebook.vim
 lnk.vim
 lnkmap.vim
 loginaccess.vim
 logindefs.vim
 logtalk.vim
 lotos.vim
 lout.vim
 lpc.vim
 lprolog.vim
 lscript.vim
 lsl.vim
 lsp_markdown.vim
 lss.vim
 lua.vim
 luau.vim
 lynx.vim
 lyrics.vim
 m17ndb.vim
 m3build.vim
 m3quake.vim
 m4.vim
 mail.vim
 mailaliases.vim
 mailcap.vim
 make.vim
 mallard.vim
 man.vim
 manconf.vim
 manual.vim
 maple.vim
 markdown.vim
 masm.vim
 mason.vim
 master.vim
 matlab.vim
 maxima.vim
 mediawiki.vim
 mel.vim
 mermaid.vim
 meson.vim
 messages.vim
 mf.vim
 mgl.vim
 mgp.vim
 mib.vim
 mix.vim
 mma.vim
 mmix.vim
 mmp.vim
 modconf.vim
 model.vim
 modsim3.vim
 modula2.vim
 modula3.vim
 mojo.vim
 monk.vim
 moo.vim
 mp.vim
 mplayerconf.vim
 mrxvtrc.vim
 msidl.vim
 msmessages.vim
 msql.vim
 mss.vim
 mupad.vim
 murphi.vim
 mush.vim
 muttrc.vim
 mysql.vim
 n1ql.vim
 named.vim
 nanorc.vim
 nasm.vim
 nastran.vim
 natural.vim
 ncf.vim
 neomuttlog.vim
 neomuttrc.vim
 netrc.vim
 nginx.vim
 ninja.vim
 nix.vim
 nosyntax.vim
 nqc.vim
 nroff.vim
 nsis.vim
 obj.vim
 objc.vim
 objcpp.vim
 obse.vim
 ocaml.vim
 occam.vim
 odin.vim
 omnimark.vim
 ondir.vim
 opam.vim
 opencl.vim
 openroad.vim
 openscad.vim
 openvpn.vim
 opl.vim
 ora.vim
 org.vim
 pacmanlog.vim
 pamconf.vim
 pamenv.vim
 pandoc.vim
 papp.vim
 pascal.vim
 passwd.vim
 pbtxt.vim
 pcap.vim
 pccts.vim
 pdf.vim
 perl.vim
 pf.vim
 pfmain.vim
 php.vim
 phtml.vim
 pic.vim
 pike.vim
 pilrc.vim
 pine.vim
 pinfo.vim
 plaintex.vim
 pli.vim
 plm.vim
 plp.vim
 plsql.vim
 po.vim
 pod.vim
 poefilter.vim
 poke.vim
 postscr.vim
 pov.vim
 povini.vim
 ppd.vim
 ppwiz.vim
 prescribe.vim
 privoxy.vim
 procmail.vim
 progress.vim
 prolog.vim
 promela.vim
 proto.vim
 protocols.vim
 prql.vim
 ps1.vim
 ps1xml.vim
 psf.vim
 psl.vim
 ptcap.vim
 ptx.vim
 purifylog.vim
 pymanifest.vim
 pyrex.vim
 python.vim
 python2.vim
 qb64.vim
 qf.vim
 qml.vim
 quake.vim
 quarto.vim
 query.lua
 r.vim
 racc.vim
 racket.vim
 radiance.vim
 raku.vim
 raml.vim
 rapid.vim
 rasi.vim
 ratpoison.vim
 rc.vim
 rcs.vim
 rcslog.vim
 readline.vim
 rebol.vim
 redif.vim
 registry.vim
 rego.vim
 remind.vim
 requirements.vim
 resolv.vim
 reva.vim
 rexx.vim
 rhelp.vim
 rib.vim
 rmd.vim
 rnc.vim
 rng.vim
 rnoweb.vim
 robots.vim
 routeros.vim
 rpcgen.vim
 rpl.vim
 rrst.vim
 rst.vim
 rtf.vim
 ruby.vim
 rust.vim
 salt.vim
 samba.vim
 sas.vim
 sass.vim
 sather.vim
 sbt.vim
 scala.vim
 scdoc.vim
 scheme.vim
 scilab.vim
 screen.vim
 scss.vim
 sd.vim
 sdc.vim
 sdl.vim
 sed.vim
 sendpr.vim
 sensors.vim
 services.vim
 setserial.vim
 sexplib.vim
 sgml.vim
 sgmldecl.vim
 sgmllnx.vim
 sh.vim
 shada.vim
 shaderslang.vim
 sicad.vim
 sieve.vim
 sil.vim
 simula.vim
 sinda.vim
 sindacmp.vim
 sindaout.vim
 sisu.vim
 skill.vim
 sl.vim
 slang.vim
 slice.vim
 slpconf.vim
 slpreg.vim
 slpspi.vim
 slrnrc.vim
 slrnsc.vim
 sm.vim
 smarty.vim
 smcl.vim
 smil.vim
 smith.vim
 sml.vim
 snnsnet.vim
 snnspat.vim
 snnsres.vim
 snobol4.vim
 solidity.vim
 spajson.vim
 spec.vim
 specman.vim
 spice.vim
 splint.vim
 spup.vim
 spyce.vim
 sql.vim
 sqlanywhere.vim
 sqlforms.vim
 sqlhana.vim
 sqlinformix.vim
 sqlj.vim
 sqloracle.vim
 sqr.vim
 squid.vim
 squirrel.vim
 srec.vim
 srt.vim
 ssa.vim
 sshconfig.vim
 sshdconfig.vim
 st.vim
 stata.vim
 stp.vim
 strace.vim
 structurizr.vim
 stylus.vim
 sudoers.vim
 svg.vim
 svn.vim
 swayconfig.vim
 swift.vim
 swiftgyb.vim
 swig.vim
 synload.vim
 syntax.vim
 sysctl.vim
 systemd.vim
 systemverilog.vim
 tads.vim
 tags.vim
 tak.vim
 takcmp.vim
 takout.vim
 tap.vim
 tar.vim
 taskdata.vim
 taskedit.vim
 tasm.vim
 tcl.vim
 tcsh.vim
 template.vim
 tera.vim
 teraterm.vim
 terminfo.vim
 terraform.vim
 tex.vim
 texinfo.vim
 texmf.vim
 tf.vim
 thrift.vim
 tiasm.vim
 tidy.vim
 tilde.vim
 tli.vim
 tmux.vim
 toml.vim
 tpp.vim
 trasys.vim
 treetop.vim
 trustees.vim
 tsalt.vim
 tsscl.vim
 tssgm.vim
 tssop.vim
 tsv.vim
 tt2.vim
 tt2html.vim
 tt2js.vim
 tutor.vim
 typescript.vim
 typescriptreact.vim
 typst.vim
 uc.vim
 uci.vim
 udevconf.vim
 udevperm.vim
 udevrules.vim
 uil.vim
 unison.vim
 updatedb.vim
 upstart.vim
 upstreamdat.vim
 upstreaminstalllog.vim
 upstreamlog.vim
 upstreamrpt.vim
 urlshortcut.vim
 usserverlog.vim
 usw2kagtlog.vim
 valgrind.vim
 vb.vim
 vdf.vim
 vera.vim
 verilog.vim
 verilogams.vim
 vgrindefs.vim
 vhdl.vim
 vim.vim
 viminfo.vim
 vimnormal.vim
 virata.vim
 vmasm.vim
 voscm.vim
 vrml.vim
 vroom.vim
 vsejcl.vim
 vue.vim
 wat.vim
 wdiff.vim
 wdl.vim
 web.vim
 webmacro.vim
 wget.vim
 wget2.vim
 whitespace.vim
 winbatch.vim
 wml.vim
 wsh.vim
 wsml.vim
 wvdial.vim
 xbl.vim
 xcompose.vim
 xdefaults.vim
 xf86conf.vim
 xhtml.vim
 xinetd.vim
 xkb.vim
 xmath.vim
 xml.vim
 xmodmap.vim
 xpm.vim
 xpm2.vim
 xquery.vim
 xs.vim
 xsd.vim
 xslt.vim
 xxd.vim
 yacc.vim
 yaml.vim
 z8a.vim
 zathurarc.vim
 zig.vim
 zimbu.vim
 zir.vim
 zserio.vim
 zsh.vim
share/nvim/runtime/syntax/modula2/opt/
 iso.vim
 pim.vim
 r10.vim
share/nvim/runtime/syntax/shared/
 README.txt
 debversions.vim
 hgcommitDiff.vim
 typescriptcommon.vim
share/nvim/runtime/syntax/vim/generated.vim
share/nvim/runtime/tutor/
 tutor.tutor
 tutor.tutor.json
share/nvim/runtime/tutor/en/
 vim-01-beginner.tutor
 vim-01-beginner.tutor.json
share/nvim/runtime/tutor/ja/
 vim-01-beginner.tutor
 vim-01-beginner.tutor.json


[FILE:22:manifests/plist.man]
share/man/man1/nvim.1


[FILE:281:patches/patch-src_nvim_os_os__defs.h]
--- src/nvim/os/os_defs.h.orig	2025-04-26 14:29:18 UTC
+++ src/nvim/os/os_defs.h
@@ -30,6 +30,10 @@
 # define NAME_MAX _XOPEN_NAME_MAX
 #endif
 
+#ifdef __sun__
+#define NAME_MAX	255
+#endif
+
 #define BASENAMELEN (NAME_MAX - 5)
 
 // Use the system path length if it makes sense.


[FILE:761:patches/patch-src_nvim_os_proc.c]
--- src/nvim/os/proc.c.orig	2025-04-26 14:29:18 UTC
+++ src/nvim/os/proc.c
@@ -15,13 +15,13 @@
 # include <tlhelp32.h>
 #endif
 
-#if defined(__FreeBSD__)
+#if defined(__FreeBSD__) || defined(__DragonFly__)
 # include <string.h>
 # include <sys/types.h>
 # include <sys/user.h>
 #endif
 
-#if defined(__NetBSD__) || defined(__OpenBSD__)
+#if defined(__NetBSD__) || defined(__OpenBSD__) || defined(__DragonFly__)
 # include <sys/param.h>
 #endif
 
@@ -156,6 +156,9 @@ int os_proc_children(int ppid, int **pro
 # elif defined(__FreeBSD__)
 #  define KP_PID(o) o.ki_pid
 #  define KP_PPID(o) o.ki_ppid
+# elif defined(__DragonFly__)
+#  define KP_PID(o)  o.kp_pid
+#  define KP_PPID(o) o.kp_ppid
 # else
 #  define KP_PID(o) o.p_pid
 #  define KP_PPID(o) o.p_ppid


[FILE:1559:patches/patch-src_nvim_os_pty__proc__unix.c]
--- src/nvim/os/pty_proc_unix.c.orig	2025-04-26 14:29:18 UTC
+++ src/nvim/os/pty_proc_unix.c
@@ -21,6 +21,71 @@
 # include <sys/stream.h>
 # include <sys/syscall.h>
 # include <unistd.h>
+static int
+cfsetspeed(struct termios *t, speed_t speed) {
+   cfsetispeed(t, speed);
+   cfsetospeed(t, speed);
+   return (0);
+}
+
+static pid_t
+forkpty(int *master, char *name, struct termios *tio, struct winsize *ws)
+{
+	int	slave = -1;
+	char   *path;
+	pid_t	pid;
+
+	if ((*master = open("/dev/ptmx", O_RDWR|O_NOCTTY)) == -1)
+		return (-1);
+	if (grantpt(*master) != 0)
+		goto out;
+	if (unlockpt(*master) != 0)
+		goto out;
+
+	if ((path = ptsname(*master)) == NULL)
+		goto out;
+	if (name != NULL)
+		strlcpy(name, path, _SC_TTY_NAME_MAX);
+	if ((slave = open(path, O_RDWR|O_NOCTTY)) == -1)
+		goto out;
+
+	switch (pid = fork()) {
+	case -1:
+		goto out;
+	case 0:
+		close(*master);
+
+		setsid();
+		if (ioctl(slave, TIOCSCTTY, NULL) == -1)
+			ELOG("ioctl failed");
+		if (ioctl(slave, I_PUSH, "ptem") == -1)
+			ELOG("ioctl failed");
+		if (ioctl(slave, I_PUSH, "ldterm") == -1)
+			ELOG("ioctl failed");
+
+		if (tio != NULL && tcsetattr(slave, TCSAFLUSH, tio) == -1)
+			ELOG("tcsetattr failed");
+		if (ioctl(slave, TIOCSWINSZ, ws) == -1)
+			ELOG("ioctl failed");
+
+		dup2(slave, 0);
+		dup2(slave, 1);
+		dup2(slave, 2);
+		if (slave > 2)
+			close(slave);
+		return (0);
+	}
+
+	close(slave);
+	return (pid);
+
+out:
+	if (*master != -1)
+		close(*master);
+	if (slave != -1)
+		close(slave);
+	return (-1);
+}
 #else
 # include <pty.h>
 #endif

