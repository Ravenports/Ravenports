# Buildsheet autogenerated by ravenadm tool -- Do not edit.

NAMEBASE=		imlib2
VERSION=		1.12.1
KEYWORDS=		graphics
VARIANTS=		standard
SDESC[standard]=	Powerful image loading and rendering library
HOMEPAGE=		https://docs.enlightenment.org/api/imlib2/html/
CONTACT=		nobody

DOWNLOAD_GROUPS=	main
SITES[main]=		SF/enlightenment/imlib2-src/1.12.1
DISTFILE[1]=		imlib2-1.12.1.tar.xz:main
DF_INDEX=		1
SPKGS[standard]=	complete
			primary
			tools
			dev

OPTIONS_AVAILABLE=	none
OPTIONS_STANDARD=	none

BUILD_DEPENDS=		libid3tag:dev:standard
BUILDRUN_DEPENDS=	libid3tag:primary:standard
B_DEPS[sunos]=		libbsd4sol:single:standard

USES=			cpe libtool pkgconfig jpeg png gif tiff xz freetype
			zstd:build zlib:build bz2:build
XORG_COMPONENTS=	x11 sm xext

LICENSE=		CUSTOM1:primary
LICENSE_NAME=		CUSTOM1:"imlib2 license"
LICENSE_FILE=		CUSTOM1:{{WRKSRC}}/COPYING
LICENSE_SCHEME=		solo

CPE_VENDOR=		enlightenment
FPC_EQUIVALENT=		graphics/imlib2

MUST_CONFIGURE=		gnu
CONFIGURE_ARGS=		--enable-visibility-hiding
			--disable-static

INSTALL_TARGET=		install-strip
INSTALL_REQ_TOOLCHAIN=	yes
SOVERSION=		1.12.1

VAR_OPSYS[sunos]=	CFLAGS=-I{{LOCALBASE}}/include/bsd
			LDFLAGS=-lbsd
VAR_OPSYS[netbsd]=	CONFIGURE_ENV=ac_cv_lib_dl_dlopen=false
VAR_ARCH[x86_64]=	CONFIGURE_ARGS=--enable-amd64
VAR_ARCH[i386]=		CONFIGURE_ARGS=--enable-mmx

post-patch:
	${REINPLACE_CMD} -e '/MY_LIBS =/s/-lXext -lX11//' \
		${WRKSRC}/src/lib/Makefile.in
	${REINPLACE_CMD} -e '/# ifndef X_DISPLAY_MISSING/,/# endif/ d' \
		${WRKSRC}/src/lib/Imlib2.h

[FILE:1303:descriptions/desc.primary]
Imlib 2 is the successor to Imlib. It is NOT a newer version - it is a
completely new library. Imlib 2 can be installed alongside Imlib 1.x
without any problems since they are effectively different libraries -
BUT they Have very similar functionality.

Imlib 2 does the following:
 * Load image files from disk in one of many formats
 * Save images to disk in one of many formats
 * Render image data onto other images
 * Render images to an X-Windows drawable
 * Produce pixmaps and pixmap masks of Images
 * Apply filters to images
 * Rotate images
 * Accept RGBA Data for images
 * Scale images
 * Alpha blend Images on other images or drawables
 * Apply color correction and modification tables to images
 * Render images onto images with color correction and mods
 * Render truetype anti-aliased text
 * Render truetype anti-aliased text at any angle
 * Render anti-aliased lines
 * Render rectangles
 * Render linear multi-colored gradients
 * Cache data intelligently for maximum performance
 * Allocate colors automatically
 * Allow full control over caching and color allocation
 * Provide highly optimized MMX assembly for core routines
 * Provide plug-in filter interface
 * Provide on-the-fly runtime plug-in image loading and saving
 * Fastest image compositing and rendering library for X


[FILE:46:descriptions/desc.tools]
This package contains tools based on Imlib 2.


[FILE:99:distinfo]
8c24d2d189c4d5ae602dbf2fc0fbb117aa923eab6c883041f0feeca4e8c6774e       831680 imlib2-1.12.1.tar.xz


[FILE:59:manifests/plist.primary]
lib/
 libImlib2.so.%%SOMAJOR%%
 libImlib2.so.%%SOVERSION%%


[FILE:670:manifests/plist.tools]
bin/
 imlib2_bumpmap
 imlib2_colorspace
 imlib2_conv
 imlib2_grab
 imlib2_load
 imlib2_poly
 imlib2_show
 imlib2_test
 imlib2_view
lib/imlib2/filters/
 bumpmap.so
 colormod.so
 testfilter.so
lib/imlib2/loaders/
 ani.so
 argb.so
 bmp.so
 bz2.so
 ff.so
 gif.so
 ico.so
 id3.so
 jpeg.so
 lbm.so
 lzma.so
 png.so
 pnm.so
 qoi.so
 tga.so
 tiff.so
 xbm.so
 xpm.so
 zlib.so
share/imlib2/rgb.txt
share/imlib2/data/fonts/
 cinema.ttf
 grunge.ttf
 morpheus.ttf
 notepad.ttf
share/imlib2/data/images/
 audio.png
 bg.png
 bulb.png
 cal.png
 calc.png
 folder.png
 globe.png
 imlib2.png
 lock.png
 mail.png
 menu.png
 mush.png
 paper.png
 sh1.png
 sh2.png
 sh3.png
 stop.png
 tnt.png


[FILE:77:manifests/plist.dev]
include/
 Imlib2.h
 Imlib2_Loader.h
lib/libImlib2.so
lib/pkgconfig/imlib2.pc


[FILE:340:patches/patch-src_bin_imlib2__view.c]
$NetBSD: patch-src_bin_imlib2__view.c,v 1.1 2020/02/20 15:14:57 nia Exp $

Include sys/time.h for timeval.

--- src/bin/imlib2_view.c.orig	2023-09-21 07:39:48 UTC
+++ src/bin/imlib2_view.c
@@ -3,6 +3,7 @@
 
 #include <X11/Xlib.h>
 #include <X11/keysym.h>
+#include <sys/time.h>
 #include <stdio.h>
 #include <stdlib.h>
 #include <string.h>

