# Buildsheet autogenerated by ravenadm tool -- Do not edit.

NAMEBASE=		vorbis-tools
VERSION=		1.4.2
KEYWORDS=		audio
VARIANTS=		standard
SDESC[standard]=	Play, encode, and manage Ogg Vorbis files
HOMEPAGE=		https://xiph.org/vorbis/
CONTACT=		Michael_Reim[kraileth@elderlinux.org]

DOWNLOAD_GROUPS=	main
SITES[main]=		https://ftp.osuosl.org/pub/xiph/releases/vorbis/
DISTFILE[1]=		vorbis-tools-1.4.2.tar.gz:main
DF_INDEX=		1
SPKGS[standard]=	complete
			primary
			nls

OPTIONS_AVAILABLE=	none
OPTIONS_STANDARD=	none

BUILDRUN_DEPENDS=	flac:primary:standard
			libao:primary:standard
			libkate:primary:standard
			libvorbis:primary:standard
			speex:primary:standard

USES=			cpe curl gettext iconv pkgconfig

LICENSE=		GPLv2:primary
LICENSE_TERMS=		primary:{{WRKDIR}}/TERMS
LICENSE_FILE=		GPLv2:{{WRKSRC}}/COPYING
LICENSE_AWK=		TERMS:"^$$"
LICENSE_SOURCE=		TERMS:{{WRKSRC}}/oggdec/oggdec.c
LICENSE_SCHEME=		solo

CPE_VENDOR=		xiph
FPC_EQUIVALENT=		audio/vorbis-tools

MUST_CONFIGURE=		gnu
CONFIGURE_ENV=		PTHREAD_LIBS="-lpthread"

VAR_OPSYS[sunos]=	LDFLAGS=-lrt

post-install:
	${MKDIR} ${STAGEDIR}${PREFIX}/share/examples/vorbis-tools
	${INSTALL_DATA} ${WRKSRC}/ogg123/ogg123rc-example \
		${STAGEDIR}${PREFIX}/share/examples/vorbis-tools/ogg123rc

[FILE:555:descriptions/desc.primary]
Vorbis is a general-purpose audio and music encoding format contemporary 
to MPEG-4's AAC and TwinVQ, the next generation beyond MPEG audio layer 3. 
 Unlike the MPEG sponsored formats and other proprietary formats such as 
RealAudio G2, the Vorbis CODEC specification belongs to the public domain. 
All the technical details are published and documented, and any software 
entity may make full use of the format without royalty or patent concerns.

This package contains utilities to encode, decode, and cut vorbis streams, 
and to add comments to them.


[FILE:104:distinfo]
db7774ec2bf2c939b139452183669be84fda5774d6400fc57fde37f77624f0b0      1389947 vorbis-tools-1.4.2.tar.gz


[FILE:196:manifests/plist.primary]
bin/
 ogg123
 oggdec
 oggenc
 ogginfo
 vcut
 vorbiscomment
share/examples/vorbis-tools/ogg123rc
share/man/man1/
 ogg123.1.gz
 oggdec.1.gz
 oggenc.1.gz
 ogginfo.1.gz
 vcut.1.gz
 vorbiscomment.1.gz


[FILE:751:manifests/plist.nls]
share/locale/be/LC_MESSAGES/vorbis-tools.mo
share/locale/cs/LC_MESSAGES/vorbis-tools.mo
share/locale/da/LC_MESSAGES/vorbis-tools.mo
share/locale/en_GB/LC_MESSAGES/vorbis-tools.mo
share/locale/eo/LC_MESSAGES/vorbis-tools.mo
share/locale/es/LC_MESSAGES/vorbis-tools.mo
share/locale/fr/LC_MESSAGES/vorbis-tools.mo
share/locale/hr/LC_MESSAGES/vorbis-tools.mo
share/locale/hu/LC_MESSAGES/vorbis-tools.mo
share/locale/nl/LC_MESSAGES/vorbis-tools.mo
share/locale/pl/LC_MESSAGES/vorbis-tools.mo
share/locale/ro/LC_MESSAGES/vorbis-tools.mo
share/locale/ru/LC_MESSAGES/vorbis-tools.mo
share/locale/sk/LC_MESSAGES/vorbis-tools.mo
share/locale/sv/LC_MESSAGES/vorbis-tools.mo
share/locale/uk/LC_MESSAGES/vorbis-tools.mo
share/locale/vi/LC_MESSAGES/vorbis-tools.mo


[FILE:232:patches/patch-ogg123_Makefile.in]
--- ogg123/Makefile.in.orig	2021-01-21 09:14:18 UTC
+++ ogg123/Makefile.in
@@ -816,7 +816,7 @@ info: info-am
 
 info-am:
 
-install-data-am: install-docDATA install-man
+install-data-am: install-man
 
 install-dvi: install-dvi-am
 


[FILE:238:patches/patch-ogg123_status.c]
--- ogg123/status.c.orig	2021-01-02 19:54:35 UTC
+++ ogg123/status.c
@@ -26,6 +26,9 @@
 #ifdef HAVE_UNISTD_H
 #include <sys/ioctl.h>
 #include <unistd.h>
+# ifdef __sun__
+# include <sys/termios.h>
+# endif
 #endif
 
 #ifdef HAVE_FCNTL_H


[FILE:320:patches/patch-ogg123_vorbis__comments.c]
--- ogg123/vorbis_comments.c.orig	2021-01-07 23:31:25 UTC
+++ ogg123/vorbis_comments.c
@@ -74,7 +74,7 @@ char *lookup_comment_prettyprint (const
 
   /* Use default formatting */
   j = strcspn(comment, "=");
-  if (j) {
+  if (j != strlen(comment)) {
     *offset = j + 1;
     s = malloc(j + 2);
     if (s == NULL) {


[FILE:202:patches/patch-oggenc_lyrics.c]
--- oggenc/lyrics.c.orig	2020-12-18 14:49:34 UTC
+++ oggenc/lyrics.c
@@ -16,7 +16,7 @@
 #endif
 
 #include <stdio.h>
-#include <malloc.h>
+#include <stdlib.h>
 #include <string.h>
 #include <errno.h>
 

