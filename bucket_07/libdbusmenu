# Buildsheet autogenerated by ravenadm tool -- Do not edit.

NAMEBASE=		libdbusmenu
VERSION=		16.04.0
REVISION=		1
KEYWORDS=		devel
VARIANTS=		standard
SDESC[standard]=	Library for passing menus over DBus
HOMEPAGE=		https://launchpad.net/libdbusmenu
CONTACT=		nobody

DOWNLOAD_GROUPS=	main
SITES[main]=		https://launchpad.net/libdbusmenu/16.04/16.04.0/+download/
DISTFILE[1]=		libdbusmenu-16.04.0.tar.gz:main
DF_INDEX=		1
SPKGS[standard]=	complete
			primary
			docs

OPTIONS_AVAILABLE=	INTROSPECTION
OPTIONS_STANDARD=	INTROSPECTION

BUILD_DEPENDS=		harfbuzz:dev:standard
BUILDRUN_DEPENDS=	json-glib:primary:standard

USES=			gmake libtool gtk-doc pkgconfig python:run
			shebangfix mbsdfix
GNOME_COMPONENTS=	glib intltool libxslt gtk3

LICENSE=		LGPL21:primary LGPL3:primary
LICENSE_TERMS=		primary:{{WRKDIR}}/TERMS
LICENSE_FILE=		LGPL21:{{WRKSRC}}/COPYING.2.1
			LGPL3:{{WRKSRC}}/COPYING
LICENSE_AWK=		TERMS:"__DBUSMENU_GTKCLIENT_H__"
LICENSE_SOURCE=		TERMS:{{WRKSRC}}/libdbusmenu-gtk/client.h
LICENSE_SCHEME=		dual

FPC_EQUIVALENT=		devel/libdbusmenu
GTKDOC_OUTPUT_BASEDIR=	libdbusmenu-gtk
SHEBANG_FILES=		tools/dbusmenu-bench

MUST_CONFIGURE=		gnu
CONFIGURE_ARGS=		--disable-static
			--disable-dumper
			--disable-tests
			--disable-massivedebugging
			--disable-nls
			--with-gtk=3

INSTALL_TARGET=		install-strip
INSTALL_REQ_TOOLCHAIN=	yes
SOVERSION=		4.0.12
PLIST_SUB=		VERSION="0.4"

CFLAGS=			-Wno-unused-value

[INTROSPECTION].DESCRIPTION=		Build with introspection and vala bindings
[INTROSPECTION].BUILD_DEPENDS_ON=	vala:single:standard
[INTROSPECTION].CONFIGURE_ENABLE_BOTH=	introspection
					vala
[INTROSPECTION].GNOME_COMPONENTS_ON=	introspection

post-install:
	# gtk-doc can only handle one directory, so pre-move the other one
	${MKDIR} ${STAGEDIR}${STD_DOCDIR}
	${MV} ${STAGEDIR}${PREFIX}/share/gtk-doc/html/libdbusmenu-glib \
		${STAGEDIR}${STD_DOCDIR}

[FILE:184:descriptions/desc.primary]
The DBusMenu library provides GLib and Gtk implementation of the DBusMenu
protocol. The DBusMenu protocol make it possible for applications to export
and import their menus over DBus.


[FILE:105:distinfo]
b9cc4a2acd74509435892823607d966d424bd9ad5d0b00938f27240a1bfa878a       760376 libdbusmenu-16.04.0.tar.gz


[FILE:828:manifests/plist.primary]
%%INTROSPECTION-ON%%lib/girepository-1.0/
 Dbusmenu-%%VERSION%%.typelib
 DbusmenuGtk3-%%VERSION%%.typelib
%%INTROSPECTION-ON%%share/gir-1.0/
 Dbusmenu-%%VERSION%%.gir
 DbusmenuGtk3-%%VERSION%%.gir
%%INTROSPECTION-ON%%share/vala/vapi/
 Dbusmenu-%%VERSION%%.vapi
 DbusmenuGtk3-%%VERSION%%.vapi
include/libdbusmenu-glib-%%VERSION%%/libdbusmenu-glib/
 client.h
 dbusmenu-glib.h
 enum-types.h
 menuitem-proxy.h
 menuitem.h
 server.h
 types.h
include/libdbusmenu-gtk3-%%VERSION%%/libdbusmenu-gtk/
 client.h
 dbusmenu-gtk.h
 menu.h
 menuitem.h
 parser.h
lib/
 libdbusmenu-glib.so
 libdbusmenu-glib.so.%%SOMAJOR%%
 libdbusmenu-glib.so.%%SOVERSION%%
 libdbusmenu-gtk3.so
 libdbusmenu-gtk3.so.%%SOMAJOR%%
 libdbusmenu-gtk3.so.%%SOVERSION%%
lib/pkgconfig/
 dbusmenu-glib-%%VERSION%%.pc
 dbusmenu-gtk3-%%VERSION%%.pc
libexec/dbusmenu-bench


[FILE:988:manifests/plist.docs]
share/doc/libdbusmenu/README.dbusmenu-bench
share/doc/libdbusmenu/libdbusmenu-glib/
 annotation-glossary.html
 api-index-deprecated.html
 api-index-full.html
 ch01.html
 home.png
 index.html
 index.sgml
 left-insensitive.png
 left.png
 libdbusmenu-glib-DbusmenuClient.html
 libdbusmenu-glib-DbusmenuMenuitem.html
 libdbusmenu-glib-DbusmenuMenuitemProxy.html
 libdbusmenu-glib-DbusmenuServer.html
 libdbusmenu-glib-Types.html
 libdbusmenu-glib.devhelp2
 object-tree.html
 right-insensitive.png
 right.png
 style.css
 up-insensitive.png
 up.png
share/doc/libdbusmenu/libdbusmenu-gtk/
 annotation-glossary.html
 api-index-deprecated.html
 api-index-full.html
 ch01.html
 home.png
 index.html
 index.sgml
 left-insensitive.png
 left.png
 libdbusmenu-gtk-DbusmenuGtkClient.html
 libdbusmenu-gtk-DbusmenuGtkMenu.html
 libdbusmenu-gtk-menuitem.html
 libdbusmenu-gtk-parser.html
 libdbusmenu-gtk.devhelp2
 object-tree.html
 right-insensitive.png
 right.png
 style.css
 up-insensitive.png
 up.png


[FILE:876:patches/patch-configure]
--- configure.orig	2016-02-27 19:00:11 UTC
+++ configure
@@ -15130,7 +15130,7 @@ $as_echo "#define HAVE_LC_MESSAGES 1" >>
 
     fi
   fi
-     USE_NLS=yes
+     #USE_NLS=yes
 
 
     gt_cv_have_gettext=no
@@ -16274,10 +16274,6 @@ if test -z "${WANT_TESTS_TRUE}" && test
   as_fn_error $? "conditional \"WANT_TESTS\" was never defined.
 Usually this means the macro was only invoked conditionally." "$LINENO" 5
 fi
-if test -z "${HAVE_VALGRIND_TRUE}" && test -z "${HAVE_VALGRIND_FALSE}"; then
-  as_fn_error $? "conditional \"HAVE_VALGRIND\" was never defined.
-Usually this means the macro was only invoked conditionally." "$LINENO" 5
-fi
 if test -z "${HAVE_INTROSPECTION_TRUE}" && test -z "${HAVE_INTROSPECTION_FALSE}"; then
   as_fn_error $? "conditional \"HAVE_INTROSPECTION\" was never defined.
 Usually this means the macro was only invoked conditionally." "$LINENO" 5


[FILE:903:patches/patch-libdbusmenu-glib_Makefile.in]
--- libdbusmenu-glib/Makefile.in.orig	2016-02-27 19:00:13 UTC
+++ libdbusmenu-glib/Makefile.in
@@ -498,7 +498,7 @@ libdbusmenu_glib_la_LDFLAGS = \
 libdbusmenu_glib_la_CFLAGS = \
 	$(DBUSMENUGLIB_CFLAGS) \
 	$(COVERAGE_CFLAGS) \
-	-Wall -Werror -Wno-error=deprecated-declarations \
+	-Wall -Wno-error=deprecated-declarations \
 	-DG_LOG_DOMAIN="\"LIBDBUSMENU-GLIB\""
 
 libdbusmenu_glib_la_LIBADD = \
@@ -555,7 +555,7 @@ INTROSPECTION_COMPILER_ARGS = --included
 @HAVE_INTROSPECTION_TRUE@Dbusmenu_0_4_gir_SCANNER_FLAGS = $(INTROSPECTION_SCANNER_ARGS)
 @HAVE_INTROSPECTION_TRUE@girdir = $(datadir)/gir-1.0
 @HAVE_INTROSPECTION_TRUE@gir_DATA = $(INTROSPECTION_GIRS)
-@HAVE_INTROSPECTION_TRUE@typelibdir = $(INTROSPECTION_TYPELIBDIR)
+@HAVE_INTROSPECTION_TRUE@typelibdir = $(libdir)/girepository-1.0
 @HAVE_INTROSPECTION_TRUE@typelib_DATA = $(INTROSPECTION_GIRS:.gir=.typelib)
 
 #########################


[FILE:899:patches/patch-libdbusmenu-gtk_Makefile.in]
--- libdbusmenu-gtk/Makefile.in.orig	2016-02-27 19:00:14 UTC
+++ libdbusmenu-gtk/Makefile.in
@@ -507,7 +507,7 @@ libdbusmenu_gtk_la_CFLAGS = \
 	$(DBUSMENUGTK_CFLAGS) \
 	$(COVERAGE_CFLAGS) \
 	-I$(top_srcdir) \
-	-Wall -Werror -Wno-error=deprecated-declarations \
+	-Wall -Wno-error=deprecated-declarations \
 	-DG_LOG_DOMAIN="\"LIBDBUSMENU-GTK\""
 
 libdbusmenu_gtk_la_LIBADD = \
@@ -568,7 +568,7 @@ INTROSPECTION_COMPILER_ARGS = --included
 @HAVE_INTROSPECTION_TRUE@DbusmenuGtk3_0_4_gir_EXPORT_PACKAGES = $(DbusmenuGtk_0_4_gir_EXPORT_PACKAGES)
 @HAVE_INTROSPECTION_TRUE@girdir = $(datadir)/gir-1.0
 @HAVE_INTROSPECTION_TRUE@gir_DATA = $(INTROSPECTION_GIRS)
-@HAVE_INTROSPECTION_TRUE@typelibdir = $(INTROSPECTION_TYPELIBDIR)
+@HAVE_INTROSPECTION_TRUE@typelibdir = $(libdir)/girepository-1.0
 @HAVE_INTROSPECTION_TRUE@typelib_DATA = $(INTROSPECTION_GIRS:.gir=.typelib)
 
 #########################

