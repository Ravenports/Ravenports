# Buildsheet autogenerated by ravenadm tool -- Do not edit.

NAMEBASE=		NetBox
VERSION=		3.6.7
KEYWORDS=		net_mgmt
VARIANTS=		standard
SDESC[standard]=	Flexible IPAM and DCIM tool with plugin support
HOMEPAGE=		https://github.com/netbox-community/netbox/
CONTACT=		Michael_Reim[kraileth@elderlinux.org]

DOWNLOAD_GROUPS=	main
SITES[main]=		GITHUB/netbox-community:netbox:v3.6.7
DISTFILE[1]=		generated:main
DF_INDEX=		1
SPKGS[standard]=	complete
			primary
			docs
			examples

OPTIONS_AVAILABLE=	none
OPTIONS_STANDARD=	none

RUN_DEPENDS=		python-Django:single:python_default
			python-Jinja2:single:python_default
			python-Markdown:single:python_default
			python-Pillow:single:python_default
			python-PyYAML:single:python_default
			python-bleach:single:python_default
			python-boto3:single:python_default
			python-chardet:single:python_default
			python-django-cors-headers:single:python_default
			python-django-debug-toolbar:single:python_default
			python-django-filter:single:python_default
			python-django-graphiql-debug-toolbar:single:python_default
			python-django-mptt:single:python_default
			python-django-pglocks:single:python_default
			python-django-prometheus:single:python_default
			python-django-redis:single:python_default
			python-django-rich:single:python_default
			python-django-rq:single:python_default
			python-django-tables2:single:python_default
			python-django-taggit:single:python_default
			python-django-timezone-field:single:python_default
			python-djangorestframework:single:python_default
			python-drf-spectacular:single:python_default
			python-drf-spectacular-sidecar:single:python_default
			python-dulwich:single:python_default
			python-feedparser:single:python_default
			python-graphene-django:single:python_default
			python-gunicorn:single:python_default
			python-markdown-include:single:python_default
			python-mkdocs-material:single:python_default
			python-mkdocstrings:single:python_default
			python-netaddr:single:python_default
			python-psycopg2:single:python_default
			python-sentry-sdk:single:python_default
			python-social-auth-app-django:single:python_default
			python-social-auth-core:single:python_default
			python-svgwrite:single:python_default
			python-tablib:single:python_default
			python-tzdata:single:python_default
			redis:single:standard

USES=			cpe

LICENSE=		APACHE20:primary
LICENSE_TERMS=		primary:{{WRKSRC}}/NOTICE
LICENSE_FILE=		APACHE20:{{WRKSRC}}/LICENSE.txt
LICENSE_SCHEME=		solo

CPE_PRODUCT=		netbox
CPE_VENDOR=		netbox_project
FPC_EQUIVALENT=		net-mgmt/netbox

SKIP_BUILD=		yes

SUB_FILES=		850.netbox-housekeeping.sample
			netbox_rq.sample
			netboxrc.sample
			pkg-message-primary
SUB_LIST=		PYTHON_CMD={{PYTHON_CMD}}
			PYTHON_VER={{PYTHON_VER}}

do-install:
	(cd ${WRKSRC}/netbox && \
	for src in $$( ${FIND} . ! -name '*.bak' ) ; do \
		DEST=${STAGEDIR}${PREFIX}/share/netbox/$${src#.} && \
		if ${TEST} -d "$$src" ; then \
			${MKDIR} "$$DEST" ; \
		else \
			${INSTALL_DATA} "$$src" "$$DEST" ; \
		fi \
	done)
	cd ${WRKSRC} && ${COPYTREE_SHARE} docs ${STAGEDIR}${PREFIX}/share/netbox/docs
	${INSTALL_DATA} ${WRKSRC}/mkdocs.yml ${STAGEDIR}${PREFIX}/share/netbox
	${MKDIR} -p ${STAGEDIR}${PREFIX}/share/examples/netbox/bsd
	${INSTALL_DATA} ${WRKSRC}/contrib/apache.conf ${STAGEDIR}${PREFIX}/share/examples/netbox
	${INSTALL_DATA} ${WRKSRC}/contrib/gunicorn.py ${STAGEDIR}${PREFIX}/share/examples/netbox
	${INSTALL_DATA} ${WRKSRC}/contrib/nginx.conf ${STAGEDIR}${PREFIX}/share/examples/netbox
	${INSTALL_DATA} ${WRKDIR}/850.netbox-housekeeping.sample ${STAGEDIR}${PREFIX}/share/examples/netbox/bsd
	${INSTALL_DATA} ${WRKDIR}/netbox_rq.sample ${STAGEDIR}${PREFIX}/share/examples/netbox/bsd
	${INSTALL_DATA} ${WRKDIR}/netboxrc.sample ${STAGEDIR}${PREFIX}/share/examples/netbox/bsd

[FILE:1511:descriptions/desc.primary]
NetBox is the leading solution for modeling and documenting modern 
networks. By combining the traditional disciplines of IP address 
management (IPAM) and datacenter infrastructure management (DCIM) with 
powerful APIs and extensions, NetBox provides the ideal "source of truth" 
to power network automation. Available as open source software under the 
Apache 2.0 license, NetBox is employed by thousands of organizations 
around the world.

Myriad infrastructure components can be modeled in NetBox, including:

- Hierarchical regions, site groups, sites and locations
- Racks, devices, and device components
- Cables and wireless connections
- Power distribution- Data circuits and providers
- Virtual machines and clusters
- IP prefixes, ranges and addresses
- VRFs and route targets
- L2VPN and overlays
- FHRP groups (VRRP, HSRP, etc.)
- AS numbers
- VLANs and scoped VLAN groups
- Organizational tenants and contacts

In addition to its extensive built-in models and functionality, NetBox can 
be customized and extended through the use of:

- Custom fields
- Custom links
- Configuration contexts
- Custom model validation rules
- Reports
- Custom scripts
- Export emplates
- Conditional webhooks
- Plugins
- Single sign-on (SSO) authentication
- NAPALM integration
- Detailed change logging

NetBox runs as a web application atop the Django Python framework with a 
PostgreSQL database. It also features a complete REST API as well as a 
GraphQL API for easy integrating with other tools and systems.


[FILE:115:distinfo]
ebb278511928a820f0a2cdd80d6e86d0d83111134c40eadc04ee1ad150ef93f3      7283903 netbox-community-netbox-3.6.7.tar.gz


[FILE:26800:manifests/plist.primary]
share/netbox/
 generate_secret_key.py
 manage.py
 mkdocs.yml
share/netbox/account/
 __init__.py
 models.py
 tables.py
 urls.py
 views.py
share/netbox/account/migrations/
 0001_initial.py
 __init__.py
share/netbox/circuits/
 __init__.py
 apps.py
 choices.py
 filtersets.py
 search.py
 signals.py
 urls.py
 views.py
share/netbox/circuits/api/
 __init__.py
 nested_serializers.py
 serializers.py
 urls.py
 views.py
share/netbox/circuits/forms/
 __init__.py
 bulk_edit.py
 bulk_import.py
 filtersets.py
 model_forms.py
share/netbox/circuits/graphql/
 __init__.py
 schema.py
 types.py
share/netbox/circuits/migrations/
 0001_squashed.py
 0002_squashed_0029.py
 0003_extend_tag_support.py
 0004_rename_cable_peer.py
 0032_provider_service_id.py
 0033_standardize_id_fields.py
 0034_created_datetimefield.py
 0035_provider_asns.py
 0036_circuit_termination_date_tags_custom_fields.py
 0037_new_cabling_models.py
 0038_cabling_cleanup.py
 0039_unique_constraints.py
 0040_provider_remove_deprecated_fields.py
 0041_standardize_description_comments.py
 0042_provideraccount.py
 __init__.py
share/netbox/circuits/models/
 __init__.py
 circuits.py
 providers.py
share/netbox/circuits/tables/
 __init__.py
 circuits.py
 columns.py
 providers.py
share/netbox/circuits/tests/
 __init__.py
 test_api.py
 test_filtersets.py
 test_views.py
share/netbox/core/
 __init__.py
 apps.py
 choices.py
 data_backends.py
 exceptions.py
 filtersets.py
 jobs.py
 search.py
 signals.py
 urls.py
 views.py
share/netbox/core/api/
 __init__.py
 nested_serializers.py
 schema.py
 serializers.py
 urls.py
 views.py
share/netbox/core/forms/
 __init__.py
 bulk_edit.py
 bulk_import.py
 filtersets.py
 mixins.py
 model_forms.py
share/netbox/core/graphql/
 __init__.py
 schema.py
 types.py
share/netbox/core/management/__init__.py
share/netbox/core/management/commands/
 __init__.py
 clearcache.py
 makemigrations.py
 nbshell.py
 rqworker.py
 syncdatasource.py
share/netbox/core/migrations/
 0001_initial.py
 0002_managedfile.py
 0003_job.py
 0004_replicate_jobresults.py
 0005_job_created_auto_now.py
 __init__.py
share/netbox/core/models/
 __init__.py
 data.py
 files.py
 jobs.py
share/netbox/core/tables/
 __init__.py
 data.py
 jobs.py
share/netbox/core/tests/
 __init__.py
 test_api.py
 test_filtersets.py
 test_views.py
share/netbox/dcim/
 __init__.py
 apps.py
 choices.py
 constants.py
 fields.py
 filtersets.py
 lookups.py
 search.py
 signals.py
 urls.py
 utils.py
 views.py
share/netbox/dcim/api/
 __init__.py
 exceptions.py
 nested_serializers.py
 serializers.py
 urls.py
 views.py
share/netbox/dcim/forms/
 __init__.py
 bulk_create.py
 bulk_edit.py
 bulk_import.py
 common.py
 connections.py
 filtersets.py
 formsets.py
 model_forms.py
 object_create.py
 object_import.py
share/netbox/dcim/graphql/
 __init__.py
 gfk_mixins.py
 mixins.py
 schema.py
 types.py
share/netbox/dcim/management/__init__.py
share/netbox/dcim/management/commands/
 __init__.py
 buildschema.py
 trace_paths.py
share/netbox/dcim/migrations/
 0001_squashed.py
 0002_squashed.py
 0003_squashed_0130.py
 0131_consoleport_speed.py
 0132_cable_length.py
 0133_port_colors.py
 0134_interface_wwn_bridge.py
 0135_tenancy_extensions.py
 0136_device_airflow.py
 0137_relax_uniqueness_constraints.py
 0138_extend_tag_support.py
 0139_rename_cable_peer.py
 0140_wireless.py
 0141_asn_model.py
 0142_rename_128gfc_qsfp28.py
 0143_remove_primary_for_related_name.py
 0144_fix_cable_abs_length.py
 0145_site_remove_deprecated_fields.py
 0146_modules.py
 0147_inventoryitemrole.py
 0148_inventoryitem_component.py
 0149_inventoryitem_templates.py
 0150_interface_vrf.py
 0151_interface_speed_duplex.py
 0152_standardize_id_fields.py
 0153_created_datetimefield.py
 0154_half_height_rack_units.py
 0155_interface_poe_mode_type.py
 0156_location_status.py
 0157_new_cabling_models.py
 0158_populate_cable_terminations.py
 0159_populate_cable_paths.py
 0160_populate_cable_ends.py
 0161_cabling_cleanup.py
 0162_unique_constraints.py
 0163_weight_fields.py
 0164_rack_mounting_depth.py
 0165_standardize_description_comments.py
 0166_virtualdevicecontext.py
 0167_module_status.py
 0168_interface_template_enabled.py
 0169_devicetype_default_platform.py
 0170_configtemplate.py
 0171_cabletermination_change_logging.py
 0172_larger_power_draw_values.py
 0173_remove_napalm_fields.py
 0174_device_latitude_device_longitude.py
 0174_rack_starting_unit.py
 0175_device_oob_ip.py
 0176_device_component_counters.py
 0177_devicetype_component_counters.py
 0178_virtual_chassis_member_counter.py
 0179_interfacetemplate_rf_role.py
 0180_powerfeed_tenant.py
 0181_rename_device_role_device_role.py
 __init__.py
share/netbox/dcim/models/
 __init__.py
 cables.py
 device_component_templates.py
 device_components.py
 devices.py
 mixins.py
 power.py
 racks.py
 sites.py
share/netbox/dcim/svg/
 __init__.py
 cables.py
 racks.py
share/netbox/dcim/tables/
 __init__.py
 cables.py
 connections.py
 devices.py
 devicetypes.py
 modules.py
 power.py
 racks.py
 sites.py
 template_code.py
share/netbox/dcim/tests/
 __init__.py
 test_api.py
 test_cablepaths.py
 test_filtersets.py
 test_forms.py
 test_models.py
 test_natural_ordering.py
 test_views.py
share/netbox/extras/
 __init__.py
 admin.py
 apps.py
 choices.py
 conditions.py
 constants.py
 context_managers.py
 fields.py
 filters.py
 filtersets.py
 lookups.py
 querysets.py
 reports.py
 scripts.py
 search.py
 signals.py
 urls.py
 utils.py
 validators.py
 views.py
 webhooks.py
 webhooks_worker.py
share/netbox/extras/api/
 __init__.py
 customfields.py
 mixins.py
 nested_serializers.py
 serializers.py
 urls.py
 views.py
share/netbox/extras/dashboard/
 __init__.py
 forms.py
 utils.py
 widgets.py
share/netbox/extras/data/
 __init__.py
 iata.py
 iso_3166.py
 un_locode.py
share/netbox/extras/forms/
 __init__.py
 bulk_edit.py
 bulk_import.py
 filtersets.py
 misc.py
 mixins.py
 model_forms.py
 reports.py
 scripts.py
share/netbox/extras/graphql/
 __init__.py
 mixins.py
 schema.py
 types.py
share/netbox/extras/management/__init__.py
share/netbox/extras/management/commands/
 __init__.py
 housekeeping.py
 reindex.py
 renaturalize.py
 runreport.py
 runscript.py
 webhook_receiver.py
share/netbox/extras/migrations/
 0001_squashed.py
 0002_squashed_0059.py
 0060_customlink_button_class.py
 0061_extras_change_logging.py
 0062_clear_secrets_changelog.py
 0063_webhook_conditions.py
 0064_configrevision.py
 0065_imageattachment_change_logging.py
 0066_customfield_name_validation.py
 0067_customfield_min_max_values.py
 0068_configcontext_cluster_types.py
 0069_custom_object_field.py
 0070_customlink_enabled.py
 0071_standardize_id_fields.py
 0072_created_datetimefield.py
 0073_journalentry_tags_custom_fields.py
 0074_customfield_extensions.py
 0075_configcontext_locations.py
 0076_tag_slug_unicode.py
 0077_customlink_extend_text_and_url.py
 0078_unique_constraints.py
 0079_scheduled_jobs.py
 0080_customlink_content_types.py
 0081_exporttemplate_content_types.py
 0082_savedfilter.py
 0083_search.py
 0084_staging.py
 0085_synced_data.py
 0086_configtemplate.py
 0087_dashboard.py
 0088_jobresult_webhooks.py
 0089_customfield_is_cloneable.py
 0090_objectchange_index_request_id.py
 0091_create_managedfiles.py
 0092_delete_jobresult.py
 0093_configrevision_ordering.py
 0094_tag_object_types.py
 0095_bookmarks.py
 0096_customfieldchoiceset.py
 0097_customfield_remove_choices.py
 0098_webhook_custom_field_data_webhook_tags.py
 __init__.py
share/netbox/extras/models/
 __init__.py
 change_logging.py
 configs.py
 customfields.py
 dashboard.py
 mixins.py
 models.py
 reports.py
 scripts.py
 search.py
 staging.py
 tags.py
share/netbox/extras/plugins/
 __init__.py
 navigation.py
 registration.py
 templates.py
 urls.py
 utils.py
 views.py
share/netbox/extras/tables/
 __init__.py
 tables.py
 template_code.py
share/netbox/extras/templatetags/
 __init__.py
 custom_links.py
 dashboard.py
 log_levels.py
 plugins.py
share/netbox/extras/tests/
 __init__.py
 test_api.py
 test_changelog.py
 test_conditions.py
 test_customfields.py
 test_customvalidator.py
 test_filtersets.py
 test_forms.py
 test_models.py
 test_plugins.py
 test_scripts.py
 test_tags.py
 test_views.py
 test_webhooks.py
share/netbox/extras/tests/dummy_plugin/
 __init__.py
 admin.py
 graphql.py
 middleware.py
 models.py
 navigation.py
 preferences.py
 search.py
 template_content.py
 urls.py
 views.py
share/netbox/extras/tests/dummy_plugin/api/
 serializers.py
 urls.py
 views.py
share/netbox/extras/tests/dummy_plugin/migrations/
 0001_initial.py
 __init__.py
share/netbox/ipam/
 __init__.py
 apps.py
 choices.py
 constants.py
 fields.py
 filtersets.py
 formfields.py
 lookups.py
 managers.py
 querysets.py
 search.py
 signals.py
 urls.py
 utils.py
 validators.py
 views.py
share/netbox/ipam/api/
 __init__.py
 field_serializers.py
 nested_serializers.py
 serializers.py
 urls.py
 views.py
share/netbox/ipam/forms/
 __init__.py
 bulk_create.py
 bulk_edit.py
 bulk_import.py
 filtersets.py
 model_forms.py
share/netbox/ipam/graphql/
 __init__.py
 gfk_mixins.py
 mixins.py
 schema.py
 types.py
share/netbox/ipam/management/__init__.py
share/netbox/ipam/management/commands/
 __init__.py
 rebuild_prefixes.py
share/netbox/ipam/migrations/
 0001_squashed.py
 0002_squashed_0046.py
 0047_prefix_depth_children.py
 0048_prefix_populate_depth_children.py
 0049_prefix_mark_utilized.py
 0050_iprange.py
 0051_extend_tag_support.py
 0052_fhrpgroup.py
 0053_asn_model.py
 0054_vlangroup_min_max_vids.py
 0055_servicetemplate.py
 0056_standardize_id_fields.py
 0057_created_datetimefield.py
 0058_ipaddress_nat_inside_nonunique.py
 0059_l2vpn.py
 0060_alter_l2vpn_slug.py
 0061_fhrpgroup_name.py
 0062_unique_constraints.py
 0063_standardize_description_comments.py
 0064_clear_search_cache.py
 0065_asnrange.py
 0066_iprange_mark_utilized.py
 0067_ipaddress_index_host.py
 __init__.py
share/netbox/ipam/models/
 __init__.py
 asns.py
 fhrp.py
 ip.py
 l2vpn.py
 services.py
 vlans.py
 vrfs.py
share/netbox/ipam/tables/
 __init__.py
 asn.py
 fhrp.py
 ip.py
 l2vpn.py
 services.py
 vlans.py
 vrfs.py
share/netbox/ipam/tests/
 __init__.py
 test_api.py
 test_filtersets.py
 test_models.py
 test_ordering.py
 test_views.py
share/netbox/media/devicetype-images/.gitignore
share/netbox/media/image-attachments/.gitignore
share/netbox/netbox/
 __init__.py
 admin.py
 authentication.py
 configuration_example.py
 configuration_testing.py
 constants.py
 context.py
 context_processors.py
 denormalized.py
 filtersets.py
 middleware.py
 preferences.py
 registry.py
 settings.py
 signals.py
 staging.py
 urls.py
 wsgi.py
share/netbox/netbox/api/
 __init__.py
 authentication.py
 exceptions.py
 features.py
 fields.py
 metadata.py
 pagination.py
 renderers.py
 routers.py
 views.py
share/netbox/netbox/api/serializers/
 __init__.py
 base.py
 features.py
 generic.py
 nested.py
share/netbox/netbox/api/viewsets/
 __init__.py
 mixins.py
share/netbox/netbox/config/
 __init__.py
 parameters.py
share/netbox/netbox/forms/
 __init__.py
 base.py
share/netbox/netbox/graphql/
 __init__.py
 fields.py
 scalars.py
 schema.py
 types.py
 utils.py
 views.py
share/netbox/netbox/models/
 __init__.py
 features.py
share/netbox/netbox/navigation/
 __init__.py
 menu.py
share/netbox/netbox/search/
 __init__.py
 backends.py
share/netbox/netbox/tables/
 __init__.py
 columns.py
 tables.py
share/netbox/netbox/tests/
 __init__.py
 test_api.py
 test_authentication.py
 test_config.py
 test_graphql.py
 test_import.py
 test_registry.py
 test_search.py
 test_staging.py
 test_tables.py
 test_views.py
share/netbox/netbox/views/
 __init__.py
 errors.py
 htmx.py
 misc.py
share/netbox/netbox/views/generic/
 __init__.py
 base.py
 bulk_views.py
 feature_views.py
 mixins.py
 object_views.py
 utils.py
share/netbox/project-static/
 .eslintignore
 .eslintrc
 .prettierignore
 .prettierrc
 .sassrc
 bundle.js
 package.json
 tsconfig.json
 yarn.lock
share/netbox/project-static/dist/
 cable_trace.css
 graphiql.css
 graphiql.js
 graphiql.js.map
 materialdesignicons-webfont-DWVXV5L5.woff
 materialdesignicons-webfont-ER2MFQKM.woff2
 materialdesignicons-webfont-UHEFFMSX.eot
 materialdesignicons-webfont-WM6M6ZHQ.ttf
 netbox-dark.css
 netbox-external.css
 netbox-light.css
 netbox-print.css
 netbox.js
 netbox.js.map
 rack_elevation.css
share/netbox/project-static/docs/.info
share/netbox/project-static/img/
 graphql.ico
 netbox.ico
 netbox_icon.svg
 netbox_logo.png
 netbox_logo.svg
 netbox_touch-icon-180.png
 rest-api.ico
 tint_20.png
share/netbox/project-static/js/setmode.js
share/netbox/project-static/netbox-graphiql/
 graphiql.scss
 index.ts
 package.json
share/netbox/project-static/src/
 bs.ts
 clipboard.ts
 colorMode.ts
 dashboard.ts
 dateSelector.ts
 global.d.ts
 htmx.ts
 index.ts
 links.ts
 messages.ts
 netbox.ts
 objectSelector.ts
 racks.ts
 search.ts
 sidenav.ts
 tableConfig.ts
 util.ts
share/netbox/project-static/src/buttons/
 connectionToggle.ts
 depthToggle.ts
 index.ts
 markdownPreview.ts
 moveOptions.ts
 reslug.ts
 secretToggle.ts
 selectAll.ts
 selectMultiple.ts
share/netbox/project-static/src/forms/
 elements.ts
 index.ts
 scopeSelector.ts
 speedSelector.ts
share/netbox/project-static/src/select/
 color.ts
 index.ts
 static.ts
 util.ts
share/netbox/project-static/src/select/api/
 apiSelect.ts
 dynamicParams.ts
 index.ts
 types.ts
share/netbox/project-static/src/state/index.ts
share/netbox/project-static/src/stores/
 index.ts
 objectDepth.ts
 previousPkCheck.ts
 rackImages.ts
 secret.ts
share/netbox/project-static/src/tables/
 index.ts
 interfaceTable.ts
share/netbox/project-static/styles/
 _cable_trace.scss
 _dark.scss
 _external.scss
 _light.scss
 _print.scss
 _rack_elevation.scss
 bootstrap.scss
 cable-trace.scss
 extensions.scss
 flatpickr-dark.scss
 netbox.scss
 overrides.scss
 rack-elevation.scss
 select.scss
 sidenav.scss
 theme-base.scss
 theme-dark.scss
 theme-light.scss
 utilities.scss
 variables.scss
share/netbox/reports/__init__.py
share/netbox/scripts/__init__.py
share/netbox/templates/
 403.html
 404.html
 500.html
 graphiql.html
 home.html
 login.html
 media_failure.html
 search.html
share/netbox/templates/account/
 base.html
 bookmarks.html
 password.html
 preferences.html
 profile.html
 token.html
 token_list.html
share/netbox/templates/admin/index.html
share/netbox/templates/base/
 40x.html
 base.html
 layout.html
 sidenav.html
share/netbox/templates/circuits/
 circuit.html
 circuit_terminations_swap.html
 circuittermination_edit.html
 circuittype.html
 provider.html
 provideraccount.html
 providernetwork.html
share/netbox/templates/circuits/inc/circuit_termination.html
share/netbox/templates/core/
 datafile.html
 datasource.html
 job.html
 object_jobs.html
share/netbox/templates/dcim/
 bulk_disconnect.html
 cable.html
 cable_edit.html
 cable_trace.html
 component_create.html
 component_list.html
 connections_list.html
 consoleport.html
 consoleserverport.html
 device.html
 device_edit.html
 device_list.html
 devicebay.html
 devicebay_delete.html
 devicebay_depopulate.html
 devicebay_populate.html
 devicerole.html
 devicetype.html
 frontport.html
 interface.html
 inventoryitem.html
 inventoryitem_bulk_delete.html
 inventoryitem_edit.html
 inventoryitemrole.html
 location.html
 manufacturer.html
 module.html
 modulebay.html
 moduletype.html
 platform.html
 powerfeed.html
 poweroutlet.html
 powerpanel.html
 powerport.html
 rack.html
 rack_edit.html
 rack_elevation_list.html
 rack_list.html
 rackreservation.html
 rackrole.html
 rearport.html
 region.html
 site.html
 sitegroup.html
 virtualchassis.html
 virtualchassis_add.html
 virtualchassis_add_member.html
 virtualchassis_edit.html
 virtualchassis_remove_member.html
 virtualdevicecontext.html
share/netbox/templates/dcim/device/
 base.html
 components_base.html
 consoleports.html
 consoleserverports.html
 devicebays.html
 frontports.html
 interfaces.html
 inventory.html
 modulebays.html
 poweroutlets.html
 powerports.html
 rearports.html
 render_config.html
share/netbox/templates/dcim/device/inc/interface_table_controls.html
share/netbox/templates/dcim/devicetype/
 base.html
 component_templates.html
share/netbox/templates/dcim/inc/
 cable_termination.html
 cable_toggle_buttons.html
 connection_endpoints.html
 endpoint_connection.html
 interface_vlans_table.html
 rack_elevation.html
share/netbox/templates/dcim/inc/panels/inventory_items.html
share/netbox/templates/dcim/moduletype/
 base.html
 component_templates.html
share/netbox/templates/dcim/rack/
 base.html
 non_racked_devices.html
 reservations.html
share/netbox/templates/dcim/trace/
 attachment.html
 cable.html
 circuit.html
 device.html
 object.html
 powerpanel.html
 termination.html
share/netbox/templates/django/forms/widgets/checkbox.html
share/netbox/templates/exceptions/
 import_error.html
 permission_error.html
 programming_error.html
share/netbox/templates/extras/
 configcontext.html
 configcontext_list.html
 configrevision.html
 configrevision_restore.html
 configtemplate.html
 configtemplate_list.html
 customfield.html
 customfieldchoiceset.html
 customlink.html
 exporttemplate.html
 exporttemplate_list.html
 imageattachment.html
 imageattachment_edit.html
 journalentry.html
 object_changelog.html
 object_configcontext.html
 object_journal.html
 objectchange.html
 objectchange_list.html
 report.html
 report_list.html
 report_result.html
 savedfilter.html
 script.html
 script_list.html
 script_result.html
 tag.html
 webhook.html
share/netbox/templates/extras/admin/plugins_list.html
share/netbox/templates/extras/dashboard/
 reset.html
 widget.html
 widget_add.html
 widget_config.html
share/netbox/templates/extras/dashboard/widgets/
 bookmarks.html
 objectcounts.html
 objectlist.html
 rssfeed.html
share/netbox/templates/extras/htmx/
 report_result.html
 script_result.html
share/netbox/templates/extras/inc/
 configcontext_data.html
 configcontext_format.html
 result_pending.html
share/netbox/templates/extras/report/
 base.html
 jobs.html
 source.html
share/netbox/templates/extras/schema/devicetype_schema.jinja2
share/netbox/templates/extras/script/
 base.html
 jobs.html
 source.html
share/netbox/templates/extras/templatetags/log_level.html
share/netbox/templates/generic/
 bulk_add_component.html
 bulk_delete.html
 bulk_edit.html
 bulk_import.html
 bulk_remove.html
 bulk_rename.html
 confirmation_form.html
 object.html
 object_children.html
 object_delete.html
 object_edit.html
 object_list.html
share/netbox/templates/htmx/
 delete_form.html
 form.html
 object_selector.html
 object_selector_results.html
 table.html
share/netbox/templates/inc/
 filter_list.html
 htmx_modal.html
 messages.html
 missing_prerequisites.html
 paginator.html
 paginator_htmx.html
 panel_table.html
 profile_button.html
 searchbar.html
 sync_warning.html
 table.html
 table_controls_htmx.html
 table_htmx.html
share/netbox/templates/inc/panels/
 comments.html
 custom_fields.html
 image_attachments.html
 related_objects.html
 tags.html
share/netbox/templates/ipam/
 aggregate.html
 asn.html
 asnrange.html
 fhrpgroup.html
 fhrpgroupassignment_edit.html
 ipaddress.html
 ipaddress_assign.html
 ipaddress_bulk_add.html
 ipaddress_edit.html
 iprange.html
 l2vpn.html
 l2vpntermination.html
 l2vpntermination_edit.html
 prefix.html
 prefix_list.html
 rir.html
 role.html
 routetarget.html
 service.html
 service_create.html
 service_edit.html
 servicetemplate.html
 vlan.html
 vlan_edit.html
 vlangroup.html
 vrf.html
share/netbox/templates/ipam/aggregate/
 base.html
 prefixes.html
share/netbox/templates/ipam/asnrange/base.html
share/netbox/templates/ipam/inc/
 ipaddress_edit_header.html
 toggle_available.html
share/netbox/templates/ipam/inc/panels/fhrp_groups.html
share/netbox/templates/ipam/ipaddress/base.html
share/netbox/templates/ipam/iprange/
 base.html
 ip_addresses.html
share/netbox/templates/ipam/prefix/
 base.html
 ip_addresses.html
 ip_ranges.html
 prefixes.html
share/netbox/templates/ipam/vlan/base.html
share/netbox/templates/rest_framework/api.html
share/netbox/templates/tenancy/
 contact.html
 contactassignment_edit.html
 contactgroup.html
 contactrole.html
 object_contacts.html
 tenant.html
 tenantgroup.html
share/netbox/templates/users/
 group.html
 objectpermission.html
 token.html
 user.html
share/netbox/templates/virtualization/
 cluster.html
 cluster_add_devices.html
 clustergroup.html
 clustertype.html
 virtualmachine.html
 virtualmachine_list.html
 vminterface.html
share/netbox/templates/virtualization/cluster/
 base.html
 devices.html
share/netbox/templates/virtualization/virtualmachine/
 base.html
 interfaces.html
 render_config.html
share/netbox/templates/wireless/
 wirelesslan.html
 wirelesslangroup.html
 wirelesslink.html
share/netbox/templates/wireless/inc/
 authentication_attrs.html
 wirelesslink_interface.html
share/netbox/tenancy/
 __init__.py
 apps.py
 choices.py
 filtersets.py
 search.py
 urls.py
 views.py
share/netbox/tenancy/api/
 __init__.py
 nested_serializers.py
 serializers.py
 urls.py
 views.py
share/netbox/tenancy/forms/
 __init__.py
 bulk_edit.py
 bulk_import.py
 filtersets.py
 forms.py
 model_forms.py
share/netbox/tenancy/graphql/
 __init__.py
 schema.py
 types.py
share/netbox/tenancy/migrations/
 0001_squashed_0012.py
 0002_tenant_ordering.py
 0003_contacts.py
 0004_extend_tag_support.py
 0005_standardize_id_fields.py
 0006_created_datetimefield.py
 0007_contact_link.py
 0008_unique_constraints.py
 0009_standardize_description_comments.py
 0010_tenant_relax_uniqueness.py
 0011_contactassignment_tags.py
 __init__.py
share/netbox/tenancy/models/
 __init__.py
 contacts.py
 tenants.py
share/netbox/tenancy/tables/
 __init__.py
 columns.py
 contacts.py
 tenants.py
share/netbox/tenancy/tests/
 __init__.py
 test_api.py
 test_filtersets.py
 test_views.py
share/netbox/users/
 __init__.py
 admin.py
 apps.py
 constants.py
 filtersets.py
 models.py
 preferences.py
 signals.py
 tables.py
 urls.py
 utils.py
 views.py
share/netbox/users/api/
 __init__.py
 nested_serializers.py
 serializers.py
 urls.py
 views.py
share/netbox/users/forms/
 __init__.py
 authentication.py
 bulk_edit.py
 bulk_import.py
 filtersets.py
 model_forms.py
share/netbox/users/graphql/
 __init__.py
 schema.py
 types.py
share/netbox/users/migrations/
 0001_squashed_0011.py
 0002_standardize_id_fields.py
 0003_token_allowed_ips_last_used.py
 0004_netboxgroup_netboxuser.py
 __init__.py
share/netbox/users/tests/
 __init__.py
 test_api.py
 test_filtersets.py
 test_models.py
 test_preferences.py
 test_views.py
share/netbox/utilities/
 __init__.py
 api.py
 choices.py
 constants.py
 counters.py
 error_handlers.py
 exceptions.py
 fields.py
 files.py
 filters.py
 graphql_optimizer.py
 htmx.py
 jinja2.py
 json.py
 markdown.py
 migration.py
 mptt.py
 ordering.py
 paginator.py
 permissions.py
 query_functions.py
 querysets.py
 request.py
 rqworker.py
 tables.py
 tracking.py
 urls.py
 utils.py
 validators.py
 views.py
share/netbox/utilities/forms/
 __init__.py
 bulk_import.py
 constants.py
 forms.py
 mixins.py
 utils.py
share/netbox/utilities/forms/fields/
 __init__.py
 array.py
 content_types.py
 csv.py
 dynamic.py
 expandable.py
 fields.py
share/netbox/utilities/forms/widgets/
 __init__.py
 apiselect.py
 datetime.py
 misc.py
 select.py
share/netbox/utilities/management/__init__.py
share/netbox/utilities/management/commands/
 __init__.py
 calculate_cached_counts.py
share/netbox/utilities/serializers/json.py
share/netbox/utilities/templates/builtins/
 badge.html
 checkmark.html
 copy_content.html
 customfield_value.html
 htmx_table.html
 tag.html
share/netbox/utilities/templates/buttons/
 add.html
 bookmark.html
 bulk_delete.html
 bulk_edit.html
 clone.html
 delete.html
 edit.html
 export.html
 import.html
 sync.html
share/netbox/utilities/templates/form_helpers/
 render_custom_fields.html
 render_errors.html
 render_field.html
 render_form.html
share/netbox/utilities/templates/helpers/
 applied_filters.html
 table_config_form.html
 utilization_graph.html
share/netbox/utilities/templates/navigation/menu.html
share/netbox/utilities/templates/tabs/model_view_tabs.html
share/netbox/utilities/templates/widgets/
 apiselect.html
 clearable_file_input.html
 colorselect_option.html
 markdown_input.html
 number_with_options.html
 select_option.html
 select_option_with_pk.html
 sluginput.html
share/netbox/utilities/templatetags/
 __init__.py
 buttons.py
 form_helpers.py
 helpers.py
 mptt.py
 navigation.py
 perms.py
 tabs.py
share/netbox/utilities/templatetags/builtins/
 __init__.py
 filters.py
 tags.py
share/netbox/utilities/testing/
 __init__.py
 api.py
 base.py
 filtersets.py
 utils.py
 views.py
share/netbox/utilities/tests/
 __init__.py
 test_api.py
 test_choices.py
 test_counters.py
 test_filters.py
 test_forms.py
 test_managers.py
 test_ordering.py
 test_request.py
 test_utils.py
share/netbox/virtualization/
 __init__.py
 apps.py
 choices.py
 filtersets.py
 search.py
 urls.py
 views.py
share/netbox/virtualization/api/
 __init__.py
 nested_serializers.py
 serializers.py
 urls.py
 views.py
share/netbox/virtualization/forms/
 __init__.py
 bulk_create.py
 bulk_edit.py
 bulk_import.py
 filtersets.py
 model_forms.py
 object_create.py
share/netbox/virtualization/graphql/
 __init__.py
 schema.py
 types.py
share/netbox/virtualization/migrations/
 0001_squashed_0022.py
 0023_virtualmachine_natural_ordering.py
 0024_cluster_relax_uniqueness.py
 0025_extend_tag_support.py
 0026_vminterface_bridge.py
 0027_standardize_id_fields.py
 0028_vminterface_vrf.py
 0029_created_datetimefield.py
 0030_cluster_status.py
 0031_virtualmachine_site_device.py
 0032_virtualmachine_update_sites.py
 0033_unique_constraints.py
 0034_standardize_description_comments.py
 0035_virtualmachine_interface_count.py
 0036_virtualmachine_config_template.py
 __init__.py
share/netbox/virtualization/models/
 __init__.py
 clusters.py
 virtualmachines.py
share/netbox/virtualization/tables/
 __init__.py
 clusters.py
 virtualmachines.py
share/netbox/virtualization/tests/
 __init__.py
 test_api.py
 test_filtersets.py
 test_models.py
 test_views.py
share/netbox/wireless/
 __init__.py
 apps.py
 choices.py
 constants.py
 filtersets.py
 models.py
 search.py
 signals.py
 urls.py
 utils.py
 views.py
share/netbox/wireless/api/
 __init__.py
 nested_serializers.py
 serializers.py
 urls.py
 views.py
share/netbox/wireless/forms/
 __init__.py
 bulk_edit.py
 bulk_import.py
 filtersets.py
 model_forms.py
share/netbox/wireless/graphql/
 __init__.py
 schema.py
 types.py
share/netbox/wireless/migrations/
 0001_wireless.py
 0002_standardize_id_fields.py
 0003_created_datetimefield.py
 0004_wireless_tenancy.py
 0005_wirelesslink_interface_types.py
 0006_unique_constraints.py
 0007_standardize_description_comments.py
 0008_wirelesslan_status.py
 __init__.py
share/netbox/wireless/tables/
 __init__.py
 wirelesslan.py
 wirelesslink.py
share/netbox/wireless/tests/
 __init__.py
 test_api.py
 test_filtersets.py
 test_views.py


[FILE:5287:manifests/plist.docs]
share/netbox/docs/docs/
 extra.css
 index.md
 introduction.md
 netbox_logo.png
 netbox_logo.svg
share/netbox/docs/docs/_theme/main.html
share/netbox/docs/docs/administration/
 error-reporting.md
 housekeeping.md
 netbox-shell.md
 permissions.md
 replicating-netbox.md
share/netbox/docs/docs/administration/authentication/
 microsoft-azure-ad.md
 okta.md
 overview.md
share/netbox/docs/docs/configuration/
 data-validation.md
 date-time.md
 default-values.md
 development.md
 error-reporting.md
 index.md
 miscellaneous.md
 plugins.md
 remote-authentication.md
 required-parameters.md
 security.md
 system.md
share/netbox/docs/docs/customization/
 custom-fields.md
 custom-links.md
 custom-scripts.md
 custom-validation.md
 export-templates.md
 reports.md
share/netbox/docs/docs/development/
 adding-models.md
 application-registry.md
 extending-models.md
 getting-started.md
 git-cheat-sheet.md
 index.md
 internationalization.md
 models.md
 release-checklist.md
 search.md
 signals.md
 style-guide.md
 user-preferences.md
 web-ui.md
share/netbox/docs/docs/features/
 api-integration.md
 authentication-permissions.md
 background-jobs.md
 change-logging.md
 circuits.md
 configuration-rendering.md
 contacts.md
 context-data.md
 customization.md
 devices-cabling.md
 facilities.md
 ipam.md
 journaling.md
 l2vpn-overlay.md
 power-tracking.md
 search.md
 synchronized-data.md
 tenancy.md
 virtualization.md
 vlan-management.md
 wireless.md
share/netbox/docs/docs/getting-started/
 planning.md
 populating-data.md
share/netbox/docs/docs/installation/
 1-postgresql.md
 2-redis.md
 3-netbox.md
 4-gunicorn.md
 5-http-server.md
 6-ldap.md
 index.md
 upgrading.md
share/netbox/docs/docs/integrations/
 graphql-api.md
 prometheus-metrics.md
 rest-api.md
 synchronized-data.md
 webhooks.md
share/netbox/docs/docs/media/
 admin_ui_run_permission.png
 power_distribution.png
share/netbox/docs/docs/media/authentication/
 azure_ad_add_app_registration.png
 azure_ad_add_client_secret.png
 azure_ad_app_registration.png
 azure_ad_app_registration_created.png
 azure_ad_client_secret.png
 azure_ad_client_secret_created.png
 azure_ad_login_portal.png
 netbox_azure_ad_login.png
 netbox_okta_login.png
 okta_create_app_registration.png
 okta_integration_parameters.png
 okta_login_portal.png
 okta_web_app_integration.png
share/netbox/docs/docs/media/development/
 github.png
 github_fork_button.png
 github_fork_dialog.png
 github_new_issue.png
share/netbox/docs/docs/media/installation/
 netbox_application_stack.png
 upgrade_paths.png
share/netbox/docs/docs/media/models/dcim_cable_trace.png
share/netbox/docs/docs/media/release-notes/netbox30_ui.png
share/netbox/docs/docs/media/screenshots/
 cable-trace.png
 home-dark.png
 netbox-ui.png
 prefixes-list.png
 rack.png
share/netbox/docs/docs/models/circuits/
 circuit.md
 circuittermination.md
 circuittype.md
 provider.md
 provideraccount.md
 providernetwork.md
share/netbox/docs/docs/models/core/
 datafile.md
 datasource.md
 job.md
share/netbox/docs/docs/models/dcim/
 cable.md
 consoleport.md
 consoleporttemplate.md
 consoleserverport.md
 consoleserverporttemplate.md
 device.md
 devicebay.md
 devicebaytemplate.md
 devicerole.md
 devicetype.md
 frontport.md
 frontporttemplate.md
 interface.md
 interfacetemplate.md
 inventoryitem.md
 inventoryitemrole.md
 inventoryitemtemplate.md
 location.md
 manufacturer.md
 module.md
 modulebay.md
 modulebaytemplate.md
 moduletype.md
 platform.md
 powerfeed.md
 poweroutlet.md
 poweroutlettemplate.md
 powerpanel.md
 powerport.md
 powerporttemplate.md
 rack.md
 rackreservation.md
 rackrole.md
 rearport.md
 rearporttemplate.md
 region.md
 site.md
 sitegroup.md
 virtualchassis.md
 virtualdevicecontext.md
share/netbox/docs/docs/models/extras/
 bookmark.md
 branch.md
 configcontext.md
 configtemplate.md
 customfield.md
 customfieldchoiceset.md
 customlink.md
 exporttemplate.md
 imageattachment.md
 journalentry.md
 savedfilter.md
 stagedchange.md
 tag.md
 webhook.md
share/netbox/docs/docs/models/ipam/
 aggregate.md
 asn.md
 asnrange.md
 fhrpgroup.md
 fhrpgroupassignment.md
 ipaddress.md
 iprange.md
 l2vpn.md
 l2vpntermination.md
 prefix.md
 rir.md
 role.md
 routetarget.md
 service.md
 servicetemplate.md
 vlan.md
 vlangroup.md
 vrf.md
share/netbox/docs/docs/models/tenancy/
 contact.md
 contactgroup.md
 contactrole.md
 tenant.md
 tenantgroup.md
share/netbox/docs/docs/models/virtualization/
 cluster.md
 clustergroup.md
 clustertype.md
 virtualmachine.md
 vminterface.md
share/netbox/docs/docs/models/wireless/
 wirelesslan.md
 wirelesslangroup.md
 wirelesslink.md
share/netbox/docs/docs/plugins/index.md
share/netbox/docs/docs/plugins/development/
 background-tasks.md
 dashboard-widgets.md
 exceptions.md
 filtersets.md
 forms.md
 graphql-api.md
 index.md
 models.md
 navigation.md
 rest-api.md
 search.md
 staged-changes.md
 tables.md
 templates.md
 views.md
share/netbox/docs/docs/reference/
 conditions.md
 filtering.md
 markdown.md
share/netbox/docs/docs/release-notes/
 index.md
 version-2.0.md
 version-2.1.md
 version-2.10.md
 version-2.11.md
 version-2.2.md
 version-2.3.md
 version-2.4.md
 version-2.5.md
 version-2.6.md
 version-2.7.md
 version-2.8.md
 version-2.9.md
 version-3.0.md
 version-3.1.md
 version-3.2.md
 version-3.3.md
 version-3.4.md
 version-3.5.md
 version-3.6.md


[FILE:155:manifests/plist.examples]
share/examples/netbox/
 apache.conf
 gunicorn.py
 nginx.conf
share/examples/netbox/bsd/
 850.netbox-housekeeping.sample
 netbox_rq.sample
 netboxrc.sample


[FILE:578:patches/patch-mkdocs.yml]
--- mkdocs.yml.orig	2023-11-30 00:30:47 UTC
+++ mkdocs.yml
@@ -1,5 +1,5 @@
 site_name: NetBox Documentation
-site_dir: netbox/project-static/docs
+site_dir: project-static/docs
 site_url: https://docs.netbox.dev/
 repo_name: netbox-community/netbox
 repo_url: https://github.com/netbox-community/netbox
@@ -31,7 +31,6 @@ plugins:
           setup_commands:
             - import os
             - import django
-            - os.chdir('netbox/')
             - os.environ.setdefault("DJANGO_SETTINGS_MODULE", "netbox.settings")
             - django.setup()
           options:


[FILE:789:files/850.netbox-housekeeping.sample.in]
#!/bin/sh
# This shell script invokes NetBox's housekeeping management command, which
# intended to be run nightly.
#
# If you want to enable this script, copy it to %%PREFIX%%/etc/periodic/daily
# and place the following into /etc/periodic.conf:
#
# daily_netbox_housekeeping_enable="YES"
#
# If NetBox has been installed into a nonstandard location, update the paths
# below.
command="%%PYTHON_CMD%%"
netbox_root="%%PREFIX%%/share/netbox"

# If there is a global system configuration file, suck it in.
#
if [ -r /etc/defaults/periodic.conf ]; then
	. /etc/defaults/periodic.conf
	source_periodic_confs
fi

rc=0

case "$daily_netbox_housekeeping_enable" in
	[Yy][Ee][Ss])
	echo ""
	echo "Running NetBox housekeeping:"
	$command "$netbox_root/manage.py" housekeeping
	rc=$?
esac

exit $rc


[FILE:934:files/netbox_rq.sample.in]
#!/bin/sh

# This sample rc script starts the RQ worker background service which is
# required for Webhooks and various automation tasks.

#
# PROVIDE: netbox_rq
# REQUIRE: DAEMON
# KEYWORD: shutdown
#
# Add the following line to /etc/rc.conf.local or /etc/rc.conf
# to enable netbox-rq:
#
# netbox_rq_enable (bool):		Set to NO by default.
#					Set it to YES to enable netbox_rq.

. /etc/rc.subr

name=netbox_rq
rcvar=netbox_rq_enable

load_rc_config $name

start_cmd="netbox_rq_start"
start_precmd="netbox_rq_precmd"
command="%%PYTHON_CMD%%"
command_args="%%PREFIX%%/share/netbox/manage.py rqworker"
pidfile=${netbox_rq_pidfile:-/var/run/${name}/${name}.pid}
netbox_rq_user=${netbox_rq_user:-www}


netbox_rq_precmd()
{
	install -d -o ${netbox_rq_user} `dirname ${pidfile}`
}

netbox_rq_start()
{
	echo "Starting netbox_rq."
	/usr/sbin/daemon -cf -p ${pidfile} -u ${netbox_rq_user} ${command} ${command_args}
}

run_rc_command "$1"


[FILE:3721:files/netboxrc.sample.in]
#!/bin/sh

# This sample rc script eliminate the need to use sysutils/py-supervisor to
# run NetBox as a system service. Only www/py-gunicorn is needed as a WSGI.
#
# Of course a working HTTP server like Apache/nginx is still required to make
# use of the gunicorn WSGI.

#
# PROVIDE: netbox
# REQUIRE: DAEMON
# KEYWORD: shutdown
#
# Add the following line to /etc/rc.conf.local or /etc/rc.conf
# to enable netbox:
#
# netbox_enable (bool):			Set to NO by default.
#					Set it to YES to enable netbox.
# netbox_use_config (bool):		Set to NO by default.
#					If set, read the configuration parameter from file defined in
#					"netbox_config" instead using rc variables.
# netbox_config (str):			Default to "/usr/local/etc/${name}.conf}"
#					Config file for gunicorn's netbox config file
# netbox_command (str):			Default to "%%LOCALBASE%%/bin/gunicorn"
#					Path to gunicorn to run netbox
# netbox_bind (str):    		Default to "localhost:8001"
#					Interface and port to bind to
# netbox_workers (int):			Default to "5"
#					Number of gunicorn workers
# netbox_threads (int):			Default to "3"
#					Number of worker threads per handling request
# netbox_timeout (int):			Default to "120"
#					Worker timeout for gunicorn
# netbox_max_requests (int):		Default to "5000"
#					Maximum number of requests a worker process will process before respawning
# netbox_max_requests_jitter (int):	Default to "500"
#					Maximum number jitter to add to "netbox_max_requests"
# netbox_extra_args (str):		Not set by default
#					Extra arguments that are passed to gunicorn
#

. /etc/rc.subr

name="netbox"
rcvar=netbox_enable
netbox_path=%%PREFIX%%/share/netbox
extra_commands="upgrade"

load_rc_config $name

start_precmd="netbox_precmd"
upgrade_cmd="netbox_upgrade"
command=${netbox_program:-%%LOCALBASE%%/bin/gunicorn}
procname=${netbox_procname:-%%PYTHON_CMD%%}
netbox_chdir=${netbox_path}
pidfile=${netbox_pidfile:-/var/run/${name}/${name}.pid}
netbox_user=${netbox_user:-wwwraven}
netbox_use_config=${netbox_use_config:-no}
netbox_config=${netbox_config:-/${name}.conf}
netbox_bind=${netbox_bind:-localhost:8001}
netbox_workers=${netbox_workers:-5}
netbox_threads=${netbox_threads:-3}
netbox_timeout=${netbox_timeout:-120}
netbox_max_requests=${netbox_max_requests:-5000}
netbox_max_requests_jitter=${netbox_max_requests_jitter:-500}

# Read settings from confguration file if set
if checkyesno netbox_use_config && [ -f "${netbox_config}" ]; then 
	command_args="${netbox_args} -D \
		--log-syslog --log-syslog-prefix ${name} \
		--log-syslog-to unix:///var/run/log#dgram \
		--disable-redirect-access-to-syslog \
		-p ${pidfile} --pythonpath ${netbox_path} \
		-c ${netbox_config} \
		netbox.wsgi"
else
	command_args="${netbox_args} -D \
		--log-syslog --log-syslog-prefix ${name} \
		--log-syslog-to unix:///var/run/log#dgram \
		--disable-redirect-access-to-syslog \
		-p ${pidfile} --pythonpath ${netbox_path} \
		-b ${netbox_bind} -w ${netbox_workers} --threads ${netbox_threads} -t ${netbox_timeout} \
		--max-requests ${netbox_max_requests} --max-requests-jitter ${netbox_max_requests_jitter} \
		${netbox_extra_args} \
		netbox.wsgi"
fi

netbox_precmd()
{
	install -d -o ${netbox_user} `dirname ${pidfile}`
}

netbox_upgrade()
{
	if [ -f ${pidfile} ]; then
		cd ${netbox_path}
		%%PYTHON_CMD%% manage.py migrate
		%%PYTHON_CMD%% manage.py trace_paths --no-input
		%%LOCALBASE%%/bin/mkdocs build
		%%PYTHON_CMD%% manage.py collectstatic --no-input
		%%PYTHON_CMD%% manage.py remove_stale_contenttypes --no-input
		%%PYTHON_CMD%% manage.py clearsessions
		%%PYTHON_CMD%% manage.py clearcache
		echo "Please restart NetBox and the WSGI environment."
	else
		echo "NetBox is not running!"
	fi
}

run_rc_command "$1"


[FILE:1152:files/pkg-message-primary.in]
Please note that NetBox requires a PostgreSQL database server, which uses its
built-in network address datatypes. Thus NetBox won't work with other RDBMS's,
e.g. MySQL, MariaDB, etc.

For installation instructions please refer to the related wiki page:

- https://wiki.freebsd.org/Ports/net-mgmt/netbox

************
* Upgrades *
************

As always it is strongly encouraged to make a backup of the database before the
database migrations will be executed.

The following steps are required to finish the upgrade: 

1. Run database migrations, trace any missing cable paths, build the embedded
   documentation, collect static files, remove stale content files, delete any
   expired user sessions and clear the cache.

# cd %%PREXIX%%/share/netbox
# python%%PYTHON_VER%% manage.py migrate
# python%%PYTHON_VER%% manage.py trace_paths --no-input
# mkdocs build
# python%%PYTHON_VER%% manage.py collectstatic --no-input
# python%%PYTHON_VER%% manage.py remove_stale_contenttypes --no-input
# python%%PYTHON_VER%% manage.py clearsessions
# python%%PYTHON_VER%% manage.py clearcache

2. Restart WSGI/httpd environment (supervisord/apache/nginx/etc.)

