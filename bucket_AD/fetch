# Buildsheet autogenerated by ravenadm tool -- Do not edit.

NAMEBASE=		fetch
VERSION=		12.0.7
KEYWORDS=		ftp
VARIANTS=		standard library
SDESC[library]=		Library to retrieve file by URL
SDESC[standard]=	Tool to retrieve file by Uniform Resource Locator
HOMEPAGE=		https://www.freebsd.org/cgi/man.cgi?fetch(1)
CONTACT=		John_Marino[draco@marino.st]

DOWNLOAD_GROUPS=	main
SITES[main]=		GITHUB/jrmarino:fetch-freebsd:v12.0.7
DISTFILE[1]=		generated:main
DF_INDEX=		1
SPKGS[library]=		single
SPKGS[standard]=	single

OPTIONS_AVAILABLE=	LIBRARY
OPTIONS_STANDARD=	none
VOPTS[library]=		LIBRARY=ON

USES=			cmake ssl

LICENSE=		BSD3CLAUSE:single
LICENSE_FILE=		BSD3CLAUSE:{{WRKSRC}}/LICENSE
LICENSE_SCHEME=		solo

SINGLE_JOB=		yes

SOVERSION=		1.0

[LIBRARY].DESCRIPTION=			Build library instead of executable
[LIBRARY].CMAKE_ARGS_ON=		-DFETCH_LIBRARY:BOOL=ON
					-DFETCH_PROGRAM:BOOL=OFF

post-install-LIBRARY-ON:
	${STRIP_CMD} ${STAGEDIR}${PREFIX}/lib/libfetch.so

post-install-LIBRARY-OFF:
	${STRIP_CMD} ${STAGEDIR}${PREFIX}/bin/fetch

[FILE:391:descriptions/desc.single.standard]
The fetch program is a command-line utility originating with FreeBSD.
Its purpose is to retrieve the file(s) pointed to by the URL(s) on the
command line.

The original implementation of fetch was done by Jean-Marc Zucconi It was
extensively re-worked for FreeBSD 2.2 by Garrett Wollman , and later
completely rewritten to use the fetch(3) library by Dag-Erling Smorgrav
and Michael Gmelin.


[FILE:163:descriptions/desc.single.library]
The fetch library is the backbone of the fetch command-line utility
originating with FreeBSD.  Its purpose is to retrieve file(s) given
Uniform Resource Locators.


[FILE:115:distinfo]
fbf8f2ad93ad30f62a62c977529f6c6b3c3dd9d2125bc5de743c4cae850eb291        91004 jrmarino-fetch-freebsd-12.0.7.tar.gz


[FILE:36:manifests/plist.single.standard]
bin/fetch
share/man/man1/fetch.1.gz


[FILE:159:manifests/plist.single.library]
include/
 fetch-estream.h
 fetch.h
lib/
 libfetch.a
 libfetch.so
 libfetch.so.%%SOMAJOR%%
 libfetch.so.%%SOVERSION%%
 libfetch_pic.a
share/man/man3/fetch.3.gz


[FILE:614:patches/patch-fix-sunos-linkage]
From 181419625f92e4e2d6bfbf271b431799122446fb Mon Sep 17 00:00:00 2001
From: jrmarino <draco@marino.st>
Date: Thu, 18 Jun 2020 13:43:11 -0500
Subject: [PATCH] Fix linking on sunos after libressl update

---
 program/CMakeLists.txt | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

--- program/CMakeLists.txt
+++ program/CMakeLists.txt
@@ -11,7 +11,7 @@ set (incssl ${CMAKE_CURRENT_SOURCE_DIR}
 set (libs ${libssl} ${libcrypto})
 
 if (CMAKE_SYSTEM_NAME MATCHES "(Solaris|SunOS)")
-   set (libs ${libs} resolv socket)
+   set (libs ${libs} resolv socket nsl)
 endif()
 
 if (CMAKE_SYSTEM_NAME MATCHES "Linux")

