# Buildsheet autogenerated by ravenadm tool -- Do not edit.

NAMEBASE=		rpm
VERSION=		6.0.1
KEYWORDS=		archivers
VARIANTS=		std
SDESC[std]=		RPM Package Manager
HOMEPAGE=		https://rpm.org/
CONTACT=		Michael_Reim[kraileth@elderlinux.org]

DOWNLOAD_GROUPS=	main
SITES[main]=		http://ftp.rpm.org/releases/rpm-6.0.x/
DISTFILE[1]=		rpm-6.0.1.tar.bz2:main
DF_INDEX=		1
SPKGS[std]=		set
			primary
			tools
			python
			dev
			man
			nls
			docs

OPTIONS_AVAILABLE=	none
OPTIONS_STANDARD=	none

BUILD_DEPENDS=		libarchive:dev:std
			bzip2:dev:std
			dbus:dev:std
			libgcrypt:dev:std
			libgpg-error:dev:std
			ncurses:dev:std
			readline:dev:std
			xz:dev:std
			zstd:dev:std
			file:dev:std
			popt:dev:std
			nettle3:dev:std
BUILDRUN_DEPENDS=	bzip2:primary:std
			dbus:primary:std
			file:primary:std
			libarchive:primary:std
			libgcrypt:primary:std
			popt:primary:std
			readline:primary:std
			xz:primary:std
			zstd:primary:std
			scdoc:primary:std
EXRUN[tools]=		primary
EXRUN[python]=		primary

USES=			cmake fortran:primary gettext lua:5.4 pkgconfig
			python shebangfix sqlite ssl zlib cpe c++:primary

LICENSE=		GPLv2:primary
LICENSE_TERMS=		primary:{{WRKDIR}}/TERMS
LICENSE_FILE=		GPLv2:stock
LICENSE_AWK=		TERMS:"---"
LICENSE_SOURCE=		TERMS:{{WRKSRC}}/COPYING
LICENSE_SCHEME=		solo

FPC_EQUIVALENT=		archivers/rpm4
SHEBANG_FILES=		scripts/brp-compress
			scripts/check-rpaths-worker
			scripts/check-prereqs
			scripts/find-lang.sh
			scripts/fontconfig.prov
			scripts/ocamldeps.sh
			scripts/pkgconfigdeps.sh
			scripts/rpm_macros_provides.sh
			scripts/sysusers.sh
			scripts/rpm-setup-autosign

SOVERSION=		10.7.0
PLIST_SUB=		PORTVERSION=6.0.1

CMAKE_ARGS=		-DWITH_CAP=OFF
			-DWITH_ACL=OFF
			-DWITH_AUDIT=OFF
			-DWITH_SELINUX=OFF
			-DWITH_LIBELF=OFF
			-DWITH_LIBDW=OFF
			-DWITH_SEQUOIA=OFF
			-DWITH_INTERNAL_OPENPGP=ON
			-DENABLE_NDB=OFF
			-DENABLE_TESTSUITE=OFF

post-install:
	${RM} -r ${STAGEDIR}/var
.for b in rpm rpm2archive rpm2cpio rpmbuild rpmdb rpmgraph rpmkeys rpmlua rpmsign rpmsort rpmspec
	${STRIP_CMD} ${STAGEDIR}${PREFIX}/bin/${b}
.endfor
.for l in librpm librpmbuild librpmio librpmsign
	${STRIP_CMD} ${STAGEDIR}${PREFIX}/lib/${l}.so
.endfor
.for p in dbus_announce fapolicyd prioreset syslog systemd_inhibit
	${STRIP_CMD} ${STAGEDIR}${PREFIX}/lib/rpm-plugins/${p}.so
.endfor
	${STRIP_CMD} ${STAGEDIR}${PREFIX}/lib/python*/site-packages/rpm/_rpm.so
	${STRIP_CMD} ${STAGEDIR}${PREFIX}/lib/rpm/rpmdeps
	${STRIP_CMD} ${STAGEDIR}${PREFIX}/lib/rpm/rpmuncompress
	${STRIP_CMD} ${STAGEDIR}${PREFIX}/lib/rpm/rpmdump

[FILE:45:descriptions/desc.primary]
This subpackage contains the librpm library.


[FILE:277:descriptions/desc.tools]
Initially developed by Red Hat, RPM is the native package manager for 
several Linux distributions.

This package contains version 4.x, the official and maintained version of 
RPM. It should not be confused with RPM 5, a separate project that did not 
see widespread adoption.


[FILE:57:descriptions/desc.python]
This subpackage contains the Python bindings for librpm.


[FILE:96:distinfo]
44fd2e1425885288ce8e8da8f18e6b85bd380332c2972554a85860af10f86d0f      1438018 rpm-6.0.1.tar.bz2


[FILE:5328:manifests/plist.primary]
%%ONLY-LINUX%%lib/rpm/macros.d/macros.transaction_unshare
%%ONLY-LINUX%%lib/rpm/platform/aarch64-linux/macros
%%ONLY-LINUX%%lib/rpm/platform/alpha-linux/macros
%%ONLY-LINUX%%lib/rpm/platform/alphaev5-linux/macros
%%ONLY-LINUX%%lib/rpm/platform/alphaev56-linux/macros
%%ONLY-LINUX%%lib/rpm/platform/alphaev6-linux/macros
%%ONLY-LINUX%%lib/rpm/platform/alphaev67-linux/macros
%%ONLY-LINUX%%lib/rpm/platform/alphapca56-linux/macros
%%ONLY-LINUX%%lib/rpm/platform/amd64-linux/macros
%%ONLY-LINUX%%lib/rpm/platform/armv3l-linux/macros
%%ONLY-LINUX%%lib/rpm/platform/armv4b-linux/macros
%%ONLY-LINUX%%lib/rpm/platform/armv4l-linux/macros
%%ONLY-LINUX%%lib/rpm/platform/armv5tejl-linux/macros
%%ONLY-LINUX%%lib/rpm/platform/armv5tel-linux/macros
%%ONLY-LINUX%%lib/rpm/platform/armv5tl-linux/macros
%%ONLY-LINUX%%lib/rpm/platform/armv6hl-linux/macros
%%ONLY-LINUX%%lib/rpm/platform/armv6l-linux/macros
%%ONLY-LINUX%%lib/rpm/platform/armv7hl-linux/macros
%%ONLY-LINUX%%lib/rpm/platform/armv7hnl-linux/macros
%%ONLY-LINUX%%lib/rpm/platform/armv7l-linux/macros
%%ONLY-LINUX%%lib/rpm/platform/armv8hl-linux/macros
%%ONLY-LINUX%%lib/rpm/platform/armv8l-linux/macros
%%ONLY-LINUX%%lib/rpm/platform/athlon-linux/macros
%%ONLY-LINUX%%lib/rpm/platform/e2k-linux/macros
%%ONLY-LINUX%%lib/rpm/platform/e2k16c-linux/macros
%%ONLY-LINUX%%lib/rpm/platform/e2k1cp-linux/macros
%%ONLY-LINUX%%lib/rpm/platform/e2k2c3-linux/macros
%%ONLY-LINUX%%lib/rpm/platform/e2k8c-linux/macros
%%ONLY-LINUX%%lib/rpm/platform/e2k8c2-linux/macros
%%ONLY-LINUX%%lib/rpm/platform/e2kv4-linux/macros
%%ONLY-LINUX%%lib/rpm/platform/e2kv5-linux/macros
%%ONLY-LINUX%%lib/rpm/platform/e2kv6-linux/macros
%%ONLY-LINUX%%lib/rpm/platform/geode-linux/macros
%%ONLY-LINUX%%lib/rpm/platform/i386-linux/macros
%%ONLY-LINUX%%lib/rpm/platform/i486-linux/macros
%%ONLY-LINUX%%lib/rpm/platform/i586-linux/macros
%%ONLY-LINUX%%lib/rpm/platform/i686-linux/macros
%%ONLY-LINUX%%lib/rpm/platform/ia32e-linux/macros
%%ONLY-LINUX%%lib/rpm/platform/ia64-linux/macros
%%ONLY-LINUX%%lib/rpm/platform/loongarch64-linux/macros
%%ONLY-LINUX%%lib/rpm/platform/m68k-linux/macros
%%ONLY-LINUX%%lib/rpm/platform/mips-linux/macros
%%ONLY-LINUX%%lib/rpm/platform/mips64-linux/macros
%%ONLY-LINUX%%lib/rpm/platform/mips64el-linux/macros
%%ONLY-LINUX%%lib/rpm/platform/mips64r6-linux/macros
%%ONLY-LINUX%%lib/rpm/platform/mips64r6el-linux/macros
%%ONLY-LINUX%%lib/rpm/platform/mipsel-linux/macros
%%ONLY-LINUX%%lib/rpm/platform/mipsr6-linux/macros
%%ONLY-LINUX%%lib/rpm/platform/mipsr6el-linux/macros
%%ONLY-LINUX%%lib/rpm/platform/noarch-linux/macros
%%ONLY-LINUX%%lib/rpm/platform/pentium3-linux/macros
%%ONLY-LINUX%%lib/rpm/platform/pentium4-linux/macros
%%ONLY-LINUX%%lib/rpm/platform/ppc-linux/macros
%%ONLY-LINUX%%lib/rpm/platform/ppc32dy4-linux/macros
%%ONLY-LINUX%%lib/rpm/platform/ppc64-linux/macros
%%ONLY-LINUX%%lib/rpm/platform/ppc64iseries-linux/macros
%%ONLY-LINUX%%lib/rpm/platform/ppc64le-linux/macros
%%ONLY-LINUX%%lib/rpm/platform/ppc64p7-linux/macros
%%ONLY-LINUX%%lib/rpm/platform/ppc64pseries-linux/macros
%%ONLY-LINUX%%lib/rpm/platform/ppc8260-linux/macros
%%ONLY-LINUX%%lib/rpm/platform/ppc8560-linux/macros
%%ONLY-LINUX%%lib/rpm/platform/ppciseries-linux/macros
%%ONLY-LINUX%%lib/rpm/platform/ppcpseries-linux/macros
%%ONLY-LINUX%%lib/rpm/platform/riscv64-linux/macros
%%ONLY-LINUX%%lib/rpm/platform/s390-linux/macros
%%ONLY-LINUX%%lib/rpm/platform/s390x-linux/macros
%%ONLY-LINUX%%lib/rpm/platform/sh-linux/macros
%%ONLY-LINUX%%lib/rpm/platform/sh3-linux/macros
%%ONLY-LINUX%%lib/rpm/platform/sh4-linux/macros
%%ONLY-LINUX%%lib/rpm/platform/sh4a-linux/macros
%%ONLY-LINUX%%lib/rpm/platform/sparc-linux/macros
%%ONLY-LINUX%%lib/rpm/platform/sparc64-linux/macros
%%ONLY-LINUX%%lib/rpm/platform/sparc64v-linux/macros
%%ONLY-LINUX%%lib/rpm/platform/sparcv8-linux/macros
%%ONLY-LINUX%%lib/rpm/platform/sparcv9-linux/macros
%%ONLY-LINUX%%lib/rpm/platform/sparcv9v-linux/macros
%%ONLY-LINUX%%lib/rpm/platform/x86_64-linux/macros
%%ONLY-LINUX%%lib/rpm/platform/x86_64_v2-linux/macros
%%ONLY-LINUX%%lib/rpm/platform/x86_64_v3-linux/macros
%%ONLY-LINUX%%lib/rpm/platform/x86_64_v4-linux/macros
lib/
 librpm.so.%%SOMAJOR%%
 librpm.so.%%SOVERSION%%
 librpmbuild.so.%%SOMAJOR%%
 librpmbuild.so.%%SOVERSION%%
 librpmio.so.%%SOMAJOR%%
 librpmio.so.%%SOVERSION%%
 librpmsign.so.%%SOMAJOR%%
 librpmsign.so.%%SOVERSION%%
lib/rpm/
 brp-compress
 brp-remove-la-files
 brp-strip
 brp-strip-comment-note
 brp-strip-static-archive
 check-buildroot
 check-files
 check-prereqs
 check-rpaths
 check-rpaths-worker
 find-lang.sh
 find-provides
 find-requires
 fontconfig.prov
 macros
 ocamldeps.sh
 pkgconfigdeps.sh
 rpm-setup-autosign
 rpm.daily
 rpm.log
 rpm.supp
 rpm2cpio.sh
 rpm_macros_provides.sh
 rpmdb_dump
 rpmdb_load
 rpmdeps
 rpmdump
 rpmpopt-%%PORTVERSION%%
 rpmrc
 rpmuncompress
 script.req
 sysusers.sh
 tgpg
lib/rpm-plugins/
 dbus_announce.so
 fapolicyd.so
 prioreset.so
 syslog.so
 systemd_inhibit.so
lib/rpm/fileattrs/
 debuginfo.attr
 desktop.attr
 elf.attr
 font.attr
 metainfo.attr
 ocaml.attr
 pkgconfig.attr
 rpm_lua.attr
 rpm_macro.attr
 script.attr
 sysusers.attr
 usergroup.attr
lib/rpm/macros.d/
 macros.transaction_dbus_announce
 macros.transaction_fapolicyd
 macros.transaction_prioreset
 macros.transaction_syslog
 macros.transaction_systemd_inhibit
@dir etc/rpm
@dir lib/rpm/lua


[FILE:169:manifests/plist.tools]
bin/
 gendiff
 rpm
 rpm2archive
 rpm2cpio
 rpmbuild
 rpmdb
 rpmgraph
 rpmkeys
 rpmlua
 rpmquery
 rpmsign
 rpmsort
 rpmspec
 rpmverify
share/dbus-1/system.d/org.rpm.conf


[FILE:167:manifests/plist.python]
lib/python%%PYTHON_VER%%/site-packages/rpm-%%PORTVERSION%%-py%%PYTHON_VER%%.egg-info
lib/python%%PYTHON_VER%%/site-packages/rpm/
 __init__.py
 _rpm.so
 transaction.py


[FILE:643:manifests/plist.dev]
%%ONLY-LINUX%%lib/rpm-plugins/unshare.so
include/rpm/
 argv.h
 header.h
 rpmarchive.h
 rpmbase64.h
 rpmbuild.h
 rpmcallback.h
 rpmcli.h
 rpmcrypto.h
 rpmdb.h
 rpmds.h
 rpmfc.h
 rpmfi.h
 rpmfiles.h
 rpmfileutil.h
 rpmio.h
 rpmkeyring.h
 rpmlib.h
 rpmlog.h
 rpmmacro.h
 rpmpgp.h
 rpmplugin.h
 rpmprob.h
 rpmps.h
 rpmsign.h
 rpmspec.h
 rpmsq.h
 rpmstring.h
 rpmstrpool.h
 rpmsw.h
 rpmtag.h
 rpmtd.h
 rpmte.h
 rpmts.h
 rpmtypes.h
 rpmurl.h
 rpmutil.h
 rpmver.h
lib/
 librpm.so
 librpmbuild.so
 librpmio.so
 librpmsign.so
lib/cmake/rpm/
 rpm-config-version.cmake
 rpm-config.cmake
 rpm-targets-release.cmake
 rpm-targets.cmake
lib/pkgconfig/rpm.pc


[FILE:610:manifests/plist.man]
%%ONLY-LINUX%%share/man/man8/rpm-plugin-unshare.8
share/man/man1/
 gendiff.1
 rpm-setup-autosign.1
 rpm2archive.1
 rpm2cpio.1
 rpmbuild.1
 rpmdeps.1
 rpmgraph.1
 rpmlua.1
 rpmsign.1
 rpmsort.1
 rpmspec.1
 rpmuncompress.1
share/man/man5/
 rpm-config.5
 rpm-macrofile.5
 rpm-manifest.5
 rpm-rpmrc.5
 rpmbuild-config.5
share/man/man7/
 rpm-lua.7
 rpm-macros.7
 rpm-payloadflags.7
 rpm-queryformat.7
 rpm-version.7
share/man/man8/
 rpm-common.8
 rpm-plugin-dbus-announce.8
 rpm-plugin-fapolicyd.8
 rpm-plugin-prioreset.8
 rpm-plugin-syslog.8
 rpm-plugin-systemd-inhibit.8
 rpm-plugins.8
 rpm.8
 rpmdb.8
 rpmkeys.8


[FILE:1451:manifests/plist.nls]
share/locale/ar/LC_MESSAGES/rpm.mo
share/locale/br/LC_MESSAGES/rpm.mo
share/locale/ca/LC_MESSAGES/rpm.mo
share/locale/cmn/LC_MESSAGES/rpm.mo
share/locale/cs/LC_MESSAGES/rpm.mo
share/locale/da/LC_MESSAGES/rpm.mo
share/locale/de/LC_MESSAGES/rpm.mo
share/locale/el/LC_MESSAGES/rpm.mo
share/locale/eo/LC_MESSAGES/rpm.mo
share/locale/es/LC_MESSAGES/rpm.mo
share/locale/fi/LC_MESSAGES/rpm.mo
share/locale/fr/LC_MESSAGES/rpm.mo
share/locale/gu/LC_MESSAGES/rpm.mo
share/locale/he/LC_MESSAGES/rpm.mo
share/locale/id/LC_MESSAGES/rpm.mo
share/locale/ie/LC_MESSAGES/rpm.mo
share/locale/is/LC_MESSAGES/rpm.mo
share/locale/it/LC_MESSAGES/rpm.mo
share/locale/ja/LC_MESSAGES/rpm.mo
share/locale/ka/LC_MESSAGES/rpm.mo
share/locale/ko/LC_MESSAGES/rpm.mo
share/locale/ms/LC_MESSAGES/rpm.mo
share/locale/nb/LC_MESSAGES/rpm.mo
share/locale/nl/LC_MESSAGES/rpm.mo
share/locale/pa/LC_MESSAGES/rpm.mo
share/locale/pl/LC_MESSAGES/rpm.mo
share/locale/pt/LC_MESSAGES/rpm.mo
share/locale/pt_BR/LC_MESSAGES/rpm.mo
share/locale/ru/LC_MESSAGES/rpm.mo
share/locale/si/LC_MESSAGES/rpm.mo
share/locale/sk/LC_MESSAGES/rpm.mo
share/locale/sl/LC_MESSAGES/rpm.mo
share/locale/sr/LC_MESSAGES/rpm.mo
share/locale/sr@latin/LC_MESSAGES/rpm.mo
share/locale/sv/LC_MESSAGES/rpm.mo
share/locale/te/LC_MESSAGES/rpm.mo
share/locale/tr/LC_MESSAGES/rpm.mo
share/locale/uk/LC_MESSAGES/rpm.mo
share/locale/vi/LC_MESSAGES/rpm.mo
share/locale/zh_CN/LC_MESSAGES/rpm.mo
share/locale/zh_TW/LC_MESSAGES/rpm.mo


[FILE:733:manifests/plist.docs]
share/doc/rpm/
 CONTRIBUTING.md
 COPYING
 CREDITS
 INSTALL
 README
 about.md
 arch_dependencies.md
 autosetup.md
 boolean_dependencies.md
 buildprocess.md
 buildsystem.md
 conditionalbuilds.md
 dependencies.md
 dependency_generators.md
 devel_documentation.md
 dynamic_specs.md
 file_triggers.md
 format_header.md
 format_lead.md
 format_v3.md
 format_v4.md
 format_v6.md
 index.md
 large_files.md
 lua.md
 macros.md
 more_dependencies.md
 philosophy.md
 plugins.md
 queryformat.md
 relocatable.md
 scriptlet_expansion.md
 signatures_digests.md
 spec.md
 tags.md
 triggers.md
 tsort.md
 users_and_groups.md
share/doc/rpm/examples/
 fnlookup.py
 rpm-e.py
 rpm-i.py
 rpm-q.py
 rpm-qa.py
 rpm-qi.py
 rpmls.py
 rpmunpack.py
 srpmspec.py


[FILE:328:patches/patch-lib_header.cc]
--- lib/header.cc.orig	2025-12-10 13:48:29 UTC
+++ lib/header.cc
@@ -15,6 +15,9 @@
 #include <atomic>
 #include <rpm/rpmtypes.h>
 #include <rpm/rpmstring.h>
+#if defined(__FreeBSD__)
+#include <arpa/inet.h>                  /* for ntohl */
+#endif
 #include "header_internal.hh"
 #include "misc.hh"			/* tag function proto */
 


[FILE:1731:patches/patch-misc_fts.c]
--- misc/fts.c.orig	2025-12-10 13:48:29 UTC
+++ misc/fts.c
@@ -37,12 +37,14 @@ static char sccsid[] = "@(#)fts.c	8.6 (B
 #endif
 
 /* Conditional to set up proper fstat64 implementation */
-#if defined(hpux) || defined(sun) || (defined(__APPLE__) && defined(_DARWIN_FEATURE_ONLY_64_BIT_INODE))
+#if defined(hpux) || defined(sun) || defined(__FreeBSD__) || defined(__DragonFly__) || defined(__NetBSD__)
 #   define FTS_FSTAT64(_fd, _sbp)   fstat((_fd), (_sbp))
 #else
 #   define FTS_FSTAT64(_fd, _sbp)   fstat64((_fd), (_sbp))
 #endif
 
+#include "system.h"
+#include "rpmfts.h"
 #if defined(_LIBC)
 #include <sys/param.h>
 #include <include/sys/stat.h>
@@ -56,12 +58,16 @@ static char sccsid[] = "@(#)fts.c	8.6 (B
 #else
 
 /* Conditionals for working around non-GNU environments */
-#if defined(hpux)
+#if defined(hpux) || defined(__FreeBSD__)
 #   define        _INCLUDE_POSIX_SOURCE
 #   define __errno_location() 	(&errno)
 #   define dirfd(dirp)		-1
 #   define stat64		stat
 #endif
+#if defined(__DragonFly__)
+#   define dirfd(dirp)		-1
+#   define stat64		stat
+#endif
 #if defined(sun)
 #   define __errno_location()	(&errno)
 #   define dirfd(dirp)		-1
@@ -75,14 +81,17 @@ static char sccsid[] = "@(#)fts.c	8.6 (B
 #if defined(_AIX)
 #   define __errno_location()   (&errno)
 #endif
+#if defined(__NetBSD__)
+#   define __errno_location()  (&errno)
+#   define stat64              stat
+#   define __fxstat64(_stat_ver, _fd, _sbp)    fstat((_fd), (_sbp))
+#endif
 
-#include "system.h"
 #include <fcntl.h>
 #include <stdlib.h>
 #include <string.h>
 #include <dirent.h>
 #include <errno.h>
-#include "rpmfts.h"
 #   define __set_errno(val) (*__errno_location ()) = (val)
 #   define __open	open
 #   define __close	close


[FILE:235:patches/patch-tools_rpmuncompress.cc]
--- tools/rpmuncompress.cc.orig	2025-12-10 13:48:29 UTC
+++ tools/rpmuncompress.cc
@@ -5,6 +5,7 @@
 #include <errno.h>
 #include <stdio.h>
 #include <string.h>
+#include <sys/wait.h>
 
 #include <archive.h>
 #include <archive_entry.h>

