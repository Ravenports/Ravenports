# Buildsheet autogenerated by ravenadm tool -- Do not edit.

NAMEBASE=		libvips
VERSION=		8.17.2
KEYWORDS=		graphics
VARIANTS=		std loaded
SDESC[std]=		Threaded image processing library (std. options)
SDESC[loaded]=		Threaded image processing library (more features)
HOMEPAGE=		https://www.libvips.org/
CONTACT=		Michael_Reim[kraileth@elderlinux.org]

DOWNLOAD_GROUPS=	main
SITES[main]=		GITHUB/libvips:libvips:v8.17.2
DISTFILE[1]=		generated:main
DF_INDEX=		1
SPKGS[std]=		set
			primary
			dev
			nls
			man
SPKGS[loaded]=		set
			primary
			dev
			nls
			man

OPTIONS_AVAILABLE=	LOADED
OPTIONS_STANDARD=	none
VOPTS[loaded]=		LOADED=ON

BUILD_DEPENDS=		ImageMagick:dev:std
			WebP:dev:std
			brotli:dev:std
			cgif:dev:std
			cmake:primary:std
			harfbuzz:dev:std
			highway:dev:std
			libspng:dev:std
			orc:dev:std
			poppler:dev:std
			poppler:glibdev:std
BUILDRUN_DEPENDS=	ImageMagick:primary:std
			WebP:primary:std
			cgif:primary:std
			libspng:primary:std
			orc:primary:std
			poppler:glib:std
			poppler:primary:std
			highway:primary:std

USES=			expat gettext jpeg meson pkgconfig tiff cpe
GNOME_COMPONENTS=	glib introspection librsvg

LICENSE=		LGPL20+:primary
LICENSE_TERMS=		primary:{{WRKDIR}}/TERMS
LICENSE_FILE=		LGPL20+:stock
LICENSE_SCHEME=		solo

FPC_EQUIVALENT=		graphics/vips

SOVERSION=		42.19.2
PLIST_SUB=		VER=8.17

[LOADED].DESCRIPTION=			Build with additional features and dependencies
[LOADED].BUILDRUN_DEPENDS_ON=		lcms2:primary:std
					libexif:primary:std
					libheif:primary:std
					libjxl:primary:std
					matio:primary:std
					openexr:primary:std
[LOADED].BUILD_DEPENDS_ON=		hdf5:dev:std
					lcms2:dev:std
					libexif:dev:std
					libheif:dev:std
					libjxl:dev:std
					matio:dev:std
					openexr:dev:std
[LOADED].GNOME_COMPONENTS_ON=		pango
[LOADED].USES_ON=			fontconfig

pre-configure-midnightbsd:
	${REINPLACE_CMD} -e 's|<malloc.h>|<sys/malloc.h>|' ${WRKSRC}/libvips/conversion/composite.cpp

post-extract:
	awk '/free software/,/USA/' ${WRKSRC}/libvips/include/vips/vips.h > ${WRKDIR}/TERMS

pre-configure-freebsd:
	${REINPLACE_CMD} -e 's|<malloc.h>|<sys/malloc.h>|' ${WRKSRC}/libvips/conversion/composite.cpp

[FILE:844:descriptions/desc.primary]
libvips is a demand-driven, horizontally threaded image processing 
library. Compared to similar libraries, libvips runs quickly and uses 
little memory.

It has around 300 operations covering arithmetic, histograms, convolution, 
morphological operations, frequency filtering, colour, resampling, 
statistics and others. It supports a large range of numeric formats, from 
8-bit int to 128-bit complex. Images can have any number of bands. It 
supports a good range of image formats, including JPEG, TIFF, PNG, WebP, 
FITS, Matlab, OpenEXR, PDF, SVG, HDR, PPM, CSV, GIF, Analyze, NIfTI, 
DeepZoom, and OpenSlide. It can also load images via ImageMagick or 
GraphicsMagick, letting it load formats like DICOM.

libvpis comes with bindings for C, C++, and the command-line. Full 
bindings are available for Ruby, Python, PHP, .NET, Go, and Lua.


[FILE:108:distinfo]
66e2c8f0a716a08cf99e46a27535ef4938f1cae110dd9207cf8e992616b36ba7     33521331 libvips-libvips-8.17.2.tar.gz


[FILE:285:manifests/plist.primary.std]
bin/
 vips
 vipsedit
 vipsheader
 vipsthumbnail
lib/
 libvips-cpp.so.%%SOMAJOR%%
 libvips-cpp.so.%%SOVERSION%%
 libvips.so.%%SOMAJOR%%
 libvips.so.%%SOVERSION%%
lib/girepository-1.0/Vips-8.0.typelib
lib/vips-modules-%%VER%%/
 vips-magick.so
 vips-poppler.so
share/gir-1.0/Vips-8.0.gir


[FILE:688:manifests/plist.dev]
include/vips/
 VConnection8.h
 VError8.h
 VImage8.h
 VInterpolate8.h
 VRegion8.h
 almostdeprecated.h
 arithmetic.h
 basic.h
 buf.h
 colour.h
 connection.h
 conversion.h
 convolution.h
 create.h
 dbuf.h
 debug.h
 deprecated.h
 dispatch.h
 draw.h
 enumtypes.h
 error.h
 foreign.h
 format.h
 freqfilt.h
 gate.h
 generate.h
 header.h
 histogram.h
 image.h
 interpolate.h
 intl.h
 mask.h
 memory.h
 morphology.h
 mosaicing.h
 object.h
 operation.h
 private.h
 rect.h
 region.h
 resample.h
 sbuf.h
 semaphore.h
 thread.h
 threadpool.h
 transform.h
 type.h
 util.h
 vector.h
 version.h
 video.h
 vips.h
 vips7compat.h
 vips8
lib/
 libvips-cpp.so
 libvips.so
lib/pkgconfig/
 vips-cpp.pc
 vips.pc


[FILE:89:manifests/plist.nls]
share/locale/de/LC_MESSAGES/vips%%VER%%.mo
share/locale/en_GB/LC_MESSAGES/vips%%VER%%.mo


[FILE:67:manifests/plist.man]
share/man/man1/
 vips.1
 vipsedit.1
 vipsheader.1
 vipsthumbnail.1


[FILE:312:manifests/plist.primary.loaded]
bin/
 vips
 vipsedit
 vipsheader
 vipsthumbnail
lib/
 libvips-cpp.so.%%SOMAJOR%%
 libvips-cpp.so.%%SOVERSION%%
 libvips.so.%%SOMAJOR%%
 libvips.so.%%SOVERSION%%
lib/girepository-1.0/Vips-8.0.typelib
lib/vips-modules-%%VER%%/
 vips-heif.so
 vips-jxl.so
 vips-magick.so
 vips-poppler.so
share/gir-1.0/Vips-8.0.gir


[FILE:288:freebsd/patch-libvips_iofuncs_memory.c]
--- libvips/iofuncs/memory.c.orig	2025-09-13 12:30:02 UTC
+++ libvips/iofuncs/memory.c
@@ -70,7 +70,7 @@
 #include <stdarg.h>
 #include <string.h>
 #if defined(HAVE__ALIGNED_MALLOC) || defined(HAVE_MEMALIGN)
-#include <malloc.h>
+#include <sys/malloc.h>
 #endif
 
 #include <vips/vips.h>


[FILE:288:midnightbsd/patch-libvips_iofuncs_memory.c]
--- libvips/iofuncs/memory.c.orig	2025-09-13 12:30:02 UTC
+++ libvips/iofuncs/memory.c
@@ -70,7 +70,7 @@
 #include <stdarg.h>
 #include <string.h>
 #if defined(HAVE__ALIGNED_MALLOC) || defined(HAVE_MEMALIGN)
-#include <malloc.h>
+#include <sys/malloc.h>
 #endif
 
 #include <vips/vips.h>

