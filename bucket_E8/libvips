# Buildsheet autogenerated by ravenadm tool -- Do not edit.

NAMEBASE=		libvips
VERSION=		8.15.1
KEYWORDS=		graphics
VARIANTS=		standard loaded
SDESC[standard]=	Threaded image processing library (std. options)
SDESC[loaded]=		Threaded image processing library (more features)
HOMEPAGE=		https://www.libvips.org/
CONTACT=		Michael_Reim[kraileth@elderlinux.org]

DOWNLOAD_GROUPS=	main
SITES[main]=		GITHUB/libvips:libvips:v8.15.1
DISTFILE[1]=		generated:main
DF_INDEX=		1
SPKGS[standard]=	complete
			primary
			dev
			nls
			man
SPKGS[loaded]=		complete
			primary
			dev
			nls
			man

OPTIONS_AVAILABLE=	LOADED
OPTIONS_STANDARD=	none
VOPTS[loaded]=		LOADED=ON

BUILD_DEPENDS=		ImageMagick:dev:standard
			WebP:dev:standard
			brotli:dev:standard
			cgif:dev:standard
			cmake:primary:standard
			harfbuzz:dev:standard
			highway:dev:standard
			libspng:dev:standard
			orc:dev:standard
			poppler:dev:standard
			poppler:glibdev:standard
BUILDRUN_DEPENDS=	ImageMagick:primary:standard
			WebP:primary:standard
			cgif:primary:standard
			libspng:primary:standard
			orc:primary:standard
			poppler:glib:standard
			poppler:primary:standard
			highway:primary:standard

USES=			expat gettext jpeg meson pkgconfig shebangfix tiff
			gold
GNOME_COMPONENTS=	glib introspection librsvg

LICENSE=		LGPL20+:primary
LICENSE_TERMS=		primary:{{WRKDIR}}/TERMS
LICENSE_FILE=		LGPL20+:stock
LICENSE_SCHEME=		solo

FPC_EQUIVALENT=		graphics/vips
SHEBANG_FILES=		tools/vipsprofile

SOVERSION=		42.17.1
PLIST_SUB=		VER=8.15

[LOADED].DESCRIPTION=			Build with additional features and dependencies
[LOADED].BUILDRUN_DEPENDS_ON=		lcms2:primary:standard
					libexif:primary:standard
					libheif:primary:standard
					libjxl:primary:standard
					matio:primary:standard
					openexr:primary:standard
[LOADED].BUILD_DEPENDS_ON=		hdf5:dev:standard
					lcms2:dev:standard
					libheif:dev:standard
					libjxl:dev:standard
					matio:dev:standard
					openexr:dev:standard
[LOADED].GNOME_COMPONENTS_ON=		pango
[LOADED].USES_ON=			fontconfig

pre-configure-midnightbsd:
	${REINPLACE_CMD} -e 's|<malloc.h>|<sys/malloc.h>|' ${WRKSRC}/libvips/conversion/composite.cpp

post-extract:
	awk '/free software/,/USA/' ${WRKSRC}/libvips/include/vips/vips.h > ${WRKDIR}/TERMS

pre-configure-freebsd:
	${REINPLACE_CMD} -e 's|<malloc.h>|<sys/malloc.h>|' ${WRKSRC}/libvips/conversion/composite.cpp

[FILE:844:descriptions/desc.primary]
libvips is a demand-driven, horizontally threaded image processing 
library. Compared to similar libraries, libvips runs quickly and uses 
little memory.

It has around 300 operations covering arithmetic, histograms, convolution, 
morphological operations, frequency filtering, colour, resampling, 
statistics and others. It supports a large range of numeric formats, from 
8-bit int to 128-bit complex. Images can have any number of bands. It 
supports a good range of image formats, including JPEG, TIFF, PNG, WebP, 
FITS, Matlab, OpenEXR, PDF, SVG, HDR, PPM, CSV, GIF, Analyze, NIfTI, 
DeepZoom, and OpenSlide. It can also load images via ImageMagick or 
GraphicsMagick, letting it load formats like DICOM.

libvpis comes with bindings for C, C++, and the command-line. Full 
bindings are available for Ruby, Python, PHP, .NET, Go, and Lua.


[FILE:108:distinfo]
5701445a076465a3402a135d13c0660d909beb8efc4f00fbbe82392e243497f2     21175035 libvips-libvips-8.15.1.tar.gz


[FILE:298:manifests/plist.primary.standard]
bin/
 vips
 vipsedit
 vipsheader
 vipsprofile
 vipsthumbnail
lib/
 libvips-cpp.so.%%SOMAJOR%%
 libvips-cpp.so.%%SOVERSION%%
 libvips.so.%%SOMAJOR%%
 libvips.so.%%SOVERSION%%
lib/girepository-1.0/Vips-8.0.typelib
lib/vips-modules-%%VER%%/
 vips-magick.so
 vips-poppler.so
share/gir-1.0/Vips-8.0.gir


[FILE:688:manifests/plist.dev]
include/vips/
 VConnection8.h
 VError8.h
 VImage8.h
 VInterpolate8.h
 VRegion8.h
 almostdeprecated.h
 arithmetic.h
 basic.h
 buf.h
 colour.h
 connection.h
 conversion.h
 convolution.h
 create.h
 dbuf.h
 debug.h
 deprecated.h
 dispatch.h
 draw.h
 enumtypes.h
 error.h
 foreign.h
 format.h
 freqfilt.h
 gate.h
 generate.h
 header.h
 histogram.h
 image.h
 interpolate.h
 intl.h
 mask.h
 memory.h
 morphology.h
 mosaicing.h
 object.h
 operation.h
 private.h
 rect.h
 region.h
 resample.h
 sbuf.h
 semaphore.h
 thread.h
 threadpool.h
 transform.h
 type.h
 util.h
 vector.h
 version.h
 video.h
 vips.h
 vips7compat.h
 vips8
lib/
 libvips-cpp.so
 libvips.so
lib/pkgconfig/
 vips-cpp.pc
 vips.pc


[FILE:89:manifests/plist.nls]
share/locale/de/LC_MESSAGES/vips%%VER%%.mo
share/locale/en_GB/LC_MESSAGES/vips%%VER%%.mo


[FILE:97:manifests/plist.man]
share/man/man1/
 vips.1.gz
 vipsedit.1.gz
 vipsheader.1.gz
 vipsprofile.1.gz
 vipsthumbnail.1.gz


[FILE:325:manifests/plist.primary.loaded]
bin/
 vips
 vipsedit
 vipsheader
 vipsprofile
 vipsthumbnail
lib/
 libvips-cpp.so.%%SOMAJOR%%
 libvips-cpp.so.%%SOVERSION%%
 libvips.so.%%SOMAJOR%%
 libvips.so.%%SOVERSION%%
lib/girepository-1.0/Vips-8.0.typelib
lib/vips-modules-%%VER%%/
 vips-heif.so
 vips-jxl.so
 vips-magick.so
 vips-poppler.so
share/gir-1.0/Vips-8.0.gir


[FILE:336:freebsd/patch-libvips_iofuncs_memory.c]
--- libvips/iofuncs/memory.c.orig	2023-12-21 14:37:04.304915000 +0100
+++ libvips/iofuncs/memory.c	2023-12-21 14:37:32.931439000 +0100
@@ -70,7 +70,7 @@
 #include <stdarg.h>
 #include <string.h>
 #if defined(HAVE__ALIGNED_MALLOC) || defined(HAVE_MEMALIGN)
-#include <malloc.h>
+#include <sys/malloc.h>
 #endif
 
 #include <vips/vips.h>


[FILE:336:midnightbsd/patch-libvips_iofuncs_memory.c]
--- libvips/iofuncs/memory.c.orig	2023-12-21 14:37:04.304915000 +0100
+++ libvips/iofuncs/memory.c	2023-12-21 14:37:32.931439000 +0100
@@ -70,7 +70,7 @@
 #include <stdarg.h>
 #include <string.h>
 #if defined(HAVE__ALIGNED_MALLOC) || defined(HAVE_MEMALIGN)
-#include <malloc.h>
+#include <sys/malloc.h>
 #endif
 
 #include <vips/vips.h>

