# Buildsheet autogenerated by ravenadm tool -- Do not edit.

NAMEBASE=		gstreamer1-plugins-vpx
VERSION=		1.15.1
KEYWORDS=		multimedia
VARIANTS=		standard
SDESC[standard]=	GStreamer1 vp8 codec plugin
HOMEPAGE=		https://gstreamer.freedesktop.org/
CONTACT=		nobody

DOWNLOAD_GROUPS=	main
SITES[main]=		https://gstreamer.freedesktop.org/src/gst-plugins-good/
DISTFILE[1]=		gst-plugins-good-1.15.1.tar.xz:main
DF_INDEX=		1
SPKGS[standard]=	single

OPTIONS_AVAILABLE=	none
OPTIONS_STANDARD=	none

BUILD_DEPENDS=		gstreamer1-plugins-good:single:standard
BUILDRUN_DEPENDS=	gstreamer1-plugins-base:single:standard
			gstreamer1:single:standard
			libvpx:single:standard

USES=			gmake pkgconfig libtool
GNOME_COMPONENTS=	glib introspection

DISTNAME=		gst-plugins-good-1.15.1

FPC_EQUIVALENT=		multimedia/gstreamer1-plugins-vpx

MUST_CONFIGURE=		gnu
CONFIGURE_ARGS=		--disable-aalib
			--disable-cairo
			--disable-flac
			--disable-gdk_pixbuf
			--disable-gst_v4l2
			--disable-jack
			--disable-jpeg
			--disable-libcaca
			--disable-libdv
			--disable-libpng
			--disable-pulse
			--disable-shout2
			--disable-soup
			--disable-speex
			--disable-taglib
			--enable-vpx
			--disable-wavpack
			--disable-x
			--disable-dv1394
			--disable-directsound
			--disable-osx_audio
			--disable-osx_video
			--disable-sunaudio
			--disable-waveform

BUILD_WRKSRC=		{{WRKSRC}}/ext/vpx

INSTALL_WRKSRC=		{{WRKSRC}}/ext/vpx
INSTALL_TARGET=		install-strip
INSTALL_REQ_TOOLCHAIN=	yes
PLIST_SUB=		GSTVER=1.0
			PLUGIN=vpx

CFLAGS=			-Wno-format

post-patch:
	${FIND} ${WRKSRC}/ext ${WRKSRC}/sys -name Makefile.in |\
	${XARGS} ${REINPLACE_CMD} -E \
	-e '/la_DEPENDENCIES/,/am__DEPENDENCIES/s|[$$][(]top_builddir[)]/gst-libs/.*.la||' \
	-e 's|[@$$][(]?GST_API_VERSION[@)]\.la|$$\{VERSION\}|g'

[FILE:46:descriptions/desc.single]
This package contains the soup (SOAP) plugin.


[FILE:109:distinfo]
2b9fb4c5514981e4f75aa1af20a34bac72a447885763d03da3d23c7e329dc695      3860160 gst-plugins-good-1.15.1.tar.xz


[FILE:94:manifests/plist.single]
lib/gstreamer-%%GSTVER%%/libgst%%PLUGIN%%.so
share/gstreamer-%%GSTVER%%/presets/GstVP8Enc.prs


[FILE:733:patches/patch-ext_vpx_gstvpxdec.c]
--- ext/vpx/gstvpxdec.c.orig	2018-01-25 19:41:41 UTC
+++ ext/vpx/gstvpxdec.c
@@ -62,6 +62,7 @@ gst_vpx_dec_post_processing_flags_get_ty
     {C_FLAGS (VP8_DEBLOCK), "Deblock", "deblock"},
     {C_FLAGS (VP8_DEMACROBLOCK), "Demacroblock", "demacroblock"},
     {C_FLAGS (VP8_ADDNOISE), "Add noise", "addnoise"},
+#if 0 // VPX_1.8 doesn't support
     {C_FLAGS (VP8_DEBUG_TXT_FRAME_INFO),
           "Print frame information",
         "visualize-frame-info"},
@@ -74,6 +75,7 @@ gst_vpx_dec_post_processing_flags_get_ty
     {C_FLAGS (VP8_DEBUG_TXT_RATE_INFO),
           "Print video rate info",
         "visualize-rate-info"},
+#endif
     {C_FLAGS (VP8_MFQE), "Multi-frame quality enhancement", "mfqe"},
     {0, NULL, NULL}
   };

