# Buildsheet autogenerated by ravenadm tool -- Do not edit.

NAMEBASE=		libudev-devd
VERSION=		0.6.0
REVISION=		1
KEYWORDS=		devel
VARIANTS=		std
SDESC[std]=		Libudev-compatible interface for devd
HOMEPAGE=		https://github.com/wulf7/libudev-devd
CONTACT=		Michael_Reim[kraileth@elderlinux.org]

DOWNLOAD_GROUPS=	main
SITES[main]=		GITHUB/wulf7:libudev-devd:v0.6.0
DISTFILE[1]=		generated:main
DF_INDEX=		1
SPKGS[std]=		set
			primary
			dev

OPTIONS_AVAILABLE=	none
OPTIONS_STANDARD=	none

BUILD_DEPENDS=		evdev-proto:single:std
B_DEPS[linux]=		libbsd:dev:std libbsd:primary:std

USES=			meson

LICENSE=		BSD2CLAUSE:primary
LICENSE_FILE=		BSD2CLAUSE:{{WRKDIR}}/LICENSE
LICENSE_AWK=		BSD2CLAUSE:"^$$"
LICENSE_SOURCE=		BSD2CLAUSE:{{WRKSRC}}/udev.c
LICENSE_SCHEME=		solo

FPC_EQUIVALENT=		devel/libudev-devd
MESON_ARGS=		-Denable-gpl=true

SOVERSION=		0.0.0

CFLAGS=			-Wno-error

[FILE:86:descriptions/desc.primary]
libudev-compatible interface for devd

Intended to work with xorg-server and libinput


[FILE:110:distinfo]
07cfb6d5000cc72eee2b09fe074aca4aa298ec3db90ed71c810f123285de29e8        37053 wulf7-libudev-devd-0.6.0.tar.gz


[FILE:55:manifests/plist.primary]
lib/
 libudev.so.%%SOMAJOR%%
 libudev.so.%%SOVERSION%%


[FILE:58:manifests/plist.dev]
include/libudev.h
lib/libudev.so
lib/pkgconfig/libudev.pc


[FILE:467:patches/patch-udev-net.c]
--- udev-net.c.orig	2024-09-20 07:46:46 UTC
+++ udev-net.c
@@ -27,7 +27,11 @@
 
 #include <sys/socket.h>
 #include <sys/stat.h>
+#if defined(__NetBSD__)
+#include <net/if_ether.h>
+#else
 #include <net/ethernet.h>
+#endif
 #include <net/if.h>
 #ifdef HAVE_NET_IF_DL_H
 #include <net/if_dl.h>
@@ -40,6 +44,10 @@
 #define	AF_LINK	AF_PACKET
 #endif
 
+#ifndef LLINDEX
+#define LLINDEX(s) ((s)->sdl_index)
+#endif
+
 int
 udev_net_enumerate(struct udev_enumerate *ue)
 {


[FILE:250:patches/patch-utils.c]
--- utils.c.orig	2024-09-20 07:46:46 UTC
+++ utils.c
@@ -34,6 +34,10 @@
 #include <string.h>
 #include <unistd.h>
 
+#ifdef __DragonFly__
+#include <vfs/ufs/dir.h>
+#endif
+
 #ifdef HAVE_LIBPROCSTAT_H
 #include <sys/sysctl.h>
 #include <sys/queue.h>


[FILE:207:patches/patch-utils.h]
--- utils.h.orig	2024-09-20 07:46:46 UTC
+++ utils.h
@@ -37,6 +37,8 @@
 
 #ifdef HAVE_SYS_TREE_H
 #include <sys/tree.h>
+#elif defined(__linux__)
+#include <bsd/sys/tree.h>
 #else
 #include "tree.h"
 #endif

