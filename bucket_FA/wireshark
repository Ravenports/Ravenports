# Buildsheet autogenerated by ravenadm tool -- Do not edit.

NAMEBASE=		wireshark
VERSION=		4.4.9
KEYWORDS=		net
VARIANTS=		std
SDESC[std]=		Network traffic analyzer
HOMEPAGE=		https://www.wireshark.org/
CONTACT=		nobody

DOWNLOAD_GROUPS=	main
SITES[main]=		https://2.na.dl.wireshark.org/src/all-versions/
			https://www.wireshark.org/download/src/
DISTFILE[1]=		wireshark-4.4.9.tar.xz:main
DF_INDEX=		1
SPKGS[std]=		set
			primary
			docs
			man

OPTIONS_AVAILABLE=	none
OPTIONS_STANDARD=	none

BUILD_DEPENDS=		bison:primary:std
			brotli:dev:std
			c-ares:dev:std
			doxygen:primary:std
			gnutls:dev:std
			krb5:dev:std
			libgcrypt:dev:std
			libmaxminddb:dev:std
			libnghttp2:dev:std
			libpcap:dev:std
			libsmi:dev:std
			libssh:dev:std
			minizip:dev:std
			opus:dev:std
			qt6-qtbase:dev:std
			qt6-qttools:set:std
			qt6-qt5compat:dev:std
			ruby-asciidoctor:single:ruby_default
			snappy:dev:std
			speexdsp:dev:std
BUILDRUN_DEPENDS=	brotli:primary:std
			c-ares:primary:std
			gnutls:primary:std
			krb5:primary:std
			libgcrypt:primary:std
			libmaxminddb:primary:std
			libnghttp2:primary:std
			libpcap:primary:std
			libsmi:primary:std
			libssh:primary:std
			minizip:primary:std
			opus:primary:std
			qt6-qtbase:primary:std
			qt6-qt5compat:primary:std
			snappy:primary:std
			speexdsp:primary:std

USES=			cpe gmake cmake ssl:openssl30 zlib lz4 qt6 zstd
			lua:5.2 perl:build python:build pkgconfig
			mime-info:primary desktop-utils:primary
GNOME_COMPONENTS=	glib libxml2

LICENSE=		GPLv2+:primary
LICENSE_TERMS=		primary:{{WRKDIR}}/TERMS
LICENSE_FILE=		GPLv2+:{{WRKSRC}}/COPYING
LICENSE_AWK=		TERMS:"^$$"
LICENSE_SOURCE=		TERMS:{{WRKSRC}}/include/wireshark.h
LICENSE_SCHEME=		solo

FPC_EQUIVALENT=		net/wireshark

MAKE_ARGS=		DESTDIR={{STAGEDIR}}

INSTALL_REQ_TOOLCHAIN=	yes
SOVERSION=		18.0.9
PLIST_SUB=		SO_WIRETAP=15.0.9
			SO_WSUTIL=16.0.0
			MAJ_WIRETAP=15
			MAJ_WSUTIL=16
			PLUGIN_VER=4.4

CMAKE_ARGS=		-DBUILD_wireshark:BOOL=ON
			-DBUILD_tshark:BOOL=ON
			-DBUILD_tfshark:BOOL=OFF
			-DBUILD_rawshark:BOOL=ON
			-DBUILD_androiddump:BOOL=ON
			-DBUILD_sshdump:BOOL=ON
			-DBUILD_ciscodump:BOOL=ON
			-DENABLE_ZLIB:BOOL=ON
			-DENABLE_LZ4:BOOL=ON
			-DENABLE_SNAPPY:BOOL=ON
			-DENABLE_NGHTTP2:BOOL=ON
			-DENABLE_LUA:BOOL=ON
			-DENABLE_SMI:BOOL=ON
			-DENABLE_GNUTLS:BOOL=ON
			-DENABLE_KERBEROS:BOOL=ON
			-DENABLE_SBC:BOOL=OFF
			-DENABLE_SPANDSP:BOOL=OFF
			-DENABLE_BCG729:BOOL=OFF
			-DCMAKE_PREFIX_PATH:PATH="{{PREFIX}}/lib/qt6/cmake/"
			-DPython3_EXECUTABLE:PATH="{{PYTHON_CMD}}"

post-install:
	${MKDIR} ${STAGEDIR}${STD_DOCDIR}
	${MV} ${STAGEDIR}${PREFIX}/share/wireshark/*.html \
		${STAGEDIR}${STD_DOCDIR}/
	${STRIP_CMD} ${STAGEDIR}${PREFIX}/bin/*
	${STRIP_CMD} ${STAGEDIR}${PREFIX}/lib/*.so
	${STRIP_CMD} ${STAGEDIR}${PREFIX}/lib/wireshark/extcap/*
	${STRIP_CMD} ${STAGEDIR}${PREFIX}/lib/wireshark/plugins/4.4/*/*.so
	${RM} ${STAGEDIR}${PREFIX}/share/wireshark/COPYING

pre-configure:
	${REINPLACE_CMD} -e 's|libssh/libssh.h|libssh/libssh_version.h|' \
		${WRKSRC}/cmake/modules/FindLIBSSH.cmake

[FILE:1811:descriptions/desc.primary]
Wireshark is the world's foremost and widely-used network protocol
analyzer. It lets you see what???s happening on your network at a
microscopic level and is the de facto (and often de jure) standard across
many commercial and non-profit enterprises, government agencies, and
educational institutions. Wireshark development thrives thanks to the
volunteer contributions of networking experts around the globe and is the
continuation of a project started by Gerald Combs in 1998.

Wireshark has a rich feature set which includes the following:
 - Deep inspection of hundreds of protocols
 - Live capture and offline analysis
 - Standard three-pane packet browser
 - Multi-platform: Runs on Windows, Linux, macOS, Solaris, BSD, and others
 - Captured network data can be browsed via a GUI, or via the TTY-mode
   TShark utility
 - The most powerful display filters in the industry
 - Rich VoIP analysis
 - Read/write many different capture file formats: tcpdump (libpcap),
   Pcap NG, Catapult DCT2000, Cisco Secure IDS iplog, Microsoft Network
   Monitor, Network General Sniffer (compressed and uncompressed),
   Sniffer Pro, and NetXray, Network Instruments Observer, NetScreen snoop,
   Novell LANalyzer, RADCOM WAN/LAN Analyzer, Shomiti/Finisar Surveyor,
   Tektronix K12xx, Visual Networks Visual UpTime,
   WildPackets EtherPeek/TokenPeek/AiroPeek, and many others
 - Capture files compressed with gzip can be decompressed on the fly
 - Live data can be read from Ethernet, IEEE 802.11, PPP/HDLC, ATM,
   Bluetooth, USB, Token Ring, Frame Relay, FDDI, and others
 - Decryption support for many protocols, including IPsec, ISAKMP,
   Kerberos, SNMPv3, SSL/TLS, WEP, and WPA/WPA2
 - Coloring rules can be applied for quick, intuitive analysis
 - Output can be exported to XML, PostScript, CSV, or plain text


[FILE:101:distinfo]
60551dc787f41e87aeaa1e9c33304f9008037e3baf9fa11aef9c2d584cc0b54b     46830008 wireshark-4.4.9.tar.xz


[FILE:8082:manifests/plist.primary]
%%ONLY-LINUX%%lib/wireshark/extcap/sdjournal
bin/
 capinfos
 captype
@(,network,2555) bin/dumpcap
 editcap
 idl2wrs
 mergecap
 mmdbresolve
 randpkt
 rawshark
 reordercap
 sharkd
 text2pcap
 tshark
 wireshark
lib/
 libwireshark.so
 libwireshark.so.%%SOMAJOR%%
 libwireshark.so.%%SOVERSION%%
 libwiretap.so
 libwiretap.so.%%MAJ_WIRETAP%%
 libwiretap.so.%%SO_WIRETAP%%
 libwsutil.so
 libwsutil.so.%%MAJ_WSUTIL%%
 libwsutil.so.%%SO_WSUTIL%%
lib/wireshark/extcap/
 androiddump
 ciscodump
 randpktdump
 sshdump
 udpdump
 wifidump
lib/wireshark/plugins/%%PLUGIN_VER%%/codecs/
 g711.so
 l16mono.so
 opus_dec.so
lib/wireshark/plugins/%%PLUGIN_VER%%/epan/
 ethercat.so
 gryphon.so
 ipaddr.so
 irda.so
 mate.so
 opcua.so
 profinet.so
 stats_tree.so
 transum.so
 unistim.so
 wimax.so
 wimaxasncp.so
 wimaxmacphy.so
lib/wireshark/plugins/%%PLUGIN_VER%%/wiretap/usbdump.so
share/applications/org.wireshark.Wireshark.desktop
share/icons/hicolor/128x128/apps/org.wireshark.Wireshark.png
share/icons/hicolor/128x128/mimetypes/org.wireshark.Wireshark-mimetype.png
share/icons/hicolor/16x16/apps/org.wireshark.Wireshark.png
share/icons/hicolor/16x16/mimetypes/org.wireshark.Wireshark-mimetype.png
share/icons/hicolor/24x24/apps/org.wireshark.Wireshark.png
share/icons/hicolor/24x24/mimetypes/org.wireshark.Wireshark-mimetype.png
share/icons/hicolor/256x256/apps/org.wireshark.Wireshark.png
share/icons/hicolor/256x256/mimetypes/org.wireshark.Wireshark-mimetype.png
share/icons/hicolor/32x32/apps/org.wireshark.Wireshark.png
share/icons/hicolor/32x32/mimetypes/org.wireshark.Wireshark-mimetype.png
share/icons/hicolor/48x48/apps/org.wireshark.Wireshark.png
share/icons/hicolor/48x48/mimetypes/org.wireshark.Wireshark-mimetype.png
share/icons/hicolor/64x64/apps/org.wireshark.Wireshark.png
share/icons/hicolor/64x64/mimetypes/org.wireshark.Wireshark-mimetype.png
share/metainfo/org.wireshark.Wireshark.metainfo.xml
share/mime/packages/org.wireshark.Wireshark.xml
share/wireshark/
 cfilters
 colorfilters
 dfilters
 dmacros
 smi_modules
 wka
share/wireshark/diameter/
 AlcatelLucent.xml
 Cisco.xml
 CiscoSystems.xml
 Custom.xml
 Ericsson.xml
 HP.xml
 Huawei.xml
 Inovar.xml
 Juniper.xml
 Metaswitch.xml
 Microsoft.xml
 Nokia.xml
 NokiaSolutionsAndNetworks.xml
 Oracle.xml
 Siemens.xml
 Starent.xml
 TGPP.xml
 TGPP2.xml
 Telefonica.xml
 Travelping.xml
 VerizonWireless.xml
 Vodafone.xml
 chargecontrol.xml
 dictionary.dtd
 dictionary.xml
 eap.xml
 etsie2e4.xml
 mobileipv4.xml
 mobileipv6.xml
 nasreq.xml
 sip.xml
 sunping.xml
share/wireshark/dtds/
 dc.dtd
 itunes.dtd
 mscml.dtd
 pocsettings.dtd
 presence.dtd
 reginfo.dtd
 rlmi.dtd
 rss.dtd
 smil.dtd
 watcherinfo.dtd
 xcap-caps.dtd
 xcap-error.dtd
share/wireshark/profiles/Bluetooth/
 colorfilters
 preferences
share/wireshark/profiles/Classic/colorfilters
share/wireshark/profiles/No Reassembly/preferences
share/wireshark/radius/
 .editorconfig
 README.radius_dictionary
 custom.includes
 dictionary
 dictionary.3com
 dictionary.3gpp
 dictionary.3gpp2
 dictionary.5x9
 dictionary.acc
 dictionary.acme
 dictionary.actelis
 dictionary.adtran
 dictionary.adva
 dictionary.aerohive
 dictionary.airespace
 dictionary.alcatel
 dictionary.alcatel-lucent.aaa
 dictionary.alcatel.esam
 dictionary.alcatel.sr
 dictionary.alphion
 dictionary.alteon
 dictionary.altiga
 dictionary.alvarion
 dictionary.alvarion.wimax.v2_2
 dictionary.apc
 dictionary.aptilo
 dictionary.aptis
 dictionary.arbor
 dictionary.arista
 dictionary.aruba
 dictionary.ascend
 dictionary.ascend.illegal
 dictionary.asn
 dictionary.audiocodes
 dictionary.avaya
 dictionary.azaire
 dictionary.bay
 dictionary.bigswitch
 dictionary.bintec
 dictionary.bluecoat
 dictionary.boingo
 dictionary.bristol
 dictionary.broadsoft
 dictionary.brocade
 dictionary.bskyb
 dictionary.bt
 dictionary.cablelabs
 dictionary.cabletron
 dictionary.calix
 dictionary.cambium
 dictionary.camiant
 dictionary.centec
 dictionary.checkpoint
 dictionary.chillispot
 dictionary.ciena
 dictionary.cisco
 dictionary.cisco.asa
 dictionary.cisco.bbsm
 dictionary.cisco.vpn3000
 dictionary.cisco.vpn5000
 dictionary.citrix
 dictionary.ckey
 dictionary.clavister
 dictionary.cnergee
 dictionary.colubris
 dictionary.columbia_university
 dictionary.compat
 dictionary.compatible
 dictionary.cosine
 dictionary.covaro
 dictionary.dante
 dictionary.dellemc
 dictionary.digium
 dictionary.dlink
 dictionary.dragonwave
 dictionary.efficientip
 dictionary.eleven
 dictionary.eltex
 dictionary.enterasys
 dictionary.epygi
 dictionary.equallogic
 dictionary.ericsson
 dictionary.ericsson.ab
 dictionary.ericsson.packet.core.networks
 dictionary.erx
 dictionary.extreme
 dictionary.f5
 dictionary.fdxtended
 dictionary.force10
 dictionary.fortinet
 dictionary.foundry
 dictionary.freedhcp
 dictionary.freeradius
 dictionary.freeradius.evs5
 dictionary.freeradius.internal
 dictionary.freeswitch
 dictionary.gandalf
 dictionary.garderos
 dictionary.gemtek
 dictionary.h3c
 dictionary.hillstone
 dictionary.hp
 dictionary.huawei
 dictionary.iana
 dictionary.identity_engines
 dictionary.iea
 dictionary.infinera
 dictionary.infoblox
 dictionary.infonet
 dictionary.ipunplugged
 dictionary.issanni
 dictionary.itk
 dictionary.jradius
 dictionary.juniper
 dictionary.karlnet
 dictionary.kineto
 dictionary.lancom
 dictionary.lantronix
 dictionary.livingston
 dictionary.localweb
 dictionary.lucent
 dictionary.manzara
 dictionary.meinberg
 dictionary.mellanox
 dictionary.meraki
 dictionary.merit
 dictionary.meru
 dictionary.microsemi
 dictionary.microsoft
 dictionary.mikrotik
 dictionary.mimosa
 dictionary.motorola
 dictionary.motorola.illegal
 dictionary.motorola.wimax
 dictionary.navini
 dictionary.net
 dictionary.netelastic
 dictionary.netscreen
 dictionary.networkphysics
 dictionary.nexans
 dictionary.nile
 dictionary.nokia
 dictionary.nokia.conflict
 dictionary.nomadix
 dictionary.nortel
 dictionary.ntua
 dictionary.openser
 dictionary.openwifi
 dictionary.packeteer
 dictionary.paloalto
 dictionary.patton
 dictionary.perle
 dictionary.pfsense
 dictionary.pica8
 dictionary.propel
 dictionary.prosoft
 dictionary.proxim
 dictionary.purewave
 dictionary.quiconnect
 dictionary.quintum
 dictionary.rcntec
 dictionary.redcreek
 dictionary.rfc2865
 dictionary.rfc2866
 dictionary.rfc2867
 dictionary.rfc2868
 dictionary.rfc2869
 dictionary.rfc3162
 dictionary.rfc3576
 dictionary.rfc3580
 dictionary.rfc4072
 dictionary.rfc4372
 dictionary.rfc4603
 dictionary.rfc4675
 dictionary.rfc4679
 dictionary.rfc4818
 dictionary.rfc4849
 dictionary.rfc5090
 dictionary.rfc5176
 dictionary.rfc5447
 dictionary.rfc5580
 dictionary.rfc5607
 dictionary.rfc5904
 dictionary.rfc6519
 dictionary.rfc6572
 dictionary.rfc6677
 dictionary.rfc6911
 dictionary.rfc6929
 dictionary.rfc6930
 dictionary.rfc7055
 dictionary.rfc7155
 dictionary.rfc7268
 dictionary.rfc7499
 dictionary.rfc7930
 dictionary.rfc8045
 dictionary.rfc8559
 dictionary.riverbed
 dictionary.riverstone
 dictionary.roaringpenguin
 dictionary.ruckus
 dictionary.ruggedcom
 dictionary.sangoma
 dictionary.sg
 dictionary.shasta
 dictionary.shiva
 dictionary.siemens
 dictionary.slipstream
 dictionary.smartsharesystems
 dictionary.sofaware
 dictionary.softbank
 dictionary.sonicwall
 dictionary.springtide
 dictionary.starent
 dictionary.starent.vsa1
 dictionary.surfnet
 dictionary.symbol
 dictionary.t_systems_nova
 dictionary.telebit
 dictionary.telkom
 dictionary.telrad
 dictionary.terena
 dictionary.tplink
 dictionary.trapeze
 dictionary.travelping
 dictionary.tripplite
 dictionary.tropos
 dictionary.ukerna
 dictionary.unisphere
 dictionary.unix
 dictionary.usr
 dictionary.usr.illegal
 dictionary.utstarcom
 dictionary.valemount
 dictionary.vasexperts
 dictionary.verizon
 dictionary.versanet
 dictionary.walabi
 dictionary.waverider
 dictionary.wichorus
 dictionary.wifialliance
 dictionary.wimax
 dictionary.wimax.alvarion
 dictionary.wimax.wichorus
 dictionary.wispr
 dictionary.xedia
 dictionary.xylan
 dictionary.yubico
 dictionary.zeus
 dictionary.zte
 dictionary.zyxel
share/wireshark/tpncp/tpncp.dat
share/wireshark/wimaxasncp/
 dictionary.dtd
 dictionary.xml


[FILE:495:manifests/plist.docs]
%%ONLY-LINUX%%share/doc/wireshark/sdjournal.html
share/doc/wireshark/
 COPYING
 README.xml-output
 androiddump.html
 capinfos.html
 captype.html
 ciscodump.html
 dumpcap.html
 editcap.html
 etwdump.html
 extcap.html
 falcodump.html
 ipmap.html
 mergecap.html
 mmdbresolve.html
 pdml2html.xsl
 randpkt.html
 randpktdump.html
 rawshark.html
 release-notes.html
 reordercap.html
 sshdump.html
 text2pcap.html
 tshark.html
 udpdump.html
 wifidump.html
 wireshark-filter.html
 wireshark.html
 ws.css


[FILE:349:manifests/plist.man]
%%ONLY-LINUX%%share/man/man1/sdjournal.1
share/man/man1/
 androiddump.1
 capinfos.1
 captype.1
 ciscodump.1
 dumpcap.1
 editcap.1
 etwdump.1
 falcodump.1
 mergecap.1
 mmdbresolve.1
 randpkt.1
 randpktdump.1
 rawshark.1
 reordercap.1
 sshdump.1
 text2pcap.1
 tshark.1
 udpdump.1
 wifidump.1
 wireshark.1
share/man/man4/
 extcap.4
 wireshark-filter.4


[FILE:583:patches/patch-CMakeLists.txt]
--- CMakeLists.txt.orig	2025-07-16 18:25:20 UTC
+++ CMakeLists.txt
@@ -1268,7 +1268,7 @@ reset_find_package(GCRYPT GCRYPT_ERROR_L
 find_package(GCRYPT "1.8.0" REQUIRED)
 # C Asynchronous resolver
 reset_find_package(CARES)
-find_package(CARES "1.13.0" REQUIRED)
+find_package(CARES)
 if (CARES_VERSION VERSION_GREATER_EQUAL "1.28.0")
 	# Suppress deprecation warnings.
 	add_compile_definitions(CARES_NO_DEPRECATED)
@@ -3397,6 +3397,7 @@ if(BUILD_dumpcap AND PCAP_FOUND)
 		writecap
 		wsutil_static
 		pcap::pcap
+		m
 		${CAP_LIBRARIES}
 		${ZLIB_LIBRARIES}
 		${ZLIBNG_LIBRARIES}


[FILE:293:patches/patch-cmake_modules_FindLua.cmake]
--- cmake/modules/FindLua.cmake.orig	2025-07-16 18:25:20 UTC
+++ cmake/modules/FindLua.cmake
@@ -179,7 +179,7 @@ if (LUA_VERSION_STRING)
 endif ()
 
 find_library(LUA_LIBRARY
-  NAMES ${_lua_library_names} lua
+  NAMES ${_lua_library_names} lua-5.2
   NAMES_PER_DIR
   HINTS
     ${LUA_HINTS}


[FILE:199:patches/patch-extcap.c]
--- extcap.c.orig	2025-07-16 18:25:20 UTC
+++ extcap.c
@@ -22,6 +22,7 @@
 #include <process.h>
 #include <time.h>
 #else
+#include <sys/wait.h>
 /* Include for unlink */
 #include <unistd.h>
 #endif


[FILE:355:patches/patch-ui_qt_utils_qt__ui__utils.cpp]
--- ui/qt/utils/qt_ui_utils.cpp.orig	2025-07-16 18:25:20 UTC
+++ ui/qt/utils/qt_ui_utils.cpp
@@ -44,6 +44,10 @@
 #include <QtDBus/QDBusUnixFileDescriptor>
 #endif
 
+#ifndef O_PATH
+#define O_PATH 0
+#endif
+
 /*
  * We might want to create our own "wsstring" class with convenience
  * methods for handling g_malloc()ed strings, GStrings, and a shortcut


[FILE:411:files/messages-primary.ucl]
wireshark: {
  type: "install"
  message: <<EOM
In order for wireshark be able to capture packets when used by unprivileged
user, /dev/bpf should be in network group and have read-write permissions.
For example:

# chgrp network /dev/bpf*
# chmod g+r /dev/bpf*
# chmod g+w /dev/bpf*

In order for this to persist across reboots, add the following to
/etc/devfs.conf:

own  bpf* root:network
perm bpf* 0660
EOM
}
