# Buildsheet autogenerated by ravenadm tool -- Do not edit.

NAMEBASE=		wireshark
VERSION=		4.2.3
KEYWORDS=		net
VARIANTS=		standard
SDESC[standard]=	Network traffic analyzer
HOMEPAGE=		https://www.wireshark.org/
CONTACT=		nobody

DOWNLOAD_GROUPS=	main
SITES[main]=		https://2.na.dl.wireshark.org/src/all-versions/
			https://www.wireshark.org/download/src/
DISTFILE[1]=		wireshark-4.2.3.tar.xz:main
DF_INDEX=		1
SPKGS[standard]=	complete
			primary
			docs
			man

OPTIONS_AVAILABLE=	none
OPTIONS_STANDARD=	none

BUILD_DEPENDS=		bison:primary:standard
			c-ares:dev:standard
			doxygen:single:standard
			gnutls:dev:standard
			libgcrypt:dev:standard
			libnghttp2:dev:standard
			qt6-qtbase:dev:standard
			qt6-qttools:complete:standard
			qt6-qt5compat:dev:standard
			ruby-asciidoctor:single:ruby_default
			snappy:dev:standard
			libpcap:dev:standard
			brotli:dev:standard
			krb5:dev:standard
			opus:dev:standard
			minizip:dev:standard
			libssh:dev:standard
BUILDRUN_DEPENDS=	libgcrypt:primary:standard
			libnghttp2:primary:standard
			c-ares:primary:standard
			gnutls:primary:standard
			libpcap:primary:standard
			libssh:primary:standard
			libsmi:library:standard
			krb5:primary:standard
			snappy:primary:standard
			libmaxminddb:single:standard
			brotli:primary:standard
			speexdsp:primary:standard
			opus:primary:standard
			qt6-qtbase:primary:standard
			qt6-qt5compat:primary:standard
			minizip:primary:standard

USES=			cpe gmake cmake ssl:openssl11 zlib lz4 qt6 zstd
			lua:5.2 perl:build python:v11,build pkgconfig
			mime-info:primary desktop-utils:primary
GNOME_COMPONENTS=	glib libxml2

LICENSE=		GPLv2+:primary BSD3CLAUSE:primary
LICENSE_TERMS=		primary:{{WRKDIR}}/TERMS
LICENSE_FILE=		GPLv2+:{{WRKDIR}}/GPL2
			BSD3CLAUSE:{{WRKDIR}}/BSD_LICENSE
LICENSE_SCHEME=		dual

FPC_EQUIVALENT=		net/wireshark

MAKE_ARGS=		DESTDIR={{STAGEDIR}}

INSTALL_REQ_TOOLCHAIN=	yes
SOVERSION=		17.0.3
PLIST_SUB=		SO_WIRETAP=14.1.3
			SO_WSUTIL=15.0.0
			MAJ_WIRETAP=14
			MAJ_WSUTIL=15
			PLUGIN_VER=4.2

CMAKE_ARGS=		-DBUILD_wireshark:BOOL=ON
			-DBUILD_tshark:BOOL=ON
			-DBUILD_tfshark:BOOL=OFF
			-DBUILD_rawshark:BOOL=ON
			-DBUILD_androiddump:BOOL=ON
			-DBUILD_sshdump:BOOL=ON
			-DBUILD_ciscodump:BOOL=ON
			-DENABLE_ZLIB:BOOL=ON
			-DENABLE_LZ4:BOOL=ON
			-DENABLE_SNAPPY:BOOL=ON
			-DENABLE_NGHTTP2:BOOL=ON
			-DENABLE_LUA:BOOL=ON
			-DENABLE_SMI:BOOL=ON
			-DENABLE_GNUTLS:BOOL=ON
			-DENABLE_KERBEROS:BOOL=ON
			-DENABLE_SBC:BOOL=OFF
			-DENABLE_SPANDSP:BOOL=OFF
			-DENABLE_BCG729:BOOL=OFF
			-DCMAKE_PREFIX_PATH:PATH="{{PREFIX}}/lib/qt6/cmake/"
			-DPython3_EXECUTABLE:PATH="{{PYTHON_CMD}}"

post-install:
	${MKDIR} ${STAGEDIR}${STD_DOCDIR}
	${MV} ${STAGEDIR}${PREFIX}/share/wireshark/*.html \
		${STAGEDIR}${STD_DOCDIR}/
	${STRIP_CMD} ${STAGEDIR}${PREFIX}/bin/*
	${STRIP_CMD} ${STAGEDIR}${PREFIX}/lib/*.so
	${STRIP_CMD} ${STAGEDIR}${PREFIX}/lib/wireshark/extcap/*
	${STRIP_CMD} ${STAGEDIR}${PREFIX}/lib/wireshark/plugins/4.2/*/*.so
	${RM} ${STAGEDIR}${PREFIX}/share/wireshark/COPYING

pre-configure:
	${REINPLACE_CMD} -e 's|libssh/libssh.h|libssh/libssh_version.h|' \
		${WRKSRC}/cmake/modules/FindLIBSSH.cmake

post-extract:
	${AWK} '/^Part I:$$/,/^The full text of the GNU GPL/' \
		${WRKSRC}/COPYING > ${WRKDIR}/TERMS
	${AWK} '/^Part II:$$/,/^Public License instead of this License./' \
		${WRKSRC}/COPYING > ${WRKDIR}/GPL2
	${AWK} '/^Part III:$$/,/^---------------/' \
		${WRKSRC}/COPYING > ${WRKDIR}/BSD_LICENSE

[FILE:1811:descriptions/desc.primary]
Wireshark is the world's foremost and widely-used network protocol
analyzer. It lets you see what???s happening on your network at a
microscopic level and is the de facto (and often de jure) standard across
many commercial and non-profit enterprises, government agencies, and
educational institutions. Wireshark development thrives thanks to the
volunteer contributions of networking experts around the globe and is the
continuation of a project started by Gerald Combs in 1998.

Wireshark has a rich feature set which includes the following:
 - Deep inspection of hundreds of protocols
 - Live capture and offline analysis
 - Standard three-pane packet browser
 - Multi-platform: Runs on Windows, Linux, macOS, Solaris, BSD, and others
 - Captured network data can be browsed via a GUI, or via the TTY-mode
   TShark utility
 - The most powerful display filters in the industry
 - Rich VoIP analysis
 - Read/write many different capture file formats: tcpdump (libpcap),
   Pcap NG, Catapult DCT2000, Cisco Secure IDS iplog, Microsoft Network
   Monitor, Network General Sniffer (compressed and uncompressed),
   Sniffer Pro, and NetXray, Network Instruments Observer, NetScreen snoop,
   Novell LANalyzer, RADCOM WAN/LAN Analyzer, Shomiti/Finisar Surveyor,
   Tektronix K12xx, Visual Networks Visual UpTime,
   WildPackets EtherPeek/TokenPeek/AiroPeek, and many others
 - Capture files compressed with gzip can be decompressed on the fly
 - Live data can be read from Ethernet, IEEE 802.11, PPP/HDLC, ATM,
   Bluetooth, USB, Token Ring, Frame Relay, FDDI, and others
 - Decryption support for many protocols, including IPsec, ISAKMP,
   Kerberos, SNMPv3, SSL/TLS, WEP, and WPA/WPA2
 - Coloring rules can be applied for quick, intuitive analysis
 - Output can be exported to XML, PostScript, CSV, or plain text


[FILE:101:distinfo]
958bd5996f543d91779b1a4e7e952dcd7b0245fe82194202c3333a8f78795811     44970016 wireshark-4.2.3.tar.xz


[FILE:7189:manifests/plist.primary]
bin/
 capinfos
 captype
@(,network,2555) bin/dumpcap
 editcap
 idl2wrs
 mergecap
 mmdbresolve
 randpkt
 rawshark
 reordercap
 sharkd
 text2pcap
 tshark
 wireshark
lib/
 libwireshark.so.%%SOMAJOR%%
 libwireshark.so.%%SOVERSION%%
 libwiretap.so.%%MAJ_WIRETAP%%
 libwiretap.so.%%SO_WIRETAP%%
 libwsutil.so.%%MAJ_WSUTIL%%
 libwsutil.so.%%SO_WSUTIL%%
lib/wireshark/extcap/
 androiddump
 ciscodump
 randpktdump
 sshdump
 udpdump
 wifidump
lib/wireshark/plugins/%%PLUGIN_VER%%/codecs/
 g711.so
 l16mono.so
 opus_dec.so
lib/wireshark/plugins/%%PLUGIN_VER%%/epan/
 ethercat.so
 gryphon.so
 irda.so
 mate.so
 opcua.so
 profinet.so
 stats_tree.so
 transum.so
 unistim.so
 wimax.so
 wimaxasncp.so
 wimaxmacphy.so
lib/wireshark/plugins/%%PLUGIN_VER%%/wiretap/usbdump.so
lib/
 libwireshark.so
 libwiretap.so
 libwsutil.so
share/applications/org.wireshark.Wireshark.desktop
share/icons/hicolor/128x128/apps/org.wireshark.Wireshark.png
share/icons/hicolor/128x128/mimetypes/org.wireshark.Wireshark-mimetype.png
share/icons/hicolor/16x16/apps/org.wireshark.Wireshark.png
share/icons/hicolor/16x16/mimetypes/org.wireshark.Wireshark-mimetype.png
share/icons/hicolor/24x24/apps/org.wireshark.Wireshark.png
share/icons/hicolor/24x24/mimetypes/org.wireshark.Wireshark-mimetype.png
share/icons/hicolor/256x256/apps/org.wireshark.Wireshark.png
share/icons/hicolor/256x256/mimetypes/org.wireshark.Wireshark-mimetype.png
share/icons/hicolor/32x32/apps/org.wireshark.Wireshark.png
share/icons/hicolor/32x32/mimetypes/org.wireshark.Wireshark-mimetype.png
share/icons/hicolor/48x48/apps/org.wireshark.Wireshark.png
share/icons/hicolor/48x48/mimetypes/org.wireshark.Wireshark-mimetype.png
share/icons/hicolor/64x64/apps/org.wireshark.Wireshark.png
share/icons/hicolor/64x64/mimetypes/org.wireshark.Wireshark-mimetype.png
share/metainfo/org.wireshark.Wireshark.metainfo.xml
share/mime/packages/org.wireshark.Wireshark.xml
share/wireshark/
 cfilters
 colorfilters
 dfilter_macros
 dfilters
 smi_modules
 wka
share/wireshark/diameter/
 AlcatelLucent.xml
 Cisco.xml
 CiscoSystems.xml
 Custom.xml
 Ericsson.xml
 HP.xml
 Huawei.xml
 Inovar.xml
 Juniper.xml
 Metaswitch.xml
 Microsoft.xml
 Nokia.xml
 NokiaSolutionsAndNetworks.xml
 Oracle.xml
 Siemens.xml
 Starent.xml
 TGPP.xml
 TGPP2.xml
 Telefonica.xml
 VerizonWireless.xml
 Vodafone.xml
 chargecontrol.xml
 dictionary.dtd
 dictionary.xml
 eap.xml
 etsie2e4.xml
 mobileipv4.xml
 mobileipv6.xml
 nasreq.xml
 sip.xml
 sunping.xml
share/wireshark/dtds/
 dc.dtd
 itunes.dtd
 mscml.dtd
 pocsettings.dtd
 presence.dtd
 reginfo.dtd
 rlmi.dtd
 rss.dtd
 smil.dtd
 watcherinfo.dtd
 xcap-caps.dtd
 xcap-error.dtd
share/wireshark/profiles/Bluetooth/
 colorfilters
 preferences
share/wireshark/profiles/Classic/colorfilters
share/wireshark/profiles/No Reassembly/preferences
share/wireshark/radius/
 README.radius_dictionary
 custom.includes
 dictionary
 dictionary.3com
 dictionary.3gpp
 dictionary.3gpp2
 dictionary.5x9
 dictionary.acc
 dictionary.acme
 dictionary.actelis
 dictionary.aerohive
 dictionary.airespace
 dictionary.alcatel
 dictionary.alcatel-lucent.aaa
 dictionary.alcatel.esam
 dictionary.alcatel.sr
 dictionary.alteon
 dictionary.altiga
 dictionary.alvarion
 dictionary.alvarion.wimax.v2_2
 dictionary.apc
 dictionary.aptilo
 dictionary.aptis
 dictionary.arbor
 dictionary.aruba
 dictionary.ascend
 dictionary.asn
 dictionary.audiocodes
 dictionary.avaya
 dictionary.azaire
 dictionary.bay
 dictionary.bintec
 dictionary.bluecoat
 dictionary.bristol
 dictionary.broadsoft
 dictionary.brocade
 dictionary.bskyb
 dictionary.bt
 dictionary.cablelabs
 dictionary.cabletron
 dictionary.camiant
 dictionary.chillispot
 dictionary.cisco
 dictionary.cisco.asa
 dictionary.cisco.bbsm
 dictionary.cisco.vpn3000
 dictionary.cisco.vpn5000
 dictionary.citrix
 dictionary.clavister
 dictionary.cnergee
 dictionary.colubris
 dictionary.columbia_university
 dictionary.compat
 dictionary.compatible
 dictionary.cosine
 dictionary.dante
 dictionary.dellemc
 dictionary.dhcp
 dictionary.digium
 dictionary.dlink
 dictionary.dragonwave
 dictionary.efficientip
 dictionary.eltex
 dictionary.enterasys
 dictionary.epygi
 dictionary.equallogic
 dictionary.ericsson
 dictionary.ericsson.ab
 dictionary.ericsson.packet.core.networks
 dictionary.extreme
 dictionary.f5
 dictionary.fdxtended
 dictionary.fortinet
 dictionary.foundry
 dictionary.freedhcp
 dictionary.freeradius
 dictionary.freeradius.internal
 dictionary.freeswitch
 dictionary.gandalf
 dictionary.garderos
 dictionary.gemtek
 dictionary.h3c
 dictionary.hp
 dictionary.huawei
 dictionary.iana
 dictionary.identity_engines
 dictionary.iea
 dictionary.infoblox
 dictionary.infonet
 dictionary.ipunplugged
 dictionary.issanni
 dictionary.itk
 dictionary.jradius
 dictionary.juniper
 dictionary.karlnet
 dictionary.kineto
 dictionary.lancom
 dictionary.livingston
 dictionary.localweb
 dictionary.lucent
 dictionary.manzara
 dictionary.meinberg
 dictionary.meraki
 dictionary.merit
 dictionary.meru
 dictionary.microsemi
 dictionary.microsoft
 dictionary.mikrotik
 dictionary.motorola
 dictionary.motorola.wimax
 dictionary.navini
 dictionary.netscreen
 dictionary.networkphysics
 dictionary.nexans
 dictionary.nokia
 dictionary.nokia.conflict
 dictionary.nomadix
 dictionary.nortel
 dictionary.ntua
 dictionary.openser
 dictionary.packeteer
 dictionary.paloalto
 dictionary.patton
 dictionary.perle
 dictionary.propel
 dictionary.prosoft
 dictionary.proxim
 dictionary.purewave
 dictionary.quiconnect
 dictionary.quintum
 dictionary.redcreek
 dictionary.rfc2865
 dictionary.rfc2866
 dictionary.rfc2867
 dictionary.rfc2868
 dictionary.rfc2869
 dictionary.rfc3162
 dictionary.rfc3576
 dictionary.rfc3580
 dictionary.rfc4072
 dictionary.rfc4372
 dictionary.rfc4603
 dictionary.rfc4675
 dictionary.rfc4679
 dictionary.rfc4818
 dictionary.rfc4849
 dictionary.rfc5090
 dictionary.rfc5176
 dictionary.rfc5447
 dictionary.rfc5580
 dictionary.rfc5607
 dictionary.rfc5904
 dictionary.rfc6519
 dictionary.rfc6572
 dictionary.rfc6677
 dictionary.rfc6911
 dictionary.rfc6929
 dictionary.rfc6930
 dictionary.rfc7055
 dictionary.rfc7155
 dictionary.rfc7268
 dictionary.rfc7499
 dictionary.rfc7930
 dictionary.riverbed
 dictionary.riverstone
 dictionary.roaringpenguin
 dictionary.ruckus
 dictionary.ruggedcom
 dictionary.sangoma
 dictionary.sg
 dictionary.shasta
 dictionary.shiva
 dictionary.siemens
 dictionary.slipstream
 dictionary.sofaware
 dictionary.sonicwall
 dictionary.springtide
 dictionary.starent
 dictionary.starent.vsa1
 dictionary.surfnet
 dictionary.symbol
 dictionary.t_systems_nova
 dictionary.telebit
 dictionary.telkom
 dictionary.terena
 dictionary.trapeze
 dictionary.travelping
 dictionary.tropos
 dictionary.ukerna
 dictionary.unisphere
 dictionary.unix
 dictionary.usr
 dictionary.utstarcom
 dictionary.valemount
 dictionary.verizon
 dictionary.versanet
 dictionary.vqp
 dictionary.walabi
 dictionary.waverider
 dictionary.wichorus
 dictionary.wimax
 dictionary.wimax.alvarion
 dictionary.wimax.wichorus
 dictionary.wispr
 dictionary.xedia
 dictionary.xylan
 dictionary.yubico
 dictionary.zeus
 dictionary.zte
 dictionary.zyxel
share/wireshark/tpncp/tpncp.dat
share/wireshark/wimaxasncp/
 dictionary.dtd
 dictionary.xml


[FILE:446:manifests/plist.docs]
share/doc/wireshark/
 COPYING
 README.xml-output
 androiddump.html
 capinfos.html
 captype.html
 ciscodump.html
 dumpcap.html
 editcap.html
 etwdump.html
 extcap.html
 falcodump.html
 ipmap.html
 mergecap.html
 mmdbresolve.html
 pdml2html.xsl
 randpkt.html
 randpktdump.html
 rawshark.html
 release-notes.html
 reordercap.html
 sshdump.html
 text2pcap.html
 tshark.html
 udpdump.html
 wifidump.html
 wireshark-filter.html
 wireshark.html
 ws.css


[FILE:374:manifests/plist.man]
share/man/man1/
 androiddump.1.gz
 capinfos.1.gz
 captype.1.gz
 ciscodump.1.gz
 dumpcap.1.gz
 editcap.1.gz
 etwdump.1.gz
 falcodump.1.gz
 mergecap.1.gz
 mmdbresolve.1.gz
 randpkt.1.gz
 randpktdump.1.gz
 rawshark.1.gz
 reordercap.1.gz
 sshdump.1.gz
 text2pcap.1.gz
 tshark.1.gz
 udpdump.1.gz
 wifidump.1.gz
 wireshark.1.gz
share/man/man4/
 extcap.4.gz
 wireshark-filter.4.gz


[FILE:293:patches/patch-cmake_modules_FindLua.cmake]
--- cmake/modules/FindLua.cmake.orig	2024-01-05 00:17:43 UTC
+++ cmake/modules/FindLua.cmake
@@ -179,7 +179,7 @@ if (LUA_VERSION_STRING)
 endif ()
 
 find_library(LUA_LIBRARY
-  NAMES ${_lua_library_names} lua
+  NAMES ${_lua_library_names} lua-5.2
   NAMES_PER_DIR
   HINTS
     ${LUA_HINTS}


[FILE:199:patches/patch-extcap.c]
--- extcap.c.orig	2024-01-05 00:17:43 UTC
+++ extcap.c
@@ -22,6 +22,7 @@
 #include <process.h>
 #include <time.h>
 #else
+#include <sys/wait.h>
 /* Include for unlink */
 #include <unistd.h>
 #endif


[FILE:520:files/pkg-message-single]
===============================================================================

In order for wireshark be able to capture packets when used by unprivileged
user, /dev/bpf should be in network group and have read-write permissions.
For example:

# chgrp network /dev/bpf*
# chmod g+r /dev/bpf*
# chmod g+w /dev/bpf*

In order for this to persist across reboots, add the following to
/etc/devfs.conf:

own  bpf* root:network
perm bpf* 0660

===============================================================================

