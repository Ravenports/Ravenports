# Buildsheet autogenerated by ravenadm tool -- Do not edit.

NAMEBASE=		openal
VERSION=		1.24.3
KEYWORDS=		audio
VARIANTS=		std
SDESC[std]=		Cross-platform 3D audio API
HOMEPAGE=		https://www.openal-soft.org
CONTACT=		nobody

DOWNLOAD_GROUPS=	main jtsiomb
SITES[main]=		GITHUB/kcat:openal-soft:1.24.3
SITES[jtsiomb]=		https://github.com/jtsiomb/c11threads/releases/download/v2.0/
DISTFILE[1]=		generated:main
DISTFILE[2]=		c11threads-2.0.tar.gz:jtsiomb
DF_INDEX=		1
SPKGS[std]=		set
			primary
			dev

OPTIONS_AVAILABLE=	C11THREADS
OPTIONS_STANDARD=	C11THREADS
OPT_ON[dragonfly]=	C11THREADS
OPT_ON[midnightbsd]=	C11THREADS

BUILD_DEPENDS=		sndio:dev:std
BUILDRUN_DEPENDS=	sndio:primary:std

USES=			c++:primary cmake zlib gmake pkgconfig

LICENSE=		LGPL20+:primary
LICENSE_TERMS=		primary:{{WRKDIR}}/TERMS
LICENSE_FILE=		LGPL20+:{{WRKSRC}}/COPYING
LICENSE_AWK=		TERMS:"^\#include"
LICENSE_SOURCE=		TERMS:{{WRKSRC}}/alc/alc.cpp
LICENSE_SCHEME=		solo

CMAKE_BUILD_TYPE=	Release
FPC_EQUIVALENT=		audio/openal-soft

INSTALL_REQ_TOOLCHAIN=	yes
SOVERSION=		1.24.3

CMAKE_ARGS=		-DALSOFT_DLOPEN=Off
			-DALSOFT_UTILS=On
			-DALSOFT_EXAMPLES=Off
			-DALSOFT_BACKEND_WAVE=Off
			-DALSOFT_BACKEND_SNDIO=On
			-DALSOFT_REQUIRE_SNDIO=On
			-DALSOFT_CPUEXT_SSE=Off
			-DALSOFT_CPUEXT_SSE2=Off
			-DALSOFT_CPUEXT_SSE3=Off
			-DALSOFT_CPUEXT_SSE4_1=Off
			-DCMAKE_DISABLE_FIND_PACKAGE_ALSA:Bool=Yes
			-DCMAKE_DISABLE_FIND_PACKAGE_AudioIO:Bool=Yes
			-DCMAKE_DISABLE_FIND_PACKAGE_JACK:Bool=Yes
			-DCMAKE_DISABLE_FIND_PACKAGE_OSS:Bool=Yes
			-DCMAKE_DISABLE_FIND_PACKAGE_PortAudio:Bool=Yes
			-DCMAKE_DISABLE_FIND_PACKAGE_PulseAudio:Bool=Yes
			-DALSOFT_NO_CONFIG_UTIL=On
VAR_OPSYS[freebsd]=	LDFLAGS=-lstdthreads
VAR_OPSYS[sunos]=	CFLAGS=-D__EXTENSIONS__
			LDFLAGS=-lrt

[C11THREADS].DESCRIPTION=		Install <threads.h> on platforms missing it
[C11THREADS].DF_INDEX_ON=		2

post-patch:
	${REINPLACE_CMD} 's|/etc/openal|${PREFIX}/etc/openal|' \
		${WRKSRC}/alc/alconfig.cpp

post-install-C11THREADS-ON:
	${RM} ${LOCALBASE}/include/threads.h

post-install:
	${STRIP_CMD} ${STAGEDIR}${PREFIX}/bin/*
	${STRIP_CMD} ${STAGEDIR}${PREFIX}/lib/libopenal.so

pre-configure-C11THREADS-ON:
	${REINPLACE_CMD} -e '/#define C11THREADS_NO_TIMESPEC_GET/d' \
		${WRKDIR}/c11threads-2.0/c11threads.h
	${INSTALL_DATA} ${WRKDIR}/c11threads-2.0/c11threads.h ${LOCALBASE}/include/threads.h

[FILE:389:descriptions/desc.primary]
OpenAL provides capabilities for playing audio in a virtual 3D
environment.  Distance attenuation, doppler shift, and directional
sound emitters are among the features handled by the API.  More
advanced effects, including air absorption, low-pass filters, and
reverb, are available through the EFX extension.  It also facilitates
streaming audio, multi-channel buffers, and audio capture.


[FILE:209:distinfo]
7e1fecdeb45e7f78722b776c5cf30bd33934b961d7fd2a11e0494e064cc631ce      1251714 kcat-openal-soft-1.24.3.tar.gz
d98035cab3cde189610b1a30d56d0cf0231c8ba266e091d9483c1a1841da411d        12996 c11threads-2.0.tar.gz


[FILE:293:manifests/plist.primary]
bin/openal-info
lib/
 libopenal.so.%%SOMAJOR%%
 libopenal.so.%%SOVERSION%%
share/openal/alsoftrc.sample
share/openal/hrtf/Default HRTF.mhr
share/openal/presets/
 3D7.1.ambdec
 hex-quad.ambdec
 hexagon.ambdec
 itu5.1-nocenter.ambdec
 itu5.1.ambdec
 presets.txt
 rectangle.ambdec
 square.ambdec


[FILE:201:manifests/plist.dev]
include/AL/
 al.h
 alc.h
 alext.h
 efx-creative.h
 efx-presets.h
 efx.h
lib/libopenal.so
lib/cmake/OpenAL/
 OpenALConfig.cmake
 OpenALTargets-release.cmake
 OpenALTargets.cmake
lib/pkgconfig/openal.pc

