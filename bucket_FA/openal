# Buildsheet autogenerated by ravenadm tool -- Do not edit.

NAMEBASE=		openal
VERSION=		1.19.1
KEYWORDS=		audio
VARIANTS=		standard
SDESC[standard]=	Cross-platform 3D audio API
HOMEPAGE=		http://kcat.strangesoft.net/openal.html
CONTACT=		Leonid_Bobrov[mazocomp@disroot.org]

DOWNLOAD_GROUPS=	main
SITES[main]=		GITHUB/kcat:openal-soft:openal-soft-1.19.1
DISTFILE[1]=		generated:main
DF_INDEX=		1
SPKGS[standard]=	single

OPTIONS_AVAILABLE=	none
OPTIONS_STANDARD=	none

BUILDRUN_DEPENDS=	sndio:single:standard

USES=			cclibs:single cmake:outsource

LICENSE=		LGPL20+:single
LICENSE_TERMS=		single:{{WRKDIR}}/TERMS
LICENSE_FILE=		LGPL20+:{{WRKSRC}}/COPYING
LICENSE_AWK=		TERMS:"^\#include"
LICENSE_SOURCE=		TERMS:{{WRKSRC}}/Alc/ALc.c
LICENSE_SCHEME=		solo

CMAKE_BUILD_TYPE=	Release
FPC_EQUIVALENT=		audio/openal-soft

SOVERSION=		1.19.1

CMAKE_ARGS=		-DALSOFT_DLOPEN=Off
			-DALSOFT_UTILS=On
			-DALSOFT_EXAMPLES=Off
			-DALSOFT_REQUIRE_SNDIO=On
			-DALSOFT_BACKEND_WAVE=Off
			-DALSOFT_CPUEXT_SSE=Off
			-DALSOFT_CPUEXT_SSE2=Off
			-DALSOFT_CPUEXT_SSE3=Off
			-DALSOFT_CPUEXT_SSE4_1=Off
			-DCMAKE_DISABLE_FIND_PACKAGE_ALSA:Bool=Yes
			-DCMAKE_DISABLE_FIND_PACKAGE_AudioIO:Bool=Yes
			-DCMAKE_DISABLE_FIND_PACKAGE_JACK:Bool=Yes
			-DCMAKE_DISABLE_FIND_PACKAGE_OSS:Bool=Yes
			-DCMAKE_DISABLE_FIND_PACKAGE_PortAudio:Bool=Yes
			-DCMAKE_DISABLE_FIND_PACKAGE_PulseAudio:Bool=Yes
			-DCMAKE_DISABLE_FIND_PACKAGE_QSA:Bool=Yes
			-DALSOFT_NO_CONFIG_UTIL=On

post-patch:
	${REINPLACE_CMD} 's|/etc/openal|${PREFIX}/etc/openal|' \
		${WRKSRC}/Alc/alconfig.c

[FILE:389:descriptions/desc.single]
OpenAL provides capabilities for playing audio in a virtual 3D
environment.  Distance attenuation, doppler shift, and directional
sound emitters are among the features handled by the API.  More
advanced effects, including air absorption, low-pass filters, and
reverb, are available through the EFX extension.  It also facilitates
streaming audio, multi-channel buffers, and audio capture.


[FILE:121:distinfo]
9f3536ab2bb7781dbafabc6a61e0b34b17edd16bd6c2eaf2ae71bc63078f98c7       683061 kcat-openal-soft-openal-soft-1.19.1.tar.gz


[FILE:497:manifests/plist.single]
bin/
 altonegen
 makehrtf
 openal-info
include/AL/
 al.h
 alc.h
 alext.h
 efx-creative.h
 efx-presets.h
 efx.h
lib/
 libopenal.so
 libopenal.so.%%SOMAJOR%%
 libopenal.so.%%SOVERSION%%
lib/cmake/OpenAL/
 OpenALConfig-release.cmake
 OpenALConfig.cmake
lib/pkgconfig/openal.pc
share/openal/alsoftrc.sample
share/openal/hrtf/
 default-44100.mhr
 default-48000.mhr
share/openal/presets/
 3D7.1.ambdec
 hexagon.ambdec
 itu5.1-nocenter.ambdec
 itu5.1.ambdec
 presets.txt
 rectangle.ambdec
 square.ambdec


[FILE:382:patches/patch-OpenAL32_alBuffer.c]
--- OpenAL32/alBuffer.c.orig	2018-10-11 22:05:31 UTC
+++ OpenAL32/alBuffer.c
@@ -1118,7 +1118,7 @@ static ALboolean DecomposeUserFormat(ALe
         { AL_FORMAT_BFORMAT3D_FLOAT32, UserFmtBFormat3D, UserFmtFloat },
         { AL_FORMAT_BFORMAT3D_MULAW,   UserFmtBFormat3D, UserFmtMulaw },
     };
-    ALuint i;
+    volatile ALuint i;
 
     for(i = 0;i < COUNTOF(list);i++)
     {

