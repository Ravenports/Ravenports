# Buildsheet autogenerated by ravenadm tool -- Do not edit.

NAMEBASE=		ansible
VERSION=		2.9.6
KEYWORDS=		sysutils python
VARIANTS=		standard
SDESC[standard]=	Radically simple IT automation
HOMEPAGE=		https://www.ansible.com/
CONTACT=		nobody

DOWNLOAD_GROUPS=	main
SITES[main]=		http://releases.ansible.com/ansible/
DISTFILE[1]=		ansible-2.9.6.tar.gz:main
DF_INDEX=		1
SPKGS[standard]=	complete
			primary
			examples

OPTIONS_AVAILABLE=	none
OPTIONS_STANDARD=	none

BUILDRUN_DEPENDS=	python-Jinja2:single:python_default
			python-cryptography:single:python_default
			python-jmespath:single:python_default
			python-netaddr:single:python_default
			python-paramiko:single:python_default
			python-PyYAML:single:python_default

USES=			cpe python

LICENSE=		GPLv3+:primary
LICENSE_TERMS=		primary:{{WRKDIR}}/TERMS
LICENSE_FILE=		GPLv3+:{{WRKSRC}}/COPYING
LICENSE_AWK=		TERMS:"PYTHON_ARGCOMPLETE_OK"
LICENSE_SOURCE=		TERMS:{{WRKSRC}}/bin/ansible
LICENSE_SCHEME=		solo

CPE_VENDOR=		ansibleworks
FPC_EQUIVALENT=		sysutils/ansible

post-patch:
	${GREP} -rl "\/usr\/share\/ansible" ${WRKSRC} | ${XARGS} \
		${REINPLACE_CMD} -i'' \
		-e "s|/usr/share/ansible|${PREFIX}/share/ansible|g"
	# fix 129 shebangs
	${GREP} -rl "#!/usr/bin/env python" ${WRKSRC} | ${XARGS} \
		${REINPLACE_CMD} -i'' \
		-e "s|#!/usr/bin/env python|#!${PYTHON_CMD}|"
	# fix thousands more
	${GREP} -rl "/usr/bin/python" ${WRKSRC} | ${XARGS} \
		${REINPLACE_CMD} -i'' \
		-e "s|#!/usr/bin/python|#!${PYTHON_CMD}|" \
		-e "s|'/usr/bin/python'|'${PYTHON_CMD}'|"

post-install:
	${MKDIR} ${STAGEDIR}${MAN1PREFIX}/man/man1
	${MKDIR} ${STAGEDIR}${STD_EXAMPLESDIR}
	${INSTALL_MAN} ${WRKSRC}/docs/man/man1/*.1 \
		${STAGEDIR}${MAN1PREFIX}/man/man1
	${INSTALL_DATA} \
		${WRKSRC}/examples/ansible.cfg \
		${WRKSRC}/examples/hosts \
		${STAGEDIR}${STD_EXAMPLESDIR}

[FILE:123:descriptions/desc.primary]
Ansible is a radically simple configuration-management, deployment,
task-execution, and multinode orchestration framework.


[FILE:99:distinfo]
59cf3a0781f89992d1dae5205b07e802dff1db205eebd238de9e503b62b8cbc9     14201258 ansible-2.9.6.tar.gz


[FILE:374:manifests/plist.primary]
bin/
 ansible
 ansible-config
 ansible-connection
 ansible-console
 ansible-doc
 ansible-galaxy
 ansible-inventory
 ansible-playbook
 ansible-pull
 ansible-test
 ansible-vault
share/man/man1/
 ansible-config.1.gz
 ansible-console.1.gz
 ansible-doc.1.gz
 ansible-galaxy.1.gz
 ansible-inventory.1.gz
 ansible-playbook.1.gz
 ansible-pull.1.gz
 ansible-vault.1.gz
 ansible.1.gz


[FILE:44:manifests/plist.examples]
share/examples/ansible/
 ansible.cfg
 hosts


[FILE:269:files/special.mk]
# POST_PLIST_TARGET=	autolist

# override USES=python autolist
setuptools-autolist:
	@${ECHO_MSG} "autogenerating manifest for lib ..."
	@(cd ${STAGEDIR}${PREFIX} && ${FIND} lib \
	\( -type f -o -type l \) 2>/dev/null | ${SORT}) \
	>> ${WRKDIR}/.manifest.primary.mktmp

