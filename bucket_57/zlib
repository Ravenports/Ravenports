# Buildsheet autogenerated by ravenadm tool -- Do not edit.

NAMEBASE=		zlib
VERSION=		1.3.1
KEYWORDS=		archivers
VARIANTS=		std
SDESC[std]=		Ubiquitous compression library
HOMEPAGE=		http://www.zlib.net
CONTACT=		nobody

DOWNLOAD_GROUPS=	main
SITES[main]=		http://www.zlib.net/
DISTFILE[1]=		zlib-1.3.1.tar.gz:main
DF_INDEX=		1
SPKGS[std]=		set
			primary
			dev
			man

OPTIONS_AVAILABLE=	none
OPTIONS_STANDARD=	none

USES=			cpe

LICENSE=		ZLIB:primary
LICENSE_FILE=		ZLIB:{{WRKDIR}}/LICENSE
LICENSE_AWK=		ZLIB:"ifndef ZLIB_H"
LICENSE_SOURCE=		ZLIB:{{WRKSRC}}/zlib.h
LICENSE_SCHEME=		solo

CPE_VENDOR=		gnu

MUST_CONFIGURE=		yes
CONFIGURE_ENV=		prefix="{{PREFIX}}"
			cflags="{{CFLAGS}}"

SINGLE_JOB=		yes

SOVERSION=		1.3.1

post-install:
	${STRIP_CMD} ${STAGEDIR}${PREFIX}/lib/libz.so
	# install our PIC library
	${INSTALL_DATA} ${WRKSRC}/libz_pic.a ${STAGEDIR}${PREFIX}/lib/

post-build:
	# assemble PIC library
	(cd ${WRKSRC} \
	 && ${AR} -cq libz_pic.a *.lo \
	 && ranlib libz_pic.a)

[FILE:566:descriptions/desc.primary]
zlib is designed to be a free, general-purpose, legally unencumbered -- 
that is, not covered by any patents -- lossless data-compression library
for use on virtually any computer hardware and operating system. The
zlib data format is itself portable across platforms. Unlike the LZW
compression method used in Unix compress(1) and in the GIF image format,
the compression method currently used in zlib essentially never expands
the data.  zlib's memory footprint is also independent of the input data 
and can be reduced, if necessary, at some cost in compression.


[FILE:96:distinfo]
9a93b2b7dfdac77ceba5a558a580e74667dd6fede4585b91eefb60f03b72df23      1512791 zlib-1.3.1.tar.gz


[FILE:49:manifests/plist.primary]
lib/
 libz.so.%%SOMAJOR%%
 libz.so.%%SOVERSION%%


[FILE:82:manifests/plist.dev]
include/
 zconf.h
 zlib.h
lib/
 libz.a
 libz.so
 libz_pic.a
lib/pkgconfig/zlib.pc


[FILE:25:manifests/plist.man]
share/man/man3/zlib.3.gz


[FILE:645:patches/patch-configure]
--- configure.orig	2023-08-18 08:45:36 UTC
+++ configure
@@ -191,8 +191,8 @@ case `$cc -v 2>&1` in
   *clang*) gcc=1 ;;
 esac
 
-show $cc -c $test.c
-if test "$gcc" -eq 1 && ($cc -c $test.c) >> configure.log 2>&1; then
+cc=cc
+if [ "x" = "x" ]; then
   echo ... using gcc >> configure.log
   CC="$cc"
   CFLAGS="${CFLAGS--O3}"
@@ -226,6 +226,8 @@ if test "$gcc" -eq 1 && ($cc -c $test.c)
     uname=`(uname -s || echo unknown) 2>/dev/null`
   fi
   case "$uname" in
+  SunOS)
+        LDSHARED=${LDSHARED-"$cc -shared -Wl,-soname,libz.so.1"} ;;
   Linux* | linux* | *-linux* | GNU | GNU/* | solaris*)
         case "$mname" in
         *sparc*)

