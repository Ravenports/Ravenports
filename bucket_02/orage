# Buildsheet autogenerated by ravenadm tool -- Do not edit.

NAMEBASE=		orage
VERSION=		4.12.1
KEYWORDS=		deskutils
VARIANTS=		standard
SDESC[standard]=	Calendar application for the Xfce DE
HOMEPAGE=		https://docs.xfce.org/panel-plugins/orage/start
CONTACT=		Michael_Reim[kraileth@elderlinux.org]

DOWNLOAD_GROUPS=	main
SITES[main]=		https://archive.xfce.org/src/apps/orage/4.12/
DISTFILE[1]=		orage-4.12.1.tar.bz2:main
DF_INDEX=		1
SPKGS[standard]=	complete
			primary
			docs
			nls

OPTIONS_AVAILABLE=	none
OPTIONS_STANDARD=	none

BUILDRUN_DEPENDS=	libical:single:standard
			libnotify:primary:standard
			popt:single:standard
			xfce4-panel:primary:standard

USES=			gettext-tools:build gettext-runtime gmake pkgconfig
GNOME_COMPONENTS=	gtk2 intltool

LICENSE=		GPLv2+:primary
LICENSE_TERMS=		primary:{{WRKDIR}}/TERMS
LICENSE_FILE=		GPLv2+:{{WRKSRC}}/COPYING
LICENSE_AWK=		TERMS:"^$$"
LICENSE_SOURCE=		TERMS:{{WRKSRC}}/src/mainbox.h
LICENSE_SCHEME=		solo

FPC_EQUIVALENT=		deskutils/orage

MUST_CONFIGURE=		gnu
CONFIGURE_ARGS=		--disable-debug

post-patch-sunos:
	${REINPLACE_CMD} -e '/_XOPEN/d' \
		${WRKSRC}/src/functions.c \
		${WRKSRC}/src/tz_zoneinfo_read.c \
		${WRKSRC}/src/appointment.c \
		${WRKSRC}/tz_convert/tz_convert.c

[FILE:60:descriptions/desc.primary]
Time-managing application for the Xfce desktop environment.


[FILE:62:descriptions/desc.docs]
This is the documentation subpage of the orage-standard port.


[FILE:99:distinfo]
3cf9aa441ae83c8688865f82217025cdf3ebaa152cce4571777b8c2aa8dd9062      2590788 orage-4.12.1.tar.bz2


[FILE:693:manifests/plist.primary]
bin/
 globaltime
 orage
 tz_convert
share/applications/
 globaltime.desktop
 xfcalendar.desktop
 xfce-xfcalendar-settings.desktop
share/dbus-1/services/
 org.xfce.calendar.service
 org.xfce.orage.service
share/icons/hicolor/160x160/apps/
 orage.xpm
 orage_ice.xpm
 orage_round.xpm
 orage_sun.xpm
share/icons/hicolor/48x48/apps/
 orage_globaltime.png
 xfcalendar.png
share/icons/hicolor/scalable/apps/
 orage_globaltime.svg
 xfcalendar.svg
share/man/man1/
 globaltime.1.gz
 orage.1.gz
 tz_convert.1.gz
share/orage/sounds/
 Boiling.wav
 KDE_Beep_Digital_1.ogg
 KDE_Beep_Digital_2.ogg
 Knock.wav
 Phone.wav
 Spo.wav
 Tear.wav
 Wall_c.wav
share/xfce4/panel/plugins/xfce4-orageclock-plugin.desktop


[FILE:525:manifests/plist.docs]
share/orage/doc/C/orage.html
share/orage/doc/C/images/
 default_calendar.png
 orage_appointment.png
 orage_appointment_alarm.png
 orage_appointment_recurrence.png
 orage_calendar_edit_menu.png
 orage_calendar_file_menu.png
 orage_calendar_help_menu.png
 orage_calendar_view_menu.png
 orage_daylist.png
 orage_desktop_menuitem.png
 orage_eventlist.png
 orage_exchange_foreign.png
 orage_exchange_impexp.png
 orage_exchange_oragefiles.png
 orage_preferences_display.png
 orage_preferences_extra.png
 orage_preferences_main.png


[FILE:1980:manifests/plist.nls]
share/locale/am/LC_MESSAGES/orage.mo
share/locale/ar/LC_MESSAGES/orage.mo
share/locale/ast/LC_MESSAGES/orage.mo
share/locale/be/LC_MESSAGES/orage.mo
share/locale/bg/LC_MESSAGES/orage.mo
share/locale/ca/LC_MESSAGES/orage.mo
share/locale/cs/LC_MESSAGES/orage.mo
share/locale/de/LC_MESSAGES/orage.mo
share/locale/el/LC_MESSAGES/orage.mo
share/locale/en_AU/LC_MESSAGES/orage.mo
share/locale/en_GB/LC_MESSAGES/orage.mo
share/locale/eo/LC_MESSAGES/orage.mo
share/locale/es/LC_MESSAGES/orage.mo
share/locale/et/LC_MESSAGES/orage.mo
share/locale/eu/LC_MESSAGES/orage.mo
share/locale/fi/LC_MESSAGES/orage.mo
share/locale/fr/LC_MESSAGES/orage.mo
share/locale/gl/LC_MESSAGES/orage.mo
share/locale/he/LC_MESSAGES/orage.mo
share/locale/hr/LC_MESSAGES/orage.mo
share/locale/hu/LC_MESSAGES/orage.mo
share/locale/id/LC_MESSAGES/orage.mo
share/locale/it/LC_MESSAGES/orage.mo
share/locale/ja/LC_MESSAGES/orage.mo
share/locale/kk/LC_MESSAGES/orage.mo
share/locale/ko/LC_MESSAGES/orage.mo
share/locale/lt/LC_MESSAGES/orage.mo
share/locale/lv/LC_MESSAGES/orage.mo
share/locale/ms/LC_MESSAGES/orage.mo
share/locale/nb/LC_MESSAGES/orage.mo
share/locale/nl/LC_MESSAGES/orage.mo
share/locale/nn/LC_MESSAGES/orage.mo
share/locale/oc/LC_MESSAGES/orage.mo
share/locale/pa/LC_MESSAGES/orage.mo
share/locale/pl/LC_MESSAGES/orage.mo
share/locale/pt/LC_MESSAGES/orage.mo
share/locale/pt_BR/LC_MESSAGES/orage.mo
share/locale/ro/LC_MESSAGES/orage.mo
share/locale/ru/LC_MESSAGES/orage.mo
share/locale/si/LC_MESSAGES/orage.mo
share/locale/sk/LC_MESSAGES/orage.mo
share/locale/sq/LC_MESSAGES/orage.mo
share/locale/sr/LC_MESSAGES/orage.mo
share/locale/sv/LC_MESSAGES/orage.mo
share/locale/th/LC_MESSAGES/orage.mo
share/locale/tr/LC_MESSAGES/orage.mo
share/locale/ug/LC_MESSAGES/orage.mo
share/locale/uk/LC_MESSAGES/orage.mo
share/locale/ur/LC_MESSAGES/orage.mo
share/locale/ur_PK/LC_MESSAGES/orage.mo
share/locale/vi/LC_MESSAGES/orage.mo
share/locale/zh_CN/LC_MESSAGES/orage.mo
share/locale/zh_TW/LC_MESSAGES/orage.mo


[FILE:3024:patches/patch-src_ical-code.c]
Propposed patch from comment #3
https://bugzilla.xfce.org/show_bug.cgi?id=13997

From 58e4bb4d3b982876dec33d55003d591559439598 Mon Sep 17 00:00:00 2001
From: Stefan Seyfried <seife+dev@b1-systems.com>
Date: Sat, 3 Mar 2018 20:25:24 +0100
Subject: [PATCH] fix build with libical version 3

---
 src/ical-code.c | 12 ++++++++++++
 1 file changed, 12 insertions(+)

diff --git a/src/ical-code.c b/src/ical-code.c
index d5831404..c40042c3 100644
--- src/ical-code.c
+++ src/ical-code.c
@@ -2579,7 +2579,9 @@ static struct icaltimetype count_first_alarm_time(xfical_period per
  * when counting alarm time. */
         if (rel == ICAL_RELATED_START) {
             per.stime.is_date       = 0;
+#if ICAL_MAJOR_VERSION < 3
             per.stime.is_utc        = 1;
+#endif
             per.stime.is_daylight   = 0;
             per.stime.zone          = utc_icaltimezone;
             per.stime.hour          = 0;
@@ -2588,7 +2590,9 @@ static struct icaltimetype count_first_alarm_time(xfical_period per
         }
         else {
             per.etime.is_date       = 0;
+#if ICAL_MAJOR_VERSION < 3
             per.etime.is_utc        = 1;
+#endif
             per.etime.is_daylight   = 0;
             per.etime.zone          = utc_icaltimezone;
             per.etime.hour          = 0;
@@ -2613,7 +2617,9 @@ static struct icaltimetype count_next_alarm_time(struct icaltimetype start_time
 /* HACK: convert to UTC time so that we can use time arithmetic
  * when counting alarm time. */
         start_time.is_date       = 0;
+#if ICAL_MAJOR_VERSION < 3
         start_time.is_utc        = 1;
+#endif
         start_time.is_daylight   = 0;
         start_time.zone          = utc_icaltimezone;
         start_time.hour          = 0;
@@ -2768,7 +2774,9 @@ static alarm_struct *process_alarm_trigger(icalcomponent *c
      */
     if (icaltime_is_date(per.stime)) {
         if (local_icaltimezone != utc_icaltimezone) {
+#if ICAL_MAJOR_VERSION < 3
             next_alarm_time.is_utc        = 0;
+#endif
             next_alarm_time.is_daylight   = 0;
             next_alarm_time.zone          = local_icaltimezone;
         }
@@ -2850,7 +2858,9 @@ orage_message(120, P_N "Alarm rec loop next_start:%s next_alarm:%s per.stime:%s"
          */
         if (icaltime_is_date(per.stime)) {
             if (local_icaltimezone != utc_icaltimezone) {
+#if ICAL_MAJOR_VERSION < 3
                 next_alarm_time.is_utc        = 0;
+#endif
                 next_alarm_time.is_daylight   = 0;
                 next_alarm_time.zone          = local_icaltimezone;
             }
@@ -2944,7 +2954,9 @@ orage_message(120, P_N "*****After loop Alarm %s %s", icaltime_as_ical_string(ne
          */
         if (icaltime_is_date(per.stime)) {
             if (local_icaltimezone != utc_icaltimezone) {
+#if ICAL_MAJOR_VERSION < 3
                 next_alarm_time.is_utc        = 0;
+#endif
                 next_alarm_time.is_daylight   = 0;
                 next_alarm_time.zone          = local_icaltimezone;
             }
-- 
2.16.2


