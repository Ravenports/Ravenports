# Buildsheet autogenerated by ravenadm tool -- Do not edit.

NAMEBASE=		asis
VERSION=		2020
KEYWORDS=		lang ada
VARIANTS=		standard
SDESC[standard]=	Ada Semantic Interface Specification (GNAT)
HOMEPAGE=		http://www.sigada.org/wg/asiswg/
CONTACT=		John_Marino[draco@marino.st]

DOWNLOAD_GROUPS=	main
SITES[main]=		GITHUB/simonjwright:ASIS:f1fd03e
DISTFILE[1]=		generated:main
DF_INDEX=		1
SPKGS[standard]=	complete
			primary
			docs

OPTIONS_AVAILABLE=	none
OPTIONS_STANDARD=	none

BUILD_DEPENDS=		gcc10:complete:standard
			python-Sphinx:single:python_default
BUILDRUN_DEPENDS=	gnat-util:single:standard

USES=			gmake gprbuild

DISTNAME=		ASIS-f1fd03e

LICENSE=		GPLv3+:primary
LICENSE_TERMS=		primary:{{WRKDIR}}/TERMS
LICENSE_FILE=		GPLv3+:{{WRKSRC}}/COPYING3
LICENSE_AWK=		TERMS:"^$$"
LICENSE_SOURCE=		TERMS:{{WRKSRC}}/asis/asis.ads
LICENSE_SCHEME=		solo

FPC_EQUIVALENT=		lang/asis

MAKE_ARGS=		PROCESSORS={{MAKE_JOBS_NUMBER}}

post-patch:
	${CP} ${LOCALBASE}/include/gnat-util/* ${WRKSRC}/gnat
	${REINPLACE_CMD} -e 's|: setup-snames|:|' ${WRKSRC}/Makefile

do-build:
	# This target is recreated because -j cannot be set, but
	# MAKE_JOBS_UNSAFE=yes would break PROCESSORS value
	(cd ${WRKSRC} && ${SETENV} ${MAKE_ENV} ${MAKE_CMD} ${MAKE_ARGS} all)
	(cd ${WRKSRC}/doc && ${SETENV} ${MAKE_ENV} ${MAKE_CMD} html-all)

post-extract:
	${REINPLACE_CMD} -e 's|OPSYS|ASISOPSYS|g' \
		-e 's|(prefix)|(DESTDIR)$$(prefix)|g' \
		${WRKSRC}/Makefile \
		${WRKSRC}/Makefile.stub \
		${WRKSRC}/common.gpr
	${MV} ${WRKSRC}/gnat ${WRKSRC}/gnat.gpl
	${MKDIR} ${WRKSRC}/gnat

do-install:
	# gprinstall seems to be malfunctioning, just install manually
	${MKDIR} ${STAGEDIR}${PREFIX}/bin \
		${STAGEDIR}${PREFIX}/include/asis \
		${STAGEDIR}${PREFIX}/lib/asis \
		${STAGEDIR}${PREFIX}/share/gpr \
		${STAGEDIR}${STD_DOCDIR}
	${INSTALL_PROGRAM} ${WRKSRC}/tools/asistant/asistant \
		${STAGEDIR}${PREFIX}/bin
	${INSTALL_DATA} ${WRKSRC}/asis/*.ad[bs] \
		${STAGEDIR}${PREFIX}/include/asis
	${INSTALL_DATA} ${WRKSRC}/lib/*.ali ${STAGEDIR}${PREFIX}/lib/asis
	${INSTALL_DATA} ${WRKSRC}/lib/*.a ${STAGEDIR}${PREFIX}/lib/asis
	${INSTALL_DATA} ${FILESDIR}/asis.gpr ${STAGEDIR}${PREFIX}/share/gpr
	(cd ${WRKSRC}/doc/html && ${COPYTREE_SHARE} . ${STAGEDIR}${STD_DOCDIR})

[FILE:794:descriptions/desc.primary]
The Ada Semantic Interface Specification (ASIS) is an interface between an
Ada environment as defined by ISO/IEC 8652 (the Ada Reference Manual) and
any tool requiring information from this environment. An Ada environment
includes valuable semantic and syntactic information. ASIS is an open and
published callable interface which gives CASE tool and application
developers access to this information. ASIS has been designed to be
independent of underlying Ada environment implementations, thus supporting
portability of software engineering tools while relieving tool developers
from having to understand the complexities of an Ada environment's
proprietary internal representation.

ASIS 95 is the ASIS interface to Ada 95 (ISO/IEC 8652:1995).
ASIS 95 is now available as ISO/IEC 15291:1999.


[FILE:111:distinfo]
e32cfd974b76c76f4719883a52a23b6713baa145f9aa4fc55e489dec02c96f68      6147085 simonjwright-ASIS-f1fd03e.tar.gz


[FILE:5425:manifests/plist.primary]
bin/asistant
include/asis/
 a4g-a_alloc.ads
 a4g-a_debug.adb
 a4g-a_debug.ads
 a4g-a_elists.adb
 a4g-a_elists.ads
 a4g-a_opt.adb
 a4g-a_opt.ads
 a4g-a_osint.adb
 a4g-a_osint.ads
 a4g-a_output.adb
 a4g-a_output.ads
 a4g-a_sem.adb
 a4g-a_sem.ads
 a4g-a_sinput.adb
 a4g-a_sinput.ads
 a4g-a_stand.ads
 a4g-a_types.adb
 a4g-a_types.ads
 a4g-asis_tables.adb
 a4g-asis_tables.ads
 a4g-contt-dp.adb
 a4g-contt-dp.ads
 a4g-contt-sd.adb
 a4g-contt-sd.ads
 a4g-contt-tt.adb
 a4g-contt-tt.ads
 a4g-contt-ut.adb
 a4g-contt-ut.ads
 a4g-contt.adb
 a4g-contt.ads
 a4g-cu_info2.adb
 a4g-cu_info2.ads
 a4g-dda_aux.adb
 a4g-dda_aux.ads
 a4g-decl_sem.adb
 a4g-decl_sem.ads
 a4g-defaults.adb
 a4g-defaults.ads
 a4g-ee_cache.adb
 a4g-ee_cache.ads
 a4g-encl_el.adb
 a4g-encl_el.ads
 a4g-expr_sem.adb
 a4g-expr_sem.ads
 a4g-get_unit.adb
 a4g-get_unit.ads
 a4g-gnat_int.adb
 a4g-gnat_int.ads
 a4g-gnsa_switch.ads
 a4g-gnsa_switch_true.ads
 a4g-int_knds.ads
 a4g-itests.adb
 a4g-itests.ads
 a4g-knd_conv.adb
 a4g-knd_conv.ads
 a4g-mapping.adb
 a4g-mapping.ads
 a4g-norm.adb
 a4g-norm.ads
 a4g-queries.adb
 a4g-queries.ads
 a4g-skip_tb.adb
 a4g-skip_tb.ads
 a4g-span_beginning.adb
 a4g-span_beginning.ads
 a4g-span_end.adb
 a4g-span_end.ads
 a4g-stand.adb
 a4g-stand.ads
 a4g-tree_rec.ads
 a4g-u_conv.adb
 a4g-u_conv.ads
 a4g-unit_rec.ads
 a4g-vcheck.adb
 a4g-vcheck.ads
 a4g.ads
 asis-ada_environments-containers.adb
 asis-ada_environments-containers.ads
 asis-ada_environments.adb
 asis-ada_environments.ads
 asis-clauses.adb
 asis-clauses.ads
 asis-compilation_units-relations.adb
 asis-compilation_units-relations.ads
 asis-compilation_units-times.adb
 asis-compilation_units-times.ads
 asis-compilation_units.adb
 asis-compilation_units.ads
 asis-data_decomposition-aux.adb
 asis-data_decomposition-aux.ads
 asis-data_decomposition-debug.adb
 asis-data_decomposition-debug.ads
 asis-data_decomposition-extensions.adb
 asis-data_decomposition-extensions.ads
 asis-data_decomposition-gnatrj.adb
 asis-data_decomposition-gnatrj.ads
 asis-data_decomposition-set_get.adb
 asis-data_decomposition-set_get.ads
 asis-data_decomposition-vcheck.adb
 asis-data_decomposition-vcheck.ads
 asis-data_decomposition.adb
 asis-data_decomposition.ads
 asis-declarations.adb
 asis-declarations.ads
 asis-definitions.adb
 asis-definitions.ads
 asis-elements.adb
 asis-elements.ads
 asis-errors.ads
 asis-exceptions.ads
 asis-expressions.adb
 asis-expressions.ads
 asis-extensions-flat_kinds.adb
 asis-extensions-flat_kinds.ads
 asis-extensions-iterator.adb
 asis-extensions-iterator.ads
 asis-extensions-strings.adb
 asis-extensions-strings.ads
 asis-extensions.adb
 asis-extensions.ads
 asis-ids.adb
 asis-ids.ads
 asis-implementation-permissions.adb
 asis-implementation-permissions.ads
 asis-implementation.adb
 asis-implementation.ads
 asis-iterator.adb
 asis-iterator.ads
 asis-limited_views.adb
 asis-limited_views.ads
 asis-set_get.adb
 asis-set_get.ads
 asis-statements.adb
 asis-statements.ads
 asis-text-set_get.adb
 asis-text-set_get.ads
 asis-text.adb
 asis-text.ads
 asis.ads
lib/asis/
 a4g-a_alloc.ali
 a4g-a_debug.ali
 a4g-a_elists.ali
 a4g-a_opt.ali
 a4g-a_osint.ali
 a4g-a_output.ali
 a4g-a_sem.ali
 a4g-a_sinput.ali
 a4g-a_stand.ali
 a4g-a_types.ali
 a4g-asis_tables.ali
 a4g-contt-dp.ali
 a4g-contt-sd.ali
 a4g-contt-tt.ali
 a4g-contt-ut.ali
 a4g-contt.ali
 a4g-cu_info2.ali
 a4g-dda_aux.ali
 a4g-decl_sem.ali
 a4g-defaults.ali
 a4g-ee_cache.ali
 a4g-encl_el.ali
 a4g-expr_sem.ali
 a4g-get_unit.ali
 a4g-gnat_int.ali
 a4g-gnsa_switch.ali
 a4g-int_knds.ali
 a4g-itests.ali
 a4g-knd_conv.ali
 a4g-mapping.ali
 a4g-norm.ali
 a4g-queries.ali
 a4g-skip_tb.ali
 a4g-span_beginning.ali
 a4g-span_end.ali
 a4g-stand.ali
 a4g-tree_rec.ali
 a4g-u_conv.ali
 a4g-unit_rec.ali
 a4g-vcheck.ali
 a4g.ali
 ali-util.ali
 ali.ali
 alloc.ali
 asis-ada_environments-containers.ali
 asis-ada_environments.ali
 asis-clauses.ali
 asis-compilation_units-relations.ali
 asis-compilation_units-times.ali
 asis-compilation_units.ali
 asis-data_decomposition-aux.ali
 asis-data_decomposition-debug.ali
 asis-data_decomposition-extensions.ali
 asis-data_decomposition-gnatrj.ali
 asis-data_decomposition-set_get.ali
 asis-data_decomposition-vcheck.ali
 asis-data_decomposition.ali
 asis-declarations.ali
 asis-definitions.ali
 asis-elements.ali
 asis-errors.ali
 asis-exceptions.ali
 asis-expressions.ali
 asis-extensions-flat_kinds.ali
 asis-extensions-iterator.ali
 asis-extensions-strings.ali
 asis-extensions.ali
 asis-ids.ali
 asis-implementation-permissions.ali
 asis-implementation.ali
 asis-iterator.ali
 asis-limited_views.ali
 asis-set_get.ali
 asis-statements.ali
 asis-text-set_get.ali
 asis-text.ali
 asis.ali
 aspects.ali
 atree.ali
 binderr.ali
 butil.ali
 casing.ali
 csets.ali
 debug.ali
 einfo.ali
 elists.ali
 err_vars.ali
 errout.ali
 erroutc.ali
 errutil.ali
 fmap.ali
 fname-uf.ali
 fname.ali
 get_scos.ali
 gnatvsn.ali
 hostparm.ali
 impunit.ali
 krunch.ali
 lib.ali
 libasis.a
 namet.ali
 nlists.ali
 opt.ali
 osint.ali
 output.ali
 put_scos.ali
 repinfo-input.ali
 repinfo.ali
 restrict.ali
 rident.ali
 scans.ali
 scng.ali
 scos.ali
 sdefault.ali
 sem_aux.ali
 sinfo.ali
 sinput-c.ali
 sinput.ali
 snames.ali
 stand.ali
 stringt.ali
 styleg.ali
 stylesw.ali
 switch-m.ali
 switch.ali
 table.ali
 targparm.ali
 tempdir.ali
 tree_in.ali
 tree_io.ali
 types.ali
 uintp.ali
 uname.ali
 urealp.ali
 widechar.ali
 xsnamest.ali
 xutil.ali
share/gpr/asis.gpr


[FILE:4380:manifests/plist.docs]
share/doc/asis/asis_rm/
 .buildinfo
 asis_rm.html
 genindex.html
 objects.inv
 search.html
 searchindex.js
share/doc/asis/asis_rm/_sources/asis_rm.txt
share/doc/asis/asis_rm/_sources/asis_rm/
 about_this_manual.txt
 asis-for-gnat_and_the_asis_standard.txt
 asis_extensions.txt
 debugging_information.txt
 implementation-specific_features_and_implementation_permissions.txt
share/doc/asis/asis_rm/_sources/share/gnu_free_documentation_license.txt
share/doc/asis/asis_rm/_static/
 adacore_transparent.png
 ajax-loader.gif
 basic.css
 comment-bright.png
 comment-close.png
 comment.png
 contents.png
 doctools.js
 down-pressed.png
 down.png
 favicon.ico
 file.png
 jquery-1.11.1.js
 jquery.js
 minus.png
 navigation.png
 plus.png
 pygments.css
 searchtools.js
 sphinxdoc.css
 underscore-1.3.1.js
 underscore.js
 up-pressed.png
 up.png
 websupport.js
share/doc/asis/asis_rm/asis_rm/
 about_this_manual.html
 asis-for-gnat_and_the_asis_standard.html
 asis_extensions.html
 debugging_information.html
 implementation-specific_features_and_implementation_permissions.html
share/doc/asis/asis_rm/share/gnu_free_documentation_license.html
share/doc/asis/asis_ug/
 .buildinfo
 asis_ug.html
 genindex.html
 objects.inv
 search.html
 searchindex.js
share/doc/asis/asis_ug/_sources/asis_ug.txt
share/doc/asis/asis_ug/_sources/asis_ug/
 about_this_guide.txt
 asis-for-gnat_warnings.txt
 asis_application_templates.txt
 asis_context.txt
 asis_interpreter_asistant.txt
 asis_overview.txt
 asis_tutorials.txt
 compiling_binding_and_linking_applications_with_asis-for-gnat.txt
 exception_handling_and_reporting_internal_bugs.txt
 file_naming_conventions_and_application_name_space.txt
 getting_started.txt
 how_to_build_efficient_asis_applications.txt
 introduction.txt
 processing_an_ada_library_by_an_asis-based_tool.txt
share/doc/asis/asis_ug/_sources/share/gnu_free_documentation_license.txt
share/doc/asis/asis_ug/_static/
 adacore_transparent.png
 ajax-loader.gif
 basic.css
 comment-bright.png
 comment-close.png
 comment.png
 contents.png
 doctools.js
 down-pressed.png
 down.png
 favicon.ico
 file.png
 jquery-1.11.1.js
 jquery.js
 minus.png
 navigation.png
 plus.png
 pygments.css
 searchtools.js
 sphinxdoc.css
 underscore-1.3.1.js
 underscore.js
 up-pressed.png
 up.png
 websupport.js
share/doc/asis/asis_ug/asis_ug/
 about_this_guide.html
 asis-for-gnat_warnings.html
 asis_application_templates.html
 asis_context.html
 asis_interpreter_asistant.html
 asis_overview.html
 asis_tutorials.html
 compiling_binding_and_linking_applications_with_asis-for-gnat.html
 exception_handling_and_reporting_internal_bugs.html
 file_naming_conventions_and_application_name_space.html
 getting_started.html
 how_to_build_efficient_asis_applications.html
 introduction.html
 processing_an_ada_library_by_an_asis-based_tool.html
share/doc/asis/asis_ug/share/gnu_free_documentation_license.html
share/doc/asis/gnatcheck_rm/
 .buildinfo
 genindex.html
 gnatcheck_rm.html
 objects.inv
 search.html
 searchindex.js
share/doc/asis/gnatcheck_rm/_sources/gnatcheck_rm.txt
share/doc/asis/gnatcheck_rm/_sources/gnatcheck_rm/
 about_this_manual.txt
 adding_the_results_of_compiler_checks_to_gnatcheck_output.txt
 example_of_gnatcheck_usage.txt
 format_of_the_report_file.txt
 general_gnatcheck_switches.txt
 gnatcheck_rule_options.txt
 introduction.txt
 list_of_rules.txt
 mapping_gnatcheck_rules_onto_coding_standards.txt
 predefined_rules.txt
 rule_exemption.txt
share/doc/asis/gnatcheck_rm/_sources/share/gnu_free_documentation_license.txt
share/doc/asis/gnatcheck_rm/_static/
 adacore_transparent.png
 ajax-loader.gif
 basic.css
 comment-bright.png
 comment-close.png
 comment.png
 contents.png
 doctools.js
 down-pressed.png
 down.png
 favicon.ico
 file.png
 jquery-1.11.1.js
 jquery.js
 minus.png
 navigation.png
 plus.png
 pygments.css
 searchtools.js
 sphinxdoc.css
 underscore-1.3.1.js
 underscore.js
 up-pressed.png
 up.png
 websupport.js
share/doc/asis/gnatcheck_rm/gnatcheck_rm/
 about_this_manual.html
 adding_the_results_of_compiler_checks_to_gnatcheck_output.html
 example_of_gnatcheck_usage.html
 format_of_the_report_file.html
 general_gnatcheck_switches.html
 gnatcheck_rule_options.html
 introduction.html
 list_of_rules.html
 mapping_gnatcheck_rules_onto_coding_standards.html
 predefined_rules.html
 rule_exemption.html
share/doc/asis/gnatcheck_rm/share/gnu_free_documentation_license.html


[FILE:320:patches/patch-Makefile.stub]
--- Makefile.stub.orig	2021-09-04 04:00:23 UTC
+++ Makefile.stub
@@ -3,8 +3,7 @@ host := $(shell gcc -dumpmachine)
 
 # Where Asis library should be installed
 # Default is into current GNAT directory
-INSTALL_DIR = $(dir $(shell which gnatls))..
-prefix=$(INSTALL_DIR)
+prefix=$(PREFIX)
 
 # System commands
 exe_ext =


[FILE:1381:patches/patch-doc_share_conf.py]
--- doc/share/conf.py.orig	2020-02-29 15:19:01 UTC
+++ doc/share/conf.py
@@ -39,18 +39,18 @@ def get_gnat_version():
             line = (vinfo.readline()).strip()
             return line
     except Exception:
-        print 'Error opening or reading version_information file'
+        print ('Error opening or reading version_information file')
         sys.exit(1)
 
 
 # First retrieve the name of the documentation we are building
 doc_name = os.environ.get('DOC_NAME', None)
 if doc_name is None:
-    print 'DOC_NAME environment variable should be set'
+    print ('DOC_NAME environment variable should be set')
     sys.exit(1)
 
 if doc_name not in DOCS:
-    print '%s is not a valid documentation name' % doc_name
+    print ('%s is not a valid documentation name' % doc_name)
     sys.exit(1)
 
 
@@ -59,7 +59,7 @@ exclude_patterns = []
 for d in os.listdir(root_source_dir):
     if d not in ('share', doc_name, doc_name + '.rst'):
         exclude_patterns.append(d)
-        print 'ignoring %s' % d
+        print ('ignoring %s' % d)
 
 extensions = []
 templates_path = ['_templates']
@@ -101,5 +101,5 @@ texinfo_documents = [
 
 
 def setup(app):
-    app.add_lexer('ada', ada_pygments.AdaLexer())
-    app.add_lexer('gpr', ada_pygments.GNATProjectLexer())
+    app.add_lexer('ada', ada_pygments.AdaLexer)
+    app.add_lexer('gpr', ada_pygments.GNATProjectLexer)


[FILE:275:files/asis.gpr]
with "gnat_util";
Library project Asis is

   for Languages use ("Ada");

   for Source_Dirs use ("../../include/asis");
   for Library_Dir use "../../lib/asis";
   for Library_Name use "asis";
   for Library_Kind use "static";
   for Externally_Built use "True";

end Asis;


[FILE:47:files/special.mk]
PREPEND_PATH=	${LOCALBASE}/toolchain/gcc10/bin

