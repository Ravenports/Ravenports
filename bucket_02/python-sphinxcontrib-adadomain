# Buildsheet autogenerated by ravenadm tool -- Do not edit.

NAMEBASE=		python-sphinxcontrib-adadomain
VERSION=		0.2
KEYWORDS=		python
VARIANTS=		py38 py37
SDESC[py37]=		Sphinx "adadomain" extension (PY37)
SDESC[py38]=		Sphinx "adadomain" extension (PY38)
HOMEPAGE=		https://bitbucket.org/tkoskine/sphinxcontrib-adadomain
CONTACT=		Python_Automaton[python@ironwolf.systems]

DOWNLOAD_GROUPS=	main
SITES[main]=		PYPIWHL/c3/7e/e06025300a3b02fb6f86425af27c1e5c08165f0e646535e4640c58b915f2
DISTFILE[1]=		sphinxcontrib_adadomain-0.2-py2.py3-none-any.whl:main
DF_INDEX=		1
SPKGS[py37]=		single
SPKGS[py38]=		single

OPTIONS_AVAILABLE=	PY38 PY37
OPTIONS_STANDARD=	none
VOPTS[py37]=		PY38=OFF PY37=ON
VOPTS[py38]=		PY38=ON PY37=OFF

DISTNAME=		sphinxcontrib_adadomain-0.2.dist-info

GENERATED=		yes

[PY37].BUILD_DEPENDS_ON=		python-pip:single:py37
[PY37].RUN_DEPENDS_ON=			python-Sphinx:single:py37
[PY37].USES_ON=				python:py37,wheel

[PY38].BUILD_DEPENDS_ON=		python-pip:single:py38
[PY38].RUN_DEPENDS_ON=			python-Sphinx:single:py38
[PY38].USES_ON=				python:py38,wheel

[FILE:144:descriptions/desc.single]
==========
Ada Domain
==========

:author: Tero Koskinen <tero.koskinen@iki.fi>

About
=====

This extension adds Ada domain support to Sphinx.


[FILE:127:distinfo]
f5b169e1be0a740f8988a5fb818c7c958d5d56fb476a17c66563a16da07441b0         8205 sphinxcontrib_adadomain-0.2-py2.py3-none-any.whl


[FILE:1658:patches/patch-sphinxcontrib_adadomain.py]
--- sphinxcontrib/adadomain.py.orig	2018-01-19 17:53:22 UTC
+++ sphinxcontrib/adadomain.py
@@ -18,13 +18,13 @@ import string
 
 from docutils import nodes
 from docutils.parsers.rst import directives
+from docutils.parsers.rst import Directive
 
-from sphinx import addnodes
+from sphinx import addnodes, version_info
 from sphinx.roles import XRefRole
 from sphinx.locale import l_, _
 from sphinx.directives import ObjectDescription
 from sphinx.domains import Domain, ObjType, Index
-from sphinx.util.compat import Directive
 from sphinx.util.nodes import make_refnode
 from sphinx.util.docfields import Field, TypedField
 
@@ -269,12 +269,12 @@ class AdaObject(ObjectDescription):
 
         indextext = self._get_index_text(name)
         if indextext:
-            self.indexnode['entries'].append(('single', indextext, name, name))
+            self.indexnode['entries'].append(('single', indextext, name, name, None))
 
         plain_name = pieces[-1]
         indextext = self._get_index_text(plain_name)
         if indextext:
-            self.indexnode['entries'].append(('single', indextext, name, plain_name))
+            self.indexnode['entries'].append(('single', indextext, name, plain_name, None))
 
 
 class AdaModule(Directive):
@@ -316,7 +316,7 @@ class AdaModule(Directive):
         if not noindex:
             indextext = _('%s (module)') % modname
             inode = addnodes.index(entries=[('single', indextext,
-                                             'module-' + modname, modname)])
+                                             'module-' + modname, modname, None)])
             ret.append(inode)
         return ret
 

