# Buildsheet autogenerated by ravenadm tool -- Do not edit.

NAMEBASE=		docbook-utils
VERSION=		0.6.15
REVISION=		1
KEYWORDS=		textproc
VARIANTS=		std
SDESC[std]=		Shell scripts to manage DocBook documents
HOMEPAGE=		https://github.com/devexp-db/docbook-utils
CONTACT=		nobody

DOWNLOAD_GROUPS=	main
SITES[main]=		GITHUB/devexp-db:docbook-utils:v0.6.15
DISTFILE[1]=		generated:main
DF_INDEX=		1
SPKGS[std]=		set
			primary
			man

OPTIONS_AVAILABLE=	none
OPTIONS_STANDARD=	none

BUILDRUN_DEPENDS=	docbook-dsssl:single:std
			docbook-sgml:single:std
			perl-SGMLSpm:single:perl_used
			openjade:primary:std

USES=			perl gmake autoreconf shebangfix

FPC_EQUIVALENT=		textproc/docbook-utils
SHEBANG_FILES=		bin/sgmldiff.in
SHEBANG_OLD_PERL=	@perl_bindir@/perl

MUST_CONFIGURE=		gnu

PLIST_SUB=		VER=0.6.15

pre-configure:
	${REINPLACE_CMD} -e 's|@LOCALBASE@|${LOCALBASE}|' ${WRKSRC}/configure.ac

[FILE:383:descriptions/desc.primary]
The docbook-utils is a set of a few small programs intended to ease
everyday's use of technical documentation software and more generally
use of SGML and XML. They are released under the GPL licence.

Tasks they currently accomplish are:
  - jw: convert SGML files to other formats (HTML, RTF, Postscript, PDF)
  - sgmldiff: detect the differerences in markup between two SGML files


[FILE:116:distinfo]
05e2690577cd0b3028f40a82613dd56b53094d3093786fbcd6257241fde481ba        72083 devexp-db-docbook-utils-0.6.15.tar.gz


[FILE:413:manifests/plist.primary]
bin/
 docbook2dvi
 docbook2html
 docbook2man
 docbook2pdf
 docbook2ps
 docbook2rtf
 docbook2tex
 docbook2texi
 docbook2txt
 jw
 sgmldiff
share/sgml/docbook/utils-%%VER%%/backends/
 dvi
 html
 man
 pdf
 ps
 rtf
 tex
 texi
 txt
share/sgml/docbook/utils-%%VER%%/docbook-utils.dsl
share/sgml/docbook/utils-%%VER%%/frontends/docbook
share/sgml/docbook/utils-%%VER%%/helpers/
 docbook2man-spec.pl
 docbook2texi-spec.pl


[FILE:251:manifests/plist.man]
share/man/man1/
 docbook2dvi.1
 docbook2html.1
 docbook2man-spec.pl.1
 docbook2man.1
 docbook2pdf.1
 docbook2ps.1
 docbook2rtf.1
 docbook2tex.1
 docbook2texi-spec.pl.1
 docbook2texi.1
 jw.1
 sgmldiff.1
share/man/man7/
 backend-spec.7
 frontend-spec.7


[FILE:489:patches/patch-backends_man.in]
--- backends/man.in.orig	2024-10-09 12:46:46 UTC
+++ backends/man.in
@@ -7,7 +7,7 @@ HELPER=$SGML_BASE_DIR/docbook/utils-@VER
 TMPDIR=`mktemp -d /tmp/man.XXXXXX` || \
  { echo >&2 "man backend: could not create secure temporary directory"; exit 1;}
 trap 'rm -rf "${TMPDIR}"' EXIT
-nsgmls ${SGML_INCLUDE} "$SGML_FILE" > "${TMPDIR}/nsgmls.tmp"
+onsgmls ${SGML_INCLUDE} "$SGML_FILE" > "${TMPDIR}/nsgmls.tmp"
 sgmlspl $HELPER <"${TMPDIR}/nsgmls.tmp" 2>"${TMPDIR}/errs"
 if [ $? -ne 0 ]
 then


[FILE:534:patches/patch-bin_jw.in]
--- bin/jw.in.orig	2024-10-09 12:46:46 UTC
+++ bin/jw.in
@@ -63,7 +63,7 @@ if [ $? -eq 0 ]
 then
   SGML_CONF=`sgmlwhich`
 else
-  SGML_CONF="/etc/sgml/sgml.conf"
+  SGML_CONF="@prefix@/etc/sgml.conf"
 fi
 
 # Set version message
@@ -77,7 +77,7 @@ SGML_EXTRA_CATALOGS=""
 
 # Set SGML base directory and centralized catalogs directory
 SGML_BASE_DIR="@prefix@/share/sgml"
-SGML_CATALOGS_DIR="/etc/sgml"
+SGML_CATALOGS_DIR="@prefix@/share/sgml"
 if [ -f "$SGML_CONF" ]
 then
   RE='^[[:space:]]*SGML_BASE_DIR[[:space:]]*=[[:space:]]*'


[FILE:298:patches/patch-bin_sgmldiff.in]
--- bin/sgmldiff.in.orig	2025-07-08 00:23:15 UTC
+++ bin/sgmldiff.in
@@ -28,7 +28,7 @@ use Getopt::Long 2.01;
 $VERSION = 1.03;
 
 my $nsgmls;
-$nsgmls = "@jade_bindir@/nsgmls";
+$nsgmls = "@jade_bindir@/onsgmls";
 
 #----------------------------------------------------------------------
 # TODO:


[FILE:522:patches/patch-configure.ac]
--- configure.ac.orig	2024-10-09 12:46:46 UTC
+++ configure.ac
@@ -21,11 +21,11 @@ docdir='$(prefix)/doc'
 AC_SUBST(docdir)
 
 dnl Checks for programs.
-jade_bindirs="/usr/bin /usr/local/bin"
-AC_FIND_PROGRAM(nsgmls, $jade_bindirs, jade_bindir)
+jade_bindirs="/usr/bin @LOCALBASE@/bin"
+AC_FIND_PROGRAM(onsgmls, $jade_bindirs, jade_bindir)
 AC_SUBST(jade_bindir)
 
-perl_bindirs="/usr/bin /usr/local/bin"
+perl_bindirs="/usr/bin @LOCALBASE@/bin"
 AC_FIND_PROGRAM(perl, $perl_bindirs, perl_bindir)
 AC_SUBST(perl_bindir)
 


[FILE:540:patches/patch-doc_HTML_Makefile.am]
--- doc/HTML/Makefile.am.orig	2024-10-09 12:46:46 UTC
+++ doc/HTML/Makefile.am
@@ -23,7 +23,7 @@ $(html_DATA): $(top_srcdir)/doc/docbook-
 		$(top_srcdir)/doc/refentry/docbook2texi-spec.pl.sgml \
 		$(top_srcdir)/doc/refentry/frontend-spec.sgml \
 		$(top_srcdir)/doc/refentry/sgmldiff.sgml
-	SGML_CATALOG_FILES=/etc/sgml/catalog \
+	SGML_CATALOG_FILES=$(prefix)/share/sgml/catalog \
 	SGML_SEARCH_PATH=$(top_srcdir):$(top_srcdir)/doc:.. \
 		jade -t sgml -i html -d $(top_srcdir)/docbook-utils.dsl\#html \
 			-V '%use-id-as-filename%' $<


[FILE:175:patches/patch-doc_Makefile.am]
--- doc/Makefile.am.orig	2024-10-09 12:46:46 UTC
+++ doc/Makefile.am
@@ -1,4 +1,4 @@
-SUBDIRS = refentry man HTML
+SUBDIRS = refentry man
 
 EXTRA_DIST = docbook-utils.sgml
 


[FILE:473:patches/patch-doc_man_Makefile.am]
--- doc/man/Makefile.am.orig	2024-10-09 12:46:46 UTC
+++ doc/man/Makefile.am
@@ -10,7 +10,7 @@ CLEANFILES=$(man1_MANS) $(man7_MANS) man
 
 $(man1_MANS) $(man7_MANS): $(top_srcdir)/doc/docbook-utils.sgml \
 		$(top_srcdir)/helpers/docbook2man-spec.pl
-	SGML_CATALOG_FILES=/etc/sgml/catalog \
+	SGML_CATALOG_FILES=$(prefix)/share/sgml/catalog \
 	SGML_SEARCH_PATH=$(top_srcdir)/doc:.. \
-		nsgmls $< | \
+		onsgmls $< | \
 		sgmlspl $(top_srcdir)/helpers/docbook2man-spec.pl


[FILE:426:patches/patch-helpers_docbook2man-spec.pl]
--- helpers/docbook2man-spec.pl.orig	2024-10-09 12:46:46 UTC
+++ helpers/docbook2man-spec.pl
@@ -7,7 +7,7 @@ docbook2man-spec - convert DocBook RefEn
 The SGMLSpm package from CPAN.  This contains the sgmlspl script which
 is used to grok this file.  Use it like this:
 
-nsgmls some-docbook-document.sgml | sgmlspl docbook2man-spec.pl
+onsgmls some-docbook-document.sgml | sgmlspl docbook2man-spec.pl
 
 =head1 DESCRIPTION
 

