# Buildsheet autogenerated by ravenadm tool -- Do not edit.

NAMEBASE=		qt-gstreamer
VERSION=		1.2.0
KEYWORDS=		multimedia
VARIANTS=		standard
SDESC[standard]=	Qt bindings for GStreamer
HOMEPAGE=		https://gstreamer.freedesktop.org/
CONTACT=		nobody

DOWNLOAD_GROUPS=	main
SITES[main]=		https://gstreamer.freedesktop.org/src/qt-gstreamer/
DISTFILE[1]=		qt-gstreamer-1.2.0.tar.xz:main
DF_INDEX=		1
SPKGS[standard]=	single

OPTIONS_AVAILABLE=	none
OPTIONS_STANDARD=	none

BUILD_DEPENDS=		qt5-qttools:single:standard
BUILDRUN_DEPENDS=	gstreamer1:single:standard
			gstreamer1-plugins-base:single:standard
			boost-libraries:rest:python_default
			qt5-qtdeclarative:single:standard

USES=			bison cmake pkgconfig mesa

FPC_EQUIVALENT=		multimedia/gstreamer1-qt

PLIST_SUB=		SOVERSION=1.2.0
			SOMAJOR=0

CMAKE_ARGS=		-DUSE_GST_PLUGIN_DIR:BOOL=OFF
			-DUSE_QT_PLUGIN_DIR:BOOL=OFF
			-DQT_VERSION=5
			-DCMAKE_PREFIX_PATH:PATH="{{PREFIX}}/lib/qt5/cmake/"

post-install:
	${STRIP_CMD} ${STAGEDIR}${PREFIX}/lib/*.so
	${STRIP_CMD} ${STAGEDIR}${PREFIX}/lib/gstreamer-1.0/*.so
	${STRIP_CMD} ${STAGEDIR}${PREFIX}/lib/qt5/qml/QtGStreamer/*.so

[FILE:183:descriptions/desc.single]
QtGStreamer is a set of libraries providing C++ bindings for GStreamer
with a Qt-style API, plus some helper classes and elements for
integrating GStreamer better in Qt applications.


[FILE:104:distinfo]
9f3b492b74cad9be918e4c4db96df48dab9c012f2ae5667f438b64a4d92e8fd4       313632 qt-gstreamer-1.2.0.tar.xz


[FILE:2426:manifests/plist.single]
include/Qt5GStreamer/QGlib/
 Connect
 Error
 Global
 Init
 Object
 ParamSpec
 Quark
 RefPointer
 Signal
 Type
 Value
 connect.h
 connectimpl.h
 emitimpl.h
 error.h
 global.h
 init.h
 object.h
 paramspec.h
 qglib_signal.h
 quark.h
 refpointer.h
 type.h
 value.h
 wrap.h
include/Qt5GStreamer/QGst/
 Allocator
 Bin
 Buffer
 BufferList
 Bus
 Caps
 ChildProxy
 Clock
 ClockTime
 ColorBalance
 Discoverer
 DoubleRange
 Element
 ElementFactory
 Event
 Fourcc
 Fraction
 FractionRange
 GhostPad
 Global
 Init
 Int64Range
 IntRange
 Memory
 Message
 MiniObject
 Object
 Pad
 Parse
 Pipeline
 PluginFeature
 Query
 Sample
 Segment
 StreamVolume
 Structure
 TagList
 UriHandler
 VideoOrientation
 VideoOverlay
 allocator.h
 bin.h
 buffer.h
 bufferlist.h
 bus.h
 caps.h
 childproxy.h
 clock.h
 clocktime.h
 colorbalance.h
 discoverer.h
 element.h
 elementfactory.h
 enums.h
 event.h
 ghostpad.h
 global.h
 init.h
 memory.h
 message.h
 miniobject.h
 object.h
 pad.h
 parse.h
 pipeline.h
 pluginfeature.h
 query.h
 sample.h
 segment.h
 streamvolume.h
 structs.h
 structure.h
 taglist.h
 urihandler.h
 videoorientation.h
 videooverlay.h
include/Qt5GStreamer/QGst/Quick/
 VideoItem
 VideoSurface
 global.h
 videoitem.h
 videosurface.h
include/Qt5GStreamer/QGst/Ui/
 GraphicsVideoSurface
 GraphicsVideoWidget
 VideoWidget
 global.h
 graphicsvideosurface.h
 graphicsvideowidget.h
 videowidget.h
include/Qt5GStreamer/QGst/Utils/
 ApplicationSink
 ApplicationSource
 applicationsink.h
 applicationsource.h
 global.h
lib/
 libQt5GLib-2.0.so
 libQt5GLib-2.0.so.%%SOMAJOR%%
 libQt5GLib-2.0.so.%%SOVERSION%%
 libQt5GStreamer-1.0.so
 libQt5GStreamer-1.0.so.%%SOMAJOR%%
 libQt5GStreamer-1.0.so.%%SOVERSION%%
 libQt5GStreamerQuick-1.0.so
 libQt5GStreamerQuick-1.0.so.%%SOMAJOR%%
 libQt5GStreamerQuick-1.0.so.%%SOVERSION%%
 libQt5GStreamerUi-1.0.so
 libQt5GStreamerUi-1.0.so.%%SOMAJOR%%
 libQt5GStreamerUi-1.0.so.%%SOVERSION%%
 libQt5GStreamerUtils-1.0.so
 libQt5GStreamerUtils-1.0.so.%%SOMAJOR%%
 libQt5GStreamerUtils-1.0.so.%%SOVERSION%%
lib/cmake/Qt5GStreamer/
 Qt5GStreamerConfig.cmake
 Qt5GStreamerConfigVersion.cmake
 Qt5GStreamerTargets-%%CMAKE_BUILD_TYPE%%.cmake
 Qt5GStreamerTargets.cmake
 QtGStreamerConfigCommon.cmake
lib/gstreamer-1.0/libgstqt5videosink.so
lib/pkgconfig/
 Qt5GLib-2.0.pc
 Qt5GStreamer-1.0.pc
 Qt5GStreamerQuick-1.0.pc
 Qt5GStreamerUi-1.0.pc
 Qt5GStreamerUtils-1.0.pc
lib/qt5/qml/QtGStreamer/
 libQtGStreamerQuick2.so
 qmldir


[FILE:1879:patches/patch-git_1967da1]
Module: qt-gstreamer
Branch: master
Commit: 1967da1ffcf04eddbc250c65d6f6efce4b77fe4b
URL:    http://cgit.freedesktop.org/gstreamer/qt-gstreamer/commit/?id=1967da1ffcf04eddbc250c65d6f6efce4b77fe4b

Author: Andreas Sturmlechner <andreas.sturmlechner at gmail.com>
Date:   Sun Apr 15 23:46:50 2018 +0200

Fix cmake with Qt 5.11_beta3 (dropping qt5_use_modules)

https://bugzilla.gnome.org/show_bug.cgi?id=795285

---

 cmake/modules/FindQt4or5.cmake | 16 +++++++++++++---
 1 file changed, 13 insertions(+), 3 deletions(-)

--- cmake/modules/FindQt4or5.cmake
+++ cmake/modules/FindQt4or5.cmake
@@ -49,6 +49,16 @@ macro(_qt4or5_component_names_to_qt_components output_list)
   list(REMOVE_DUPLICATES ${output_list})
 endmacro()
 
+macro(_qt5_component_names_to_target_link_libaries output_list)
+  foreach(module ${ARGN})
+    _qt4or5_component_name_to_qt_component(qt_component ${module})
+    list(APPEND ${output_list} Qt5::${qt_component})
+    unset(qt_component)
+  endforeach()
+
+  list(REMOVE_DUPLICATES ${output_list})
+endmacro()
+
 if (Qt4or5_FIND_QUIETLY)
   set(_Qt4or5_FIND_PACKAGE_ARGS QUIET)
 endif()
@@ -195,13 +205,13 @@ function(qt4or5_use_modules _target _link_type)
     set(modules ${_link_type} ${ARGN})
   endif()
 
-  _qt4or5_component_names_to_qt_components(real_modules ${modules})
-
   # Verify that Qt5 was found before using qt5_* macros,
   # otherwise cmake will bail out if they are undefined.
   if (${QT_VERSION} STREQUAL "5" AND Qt5Core_FOUND)
-    qt5_use_modules(${_target} ${link_type} ${real_modules})
+    _qt5_component_names_to_target_link_libaries(real_modules ${modules})
+    target_link_libraries(${_target} ${link_type} ${real_modules})
   elseif (${QT_VERSION} STREQUAL "4")
+    _qt4or5_component_names_to_qt_components(real_modules ${modules})
     qt4_use_modules(${_target} ${link_type} ${real_modules})
   endif()
 endfunction()


[FILE:1298:patches/patch-git_1d2edcc9]
From e2ca8094aa8d0eac1c3a98df66fe94ce0c754088 Mon Sep 17 00:00:00 2001
From: =?UTF-8?q?Jos=C3=A9=20Manuel=20Santamar=C3=ADa?= <panfaust@gmail.com>
Date: Fri, 2 Oct 2015 15:00:29 +0300
Subject: Fix compilation with GStreamer >= 1.5.1

apply gstreamer pkg-config definitions To ensure gstreamer builds correctly,
pick up its cflags in FindGstreamer and apply them to the build as definitions

https://lists.ubuntu.com/archives/kubuntu-devel/2015-August/009819.html

https://bugzilla.gnome.org/show_bug.cgi?id=751382

--- CMakeLists.txt
+++ CMakeLists.txt
@@ -106,6 +106,7 @@ find_package(GObject)
 macro_log_feature(GOBJECT_FOUND "GObject" "Required to build QtGLib" "http://www.gtk.org/" TRUE)
 
 set(CMAKE_REQUIRED_INCLUDES ${QTGSTREAMER_INCLUDES})
+add_definitions(${GSTREAMER_DEFINITIONS})
 include(CheckCXXSourceCompiles)
 check_cxx_source_compiles("
 #include <QtCore/QtGlobal>
--- cmake/modules/FindGStreamer.cmake
+++ cmake/modules/FindGStreamer.cmake
@@ -36,6 +36,7 @@ if (PKG_CONFIG_FOUND)
     exec_program(${PKG_CONFIG_EXECUTABLE}
                  ARGS --variable pluginsdir gstreamer-${GSTREAMER_ABI_VERSION}
                  OUTPUT_VARIABLE PKG_GSTREAMER_PLUGIN_DIR)
+    set(GSTREAMER_DEFINITIONS ${PKG_GSTREAMER_CFLAGS})
 endif()
 
 find_library(GSTREAMER_LIBRARY
-- 
cgit v0.10.2



[FILE:3083:patches/patch-git_fc159e5c4]
From fc159e5c4c8ffeabdc7319514c6bb19c9c9e1d3b Mon Sep 17 00:00:00 2001
From: Aleix Pol <aleixpol@kde.org>
Date: Mon, 13 Jun 2016 10:36:34 +0200
Subject: Fix build with Clang 3.8

error: invalid suffix on literal; C++11 requires a space between literal and identifier

https://bugzilla.gnome.org/show_bug.cgi?id=767578

diff --git elements/gstqtvideosink/delegates/basedelegate.cpp elements/gstqtvideosink/delegates/basedelegate.cpp
index 7dde59c..65f364c 100644
--- elements/gstqtvideosink/delegates/basedelegate.cpp
+++ elements/gstqtvideosink/delegates/basedelegate.cpp
@@ -155,7 +155,7 @@ bool BaseDelegate::event(QEvent *event)
         BufferEvent *bufEvent = dynamic_cast<BufferEvent*>(event);
         Q_ASSERT(bufEvent);

-        GST_TRACE_OBJECT(m_sink, "Received buffer %"GST_PTR_FORMAT, bufEvent->buffer);
+        GST_TRACE_OBJECT(m_sink, "Received buffer %" GST_PTR_FORMAT, bufEvent->buffer);

         if (isActive()) {
             gst_buffer_replace (&m_buffer, bufEvent->buffer);
diff --git elements/gstqtvideosink/delegates/qwidgetvideosinkdelegate.cpp elements/gstqtvideosink/delegates/qwidgetvideosinkdelegate.cpp
index 8f23dc2..c42513f 100644
--- elements/gstqtvideosink/delegates/qwidgetvideosinkdelegate.cpp
+++ elements/gstqtvideosink/delegates/qwidgetvideosinkdelegate.cpp
@@ -36,7 +36,7 @@ QWidget *QWidgetVideoSinkDelegate::widget() const

 void QWidgetVideoSinkDelegate::setWidget(QWidget *widget)
 {
-    GST_LOG_OBJECT(m_sink, "Setting \"widget\" property to %"GST_PTR_FORMAT, widget);
+    GST_LOG_OBJECT(m_sink, "Setting \"widget\" property to %" GST_PTR_FORMAT, widget);

     if (m_widget) {
         m_widget.data()->removeEventFilter(this);
diff --git elements/gstqtvideosink/gstqtquick2videosink.cpp elements/gstqtvideosink/gstqtquick2videosink.cpp
index 7889fbf..bedc074 100644
--- elements/gstqtvideosink/gstqtquick2videosink.cpp
+++ elements/gstqtvideosink/gstqtquick2videosink.cpp
@@ -248,7 +248,7 @@ gst_qt_quick2_video_sink_show_frame(GstVideoSink *sink, GstBuffer *buffer)
 {
     GstQtQuick2VideoSink *self = GST_QT_QUICK2_VIDEO_SINK (sink);

-    GST_TRACE_OBJECT(self, "Posting new buffer (%"GST_PTR_FORMAT") for rendering.", buffer);
+    GST_TRACE_OBJECT(self, "Posting new buffer (%" GST_PTR_FORMAT ") for rendering.", buffer);

     QCoreApplication::postEvent(self->priv->delegate, new BaseDelegate::BufferEvent(buffer));

diff --git elements/gstqtvideosink/gstqtvideosinkbase.cpp elements/gstqtvideosink/gstqtvideosinkbase.cpp
index 118d0a2..a707e02 100644
--- elements/gstqtvideosink/gstqtvideosinkbase.cpp
+++ elements/gstqtvideosink/gstqtvideosinkbase.cpp
@@ -207,7 +207,7 @@ GstFlowReturn GstQtVideoSinkBase::show_frame(GstVideoSink *video_sink, GstBuffer
 {
     GstQtVideoSinkBase *sink = GST_QT_VIDEO_SINK_BASE(video_sink);

-    GST_TRACE_OBJECT(sink, "Posting new buffer (%"GST_PTR_FORMAT") for rendering.", buffer);
+    GST_TRACE_OBJECT(sink, "Posting new buffer (%" GST_PTR_FORMAT ") for rendering.", buffer);

     QCoreApplication::postEvent(sink->delegate, new BaseDelegate::BufferEvent(buffer));

--
cgit v0.10.2

