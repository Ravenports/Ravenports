# Buildsheet autogenerated by ravenadm tool -- Do not edit.

NAMEBASE=		librsvg
VERSION=		2.54.5
KEYWORDS=		graphics
VARIANTS=		standard
SDESC[standard]=	SVG vector-graphic files rendering library
HOMEPAGE=		http://live.gnome.org/LibRsvg
CONTACT=		nobody

DOWNLOAD_GROUPS=	main norust
SITES[main]=		GNOME/librsvg/2.54
SITES[norust]=		GNOME/librsvg/2.40
DISTFILE[1]=		librsvg-2.54.5.tar.xz:main
DISTFILE[2]=		librsvg-2.40.21.tar.xz:norust
DF_INDEX=		1 2
SPKGS[standard]=	complete
			primary
			docs

OPTIONS_AVAILABLE=	RUSTLESS INTROSPECTION
OPTIONS_STANDARD=	RUSTLESS INTROSPECTION
OPT_ON[sunos]=		RUSTLESS

BUILD_DEPENDS=		python-docutils:single:python_default
BUILDRUN_DEPENDS=	freetype:primary:standard

USES=			cpe gettext-tools gmake gtk-doc png libtool
			pkgconfig perl:build python:build
GNOME_COMPONENTS=	cairo pango gdkpixbuf libxml2 libcroco

DISTNAME=		generic-librsvg

LICENSE=		LGPL21+:primary
LICENSE_TERMS=		primary:{{WRKDIR}}/TERMS
LICENSE_FILE=		LGPL21+:{{WRKSRC}}/COPYING.LIB
LICENSE_SCHEME=		solo

CPE_VENDOR=		gnome
FPC_EQUIVALENT=		graphics/librsvg2-rust

MUST_CONFIGURE=		gnu
CONFIGURE_ARGS=		--disable-vala
			--disable-Bsymbolic
			--docdir={{STD_DOCDIR}}
			--enable-gtk-doc-html=yes

INSTALL_TARGET=		install-strip
INSTALL_REQ_TOOLCHAIN=	yes
PLIST_SUB=		PORTVERSION=2.54.5
			GTK_VERSION=2.10.0

[INTROSPECTION].DESCRIPTION=		Build with introspection
[INTROSPECTION].BUILD_DEPENDS_ON=	python-gi-docgen:single:python_default
[INTROSPECTION].CONFIGURE_ARGS_OFF=	--enable-introspection=no
[INTROSPECTION].CONFIGURE_ARGS_ON=	--enable-gtk-doc
[INTROSPECTION].GNOME_COMPONENTS_ON=	introspection

[RUSTLESS].DESCRIPTION=			Build version 2.40.21 instead (no rust)
[RUSTLESS].BUILD_DEPENDS_OFF=		rust:single:standard
[RUSTLESS].CONFIGURE_ENV_OFF=		CARGO={{LOCALBASE}}/bin/cargo
					RUSTC={{LOCALBASE}}/bin/rustc
[RUSTLESS].LDFLAGS_ON=			-lintl
[RUSTLESS].MAKEFILE_OFF=		VAR1=2.54.5
					SOVERSION=2.48.0
[RUSTLESS].MAKEFILE_ON=			VAR1=2.40.21
					SOVERSION=2.40.21
[RUSTLESS].MAKE_ENV_OFF=		RUSTC={{LOCALBASE}}/bin/rustc

post-patch-RUSTLESS-ON:
	# extract license terms
	${AWK} '/RSVG_H/ {exit}; {print}' ${WRKSRC}/rsvg.h > ${WRKDIR}/TERMS
	# disable gtk3 check
	${REINPLACE_CMD} -e 's|GTK3_REQUIRED=3.[0-9][0-9].[0-9]|GTK3_REQUIRED=9.90.0|g' \
		${WRKSRC}/configure

pre-configure-RUSTLESS-OFF:
	cd ${WRKSRC} && ${SETENV} ${CONFIGURE_ENV} \
		${LOCALBASE}/bin/cargo update

post-install:
	${STRIP_CMD} ${STAGEDIR}${PREFIX}/bin/rsvg-convert

post-patch-RUSTLESS-OFF:
	# extract license terms
	${AWK} '/RSVG_H/ {exit}; {print}' ${WRKSRC}/include/librsvg/rsvg.h > ${WRKDIR}/TERMS
	# disable vendor checksums
	${REINPLACE_CMD} -e 's/"files":{[^}]*}/"files":{}/' \
		${WRKSRC}/vendor/*/.cargo-checksum.json

post-extract:
	${MV} ${WRKDIR}/librsvg-${VAR1} ${WRKSRC}

[FILE:316:descriptions/desc.primary]
The librsvg library is a lightweight library for parsing and rendering
vector-graphic files in SVG format (like the ones made by sodipodi).  It
also includes functions that render anti-aliased fonts using freetype,
including caching of glyphs.  It is used by Nautilus for drawing vector
icons and anti-aliased text.


[FILE:201:distinfo]
4f03190f45324d1fa1f52a79dfcded1f64eaf49b3ae2f88eedab0c07617cae6e     22412260 librsvg-2.54.5.tar.xz
f7628905f1cada84e87e2b14883ed57d8094dca3281d5bcb24ece4279e9a92ba      1655860 librsvg-2.40.21.tar.xz


[FILE:971:manifests/plist.primary]
%%INTROSPECTION-ON%%lib/girepository-1.0/Rsvg-2.0.typelib
%%INTROSPECTION-ON%%share/gir-1.0/Rsvg-2.0.gir
%%RUSTLESS-OFF%%include/librsvg-2.0/librsvg/
 rsvg-features.h
 rsvg-version.h
%%RUSTLESS-ON%%include/librsvg-2.0/librsvg/
 librsvg-enum-types.h
 librsvg-features.h
bin/rsvg-convert
include/librsvg-2.0/librsvg/
 rsvg-cairo.h
 rsvg.h
lib/
 librsvg-2.a
 librsvg-2.so
 librsvg-2.so.%%SOMAJOR%%
 librsvg-2.so.%%SOVERSION%%
lib/gdk-pixbuf-2.0/%%GTK_VERSION%%/loaders/
 libpixbufloader-svg.a
 libpixbufloader-svg.so
lib/pkgconfig/librsvg-2.0.pc
share/man/man1/rsvg-convert.1.gz
share/thumbnailers/librsvg.thumbnailer
@postexec %D/bin/gdk-pixbuf-query-loaders > /dev/null 2>&1 && %D/bin/gdk-pixbuf-query-loaders > %D/lib/gdk-pixbuf-2.0/%%GTK_VERSION%%/loaders.cache 2>/dev/null || /usr/bin/true
@postunexec %D/bin/gdk-pixbuf-query-loaders > /dev/null 2>&1 && %D/bin/gdk-pixbuf-query-loaders > %D/lib/gdk-pixbuf-2.0/%%GTK_VERSION%%/loaders.cache 2>/dev/null || /usr/bin/true


[FILE:3920:manifests/plist.docs]
%%RUSTLESS-OFF%%%%INTROSPECTION-ON%%share/doc/Rsvg-2.0/
 RedHatDisplay-Black.woff
 RedHatDisplay-Black.woff2
 RedHatDisplay-BlackItalic.woff
 RedHatDisplay-BlackItalic.woff2
 RedHatDisplay-Bold.woff
 RedHatDisplay-Bold.woff2
 RedHatDisplay-BoldItalic.woff
 RedHatDisplay-BoldItalic.woff2
 RedHatDisplay-Italic.woff
 RedHatDisplay-Italic.woff2
 RedHatDisplay-Medium.woff
 RedHatDisplay-Medium.woff2
 RedHatDisplay-MediumItalic.woff
 RedHatDisplay-MediumItalic.woff2
 RedHatDisplay-Regular.woff
 RedHatDisplay-Regular.woff2
 RedHatText-Bold.woff
 RedHatText-Bold.woff2
 RedHatText-BoldItalic.woff
 RedHatText-BoldItalic.woff2
 RedHatText-Italic.woff
 RedHatText-Italic.woff2
 RedHatText-Medium.woff
 RedHatText-Medium.woff2
 RedHatText-MediumItalic.woff
 RedHatText-MediumItalic.woff2
 RedHatText-Regular.woff
 RedHatText-Regular.woff2
 Rsvg-2.0.devhelp2
 SourceCodePro-It.ttf.woff
 SourceCodePro-Regular.ttf.woff
 SourceCodePro-Semibold.ttf.woff
 callback.SizeFunc.html
 class.Handle.html
 classes_hierarchy.html
 const.MAJOR_VERSION.html
 const.MICRO_VERSION.html
 const.MINOR_VERSION.html
 const.VERSION.html
 ctor.Handle.new.html
 ctor.Handle.new_from_data.html
 ctor.Handle.new_from_file.html
 ctor.Handle.new_from_gfile_sync.html
 ctor.Handle.new_from_stream_sync.html
 ctor.Handle.new_with_flags.html
 enum.Unit.html
 error.Error.html
 flags.HandleFlags.html
 fonts.css
 func.CHECK_VERSION.html
 func.DEPRECATED_FOR.html
 func.cleanup.html
 func.init.html
 func.pixbuf_from_file.html
 func.pixbuf_from_file_at_max_size.html
 func.pixbuf_from_file_at_size.html
 func.pixbuf_from_file_at_zoom.html
 func.pixbuf_from_file_at_zoom_with_max.html
 func.set_default_dpi.html
 func.set_default_dpi_x_y.html
 func.term.html
 fzy.js
 go-up-symbolic.png
 index.html
 index.json
 main.js
 method.Handle.close.html
 method.Handle.free.html
 method.Handle.get_base_uri.html
 method.Handle.get_desc.html
 method.Handle.get_dimensions.html
 method.Handle.get_dimensions_sub.html
 method.Handle.get_geometry_for_element.html
 method.Handle.get_geometry_for_layer.html
 method.Handle.get_intrinsic_dimensions.html
 method.Handle.get_intrinsic_size_in_pixels.html
 method.Handle.get_metadata.html
 method.Handle.get_pixbuf.html
 method.Handle.get_pixbuf_sub.html
 method.Handle.get_position_sub.html
 method.Handle.get_title.html
 method.Handle.has_sub.html
 method.Handle.internal_set_testing.html
 method.Handle.read_stream_sync.html
 method.Handle.render_cairo.html
 method.Handle.render_cairo_sub.html
 method.Handle.render_document.html
 method.Handle.render_element.html
 method.Handle.render_layer.html
 method.Handle.set_base_gfile.html
 method.Handle.set_base_uri.html
 method.Handle.set_dpi.html
 method.Handle.set_dpi_x_y.html
 method.Handle.set_size_callback.html
 method.Handle.set_stylesheet.html
 method.Handle.write.html
 migrating.html
 overview.html
 property.Handle.base-uri.html
 property.Handle.desc.html
 property.Handle.dpi-x.html
 property.Handle.dpi-y.html
 property.Handle.em.html
 property.Handle.ex.html
 property.Handle.flags.html
 property.Handle.height.html
 property.Handle.metadata.html
 property.Handle.title.html
 property.Handle.width.html
 recommendations.html
 search.js
 solarized-dark.css
 solarized-light.css
 struct.DimensionData.html
 struct.Length.html
 struct.PositionData.html
 struct.Rectangle.html
 style.css
 type_func.Error.quark.html
 urlmap.js
%%RUSTLESS-OFF%%share/doc/librsvg/
 COMPILING.md
 CONTRIBUTING.md
 README.md
 code-of-conduct.md
%%RUSTLESS-ON%%share/gtk-doc/html/rsvg-2.0/
 RsvgHandle.html
 annotation-glossary.html
 api-index-full.html
 home.png
 index.html
 left-insensitive.png
 left.png
 licence.html
 object-tree.html
 right-insensitive.png
 right.png
 rsvg-2.0.devhelp2
 rsvg-Using-RSVG-with-GIO.html
 rsvg-Using-RSVG-with-GdkPixbuf.html
 rsvg-Using-RSVG-with-cairo.html
 rsvg-Version-check-and-feature-tests.html
 rsvg.html
 style.css
 up-insensitive.png
 up.png

