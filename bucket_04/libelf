# Buildsheet autogenerated by ravenadm tool -- Do not edit.

NAMEBASE=		libelf
VERSION=		0.8.13
KEYWORDS=		devel
VARIANTS=		standard
SDESC[standard]=	Public ELF file access library similar to Solaris
HOMEPAGE=		http://www.mr511.de/software/
CONTACT=		nobody

DOWNLOAD_GROUPS=	main
SITES[main]=		http://www.mr511.de/software/
			http://ravenports.elderlinux.org/distcache/
DISTFILE[1]=		libelf-0.8.13.tar.gz:main
DF_INDEX=		1
SPKGS[standard]=	single

OPTIONS_AVAILABLE=	none
OPTIONS_STANDARD=	none

USES=			destdirfix

FPC_EQUIVALENT=		devel/libelf

MUST_CONFIGURE=		gnu
CONFIGURE_ARGS=		--enable-shared
			--enable-extended-format
			--enable-sanity-checks
			--disable-compat
			--disable-nls

[FILE:244:descriptions/desc.single]
This is the public release of libelf, a free ELF object file access
library. If you have problems with applications that use libelf and work
with the commercial (SVR4, Solaris) version but not with this one, please
contact [the libelf author].


[FILE:99:distinfo]
591a9b4ec81c1f2042a97aa60564e0cb79d041c52faa7416acb38bc95bd2c76d       148529 libelf-0.8.13.tar.gz


[FILE:129:manifests/plist.single]
include/libelf/
 elf_repl.h
 gelf.h
 libelf.h
 nlist.h
 sys_elf.h
lib/
 libelf.a
 libelf.so
 libelf.so.0
lib/pkgconfig/libelf.pc


[FILE:1392:patches/patch-configure]
Description: Adapt the configure script to FreeBSD.
 - use the elf.h header;
 - shorten the library .so file name;
 - honor LDFLAGS when linking;
 - do not link against or depend on libc.
Forwarded: not-needed
Author: Kevin Van Maren <vanmaren@fast.cs.utah.edu>,
	Maxim Sobolev <sobomax@FreeBSD.org>,
	Peter Pentchev <roam@FreeBSD.org>
	Ying-Chieh Liao <ijliao@FreeBSD.org>
Last-Update: 2009-11-20

--- configure.orig
+++ configure
@@ -1146,7 +1146,7 @@
 
 fi
 
-for ac_hdr in unistd.h stdint.h fcntl.h
+for ac_hdr in unistd.h stdint.h fcntl.h elf.h
 do
 ac_safe=`echo "$ac_hdr" | sed 'y%./+-%__p_%'`
 echo $ac_n "checking for $ac_hdr""... $ac_c" 1>&6
@@ -3281,7 +3281,7 @@
 fi
 
     case "$host" in
-      *-linux*|*-gnu*)
+      *-linux*|*-gnu*|*-dragonfly*|*-freebsd*|*-solaris*)
 	if test "$GCC" = yes; then
 	  
   
@@ -3336,13 +3336,12 @@
 	    PICFLAGS='-fPIC -DPIC'
 	    if test "$mr_enable_gnu_names" = yes
 	    then SHLIB_SFX='-$(VERSION).so'
-	    else SHLIB_SFX='.so.$(VERSION)'
+	    else SHLIB_SFX='.so.$(MAJOR)'
 	    fi
 	    SHLINK_SFX='.so'
 	    SONAME_SFX='.so.$(MAJOR)'
-	    LINK_SHLIB='$(CC) -shared -Wl,-soname,$(SONAME)'
+	    LINK_SHLIB='$(CC) -shared -Wl,-soname,$(SONAME) $(LDFLAGS)'
 	    INSTALL_SHLIB='$(INSTALL_PROGRAM)'
-	    DEPSHLIBS='-lc'
 	  else
 	    echo "configure: warning: shared libraries not supported for $host" 1>&2
 	    mr_enable_shared=no


[FILE:454:patches/patch-lib__sys_elf.h.in]
Description: Provide the missing definitions for the ELF magic bytes.
Forwarded: no
Author: Vasil Dimov <vd@datamax.bg>
Last-Update: 2009-11-20

--- lib/sys_elf.h.in.orig
+++ lib/sys_elf.h.in
@@ -80,6 +80,13 @@
  */
 #ifdef __LIBELF_HEADER_ELF_H
 
+#ifndef ELFMAG
+#define ELFMAG		"\177ELF"
+#endif /* ELFMAG */
+#ifndef SELFMAG
+#define SELFMAG		4
+#endif /* SELFMAG */
+
 # ifndef ELF32_FSZ_ADDR
 #  define ELF32_FSZ_ADDR	4
 #  define ELF32_FSZ_HALF	2

