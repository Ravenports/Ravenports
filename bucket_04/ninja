# Buildsheet autogenerated by ravenadm tool -- Do not edit.

NAMEBASE=		ninja
VERSION=		1.9.0
KEYWORDS=		devel
VARIANTS=		standard
SDESC[standard]=	Small build system closest in spirit to Make
HOMEPAGE=		https://ninja-build.org/
CONTACT=		nobody

DOWNLOAD_GROUPS=	main
SITES[main]=		GITHUB/ninja-build:ninja:v1.9.0
DISTFILE[1]=		generated:main
DF_INDEX=		1
SPKGS[standard]=	single

OPTIONS_AVAILABLE=	none
OPTIONS_STANDARD=	none

USES=			python

LICENSE=		APACHE20:single
LICENSE_TERMS=		single:{{WRKDIR}}/TERMS
LICENSE_FILE=		APACHE20:{{WRKSRC}}/COPYING
LICENSE_AWK=		TERMS:"^$$"
LICENSE_SOURCE=		TERMS:{{WRKSRC}}/src/ninja.cc
LICENSE_SCHEME=		solo

FPC_EQUIVALENT=		devel/ninja

post-patch:
	${REINPLACE_CMD} "s/'-g', //" ${WRKSRC}/configure.py

do-build:
	(cd ${WRKSRC} && \
		CXX="${CXX}" CFLAGS="${CXXFLAGS}" ${PYTHON_CMD} configure.py --bootstrap)

do-install:
	${INSTALL_PROGRAM} ${WRKSRC}/ninja ${STAGEDIR}${PREFIX}/bin

[FILE:523:descriptions/desc.single]
Ninja is yet another build system. It takes as input the interdependencies
of files (typically source code and output executables) and orchestrates
building them, quickly.

Ninja joins a sea of other build systems. Its distinguishing goal is to be
fast. It is born from my work on the Chromium browser project, which has
over 30,000 source files and whose other build systems (including one built
from custom non-recursive Makefiles) can take ten seconds to start building
after changing one file. Ninja is under a second.


[FILE:109:distinfo]
5d7ec75828f8d3fd1a0c2f31b5b0cea780cdfe1031359228c428c1a48bfcd5b9       190860 ninja-build-ninja-1.9.0.tar.gz


[FILE:10:manifests/plist.single]
bin/ninja


[FILE:711:patches/patch-src_disk__interface.cc]
--- src/disk_interface.cc.orig	2019-01-30 18:58:59 UTC
+++ src/disk_interface.cc
@@ -206,6 +206,7 @@ TimeStamp RealDiskInterface::Stat(const
   return ((int64_t)st.st_mtimespec.tv_sec * 1000000000LL +
           st.st_mtimespec.tv_nsec);
 #elif (_POSIX_C_SOURCE >= 200809L || _XOPEN_SOURCE >= 700 || defined(_BSD_SOURCE) || defined(_SVID_SOURCE) || \
+       defined(__DragonFly__) || \
        defined(__BIONIC__) || (defined (__SVR4) && defined (__sun)) || defined(__FreeBSD__))
   // For glibc, see "Timestamp files" in the Notes of http://www.kernel.org/doc/man-pages/online/pages/man2/stat.2.html
   // newlib, uClibc and musl follow the kernel (or Cygwin) headers and define the right macro values above.

