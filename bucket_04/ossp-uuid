# Buildsheet autogenerated by ravenadm tool -- Do not edit.

NAMEBASE=		ossp-uuid
VERSION=		1.6.2
REVISION=		3
KEYWORDS=		misc devel
VARIANTS=		standard
SDESC[standard]=	Tool/Lib for generating Universally Unique IDs
HOMEPAGE=		http://www.ossp.org/pkg/lib/uuid/
CONTACT=		nobody

DOWNLOAD_GROUPS=	main
SITES[main]=		http://www.mirrorservice.org/sites/ftp.ossp.org/pkg/lib/uuid/
			ftp://ftp.ntua.gr/pub/utils/ossp/lib/uuid/
DISTFILE[1]=		uuid-1.6.2.tar.gz:main
DF_INDEX=		1
SPKGS[standard]=	complete
			primary
			dev
			man

OPTIONS_AVAILABLE=	none
OPTIONS_STANDARD=	none

USES=			cmake c++:primary mbsdfix

DISTNAME=		uuid-1.6.2

LICENSE=		MIT:primary
LICENSE_FILE=		MIT:{{WRKDIR}}/LICENSE
LICENSE_AWK=		MIT:"^$$"
LICENSE_SOURCE=		MIT:{{WRKSRC}}/uuid.c
LICENSE_SCHEME=		solo

FPC_EQUIVALENT=		misc/ossp-uuid

post-install:
	${STRIP_CMD} ${STAGEDIR}${PREFIX}/lib/ossp/lib*.so
	${STRIP_CMD} ${STAGEDIR}${PREFIX}/bin/uuid

pre-configure:
	# Run gnu configure script to generate config.h
	(cd ${WRKSRC} && ${SETENV} ${SCRIPTS_ENV} ${SH} configure\
		--prefix=${PREFIX} \
		--with-cxx \
		--includedir=${PREFIX}/include/ossp \
		--libdir=${PREFIX}/lib/ossp \
	)

post-extract:
	${CP} ${FILESDIR}/CMakeLists.txt ${WRKSRC}/
	${CP} ${MK_TEMPLATES}/config.sub ${WRKSRC}/config.sub
	${CP} ${MK_TEMPLATES}/config.guess ${WRKSRC}/config.guess

[FILE:385:descriptions/desc.primary]
OSSP uuid is a ISO-C and Perl application programming interface (API)
and corresponding command line interface (CLI) for the generation of
DCE 1.1 and ISO/IEC 11578:1996 compliant Universally Unique Identifiers
(UUID). It supports DCE 1.1 variant UUIDs of version 1 (time and node
based), version 3 (name based, MD5), version 4 (random number based) and
version 5 (name based, SHA-1).


[FILE:96:distinfo]
11a615225baa5f8bb686824423f50e4427acd3f70d394765bdff32801f0fd5b0       397048 uuid-1.6.2.tar.gz


[FILE:108:manifests/plist.primary]
bin/
 uuid
 uuid-config
lib/ossp/
 libuuid++.so.16
 libuuid++.so.16.0.22
 libuuid.so.16
 libuuid.so.16.0.22


[FILE:120:manifests/plist.dev]
include/ossp/
 uuid++.hh
 uuid.h
lib/ossp/
 libuuid++.a
 libuuid++.so
 libuuid.a
 libuuid.so
lib/pkgconfig/ossp-uuid.pc


[FILE:95:manifests/plist.man]
share/man/man1/
 uuid-config.1.gz
 uuid.1.gz
share/man/man3/
 ossp-uuid++.3.gz
 ossp-uuid.3.gz


[FILE:473:patches/patch-uuid.pc.in]
--- uuid.pc.in.orig	2008-03-07 10:49:59 UTC
+++ uuid.pc.in
@@ -29,14 +29,14 @@
 
 prefix=@prefix@
 exec_prefix=${prefix}
-includedir=${prefix}/include
-libdir=${exec_prefix}/lib
+includedir=@includedir@
+libdir=@libdir@
 
 Name: OSSP uuid
 Description: Universally Unique Identifier (UUID) Library
 Version: @UUID_VERSION_RAW@
 URL: http://www.ossp.org/pkg/lib/uuid/
 Cflags: -I${includedir}
-Libs: -L${libdir} -luuid
+Libs: -L${libdir} -lossp-uuid
 Libs.private: @LIBS@
 


[FILE:2168:files/CMakeLists.txt]
cmake_minimum_required(VERSION 3.16)
project(ossp-uuid)

SET(CMAKE_SKIP_BUILD_RPATH  TRUE)

set (libsrcs
	${CMAKE_SOURCE_DIR}/uuid.c
	${CMAKE_SOURCE_DIR}/uuid_md5.c
	${CMAKE_SOURCE_DIR}/uuid_sha1.c
	${CMAKE_SOURCE_DIR}/uuid_prng.c
	${CMAKE_SOURCE_DIR}/uuid_mac.c
	${CMAKE_SOURCE_DIR}/uuid_time.c
	${CMAKE_SOURCE_DIR}/uuid_ui64.c
	${CMAKE_SOURCE_DIR}/uuid_ui128.c
	${CMAKE_SOURCE_DIR}/uuid_str.c
)

set (xxsrcs ${CMAKE_SOURCE_DIR}/uuid++.cc)
set (uuidsrc ${CMAKE_SOURCE_DIR}/uuid_cli.c)

include_directories(
	${CMAKE_SOURCE_DIR}
	${CMAKE_CURRENT_BINARY_DIR}
)

add_library(uuid_static ${libsrcs})
add_library(uuidxx_static ${libsrcs} ${xxsrcs})

add_library(uuid SHARED ${libsrcs})
add_library(uuid++ SHARED ${libsrcs} ${xxsrcs})

add_executable(cli_uuid ${uuidsrc})

target_compile_definitions(uuid_static PUBLIC HAVE_CONFIG_H)
target_compile_definitions(uuidxx_static PUBLIC HAVE_CONFIG_H)
target_compile_definitions(uuid PUBLIC DHAVE_CONFIG_H)
target_compile_definitions(uuid++ PUBLIC HAVE_CONFIG_H)
target_compile_definitions(cli_uuid PUBLIC HAVE_CONFIG_H)

set_target_properties(uuid uuid++ PROPERTIES
	VERSION   16.0.22
	SOVERSION 16)

target_link_libraries(cli_uuid uuid_static)

# installation

install(TARGETS uuid uuid++
	LIBRARY DESTINATION ${CMAKE_INSTALL_LIBDIR}/ossp
)

install(FILES ${CMAKE_CURRENT_BINARY_DIR}/libuuidxx_static.a
	RENAME libuuid++.a
	DESTINATION lib/ossp)

install(FILES ${CMAKE_CURRENT_BINARY_DIR}/libuuid_static.a
	RENAME libuuid.a
	DESTINATION lib/ossp)

install(FILES ${CMAKE_SOURCE_DIR}/uuid.1
	DESTINATION share/man/man1)

install(FILES ${CMAKE_SOURCE_DIR}/uuid-config.1
	DESTINATION share/man/man1)

install(FILES ${CMAKE_SOURCE_DIR}/uuid++.3
	RENAME ossp-uuid++.3
	DESTINATION share/man/man3)

install(FILES ${CMAKE_SOURCE_DIR}/uuid.3
	RENAME ossp-uuid.3
	DESTINATION share/man/man3)

install(FILES ${CMAKE_SOURCE_DIR}/uuid.pc
	RENAME ossp-uuid.pc
	DESTINATION lib/pkgconfig)

install(FILES ${CMAKE_SOURCE_DIR}/uuid++.hh
 	${CMAKE_SOURCE_DIR}/uuid.h
 	DESTINATION include/ossp)

install(PROGRAMS ${CMAKE_CURRENT_BINARY_DIR}/cli_uuid RENAME uuid DESTINATION bin)
install(PROGRAMS ${CMAKE_SOURCE_DIR}/uuid-config DESTINATION bin)

