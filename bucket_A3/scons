# Buildsheet autogenerated by ravenadm tool -- Do not edit.

NAMEBASE=		scons
VERSION=		2.5.1
KEYWORDS=		devel python
VARIANTS=		standard
SDESC[standard]=	Alternative build tool competing with make
HOMEPAGE=		http://www.scons.org/
CONTACT=		nobody

DOWNLOAD_GROUPS=	main
SITES[main]=		SF/scons/scons/2.5.1
DISTFILE[1]=		scons-2.5.1.tar.gz:main
DF_INDEX=		1
SPKGS[standard]=	single

OPTIONS_AVAILABLE=	none
OPTIONS_STANDARD=	none

RUN_DEPENDS=		m4:primary:standard

USES=			python:py27 shebangfix

LICENSE=		MIT:single
LICENSE_SCHEME=		solo
LICENSE_FILE=		MIT:{{WRKSRC}}/LICENSE.txt

FPC_EQUIVALENT=		devel/scons
SHEBANG_FILES=		script/scons*

post-patch:
	@${FIND} ${WRKSRC} -name \*.orig -delete

[FILE:351:descriptions/desc.single]
SCons is an Open Source software construction tool???that is, a
next-generation build tool. Think of SCons as an improved, cross-platform
substitute for the classic Make utility with integrated functionality
similar to autoconf/automake and compiler caches such as ccache. In short,
SCons is an easier, more reliable and faster way to build software.


[FILE:97:distinfo]
0b25218ae7b46a967db42f2a53721645b3d42874a65f9552ad16ce26d30f51f2       620909 scons-2.5.1.tar.gz


[FILE:451:patches/patch-engine_SCons_Tool_m4.py]
--- engine/SCons/Tool/m4.py.orig	2015-11-09 11:25:09 UTC
+++ engine/SCons/Tool/m4.py
@@ -49,7 +49,7 @@ def generate(env):
     # file and run from there.
     # The src_suffix setup is like so: file.c.m4 -> file.c,
     # file.cpp.m4 -> file.cpp etc.
-    env['M4']      = 'm4'
+    env['M4']      = 'gm4'
     env['M4FLAGS'] = SCons.Util.CLVar('-E')
     env['M4COM']   = 'cd ${SOURCE.rsrcdir} && $M4 $M4FLAGS < ${SOURCE.file} > ${TARGET.abspath}'
 


[FILE:1115:patches/patch-setup.py]
--- setup.py.orig	2016-11-03 18:02:48 UTC
+++ setup.py
@@ -76,7 +76,7 @@ else:
 
 import distutils
 import distutils.core
-import distutils.command.install
+import setuptools.command.install
 import distutils.command.install_data
 import distutils.command.install_lib
 import distutils.command.install_scripts
@@ -92,7 +92,7 @@ def get_build_version():
 
 distutils.msvccompiler.get_build_version = get_build_version
 
-_install = distutils.command.install.install
+_install = setuptools.command.install.install
 _install_data = distutils.command.install_data.install_data
 _install_lib = distutils.command.install_lib.install_lib
 _install_scripts = distutils.command.install_scripts.install_scripts
@@ -375,7 +375,7 @@ class install_data(_install_data):
             if is_win32:
                 dir = 'Doc'
             else:
-                dir = os.path.join('man', 'man1')
+                dir = os.path.join('share', 'man', 'man1')
             self.data_files = [(dir, man_pages)]
             man_dir = os.path.join(self.install_dir, dir)
             msg = "Installed SCons man pages into %s" % man_dir

