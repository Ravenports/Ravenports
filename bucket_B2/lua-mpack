# Buildsheet autogenerated by ravenadm tool -- Do not edit.

NAMEBASE=		lua-mpack
VERSION=		1.0.7
KEYWORDS=		devel
VARIANTS=		lua52 lua53
SDESC[lua52]=		Lua 5.2 binding to libmpack
SDESC[lua53]=		Lua 5.3 binding to libmpack
HOMEPAGE=		https://github.com/libmpack/libmpack-lua
CONTACT=		nobody

DOWNLOAD_GROUPS=	main mpack
SITES[mpack]=		GITHUB/libmpack:libmpack:1.0.5
SITES[main]=		GITHUB/libmpack:libmpack-lua:1.0.7
DISTFILE[1]=		generated:main
DISTFILE[2]=		generated:mpack
DF_INDEX=		1 2
SPKGS[lua52]=		single
SPKGS[lua53]=		single

OPTIONS_AVAILABLE=	LUA52 LUA53
OPTIONS_STANDARD=	none
VOPTS[lua52]=		LUA52=ON LUA53=OFF
VOPTS[lua53]=		LUA52=OFF LUA53=ON

RUN_DEPENDS=		libmpack:single:standard

[LUA52].DESCRIPTION=			Build with Lua 5.2
[LUA52].USES_ON=			lua:5.2

[LUA53].DESCRIPTION=			Build with Lua 5.3
[LUA53].USES_ON=			lua:5.3

do-build:
	(cd ${WRKSRC} && ${CC} ${CFLAGS} -fPIC -I${LUA_INCDIR} -shared lmpack.c \
		-o ${WRKSRC}/mpack.so ${LDFLAGS} \
		${LUA_LIBDIR}/liblua-${LUA_VER}.so)

post-extract:
	${MV} ${WRKDIR}/libmpack-1* ${WRKSRC}/mpack-src

do-install:
	@${MKDIR} ${STAGEDIR}${LUA_MODLIBDIR}
	${INSTALL_LIB} ${WRKSRC}/mpack.so ${STAGEDIR}${LUA_MODLIBDIR}

[FILE:48:descriptions/desc.single]
This package contains Lua bindings to libmpack.


[FILE:222:distinfo]
2ebe9c8972c378040c9b8505f5fb40a0c64d990cd68be6a62989362b18294d0a        15606 libmpack-libmpack-lua-1.0.7.tar.gz
4ce91395d81ccea97d3ad4cb962f8540d166e59d3e2ddce8a22979b49f108956        32966 libmpack-libmpack-1.0.5.tar.gz


[FILE:27:manifests/plist.single]
%%LUA_MODLIBDIR%%/mpack.so

