# Buildsheet autogenerated by ravenadm tool -- Do not edit.

NAMEBASE=		gif
VERSION=		5.1.4
KEYWORDS=		graphics
VARIANTS=		standard
SDESC[standard]=	GIF image format library and tools
HOMEPAGE=		https://sourceforge.net/projects/giflib/
CONTACT=		nobody

DOWNLOAD_GROUPS=	main
SITES[main]=		SF/giflib
DISTFILE[1]=		giflib-5.1.4.tar.bz2:main
DF_INDEX=		1
SPKGS[standard]=	single

OPTIONS_AVAILABLE=	none
OPTIONS_STANDARD=	none

USES=			libtool

DISTNAME=		giflib-5.1.4

LICENSE=		MIT:single
LICENSE_SCHEME=		solo
LICENSE_FILE=		MIT:{{WRKSRC}}/COPYING

FPC_EQUIVALENT=		graphics/giflib

MUST_CONFIGURE=		gnu

INSTALL_TARGET=		install-strip

TEST_TARGET=		check-TESTS

post-install:
	@${INSTALL_MAN} ${WRKSRC}/doc/*.1 ${STAGEDIR}${MANPREFIX}/man/man1/

[FILE:170:descriptions/desc.single]
giflib is a library for reading and writing gif images.
It is API and ABI compatible with libungif which was in wide use
while the LZW compression algorithm was patented


[FILE:99:distinfo]
df27ec3ff24671f80b29e6ab1c4971059c14ac3db95406884fc26574631ba8d5       639703 giflib-5.1.4.tar.bz2


[FILE:351:manifests/plist.single]
bin/
 gif2rgb
 gifbuild
 gifclrmp
 gifecho
 giffix
 gifinto
 giftext
 giftool
include/gif_lib.h
lib/
 libgif.a
 libgif.so
 libgif.so.7
 libgif.so.7.0.0
share/man/man1/
 gif2rgb.1.gz
 gifbg.1.gz
 gifbuild.1.gz
 gifclrmp.1.gz
 gifcolor.1.gz
 gifecho.1.gz
 giffix.1.gz
 gifhisto.1.gz
 gifinto.1.gz
 giflib.1.gz
 giftext.1.gz
 giftool.1.gz
 gifwedge.1.gz


[FILE:537:patches/patch-lib_gif__lib.h]
--- lib/gif_lib.h.orig	2016-04-02 15:35:30 UTC
+++ lib/gif_lib.h
@@ -244,9 +244,6 @@ extern ColorMapObject *GifUnionColorMap(
                                      GifPixelType ColorTransIn2[]);
 extern int GifBitSize(int n);
 
-extern void *
-reallocarray(void *optr, size_t nmemb, size_t size);
-
 /******************************************************************************
  Support for the in-core structures allocation (slurp mode).              
 ******************************************************************************/


[FILE:1021:patches/patch-tests_makefile]
--- tests/makefile.orig	2014-05-16 10:46:53 UTC
+++ tests/makefile
@@ -27,7 +27,7 @@ rebuild: render-rebuild \
 UTILS = ../util
 PICS = ../pic
 
-GIFS := $(shell ls ../pic/*.gif)
+GIFS := `ls ../pic/*.gif`
 
 # Test decompression and rendering by unpacking images,
 # converting them to RGB, and comparing that result to a check file.
@@ -103,10 +103,10 @@ giffilter-regress:
 
 giffix-rebuild:
 	@echo "Rebuilding giffix test."
-	@head --bytes=-20 <$(PICS)/treescap.gif | $(UTILS)/giffix 2>/dev/null | $(UTILS)/gifbuild -d >giffixed.ico
+	@ghead --bytes=-20 <$(PICS)/treescap.gif | $(UTILS)/giffix 2>/dev/null | $(UTILS)/gifbuild -d >giffixed.ico
 giffix-regress:
 	@echo "giffix: Testing giffix behavior"
-	@head --bytes=-20 <$(PICS)/treescap.gif | $(UTILS)/giffix 2>/dev/null | $(UTILS)/gifbuild -d | diff -u giffixed.ico -
+	@ghead --bytes=-20 <$(PICS)/treescap.gif | $(UTILS)/giffix 2>/dev/null | $(UTILS)/gifbuild -d | diff -u giffixed.ico -
 
 gifinto-regress:
 	@echo "gifinto: Checking behavior on short files."


[FILE:987:dragonfly/patch-hide-reallocarray]
--- lib/dgif_lib.c.orig	2016-01-07 10:44:44 UTC
+++ lib/dgif_lib.c
@@ -41,6 +41,9 @@ static int DGifDecompressInput(GifFileTy
 static int DGifBufferedInput(GifFileType *GifFile, GifByteType *Buf,
                              GifByteType *NextByte);
 
+extern void *
+reallocarray(void *optr, size_t nmemb, size_t size) __dso_hidden;
+
 /******************************************************************************
  Open a new GIF file for read, given by its name.
  Returns dynamically allocated GifFileType pointer which serves as the GIF
--- lib/gifalloc.c.orig	2015-07-13 04:05:46 UTC
+++ lib/gifalloc.c
@@ -12,6 +12,9 @@
 
 #define MAX(x, y)    (((x) > (y)) ? (x) : (y))
 
+extern void *
+reallocarray(void *optr, size_t nmemb, size_t size) __dso_hidden;
+
 /******************************************************************************
  Miscellaneous utility functions                          
 ******************************************************************************/


[FILE:979:freebsd/patch-hide-reallocarray]
--- lib/dgif_lib.c.orig	2016-04-02 15:34:00 UTC
+++ lib/dgif_lib.c
@@ -41,6 +41,9 @@ static int DGifDecompressInput(GifFileTy
 static int DGifBufferedInput(GifFileType *GifFile, GifByteType *Buf,
                              GifByteType *NextByte);
 
+extern void *
+reallocarray(void *optr, size_t nmemb, size_t size) __hidden;
+
 /******************************************************************************
  Open a new GIF file for read, given by its name.
  Returns dynamically allocated GifFileType pointer which serves as the GIF
--- lib/gifalloc.c.orig	2015-07-13 04:05:46 UTC
+++ lib/gifalloc.c
@@ -12,6 +12,9 @@
 
 #define MAX(x, y)    (((x) > (y)) ? (x) : (y))
 
+extern void *
+reallocarray(void *optr, size_t nmemb, size_t size) __hidden;
+
 /******************************************************************************
  Miscellaneous utility functions                          
 ******************************************************************************/

