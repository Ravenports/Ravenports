# Buildsheet autogenerated by ravenadm tool -- Do not edit.

NAMEBASE=		libb64
VERSION=		2.0.0.1
REVISION=		1
KEYWORDS=		converters mail
VARIANTS=		std
SDESC[std]=		Base64 Encoding/Decoding Routines
HOMEPAGE=		https://github.com/libb64/libb64
CONTACT=		nobody

DOWNLOAD_GROUPS=	main
SITES[main]=		GITHUB/libb64:libb64:v2.0.0.1
DISTFILE[1]=		generated:main
DF_INDEX=		1
SPKGS[std]=		set
			primary
			dev

OPTIONS_AVAILABLE=	none
OPTIONS_STANDARD=	none

USES=			gmake

LICENSE=		PUBDOM:primary
LICENSE_FILE=		PUBDOM:{{WRKSRC}}/LICENSE.md
LICENSE_SCHEME=		solo

FPC_EQUIVALENT=		converters/libb64

BUILD_TARGET=		all_src

do-install:
	${INSTALL_DATA} ${WRKSRC}/src/libb64.a ${STAGEDIR}${PREFIX}/lib
	${INSTALL_LIB} ${WRKSRC}/src/libb64.so.0 ${STAGEDIR}${PREFIX}/lib
	${LN} -fs libb64.so.0 ${STAGEDIR}${PREFIX}/lib/libb64.so
	${MKDIR} ${STAGEDIR}${PREFIX}/include/b64
	${INSTALL_DATA} ${WRKSRC}/include/b64/*.h \
		${STAGEDIR}${PREFIX}/include/b64

[FILE:423:descriptions/desc.primary]
libb64 is a library of ANSI C routines for fast encoding/decoding of data
into and from a Base64-encoded format.  C++ wrappers are included, as well
as the source code for standalone encoding and decoding executables.

Base64 uses a subset of displayable ASCII characters, and is therefore a
useful encoding for storing binary data in a text file, such as XML, or
sending binary data over text-only communication channels.


[FILE:107:distinfo]
ce8e578a953a591bd4a6f157eec310b9a4c2e6f10ade2fdda6ae6bafaf798b98        15766 libb64-libb64-2.0.0.1.tar.gz


[FILE:16:manifests/plist.primary]
lib/libb64.so.0


[FILE:92:manifests/plist.dev]
include/b64/
 ccommon.h
 cdecode.h
 cencode.h
 decode.h
 encode.h
lib/
 libb64.a
 libb64.so


[FILE:867:patches/patch-src_Makefile]
--- src/Makefile.orig	2018-02-26 16:30:48 UTC
+++ src/Makefile
@@ -1,9 +1,10 @@
-LIBRARIES = libb64.a
+LIBRARIES = libb64.a libb64.so
+SOVERSION ?= 0
 
 # Build flags (uncomment one)
 #############################
 # Release build flags
-CFLAGS += -O3
+#CFLAGS += -O3
 #############################
 # Debug build flags
 #CFLAGS += -g
@@ -15,7 +16,7 @@ TARGETS = $(LIBRARIES)
 
 LINK.o = gcc
 
-CFLAGS += -Werror -pedantic
+CFLAGS += -Werror -pedantic -fsigned-char
 CFLAGS += -I../include
 
 vpath %.h ../include/b64
@@ -27,6 +28,15 @@ all: $(TARGETS) #strip
 libb64.a: cencode.o cdecode.o
 	$(AR) $(ARFLAGS) $@ $^
 
+libb64.so.$(SOVERSION): cencode.So cdecode.So
+	$(CC) $(CFLAGS) $(LDFLAGS) -shared -Wl,-soname,$@ -o $@ $^
+
+%.So: %.c
+	$(CC) -fPIC -c $(CFLAGS) $(CPPFLAGS) $< -o $@
+
+%.so: %.so.$(SOVERSION)
+	ln -fs $< $@
+
 strip:
 	strip $(BINARIES) *.exe
 

