# Buildsheet autogenerated by ravenadm tool -- Do not edit.

NAMEBASE=		libb64
VERSION=		1.2.1
KEYWORDS=		converters mail
VARIANTS=		standard
SDESC[standard]=	Base64 Encoding/Decoding Routines
HOMEPAGE=		http://libb64.sourceforge.net/
CONTACT=		nobody

DOWNLOAD_GROUPS=	main
SITES[main]=		SF/libb64/libb64/libb64
DISTFILE[1]=		libb64-1.2.1.zip:main
DF_INDEX=		1
SPKGS[standard]=	single

OPTIONS_AVAILABLE=	none
OPTIONS_STANDARD=	none

USES=			gmake

LICENSE=		PUBDOM:single
LICENSE_FILE=		PUBDOM:{{WRKSRC}}/LICENSE
LICENSE_SCHEME=		solo

FPC_EQUIVALENT=		converters/libb64

BUILD_TARGET=		all_src

do-install:
	${INSTALL_DATA} ${WRKSRC}/src/libb64.a ${STAGEDIR}${PREFIX}/lib
	${INSTALL_LIB} ${WRKSRC}/src/libb64.so.0 ${STAGEDIR}${PREFIX}/lib
	${LN} -fs libb64.so.0 ${STAGEDIR}${PREFIX}/lib/libb64.so
	${MKDIR} ${STAGEDIR}${PREFIX}/include/b64
	${INSTALL_DATA} ${WRKSRC}/include/b64/*.h \
		${STAGEDIR}${PREFIX}/include/b64

[FILE:423:descriptions/desc.single]
libb64 is a library of ANSI C routines for fast encoding/decoding of data
into and from a Base64-encoded format.  C++ wrappers are included, as well
as the source code for standalone encoding and decoding executables.

Base64 uses a subset of displayable ASCII characters, and is therefore a
useful encoding for storing binary data in a text file, such as XML, or
sending binary data over text-only communication channels.


[FILE:95:distinfo]
20106f0ba95cfd9c35a13c71206643e3fb3e46512df3e2efb2fdbf87116314b2        23316 libb64-1.2.1.zip


[FILE:94:manifests/plist.single]
include/b64/
 cdecode.h
 cencode.h
 decode.h
 encode.h
lib/
 libb64.a
 libb64.so
 libb64.so.0


[FILE:867:patches/patch-src_Makefile]
--- src/Makefile.orig	2013-06-18 12:49:36 UTC
+++ src/Makefile
@@ -1,9 +1,10 @@
-LIBRARIES = libb64.a
+LIBRARIES = libb64.a libb64.so
+SOVERSION ?= 0
 
 # Build flags (uncomment one)
 #############################
 # Release build flags
-CFLAGS += -O3
+#CFLAGS += -O3
 #############################
 # Debug build flags
 #CFLAGS += -g
@@ -15,7 +16,7 @@ TARGETS = $(LIBRARIES)
 
 LINK.o = gcc
 
-CFLAGS += -Werror -pedantic
+CFLAGS += -Werror -pedantic -fsigned-char
 CFLAGS += -I../include
 
 vpath %.h ../include/b64
@@ -27,6 +28,15 @@ all: $(TARGETS) #strip
 libb64.a: cencode.o cdecode.o
 	$(AR) $(ARFLAGS) $@ $^
 
+libb64.so.$(SOVERSION): cencode.So cdecode.So
+	$(CC) $(CFLAGS) $(LDFLAGS) -shared -Wl,-soname,$@ -o $@ $^
+
+%.So: %.c
+	$(CC) -fPIC -c $(CFLAGS) $(CPPFLAGS) $< -o $@
+
+%.so: %.so.$(SOVERSION)
+	ln -fs $< $@
+
 strip:
 	strip $(BINARIES) *.exe
 

