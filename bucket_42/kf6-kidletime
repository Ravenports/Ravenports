# Buildsheet autogenerated by ravenadm tool -- Do not edit.

NAMEBASE=		kf6-kidletime
VERSION=		6.23.0
KEYWORDS=		devel
VARIANTS=		std
SDESC[std]=		KF6 idle time reporting of user and system
HOMEPAGE=		https://api.kde.org/kidletime-index.html
CONTACT=		Michael_Reim[kraileth@elderlinux.org]

DOWNLOAD_GROUPS=	main
SITES[main]=		https://download.kde.org/stable/frameworks/6.23/
DISTFILE[1]=		kidletime-6.23.0.tar.xz:main
DIST_SUBDIR=		kde6
DF_INDEX=		1
SPKGS[std]=		set
			primary
			dev

OPTIONS_AVAILABLE=	EPOLLSHIM
OPTIONS_STANDARD=	EPOLLSHIM
OPT_ON[freebsd]=	EPOLLSHIM

BUILD_DEPENDS=		kf6-extra-cmake-modules:primary:std
			plasma-wayland-protocols:set:std
			qt6-qtbase:dev:std
			qt6-qtwayland:dev:std
			wayland:dev:std
			wayland:tools:std
			wayland-protocols:single:std
			qt6-qttools:set:std
BUILDRUN_DEPENDS=	kf6-kconfig:primary:std
			qt6-qtbase:primary:std
			qt6-qtwayland:primary:std
			wayland:primary:std

USES=			cmake
XORG_COMPONENTS=	x11 xext xscrnsaver

DISTNAME=		kidletime-6.23.0

LICENSE=		LGPL21+:primary MIT:primary
LICENSE_TERMS=		primary:{{WRKDIR}}/TERMS
LICENSE_FILE=		LGPL21+:{{WRKSRC}}/LICENSES/LGPL-2.1-or-later.txt
			MIT:{{WRKSRC}}/LICENSES/MIT.txt
LICENSE_SCHEME=		multi

FPC_EQUIVALENT=		devel/kf6-kidletime

SOVERSION=		6.23.0

CMAKE_ARGS=		-DCMAKE_PREFIX_PATH:PATH={{PREFIX}}/lib/qt6/cmake

[EPOLLSHIM].DESCRIPTION=		Platform depends on libepoll-shim
[EPOLLSHIM].BUILDRUN_DEPENDS_ON=	libepoll-shim:primary:std
[EPOLLSHIM].BUILD_DEPENDS_ON=		libepoll-shim:dev:std

post-stage:
	${STRIP_CMD} ${STAGEDIR}${PREFIX}/lib/libKF6IdleTime.so
.for p in WaylandPlugin XcbPlugin0 XcbPlugin1
	${STRIP_CMD} ${STAGEDIR}${PREFIX}/lib/qt6/plugins/kf6/org.kde.kidletime.platforms/KF6IdleTime${p}.so
.endfor

post-extract:
	${ECHO} "Terms extracted from 'src/kidletime.h':" > ${WRKDIR}/TERMS
	${SED} -n '/ifndef/!p;//q' ${WRKSRC}/src/kidletime.h >> ${WRKDIR}/TERMS
	${ECHO} "Terms extracted from 'src/plugins/xsync/fixx11h.h':" >> ${WRKDIR}/TERMS
	${SED} -n '/ifdef/!p;//q' ${WRKSRC}/src/plugins/xsync/fixx11h.h >> ${WRKDIR}/TERMS

[FILE:237:descriptions/desc.primary]
KIdleTime is a singleton reporting information on idle time. It is useful 
not only for finding out about the current idle time of the PC, but also 
for getting notified upon idle time events, such as custom timeouts, or 
user activity.


[FILE:107:distinfo]
4d5e9086d260c9550f1d732d2f6481d34517ba9f571f2e7d76ed9887adb2c97b        30816 kde6/kidletime-6.23.0.tar.xz


[FILE:277:manifests/plist.primary]
lib/
 libKF6IdleTime.so.%%SOMAJOR%%
 libKF6IdleTime.so.%%SOVERSION%%
lib/qt6/plugins/kf6/org.kde.kidletime.platforms/
 KF6IdleTimeWaylandPlugin.so
 KF6IdleTimeXcbPlugin0.so
 KF6IdleTimeXcbPlugin1.so
share/qlogging-categories6/
 kidletime.categories
 kidletime.renamecategories


[FILE:308:manifests/plist.dev]
include/KF6/KIdleTime/
 KIdleTime
 kidletime.h
 kidletime_export.h
 kidletime_version.h
include/KF6/KIdleTime/private/kabstractidletimepoller_p.h
lib/libKF6IdleTime.so
lib/cmake/KF6IdleTime/
 KF6IdleTimeConfig.cmake
 KF6IdleTimeConfigVersion.cmake
 KF6IdleTimeTargets-release.cmake
 KF6IdleTimeTargets.cmake


[FILE:308:patches/patch-metainfo.yaml]
--- metainfo.yaml.orig	2024-05-04 11:10:04.107229000 +0200
+++ metainfo.yaml	2024-05-04 11:10:55.294671000 +0200
@@ -5,6 +5,9 @@
 platforms:
     - name: Linux
     - name: FreeBSD
+    - name: DragonFly
+    - name: NetBSD
+    - name: MidnightBSD
     - name: Windows
     - name: macOS
 portingAid: false

