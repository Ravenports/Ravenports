# Buildsheet autogenerated by ravenadm tool -- Do not edit.

NAMEBASE=		libofx
VERSION=		0.9.15
REVISION=		1
KEYWORDS=		finance
VARIANTS=		standard
SDESC[standard]=	Open Financial eXchange (OFX) Library
HOMEPAGE=		http://libofx.sourceforge.net/
CONTACT=		nobody

DOWNLOAD_GROUPS=	main
SITES[main]=		GITHUB/libofx:libofx:0.9.15
DISTFILE[1]=		generated:main
DF_INDEX=		1
SPKGS[standard]=	complete
			primary
			docs

OPTIONS_AVAILABLE=	none
OPTIONS_STANDARD=	none

BUILD_DEPENDS=		libtool:single:standard
			gengetopt:primary:standard
			help2man:single:standard
			doxygen:single:standard
BUILDRUN_DEPENDS=	OpenSP:single:standard
			curl:primary:standard

USES=			cpe gmake iconv libtool pkgconfig gettext-runtime
			ssl autoreconf:build
GNOME_COMPONENTS=	libxml++26

LICENSE=		GPLv2+:primary
LICENSE_TERMS=		primary:{{WRKDIR}}/TERMS
LICENSE_FILE=		GPLv2+:{{WRKSRC}}/COPYING
LICENSE_AWK=		TERMS:"LIBOFX_H"
LICENSE_SOURCE=		TERMS:{{WRKSRC}}/inc/libofx.h.in
LICENSE_SCHEME=		solo

CPE_VENDOR=		libofx_project
FPC_EQUIVALENT=		finance/libofx

MUST_CONFIGURE=		gnu
CONFIGURE_ARGS=		--enable-html-docs
			--with-opensp-includes={{LOCALBASE}}/include/OpenSP
			--with-opensp-libs={{LOCALBASE}}/lib

BUILD_TARGET=		all doc
SINGLE_JOB=		yes

INSTALL_TARGET=		install-strip
SOVERSION=		7.0.2

post-install:
	${RM} ${STAGEDIR}${STD_DOCDIR}/COPYING

pre-configure:
	cd ${WRKSRC} && sh autogen.sh

[FILE:542:descriptions/desc.primary]
LibOFX is a parser and an API designed to allow applications to
very easily support OFX command responses, usually provided by
financial institutions for statement downloads.

LibOFX was implemented directly from the full OFX 1.6 spec, and
currently supports:

 - Banking transactions and statements
 - Credit card and statements
 - Investment transactions
 - OFX 2.0

Future projects for LibOFX include:

 - Header parsing
 - DTD autodetection
 - Currency conversion
 - QIF import
 - QIF export (integrated inside the library)
 - OFX export


[FILE:106:distinfo]
74a9370da560526424ab62d79f7301f86620a8566c3f38cfc4684e63a4aac155       207361 libofx-libofx-0.9.15.tar.gz


[FILE:267:manifests/plist.primary]
bin/
 ofx2qif
 ofxconnect
 ofxdump
include/libofx/libofx.h
lib/
 libofx.a
 libofx.so
 libofx.so.%%SOMAJOR%%
 libofx.so.%%SOVERSION%%
lib/pkgconfig/libofx.pc
share/libofx/dtd/
 ofc.dtd
 ofx160.dtd
 ofx201.dtd
 opensp.dcl
share/man/man1/
 ofxconnect.1.gz
 ofxdump.1.gz


[FILE:8141:manifests/plist.docs]
share/doc/libofx/
 AUTHORS
 ChangeLog
 INSTALL
 NEWS
 README
 totest.txt
share/doc/libofx/html/
 annotated.html
 annotated_dup.js
 bc_s.png
 bdwn.png
 classLibofxContext.html
 classLibofxContext.js
 classNodeParser.html
 classNodeParser.js
 classNodeParser.png
 classOFCApplication.html
 classOFCApplication.js
 classOFCApplication.png
 classOFXApplication.html
 classOFXApplication.js
 classOFXApplication.png
 classOfxAccountContainer.html
 classOfxAccountContainer.js
 classOfxAccountContainer.png
 classOfxAccountInfoRequest.html
 classOfxAccountInfoRequest.js
 classOfxAccountInfoRequest.png
 classOfxAggregate.html
 classOfxAggregate.js
 classOfxAggregate.png
 classOfxBalanceContainer.html
 classOfxBalanceContainer.js
 classOfxBalanceContainer.png
 classOfxBankTransactionContainer.html
 classOfxBankTransactionContainer.js
 classOfxBankTransactionContainer.png
 classOfxDummyContainer.html
 classOfxDummyContainer.js
 classOfxDummyContainer.png
 classOfxGenericContainer.html
 classOfxGenericContainer.js
 classOfxGenericContainer.png
 classOfxInvestmentTransactionContainer.html
 classOfxInvestmentTransactionContainer.js
 classOfxInvestmentTransactionContainer.png
 classOfxMainContainer.html
 classOfxMainContainer.js
 classOfxMainContainer.png
 classOfxPaymentRequest.html
 classOfxPaymentRequest.js
 classOfxPaymentRequest.png
 classOfxPushUpContainer.html
 classOfxPushUpContainer.js
 classOfxPushUpContainer.png
 classOfxRequest.html
 classOfxRequest.js
 classOfxRequest.png
 classOfxSecurityContainer.html
 classOfxSecurityContainer.js
 classOfxSecurityContainer.png
 classOfxStatementContainer.html
 classOfxStatementContainer.js
 classOfxStatementContainer.png
 classOfxStatementRequest.html
 classOfxStatementRequest.js
 classOfxStatementRequest.png
 classOfxStatusContainer.html
 classOfxStatusContainer.js
 classOfxStatusContainer.png
 classOfxTransactionContainer.html
 classOfxTransactionContainer.js
 classOfxTransactionContainer.png
 classes.html
 classtree.html
 classtree.js
 classtree_1_1fixed__depth__iterator.html
 classtree_1_1fixed__depth__iterator.js
 classtree_1_1fixed__depth__iterator.png
 classtree_1_1iterator__base.html
 classtree_1_1iterator__base.js
 classtree_1_1iterator__base.png
 classtree_1_1iterator__base__less.html
 classtree_1_1iterator__base__less.js
 classtree_1_1post__order__iterator.html
 classtree_1_1post__order__iterator.js
 classtree_1_1post__order__iterator.png
 classtree_1_1pre__order__iterator.html
 classtree_1_1pre__order__iterator.js
 classtree_1_1pre__order__iterator.png
 classtree_1_1sibling__iterator.html
 classtree_1_1sibling__iterator.js
 classtree_1_1sibling__iterator.png
 classtree__node__.html
 classtree__node__.js
 closed.png
 config_8h_source.html
 context_8cpp_source.html
 context_8hh_source.html
 deprecated.html
 dir_7432f7aab7cc7990d1d80266d4aef759.html
 dir_83ea686f5db7f8dcb7127eea149218de.html
 dir_97aefd0d527b934f1d99a682da8fe6a9.html
 dir_bf4898affd6e7e04729ac6594da627dd.html
 dir_bfccd401955b95cf8c75461437045ac0.html
 doc.png
 doxygen.css
 doxygen.svg
 dynsections.js
 file__preproc_8cpp.html
 file__preproc_8cpp.js
 file__preproc_8cpp_source.html
 file__preproc_8hh.html
 file__preproc_8hh.js
 file__preproc_8hh_source.html
 files.html
 files_dup.js
 folderclosed.png
 folderopen.png
 functions.html
 functions_b.html
 functions_c.html
 functions_d.html
 functions_dup.js
 functions_e.html
 functions_enum.html
 functions_eval.html
 functions_f.html
 functions_func.html
 functions_g.html
 functions_h.html
 functions_i.html
 functions_l.html
 functions_m.html
 functions_n.html
 functions_o.html
 functions_p.html
 functions_r.html
 functions_s.html
 functions_t.html
 functions_type.html
 functions_u.html
 functions_v.html
 functions_vars.html
 functions_w.html
 getopt1_8c_source.html
 getopt_8c_source.html
 globals.html
 globals_defs.html
 globals_enum.html
 globals_eval.html
 globals_func.html
 globals_type.html
 globals_vars.html
 gnugetopt_8h_source.html
 hierarchy.html
 hierarchy.js
 index.html
 jquery.js
 libofx_8h.html
 libofx_8h.js
 libofx_8h_source.html
 main__doc_8c_source.html
 menu.js
 menudata.js
 messages_8cpp.html
 messages_8cpp.js
 messages_8cpp_source.html
 messages_8hh.html
 messages_8hh.js
 messages_8hh_source.html
 namespacekp.html
 namespaces.html
 namespaces_dup.js
 nav_f.png
 nav_g.png
 nav_h.png
 navtree.css
 navtree.js
 navtreedata.js
 navtreeindex0.js
 navtreeindex1.js
 navtreeindex2.js
 navtreeindex3.js
 nodeparser_8cpp.html
 nodeparser_8cpp_source.html
 nodeparser_8h.html
 nodeparser_8h_source.html
 ofc__sgml_8cpp.html
 ofc__sgml_8cpp.js
 ofc__sgml_8cpp_source.html
 ofc__sgml_8hh.html
 ofc__sgml_8hh.js
 ofc__sgml_8hh_source.html
 ofx2qif_8c.html
 ofx2qif_8c.js
 ofx2qif_8c_source.html
 ofx__aggregate_8hh.html
 ofx__aggregate_8hh_source.html
 ofx__container__account_8cpp.html
 ofx__container__account_8cpp.js
 ofx__container__account_8cpp_source.html
 ofx__container__generic_8cpp.html
 ofx__container__generic_8cpp.js
 ofx__container__generic_8cpp_source.html
 ofx__container__main_8cpp.html
 ofx__container__main_8cpp_source.html
 ofx__container__security_8cpp.html
 ofx__container__security_8cpp.js
 ofx__container__security_8cpp_source.html
 ofx__container__statement_8cpp.html
 ofx__container__statement_8cpp.js
 ofx__container__statement_8cpp_source.html
 ofx__container__transaction_8cpp.html
 ofx__container__transaction_8cpp.js
 ofx__container__transaction_8cpp_source.html
 ofx__containers_8hh.html
 ofx__containers_8hh_source.html
 ofx__containers__misc_8cpp.html
 ofx__containers__misc_8cpp.js
 ofx__containers__misc_8cpp_source.html
 ofx__error__msg_8hh.html
 ofx__error__msg_8hh.js
 ofx__error__msg_8hh_source.html
 ofx__preproc_8cpp.html
 ofx__preproc_8cpp.js
 ofx__preproc_8cpp_source.html
 ofx__preproc_8hh.html
 ofx__preproc_8hh.js
 ofx__preproc_8hh_source.html
 ofx__request_8cpp.html
 ofx__request_8cpp.js
 ofx__request_8cpp_source.html
 ofx__request_8hh.html
 ofx__request_8hh.js
 ofx__request_8hh_source.html
 ofx__request__accountinfo_8cpp.html
 ofx__request__accountinfo_8cpp.js
 ofx__request__accountinfo_8cpp_source.html
 ofx__request__accountinfo_8hh.html
 ofx__request__accountinfo_8hh_source.html
 ofx__request__statement_8cpp.html
 ofx__request__statement_8cpp.js
 ofx__request__statement_8cpp_source.html
 ofx__request__statement_8hh.html
 ofx__request__statement_8hh_source.html
 ofx__sgml_8cpp.html
 ofx__sgml_8cpp.js
 ofx__sgml_8cpp_source.html
 ofx__sgml_8hh.html
 ofx__sgml_8hh.js
 ofx__sgml_8hh_source.html
 ofx__utilities_8cpp.html
 ofx__utilities_8cpp.js
 ofx__utilities_8cpp_source.html
 ofx__utilities_8hh.html
 ofx__utilities_8hh.js
 ofx__utilities_8hh_source.html
 ofxconnect_2cmdline_8c_source.html
 ofxconnect_2cmdline_8h.html
 ofxconnect_2cmdline_8h.js
 ofxconnect_2cmdline_8h_source.html
 ofxconnect_8cpp.html
 ofxconnect_8cpp.js
 ofxconnect_8cpp_source.html
 ofxdump_2cmdline_8c_source.html
 ofxdump_2cmdline_8h.html
 ofxdump_2cmdline_8h.js
 ofxdump_2cmdline_8h_source.html
 ofxdump_8cpp.html
 ofxdump_8cpp.js
 ofxdump_8cpp_source.html
 ofxpartner_8cpp.html
 ofxpartner_8cpp.js
 ofxpartner_8cpp_source.html
 ofxpartner_8h.html
 ofxpartner_8h.js
 ofxpartner_8h_source.html
 open.png
 pages.html
 resize.js
 splitbar.png
 structErrorMsg.html
 structErrorMsg.js
 structLibofxFileFormatInfo.html
 structLibofxFileFormatInfo.js
 structOfxAccountData.html
 structOfxAccountData.js
 structOfxCurrency.html
 structOfxCurrency.js
 structOfxFiLogin.html
 structOfxFiLogin.js
 structOfxFiServiceInfo.html
 structOfxFiServiceInfo.js
 structOfxPayee.html
 structOfxPayee.js
 structOfxPayment.html
 structOfxPayment.js
 structOfxSecurityData.html
 structOfxSecurityData.js
 structOfxStatementData.html
 structOfxStatementData.js
 structOfxStatusData.html
 structOfxStatusData.js
 structOfxTransactionData.html
 structOfxTransactionData.js
 structcmdline__parser__params.html
 structcmdline__parser__params.js
 structgengetopt__args__info.html
 structgengetopt__args__info.js
 structoption.html
 structoption.js
 sync_off.png
 sync_on.png
 tab_a.png
 tab_b.png
 tab_h.png
 tab_s.png
 tabs.css
 tree_8hh_source.html
 win32_8cpp_source.html
 win32_8hh_source.html


[FILE:443:patches/patch-configure.ac]
--- configure.ac.orig	2019-09-30 20:33:58 UTC
+++ configure.ac
@@ -62,7 +62,7 @@ then
 			  [Define if GCC visibility extensions are supported])
 	VISIBILITY_FLAGS="-fvisibility=hidden"
 	CFLAGS="$VISIBILITY_FLAGS $CFLAGS"
-	CXXFLAGS="$VISIBILITY_FLAGS -fvisibility-inlines-hidden $CFLAGS"
+	CXXFLAGS="$VISIBILITY_FLAGS -fvisibility-inlines-hidden $CXXFLAGS"
 fi
 
 ## Pass -DIN_LIBOFX to the compiler so we can detect it and include config.h


[FILE:551:patches/patch-lib_ofx__preproc.cpp]
Solaris 10u8 has an older prototype

--- lib/ofx_preproc.cpp.orig	2019-09-30 20:33:58 UTC
+++ lib/ofx_preproc.cpp
@@ -307,7 +307,7 @@ int ofx_proc_file(LibofxContextPtr ctx,
             size_t outbytesleft = inbytesleft * 2 - 1;
             char * iconv_buffer = (char*) malloc (inbytesleft * 2);
             memset(iconv_buffer, 0, inbytesleft * 2);
-#if defined(__sun) || defined(__NetBSD__)
+#if defined(__NetBSD__)
             const char * inchar = (const char *)s_buffer.c_str();
 #else
             char * inchar = (char *)s_buffer.c_str();


[FILE:418:patches/patch-lib_ofx__utilities.cpp]
--- lib/ofx_utilities.cpp.orig	2019-09-30 20:33:58 UTC
+++ lib/ofx_utilities.cpp
@@ -138,6 +138,11 @@ time_t ofxdate_to_time_t(const string of
   char time_zone_specified = false;
   string ofxdate_whole;
   time_t temptime;
+  int daylight = 0;
+
+  tzset();
+  if(tzname[1][0] != ' ')
+    daylight = 1;
 
   std::time(&temptime);
   local_offset = difftime(mktime(localtime(&temptime)), mktime(gmtime(&temptime)));


[FILE:232:patches/patch-ofxconnect_ofxpartner.cpp]
--- ofxconnect/ofxpartner.cpp.orig	2019-09-30 20:33:58 UTC
+++ ofxconnect/ofxpartner.cpp
@@ -37,6 +37,7 @@
 #include <vector>
 #include <algorithm>
 #include <string.h>
+#include <unistd.h>
 
 using std::string;
 using std::vector;

