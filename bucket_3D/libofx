# Buildsheet autogenerated by ravenadm tool -- Do not edit.

NAMEBASE=		libofx
VERSION=		0.9.13
KEYWORDS=		finance
VARIANTS=		standard
SDESC[standard]=	Open Financial eXchange (OFX) Library
HOMEPAGE=		http://libofx.sourceforge.net/
CONTACT=		nobody

DOWNLOAD_GROUPS=	main
SITES[main]=		SF/libofx/libofx
DISTFILE[1]=		libofx-0.9.13.tar.gz:main
DF_INDEX=		1
SPKGS[standard]=	complete
			primary
			docs

OPTIONS_AVAILABLE=	none
OPTIONS_STANDARD=	none

BUILDRUN_DEPENDS=	glibmm:single:standard
			libsigcxx:primary:standard
			libxmlxx2:single:standard
			OpenSP:single:standard
			curl:primary:standard

USES=			gmake iconv libtool pkgconfig gettext-runtime
GNOME_COMPONENTS=	glib libxml2

LICENSE=		GPLv2+:primary
LICENSE_TERMS=		primary:{{WRKDIR}}/TERMS
LICENSE_FILE=		GPLv2+:{{WRKSRC}}/COPYING
LICENSE_AWK=		TERMS:"LIBOFX_H"
LICENSE_SOURCE=		TERMS:{{WRKSRC}}/inc/libofx.h
LICENSE_SCHEME=		solo

FPC_EQUIVALENT=		finance/libofx

MUST_CONFIGURE=		gnu
CONFIGURE_ARGS=		--disable-doxygen
			--disable-dot
			--disable-gengetopt
			--with-opensp-includes={{LOCALBASE}}/include/OpenSP
			--with-opensp-libs={{LOCALBASE}}/lib

INSTALL_TARGET=		install-strip
SOVERSION=		7.0.2

post-install:
	${RM} ${STAGEDIR}${STD_DOCDIR}/COPYING

[FILE:542:descriptions/desc.primary]
LibOFX is a parser and an API designed to allow applications to
very easily support OFX command responses, usually provided by
financial institutions for statement downloads.

LibOFX was implemented directly from the full OFX 1.6 spec, and
currently supports:

 - Banking transactions and statements
 - Credit card and statements
 - Investment transactions
 - OFX 2.0

Future projects for LibOFX include:

 - Header parsing
 - DTD autodetection
 - Currency conversion
 - QIF import
 - QIF export (integrated inside the library)
 - OFX export


[FILE:99:distinfo]
57eaf97cddbaf82c24f26b8f5cf8b2fbfd4969c74500a2c9acc9082b83bcc0e4      1290532 libofx-0.9.13.tar.gz


[FILE:267:manifests/plist.primary]
bin/
 ofx2qif
 ofxconnect
 ofxdump
include/libofx/libofx.h
lib/
 libofx.a
 libofx.so
 libofx.so.%%SOMAJOR%%
 libofx.so.%%SOVERSION%%
lib/pkgconfig/libofx.pc
share/libofx/dtd/
 ofc.dtd
 ofx160.dtd
 ofx201.dtd
 opensp.dcl
share/man/man1/
 ofxconnect.1.gz
 ofxdump.1.gz


[FILE:420:patches/patch-configure]
--- configure.orig	2018-05-02 19:41:19 UTC
+++ configure
@@ -3791,7 +3791,7 @@ $as_echo "#define HAVE_GCC_VISIBILITY_EX
 
 	VISIBILITY_FLAGS="-fvisibility=hidden"
 	CFLAGS="$VISIBILITY_FLAGS $CFLAGS"
-	CXXFLAGS="$VISIBILITY_FLAGS -fvisibility-inlines-hidden $CFLAGS"
+	CXXFLAGS="$VISIBILITY_FLAGS -fvisibility-inlines-hidden $CXXFLAGS"
 fi
 
 ## Pass -DIN_LIBOFX to the compiler so we can detect it and include config.h


[FILE:418:patches/patch-lib_ofx__utilities.cpp]
--- lib/ofx_utilities.cpp.orig	2018-05-02 19:39:38 UTC
+++ lib/ofx_utilities.cpp
@@ -138,6 +138,11 @@ time_t ofxdate_to_time_t(const string of
   char time_zone_specified = false;
   string ofxdate_whole;
   time_t temptime;
+  int daylight = 0;
+
+  tzset();
+  if(tzname[1][0] != ' ')
+    daylight = 1;
 
   std::time(&temptime);
   local_offset = difftime(mktime(localtime(&temptime)), mktime(gmtime(&temptime)));


[FILE:232:patches/patch-ofxconnect_ofxpartner.cpp]
--- ofxconnect/ofxpartner.cpp.orig	2016-09-10 08:01:22 UTC
+++ ofxconnect/ofxpartner.cpp
@@ -37,6 +37,7 @@
 #include <vector>
 #include <algorithm>
 #include <string.h>
+#include <unistd.h>
 
 using std::string;
 using std::vector;

