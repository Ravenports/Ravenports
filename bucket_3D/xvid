# Buildsheet autogenerated by ravenadm tool -- Do not edit.

NAMEBASE=		xvid
VERSION=		1.3.7
REVISION=		2
KEYWORDS=		multimedia
VARIANTS=		std
SDESC[std]=		ISO MPEG-4 compliant video codec
HOMEPAGE=		https://www.xvid.com/
CONTACT=		nobody

DOWNLOAD_GROUPS=	main
SITES[main]=		https://downloads.xvid.com/downloads/
DISTFILE[1]=		xvidcore-1.3.7.tar.gz:main
DF_INDEX=		1
SPKGS[std]=		set
			primary
			dev

OPTIONS_AVAILABLE=	none
OPTIONS_STANDARD=	none

BUILD_DEPENDS=		nasm:primary:std

USES=			gmake

DISTNAME=		xvidcore/build/generic

LICENSE=		GPLv2+:primary
LICENSE_TERMS=		primary:{{WRKDIR}}/TERMS
LICENSE_FILE=		GPLv2+:{{WRKDIR}}/xvidcore/LICENSE
LICENSE_AWK=		TERMS:"^$$"
LICENSE_SOURCE=		TERMS:{{WRKDIR}}/xvidcore/src/xvid.h
LICENSE_SCHEME=		solo

FPC_EQUIVALENT=		multimedia/xvid

MUST_CONFIGURE=		gnu
CONFIGURE_ARGS=		--disable-assembly

SINGLE_JOB=		yes

post-install:
	${STRIP_CMD} ${STAGEDIR}${PREFIX}/lib/libxvidcore.so

[FILE:665:descriptions/desc.primary]
Xvid is a MPEG-4 video codec. Its purpose is to compress video in order
to allow for faster transmission over computer networks or for more
efficient storage on computer disks. Hence, Xvid can somewhat be seen as
a ZIP for video. Xvid removes information from video that is not important
for human perception in order to achieve very high compression rates while
still keeping very good visual quality. As an example: uncompressed digital
video is huge and takes up about 100 GB HD space per hour at PAL
resolution. The same video would require just 500 MB per hour when
compressed with Xvid at high quality. So Xvid can compress video at ratios
of 200:1 and more.


[FILE:100:distinfo]
abbdcbd39555691dd1c9b4d08f0a031376a3b211652c0d8b3b8aa9be1303ce2d       820854 xvidcore-1.3.7.tar.gz


[FILE:43:manifests/plist.primary]
lib/
 libxvidcore.so.4
 libxvidcore.so.4.3


[FILE:51:manifests/plist.dev]
include/xvid.h
lib/
 libxvidcore.a
 libxvidcore.so


[FILE:2325:patches/patch-configure]
--- configure.orig	2019-12-28 14:19:24 UTC
+++ configure
@@ -4316,7 +4316,7 @@ SHARED_EXTENSION=""
 STATIC_EXTENSION=""
 OBJECT_EXTENSION=""
 case "$target_os" in
-     *bsd*|linux*|beos|irix*|solaris*|gnu*|*qnx*)
+     *bsd*|dragonfly*|linux*|beos|irix*|solaris*|gnu*|*qnx*)
 	{ $as_echo "$as_me:${as_lineno-$LINENO}: result: .so .a .o" >&5
 $as_echo ".so .a .o" >&6; }
 	STATIC_EXTENSION="a"
@@ -4369,17 +4369,27 @@ PRE_SHARED_LIB=""
 SO_API_MAJOR_LINK=""
 SO_LINK=""
 case "$target_os" in
-     linux*|solaris*|gnu*|*qnx*)
+     solaris*)
 	{ $as_echo "$as_me:${as_lineno-$LINENO}: result: ok" >&5
 $as_echo "ok" >&6; }
 	STATIC_LIB="libxvidcore.\$(STATIC_EXTENSION)"
 	SHARED_LIB="libxvidcore.\$(SHARED_EXTENSION).\$(API_MAJOR).\$(API_MINOR)"
 	SO_API_MAJOR_LINK="libxvidcore.\$(SHARED_EXTENSION).\$(API_MAJOR)"
 	SO_LINK="libxvidcore.\$(SHARED_EXTENSION)"
-	SPECIFIC_LDFLAGS="-Wl,-soname,libxvidcore.\$(SHARED_EXTENSION).\$(API_MAJOR) -shared -Wl,--version-script=libxvidcore.ld -lc -lm"
+	SPECIFIC_LDFLAGS="-Wl,-soname,libxvidcore.\$(SHARED_EXTENSION).\$(API_MAJOR) -shared -lc -lm"
+	SPECIFIC_CFLAGS="-fPIC"
+	;;
+     linux*|gnu*|*qnx*)
+	{ $as_echo "$as_me:${as_lineno-$LINENO}: result: ok" >&5
+$as_echo "ok" >&6; }
+	STATIC_LIB="libxvidcore.\$(STATIC_EXTENSION)"
+	SHARED_LIB="libxvidcore.\$(SHARED_EXTENSION).\$(API_MAJOR).\$(API_MINOR)"
+	SO_API_MAJOR_LINK="libxvidcore.\$(SHARED_EXTENSION).\$(API_MAJOR)"
+	SO_LINK="libxvidcore.\$(SHARED_EXTENSION)"
+	SPECIFIC_LDFLAGS="-Wl,-soname,libxvidcore.\$(SHARED_EXTENSION).\$(API_MAJOR) -shared -Wl,--version-script,libxvidcore.ld -lc -lm"
 	SPECIFIC_CFLAGS="-fPIC"
 	;;
-     *bsd*|irix*)
+     *bsd*|dragonfly*|irix*)
 	{ $as_echo "$as_me:${as_lineno-$LINENO}: result: ok" >&5
 $as_echo "ok" >&6; }
 	STATIC_LIB="libxvidcore.\$(STATIC_EXTENSION)"
@@ -4617,7 +4627,7 @@ $as_echo "$as_me: WARNING: nasm version
        { $as_echo "$as_me:${as_lineno-$LINENO}: checking for asm object format" >&5
 $as_echo_n "checking for asm object format... " >&6; }
        case "$target_os" in
-           *bsd*|linux*|beos|irix*|solaris*|gnu*|*qnx*)
+           *bsd*|dragonfly*|linux*|beos|irix*|solaris*|gnu*|*qnx*)
                if test "$ARCHITECTURE" = "X86_64" ; then
                    { $as_echo "$as_me:${as_lineno-$LINENO}: result: elf64" >&5
 $as_echo "elf64" >&6; }

