# Buildsheet autogenerated by ravenadm tool -- Do not edit.

NAMEBASE=		libucl
VERSION=		0.9.3
KEYWORDS=		textproc
VARIANTS=		std ravensw
SDESC[std]=		Universal configuration library parser
SDESC[ravensw]=		Libucl without utils, curl, lua, or ssl support
HOMEPAGE=		https://github.com/vstakhov/libucl
CONTACT=		nobody

DOWNLOAD_GROUPS=	main
SITES[main]=		GITHUB/vstakhov:libucl:0.9.3
DISTFILE[1]=		generated:main
DF_INDEX=		1
SPKGS[std]=		set
			primary
			dev
			man
			tools
SPKGS[ravensw]=		set
			primary
			dev
			man

OPTIONS_AVAILABLE=	LUA RAVENSW
OPTIONS_STANDARD=	LUA
VOPTS[ravensw]=		LUA=OFF RAVENSW=ON

USES=			autoreconf gmake libtool pkgconfig

LICENSE=		BSD2CLAUSE:primary
LICENSE_FILE=		BSD2CLAUSE:{{WRKSRC}}/COPYING
LICENSE_SCHEME=		solo

FPC_EQUIVALENT=		textproc/libucl

MUST_CONFIGURE=		gnu
CONFIGURE_ARGS=		--enable-regex

INSTALL_TARGET=		install-strip
SOVERSION=		6.3.0

[RAVENSW].DESCRIPTION=			Minimal variant used by ravensw
[RAVENSW].CONFIGURE_ARGS_OFF=		--enable-signatures
					--enable-urls
					--enable-utils
[RAVENSW].CPPFLAGS_OFF=			-I{{OPENSSLINC}}
[RAVENSW].LDFLAGS_OFF=			-L{{OPENSSLLIB}}
[RAVENSW].USES_OFF=			ssl
					curl

[LUA].DESCRIPTION=			Enable support for LUA scripting language
[LUA].BROKEN_ON=			can't find lua.h and other headers
[LUA].CONFIGURE_ARGS_ON=		--enable-lua
[LUA].CONFIGURE_ENV_ON=			LUA={{LOCALBASE}}/bin/{{LUA_CMD}}
[LUA].LDFLAGS_ON=			-L{{LUA_LIBDIR}}
[LUA].USES_ON=				lua

post-install:
	# install our PIC library
	${INSTALL_DATA} ${WRKSRC}/src/.libs/libucl_pic.a \
		${STAGEDIR}${PREFIX}/lib/

post-build:
	# assemble PIC library
	(cd ${WRKSRC}/src/.libs &&\
	 ${AR} -cq libucl_pic.a *.o &&\
	 ranlib libucl_pic.a)

[FILE:271:descriptions/desc.primary]
Libucl is a parser and C API to parse and generate ucl objects. Libucl
consists of several groups of functions:

 * Parser functions
 * Emitting functions
 * Conversion functions
 * Generation functions
 * Iteration functions
 * Validation functions
 * Utility functions


[FILE:38:descriptions/desc.tools]
This package contains UCL file tools.


[FILE:107:distinfo]
40d5a130132e896f63260daf57deca0eab582deb660d4bdbf60608bace2d6d92      2046803 vstakhov-libucl-0.9.3.tar.gz


[FILE:88:manifests/plist.primary]
%%LUA-ON%%%%LUA_MODLIBDIR%%/ucl.so
lib/
 libucl.so.%%SOMAJOR%%
 libucl.so.%%SOVERSION%%


[FILE:151:manifests/plist.dev]
%%LUA-ON%%%%LUA_MODLIBDIR%%/ucl.a
%%LUA-ON%%include/lua_ucl.h
include/
 ucl++.h
 ucl.h
lib/
 libucl.a
 libucl.so
 libucl_pic.a
lib/pkgconfig/libucl.pc


[FILE:24:manifests/plist.man]
share/man/man3/libucl.3


[FILE:41:manifests/plist.tools]
bin/
 ucl_chargen
 ucl_objdump
 ucl_tool


[FILE:53:manifests/plist.primary.ravensw]
lib/
 libucl.so.%%SOMAJOR%%
 libucl.so.%%SOVERSION%%


[FILE:89:manifests/plist.dev.ravensw]
include/
 ucl++.h
 ucl.h
lib/
 libucl.a
 libucl.so
 libucl_pic.a
lib/pkgconfig/libucl.pc

