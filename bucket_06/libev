# Buildsheet autogenerated by ravenadm tool -- Do not edit.

NAMEBASE=		libev
VERSION=		4.33
REVISION=		1
KEYWORDS=		devel
VARIANTS=		std
SDESC[std]=		High-performance event loop/event model
HOMEPAGE=		http://software.schmorp.de/pkg/libev.html
CONTACT=		nobody

DOWNLOAD_GROUPS=	main
SITES[main]=		http://dist.schmorp.de/libev/Attic/
DISTFILE[1]=		libev-4.33.tar.gz:main
DF_INDEX=		1
SPKGS[std]=		set
			primary
			dev
			man

OPTIONS_AVAILABLE=	none
OPTIONS_STANDARD=	none

USES=			libtool pkgconfig mbsdfix

LICENSE=		BSD2CLAUSE:primary GPLv2+:primary
LICENSE_TERMS=		primary:{{WRKDIR}}/TERMS
LICENSE_FILE=		BSD2CLAUSE:{{WRKDIR}}/BSD2CLAUSE
			GPLv2+:stock
LICENSE_AWK=		BSD2CLAUSE:"DAMAGE.$"
LICENSE_SOURCE=		BSD2CLAUSE:{{WRKSRC}}/LICENSE
LICENSE_SCHEME=		dual

FPC_EQUIVALENT=		devel/libev

MUST_CONFIGURE=		gnu

INSTALL_TARGET=		install-strip

post-patch:
	${SED} -e 's|%PREFIX%|${PREFIX}|g ; s|%VERSION%|4.33|g' \
		${FILESDIR}/libev.pc.in > ${WRKDIR}/libev.pc

post-install:
	${INSTALL_DATA} ${WRKDIR}/libev.pc ${STAGEDIR}${PREFIX}/lib/pkgconfig/

post-extract:
	${AWK} '/Alternatively,/,/or the GPL./' ${WRKSRC}/LICENSE > \
		${WRKDIR}/TERMS

[FILE:769:descriptions/desc.primary]
A full-featured and high-performance event loop that is loosely modelled
after libevent, but without its limitations and bugs. It is used in GNU
Virtual Private Ethernet, rxvt-unicode, auditd, the Deliantra MORPG Server
and Client, and many other programs.

Features include child/pid watchers, periodic timers based on wallclock
(absolute) time (in addition to timers using relative timeouts), as well
as epoll/kqueue/event ports/inotify/eventfd/signalfd support, fast timer
management, time jump detection and correction, and ease-of-use.

It can be used as a libevent replacement using its emulation API or
directly embedded into your programs without the need for complex
configuration support. A full-featured and well-documented perl interface
is also available.


[FILE:96:distinfo]
507eb7b8d1015fbec5b935f34ebed15bf346bed04a11ab82b8eee848c4205aea       569527 libev-4.33.tar.gz


[FILE:33:manifests/plist.primary]
lib/
 libev.so.4
 libev.so.4.0.0


[FILE:70:manifests/plist.dev]
include/
 ev++.h
 ev.h
lib/
 libev.a
 libev.so
lib/pkgconfig/libev.pc


[FILE:20:manifests/plist.man]
share/man/man3/ev.3


[FILE:366:patches/patch-Makefile.in]
--- Makefile.in.orig	2019-12-21 16:08:10 UTC
+++ Makefile.in
@@ -357,7 +357,7 @@ EXTRA_DIST = LICENSE Changes libev.m4 au
 	     ev.3 ev.pod Symbols.ev Symbols.event
 
 man_MANS = ev.3
-include_HEADERS = ev.h ev++.h event.h
+include_HEADERS = ev.h ev++.h
 lib_LTLIBRARIES = libev.la
 libev_la_SOURCES = ev.c event.c
 libev_la_LDFLAGS = -version-info $(VERSION_INFO)


[FILE:338:patches/patch-configure]
--- configure.orig	2019-12-21 16:08:16 UTC
+++ configure
@@ -3954,14 +3954,6 @@ else
 fi
 
 
-
-if test -z "$orig_CFLAGS"; then
-  if test x$GCC = xyes; then
-    CFLAGS="-g -O3"
-  fi
-fi
-
-
 case `pwd` in
   *\ * | *\	*)
     { $as_echo "$as_me:${as_lineno-$LINENO}: WARNING: Libtool does not cope well with whitespace in \`pwd\`" >&5


[FILE:431:patches/patch-ev.c]
--- ev.c.orig	2019-12-21 16:08:22 UTC
+++ ev.c
@@ -3001,7 +3001,7 @@ ev_recommended_backends (void) EV_NOEXCE
 {
   unsigned int flags = ev_supported_backends ();
 
-#ifndef __NetBSD__
+#if ! (defined __NetBSD__ || defined __FreeBSD__ || defined __DragonFly__)
   /* kqueue is borked on everything but netbsd apparently */
   /* it usually doesn't work correctly on anything but sockets and pipes */
   flags &= ~EVBACKEND_KQUEUE;


[FILE:199:files/libev.pc.in]
prefix=%PREFIX%
libdir=${prefix}/lib
includedir=${prefix}/include

Name: libev
Description: High-performance event loop/event model
Version: %VERSION%
Libs: -L${libdir} -lev
Cflags: -I${includedir}


