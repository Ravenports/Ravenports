# Buildsheet autogenerated by ravenadm tool -- Do not edit.

NAMEBASE=		gstreamer1-plugins-x265
VERSION=		1.16.0
KEYWORDS=		multimedia
VARIANTS=		standard
SDESC[standard]=	GStreamer1 H.265 video encoder plugin
HOMEPAGE=		https://gstreamer.freedesktop.org/
CONTACT=		nobody

DOWNLOAD_GROUPS=	main
SITES[main]=		https://gstreamer.freedesktop.org/src/gst-plugins-bad/
DISTFILE[1]=		gst-plugins-bad-1.16.0.tar.xz:main
DF_INDEX=		1
SPKGS[standard]=	single

OPTIONS_AVAILABLE=	none
OPTIONS_STANDARD=	none

BUILD_DEPENDS=		gstreamer1-plugins-bad:single:standard
BUILDRUN_DEPENDS=	gstreamer1-plugins-base:single:standard
			gstreamer1:single:standard
			x265:single:standard

USES=			gmake pkgconfig libtool
GNOME_COMPONENTS=	glib introspection

DISTNAME=		gst-plugins-bad-1.16.0

FPC_EQUIVALENT=		multimedia/gstreamer1-plugins-x265

MUST_CONFIGURE=		gnu
CONFIGURE_ARGS=		--disable-assrender
			--disable-bs2b
			--disable-chromaprint
			--disable-curl
			--disable-dash
			--disable-dtls
			--disable-dts
			--disable-faac
			--disable-faad
			--disable-flite
			--disable-gme
			--disable-gsm
			--disable-gtk3
			--disable-hls
			--disable-kate
			--disable-kms
			--disable-ladspa
			--disable-libde265
			--disable-libmms
			--disable-modplug
			--disable-mpeg2enc
			--disable-mplex
			--disable-musepack
			--disable-neon
			--disable-ofa
			--disable-openal
			--disable-opencv
			--disable-openexr
			--disable-opengl
			--disable-openh264
			--disable-openjpeg
			--disable-resindvd
			--disable-rtmp
			--disable-rsvg
			--disable-schro
			--disable-smoothstreaming
			--disable-sndfile
			--disable-soundtouch
			--disable-spandsp
			--disable-spc
			--disable-srtp
			--disable-ttml
			--disable-vdpau
			--disable-wayland
			--disable-webp
			--disable-webrtcdsp
			--enable-x265
			--disable-zbar
			--disable-gles2
			--disable-egl
			--disable-glx
			--disable-bz2
			--disable-dvb
			--disable-shm
			--disable-acm
			--disable-android_media
			--disable-apple_media
			--disable-avc
			--disable-bluez
			--disable-directfb
			--disable-direct3d
			--disable-directsound
			--disable-msdk
			--disable-nvenc
			--disable-sbc
			--disable-tinyalsa
			--disable-uvch264
			--disable-vcd
			--disable-vulkan
			--disable-wasapi
			--disable-wgl
			--disable-winks
			--disable-winscreencap

BUILD_WRKSRC=		{{WRKSRC}}/ext/x265

INSTALL_WRKSRC=		{{WRKSRC}}/ext/x265
INSTALL_TARGET=		install-strip
INSTALL_REQ_TOOLCHAIN=	yes
PLIST_SUB=		GSTVER=1.0
			PLUGIN=x265

CFLAGS=			-Wno-format

post-patch:
	${REINPLACE_CMD} -e 's|FLAGS -Werror|FLAGS|' ${WRKSRC}/configure
	${FIND} ${WRKSRC}/ext ${WRKSRC}/sys -name Makefile.in |\
	${XARGS} ${REINPLACE_CMD} -E \
	-e '/la_DEPENDENCIES/,/am__DEPENDENCIES/s|[$$][(]top_builddir[)]/gst-libs/.*.la||' \
	-e 's|[@$$][(]?GST_API_VERSION[@)]\.la|$$\{VERSION\}|g'

post-configure:
	${REINPLACE_CMD} -e 's|HAVE_X11 = yes|HAVE_X11 = no|g' \
		-e 's|#ifdef HAVE_X11|#ifdef NO_X11|g' \
		-e 's|$$(X11_CFLAGS) \\|\\|g' \
		-e 's|$$(X11_LIBS) \\|\\|g' \
		${WRKSRC}/gst/librfb/Makefile \
		${WRKSRC}/gst/librfb/gstrfbsrc.c

[FILE:54:descriptions/desc.single]
This package contains the H.265 video encoder plugin.


[FILE:108:distinfo]
22139de35626ada6090bdfa3423b27b7fc15a0198331d25c95e6b12cb1072b05      4863204 gst-plugins-bad-1.16.0.tar.xz


[FILE:45:manifests/plist.single]
lib/gstreamer-%%GSTVER%%/libgst%%PLUGIN%%.so

