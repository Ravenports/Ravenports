# Buildsheet autogenerated by ravenadm tool -- Do not edit.

NAMEBASE=		pciutils
VERSION=		3.9.0
KEYWORDS=		sysutils devel
VARIANTS=		standard
SDESC[standard]=	Library / tools to access PCI bus config registers
HOMEPAGE=		https://mj.ucw.cz/sw/pciutils
CONTACT=		Michael_Reim[kraileth@elderlinux.org]

DOWNLOAD_GROUPS=	main
SITES[main]=		GITHUB/pciutils:pciutils:v3.9.0
DISTFILE[1]=		generated:main
DF_INDEX=		1
SPKGS[standard]=	complete
			library
			primary

OPTIONS_AVAILABLE=	none
OPTIONS_STANDARD=	none

RUN_DEPENDS=		pciids:single:standard
EXRUN[primary]=		pciutils:library:standard

USES=			gmake

LICENSE=		GPLv2:complete
LICENSE_TERMS=		complete:{{WRKDIR}}/TERMS
LICENSE_FILE=		GPLv2:{{WRKSRC}}/COPYING
LICENSE_AWK=		TERMS:"^$$"
LICENSE_SOURCE=		TERMS:{{WRKSRC}}/pciutils.h
LICENSE_SCHEME=		solo

FPC_EQUIVALENT=		sysutils/pciutils

MAKE_ARGS=		PREFIX={{PREFIX}}
			SHARED=yes

INSTALL_TARGET=		install install-lib
SOVERSION=		3.9.0
PLIST_SUB=		LIBNAME={{LIBNAME:Ulibpci}}

CFLAGS=			-fPIC
VAR_OPSYS[netbsd]=	MAKEFILE_LINE=LIBNAME=libpciutils

post-install-linux:
	(cd ${STAGEDIR}${PREFIX} && mv bin/lspci sbin/lspci)

post-install:
	${STRIP_CMD} ${STAGEDIR}${PREFIX}/lib/libpc*.so

[FILE:123:descriptions/desc.library]
libpci is a common portable library which offers access to the PCI 
configuration space on a variety of operating systems.


[FILE:379:descriptions/desc.primary]
The PCI Utilities are a collection of programs for inspecting and 
manipulating configuration of PCI devices, all based on libpci.

The utilities include:
- lspci: displays detailed information about all PCI buses and devices in 
the system
- setpci: allows reading from and writing to PCI device configuration 
registers. For example, you can adjust the latency timers with it.


[FILE:109:distinfo]
17829b1fc3ef2a022f2b0a6c4d7a686b53a2fb0233951c31f9344e0abc4034bf       587070 pciutils-pciutils-3.9.0.tar.gz


[FILE:157:manifests/plist.library]
include/pci/
 config.h
 header.h
 pci.h
 types.h
lib/
 %%LIBNAME%%.so
 %%LIBNAME%%.so.%%SOMAJOR%%
 %%LIBNAME%%.so.%%SOVERSION%%
lib/pkgconfig/%%LIBNAME%%.pc


[FILE:166:manifests/plist.primary]
sbin/
 lspci
 setpci
 update-pciids
share/pci.ids
share/man/man5/pci.ids.5.gz
share/man/man7/pcilib.7.gz
share/man/man8/
 lspci.8.gz
 setpci.8.gz
 update-pciids.8.gz


[FILE:259:patches/patch-lib_mmio-ports.c]
--- lib/mmio-ports.c.orig	2022-11-20 12:06:14 UTC
+++ lib/mmio-ports.c
@@ -30,6 +30,10 @@
 #define OFF_MAX (off_t)((1ULL << (sizeof(off_t) * CHAR_BIT - 1)) - 1)
 #endif
 
+#ifndef O_DSYNC
+#define O_DSYNC 0
+#endif
+
 struct mmio_cache
 {
   off_t addr_page;

