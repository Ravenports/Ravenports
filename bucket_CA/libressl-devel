# Buildsheet autogenerated by ravenadm tool -- Do not edit.

NAMEBASE=		libressl-devel
VERSION=		3.2.2
KEYWORDS=		security devel
VARIANTS=		standard static
SDESC[standard]=	OpenBSD fork of the OpenSSL SSL/TLS protocol
SDESC[static]=		Static minimal version of LibreSSL
HOMEPAGE=		http://www.libressl.org/
CONTACT=		nobody

DOWNLOAD_GROUPS=	main
SITES[main]=		OPENBSD/LibreSSL
DISTFILE[1]=		libressl-3.2.2.tar.gz:main
DF_INDEX=		1
SPKGS[standard]=	single
SPKGS[static]=		single

OPTIONS_AVAILABLE=	STATIC SKIP_MANPAGES
OPTIONS_STANDARD=	SKIP_MANPAGES
VOPTS[static]=		STATIC=ON SKIP_MANPAGES=ON

RUN_DEPENDS=		autoselect-ssl:single:standard

USES=			cpe pkgconfig cmake

DISTNAME=		libressl-3.2.2

LICENSE=		OpenSSL:single ISCL:single
LICENSE_FILE=		OpenSSL:{{WRKSRC}}/COPYING
			ISCL:{{WRKSRC}}/COPYING
LICENSE_SCHEME=		multi

CMAKE_INSTALL_PREFIX=	{{PREFIX}}/libressl-devel
CPE_PRODUCT=		libressl
CPE_VENDOR=		openbsd
FPC_EQUIVALENT=		security/libressl-devel

SOVERSION=		48.1.0
PLIST_SUB=		CRY_SOMAJOR=46
			CRY_SOVERSION=46.1.0
			TLS_SOMAJOR=20
			TLS_SOVERSION=20.1.0

CMAKE_ARGS=		-DENABLE_NC:BOOL=ON
			-DOPENSSLDIR:PATH="{{PREFIX}}/etc/libressl-devel"

[STATIC].CMAKE_ARGS_OFF=		-DBUILD_SHARED_LIBS:BOOL=ON
					-DCMAKE_INSTALL_RPATH:STRING="{{PREFIX}}/libressl-devel/lib"
[STATIC].CMAKE_ARGS_ON=			-DBUILD_SHARED_LIBS:BOOL=OFF

[SKIP_MANPAGES].DESCRIPTION=		Skip LibreSSL manpage installation

post-install-STATIC-OFF:
	# install our PIC libraries
	${INSTALL_DATA} \
		${BUILD_WRKSRC}/libcrypto_pic.a \
		${BUILD_WRKSRC}/libssl_pic.a \
		${BUILD_WRKSRC}/libtls_pic.a \
		${STAGEDIR}${PREFIX}/libressl-devel/lib/
	${STRIP_CMD} ${STAGEDIR}${PREFIX}/libressl-devel/lib/*.so

post-patch:
	# There is a conflict within the static libcrypto.a with the
	# arc4random, arc4random_buf, and arc4random_uniform.  These
	# functions also exist in in FreeBSD's system libc. To resolve,
	# don't use libressl builtin versions.
	${REINPLACE_CMD} -e '/DHAVE_ARC4RANDOM/d' ${WRKSRC}/CMakeLists.txt

post-build-STATIC-OFF:
	# assemble PIC libraries
	cd ${BUILD_WRKSRC} &&\
		${AR} -crsv libcrypto_pic.a \
		crypto/CMakeFiles/crypto.dir/*.o \
		crypto/CMakeFiles/crypto.dir/*/*.o \
		&& ranlib libcrypto_pic.a
	cd ${BUILD_WRKSRC} &&\
		${AR} -crsv libssl_pic.a \
		ssl/CMakeFiles/ssl.dir/*.o \
		&& ranlib libssl_pic.a
	cd ${BUILD_WRKSRC} &&\
		${AR} -crsv libtls_pic.a \
		tls/CMakeFiles/tls.dir/*.o \
		&& ranlib libtls_pic.a

post-install:
	${STRIP_CMD} ${STAGEDIR}${PREFIX}/libressl-devel/bin/nc
	${STRIP_CMD} ${STAGEDIR}${PREFIX}/libressl-devel/bin/ocspcheck
	${STRIP_CMD} ${STAGEDIR}${PREFIX}/libressl-devel/bin/openssl
	${RM} -r ${STAGEDIR}/${PREFIX}/etc/libressl-devel/cert.pem

post-patch-SKIP_MANPAGES-ON:
	${REINPLACE_CMD} -e '/add_subdirectory.man./d' \
		${WRKSRC}/CMakeLists.txt

post-install-SKIP_MANPAGES-ON:
	${RM} -r ${STAGEDIR}${PREFIX}/libressl-devel/share

post-install-SKIP_MANPAGES-OFF:
	${MKDIR} ${STAGEDIR}${PREFIX}/etc/man.d
	${ECHO_CMD} "MANPATH ${PREFIX}/libressl-devel/share/man" \
		>> ${STAGEDIR}${PREFIX}/etc/man.d/libressl-devel.conf

[FILE:536:descriptions/desc.single.standard]
LibreSSL is an open-source implementation of the Secure Sockets Layer (SSL)
and Transport Layer Security (TLS) protocols. It was forked from the OpenSSL
cryptographic software library in April 2014 as a response by OpenBSD
developers to the Heartbleed security vulnerability in OpenSSL,
with the aim of refactoring the OpenSSL code so as to provide a more secure
implementation.

LibreSSL was forked from the OpenSSL library starting with the 1.0.1g branch
and will follow the security guidelines used elsewhere in the OpenBSD project.


[FILE:647:descriptions/desc.single.static]
LibreSSL is an open-source implementation of the Secure Sockets Layer (SSL)
and Transport Layer Security (TLS) protocols. It was forked from the OpenSSL
cryptographic software library in April 2014 as a response by OpenBSD
developers to the Heartbleed security vulnerability in OpenSSL,
with the aim of refactoring the OpenSSL code so as to provide a more secure
implementation.

LibreSSL was forked from the OpenSSL library starting with the 1.0.1g branch
and will follow the security guidelines used elsewhere in the OpenBSD project.

This package variant has no manpages and is built statically.
It also has stack-smashing protection disabled.


[FILE:100:distinfo]
a9d1e1d030b8bcc67bf6428b8c0fff14a5602e2236257b9e3d77acaf12e2a7a1      3839529 libressl-3.2.2.tar.gz


[FILE:12806:manifests/plist.single.standard]
%%SKIP_MANPAGES-OFF%%etc/man.d/libressl-devel.conf
etc/libressl-devel/
 openssl.cnf
 x509v3.cnf
libressl-devel/bin/
 nc
 ocspcheck
 openssl
libressl-devel/include/tls.h
libressl-devel/include/openssl/
 aes.h
 asn1.h
 asn1t.h
 bio.h
 blowfish.h
 bn.h
 buffer.h
 camellia.h
 cast.h
 chacha.h
 cmac.h
 cms.h
 comp.h
 conf.h
 conf_api.h
 crypto.h
 curve25519.h
 des.h
 dh.h
 dsa.h
 dso.h
 dtls1.h
 ec.h
 ecdh.h
 ecdsa.h
 engine.h
 err.h
 evp.h
 gost.h
 hkdf.h
 hmac.h
 idea.h
 lhash.h
 md4.h
 md5.h
 modes.h
 obj_mac.h
 objects.h
 ocsp.h
 opensslconf.h
 opensslfeatures.h
 opensslv.h
 ossl_typ.h
 pem.h
 pem2.h
 pkcs12.h
 pkcs7.h
 poly1305.h
 rand.h
 rc2.h
 rc4.h
 ripemd.h
 rsa.h
 safestack.h
 sha.h
 sm3.h
 sm4.h
 srtp.h
 ssl.h
 ssl2.h
 ssl23.h
 ssl3.h
 stack.h
 tls1.h
 ts.h
 txt_db.h
 ui.h
 ui_compat.h
 whrlpool.h
 x509.h
 x509_verify.h
 x509_vfy.h
 x509v3.h
libressl-devel/lib/
 libcrypto.so
 libcrypto.so.%%CRY_SOMAJOR%%
 libcrypto.so.%%CRY_SOVERSION%%
 libcrypto_pic.a
 libssl.so
 libssl.so.%%SOMAJOR%%
 libssl.so.%%SOVERSION%%
 libssl_pic.a
 libtls.so
 libtls.so.%%TLS_SOMAJOR%%
 libtls.so.%%TLS_SOVERSION%%
 libtls_pic.a
libressl-devel/lib/pkgconfig/
 libcrypto.pc
 libssl.pc
 libtls.pc
 openssl.pc
libressl-devel/share/man/man1/
 nc.1.gz
 openssl.1.gz
libressl-devel/share/man/man3/
 ACCESS_DESCRIPTION_new.3.gz
 AES_encrypt.3.gz
 ASN1_INTEGER_get.3.gz
 ASN1_OBJECT_new.3.gz
 ASN1_STRING_TABLE_add.3.gz
 ASN1_STRING_length.3.gz
 ASN1_STRING_new.3.gz
 ASN1_STRING_print_ex.3.gz
 ASN1_TIME_set.3.gz
 ASN1_TYPE_get.3.gz
 ASN1_generate_nconf.3.gz
 ASN1_item_d2i.3.gz
 ASN1_item_new.3.gz
 ASN1_put_object.3.gz
 ASN1_time_parse.3.gz
 AUTHORITY_KEYID_new.3.gz
 BASIC_CONSTRAINTS_new.3.gz
 BF_set_key.3.gz
 BIO_ctrl.3.gz
 BIO_f_base64.3.gz
 BIO_f_buffer.3.gz
 BIO_f_cipher.3.gz
 BIO_f_md.3.gz
 BIO_f_null.3.gz
 BIO_f_ssl.3.gz
 BIO_find_type.3.gz
 BIO_get_data.3.gz
 BIO_get_ex_new_index.3.gz
 BIO_meth_new.3.gz
 BIO_new.3.gz
 BIO_new_CMS.3.gz
 BIO_printf.3.gz
 BIO_push.3.gz
 BIO_read.3.gz
 BIO_s_accept.3.gz
 BIO_s_bio.3.gz
 BIO_s_connect.3.gz
 BIO_s_fd.3.gz
 BIO_s_file.3.gz
 BIO_s_mem.3.gz
 BIO_s_null.3.gz
 BIO_s_socket.3.gz
 BIO_set_callback.3.gz
 BIO_should_retry.3.gz
 BN_BLINDING_new.3.gz
 BN_CTX_new.3.gz
 BN_CTX_start.3.gz
 BN_add.3.gz
 BN_add_word.3.gz
 BN_bn2bin.3.gz
 BN_cmp.3.gz
 BN_copy.3.gz
 BN_generate_prime.3.gz
 BN_get0_nist_prime_521.3.gz
 BN_mod_inverse.3.gz
 BN_mod_mul_montgomery.3.gz
 BN_mod_mul_reciprocal.3.gz
 BN_new.3.gz
 BN_num_bytes.3.gz
 BN_rand.3.gz
 BN_set_bit.3.gz
 BN_set_flags.3.gz
 BN_set_negative.3.gz
 BN_swap.3.gz
 BN_zero.3.gz
 BUF_MEM_new.3.gz
 CMAC_Init.3.gz
 CMS_ContentInfo_new.3.gz
 CMS_add0_cert.3.gz
 CMS_add1_recipient_cert.3.gz
 CMS_add1_signer.3.gz
 CMS_compress.3.gz
 CMS_decrypt.3.gz
 CMS_encrypt.3.gz
 CMS_final.3.gz
 CMS_get0_RecipientInfos.3.gz
 CMS_get0_SignerInfos.3.gz
 CMS_get0_type.3.gz
 CMS_get1_ReceiptRequest.3.gz
 CMS_sign.3.gz
 CMS_sign_receipt.3.gz
 CMS_uncompress.3.gz
 CMS_verify.3.gz
 CMS_verify_receipt.3.gz
 CONF_modules_free.3.gz
 CONF_modules_load_file.3.gz
 CRYPTO_get_mem_functions.3.gz
 CRYPTO_lock.3.gz
 CRYPTO_memcmp.3.gz
 CRYPTO_set_ex_data.3.gz
 ChaCha.3.gz
 DES_set_key.3.gz
 DH_generate_key.3.gz
 DH_generate_parameters.3.gz
 DH_get0_pqg.3.gz
 DH_get_ex_new_index.3.gz
 DH_new.3.gz
 DH_set_method.3.gz
 DH_size.3.gz
 DIST_POINT_new.3.gz
 DSA_SIG_new.3.gz
 DSA_do_sign.3.gz
 DSA_dup_DH.3.gz
 DSA_generate_key.3.gz
 DSA_generate_parameters.3.gz
 DSA_get0_pqg.3.gz
 DSA_get_ex_new_index.3.gz
 DSA_meth_new.3.gz
 DSA_new.3.gz
 DSA_set_method.3.gz
 DSA_sign.3.gz
 DSA_size.3.gz
 DTLSv1_listen.3.gz
 ECDH_compute_key.3.gz
 ECDSA_SIG_new.3.gz
 EC_GFp_simple_method.3.gz
 EC_GROUP_copy.3.gz
 EC_GROUP_new.3.gz
 EC_KEY_METHOD_new.3.gz
 EC_KEY_new.3.gz
 EC_POINT_add.3.gz
 EC_POINT_new.3.gz
 ENGINE_add.3.gz
 ENGINE_ctrl.3.gz
 ENGINE_get_default_RSA.3.gz
 ENGINE_init.3.gz
 ENGINE_new.3.gz
 ENGINE_register_RSA.3.gz
 ENGINE_register_all_RSA.3.gz
 ENGINE_set_RSA.3.gz
 ENGINE_set_default.3.gz
 ENGINE_set_flags.3.gz
 ENGINE_unregister_RSA.3.gz
 ERR.3.gz
 ERR_GET_LIB.3.gz
 ERR_asprintf_error_data.3.gz
 ERR_clear_error.3.gz
 ERR_error_string.3.gz
 ERR_get_error.3.gz
 ERR_load_crypto_strings.3.gz
 ERR_load_strings.3.gz
 ERR_print_errors.3.gz
 ERR_put_error.3.gz
 ERR_remove_state.3.gz
 ERR_set_mark.3.gz
 ESS_SIGNING_CERT_new.3.gz
 EVP_AEAD_CTX_init.3.gz
 EVP_BytesToKey.3.gz
 EVP_DigestInit.3.gz
 EVP_DigestSignInit.3.gz
 EVP_DigestVerifyInit.3.gz
 EVP_EncodeInit.3.gz
 EVP_EncryptInit.3.gz
 EVP_OpenInit.3.gz
 EVP_PKEY_CTX_ctrl.3.gz
 EVP_PKEY_CTX_new.3.gz
 EVP_PKEY_asn1_get_count.3.gz
 EVP_PKEY_asn1_new.3.gz
 EVP_PKEY_cmp.3.gz
 EVP_PKEY_decrypt.3.gz
 EVP_PKEY_derive.3.gz
 EVP_PKEY_encrypt.3.gz
 EVP_PKEY_get_default_digest_nid.3.gz
 EVP_PKEY_keygen.3.gz
 EVP_PKEY_meth_get0_info.3.gz
 EVP_PKEY_meth_new.3.gz
 EVP_PKEY_new.3.gz
 EVP_PKEY_print_private.3.gz
 EVP_PKEY_set1_RSA.3.gz
 EVP_PKEY_sign.3.gz
 EVP_PKEY_verify.3.gz
 EVP_PKEY_verify_recover.3.gz
 EVP_SealInit.3.gz
 EVP_SignInit.3.gz
 EVP_VerifyInit.3.gz
 EVP_aes_128_cbc.3.gz
 EVP_camellia_128_cbc.3.gz
 EVP_des_cbc.3.gz
 EVP_rc4.3.gz
 EVP_sm3.3.gz
 EVP_sm4_cbc.3.gz
 EVP_whirlpool.3.gz
 EXTENDED_KEY_USAGE_new.3.gz
 GENERAL_NAME_new.3.gz
 HMAC.3.gz
 MD5.3.gz
 NAME_CONSTRAINTS_new.3.gz
 OBJ_nid2obj.3.gz
 OCSP_CRLID_new.3.gz
 OCSP_REQUEST_new.3.gz
 OCSP_SERVICELOC_new.3.gz
 OCSP_cert_to_id.3.gz
 OCSP_request_add1_nonce.3.gz
 OCSP_resp_find_status.3.gz
 OCSP_response_status.3.gz
 OCSP_sendreq_new.3.gz
 OPENSSL_VERSION_NUMBER.3.gz
 OPENSSL_cleanse.3.gz
 OPENSSL_config.3.gz
 OPENSSL_init_crypto.3.gz
 OPENSSL_init_ssl.3.gz
 OPENSSL_load_builtin_modules.3.gz
 OPENSSL_malloc.3.gz
 OPENSSL_sk_new.3.gz
 OpenSSL_add_all_algorithms.3.gz
 PEM_ASN1_read.3.gz
 PEM_X509_INFO_read.3.gz
 PEM_bytes_read_bio.3.gz
 PEM_read.3.gz
 PEM_read_SSL_SESSION.3.gz
 PEM_read_bio_PrivateKey.3.gz
 PEM_write_bio_CMS_stream.3.gz
 PEM_write_bio_PKCS7_stream.3.gz
 PKCS12_SAFEBAG_new.3.gz
 PKCS12_create.3.gz
 PKCS12_new.3.gz
 PKCS12_newpass.3.gz
 PKCS12_parse.3.gz
 PKCS5_PBKDF2_HMAC.3.gz
 PKCS7_add_attribute.3.gz
 PKCS7_dataFinal.3.gz
 PKCS7_dataInit.3.gz
 PKCS7_decrypt.3.gz
 PKCS7_encrypt.3.gz
 PKCS7_final.3.gz
 PKCS7_get_signer_info.3.gz
 PKCS7_new.3.gz
 PKCS7_set_content.3.gz
 PKCS7_set_type.3.gz
 PKCS7_sign.3.gz
 PKCS7_sign_add_signer.3.gz
 PKCS7_verify.3.gz
 PKCS8_PRIV_KEY_INFO_new.3.gz
 PKEY_USAGE_PERIOD_new.3.gz
 POLICYINFO_new.3.gz
 PROXY_POLICY_new.3.gz
 RAND_add.3.gz
 RAND_bytes.3.gz
 RAND_load_file.3.gz
 RAND_set_rand_method.3.gz
 RC4.3.gz
 RIPEMD160.3.gz
 RSA_PSS_PARAMS_new.3.gz
 RSA_blinding_on.3.gz
 RSA_check_key.3.gz
 RSA_generate_key.3.gz
 RSA_get0_key.3.gz
 RSA_get_ex_new_index.3.gz
 RSA_meth_new.3.gz
 RSA_new.3.gz
 RSA_padding_add_PKCS1_type_1.3.gz
 RSA_pkey_ctx_ctrl.3.gz
 RSA_print.3.gz
 RSA_private_encrypt.3.gz
 RSA_public_encrypt.3.gz
 RSA_set_method.3.gz
 RSA_sign.3.gz
 RSA_sign_ASN1_OCTET_STRING.3.gz
 RSA_size.3.gz
 SHA1.3.gz
 SMIME_read_CMS.3.gz
 SMIME_read_PKCS7.3.gz
 SMIME_write_CMS.3.gz
 SMIME_write_PKCS7.3.gz
 SSL_CIPHER_get_name.3.gz
 SSL_COMP_add_compression_method.3.gz
 SSL_CTX_add1_chain_cert.3.gz
 SSL_CTX_add_extra_chain_cert.3.gz
 SSL_CTX_add_session.3.gz
 SSL_CTX_ctrl.3.gz
 SSL_CTX_flush_sessions.3.gz
 SSL_CTX_free.3.gz
 SSL_CTX_get0_certificate.3.gz
 SSL_CTX_get_ex_new_index.3.gz
 SSL_CTX_get_verify_mode.3.gz
 SSL_CTX_load_verify_locations.3.gz
 SSL_CTX_new.3.gz
 SSL_CTX_sess_number.3.gz
 SSL_CTX_sess_set_cache_size.3.gz
 SSL_CTX_sess_set_get_cb.3.gz
 SSL_CTX_sessions.3.gz
 SSL_CTX_set1_groups.3.gz
 SSL_CTX_set_alpn_select_cb.3.gz
 SSL_CTX_set_cert_store.3.gz
 SSL_CTX_set_cert_verify_callback.3.gz
 SSL_CTX_set_cipher_list.3.gz
 SSL_CTX_set_client_CA_list.3.gz
 SSL_CTX_set_client_cert_cb.3.gz
 SSL_CTX_set_default_passwd_cb.3.gz
 SSL_CTX_set_generate_session_id.3.gz
 SSL_CTX_set_info_callback.3.gz
 SSL_CTX_set_max_cert_list.3.gz
 SSL_CTX_set_min_proto_version.3.gz
 SSL_CTX_set_mode.3.gz
 SSL_CTX_set_msg_callback.3.gz
 SSL_CTX_set_options.3.gz
 SSL_CTX_set_quiet_shutdown.3.gz
 SSL_CTX_set_read_ahead.3.gz
 SSL_CTX_set_session_cache_mode.3.gz
 SSL_CTX_set_session_id_context.3.gz
 SSL_CTX_set_ssl_version.3.gz
 SSL_CTX_set_timeout.3.gz
 SSL_CTX_set_tlsext_servername_callback.3.gz
 SSL_CTX_set_tlsext_status_cb.3.gz
 SSL_CTX_set_tlsext_ticket_key_cb.3.gz
 SSL_CTX_set_tlsext_use_srtp.3.gz
 SSL_CTX_set_tmp_dh_callback.3.gz
 SSL_CTX_set_tmp_rsa_callback.3.gz
 SSL_CTX_set_verify.3.gz
 SSL_CTX_use_certificate.3.gz
 SSL_SESSION_free.3.gz
 SSL_SESSION_get0_peer.3.gz
 SSL_SESSION_get_compress_id.3.gz
 SSL_SESSION_get_ex_new_index.3.gz
 SSL_SESSION_get_id.3.gz
 SSL_SESSION_get_protocol_version.3.gz
 SSL_SESSION_get_time.3.gz
 SSL_SESSION_has_ticket.3.gz
 SSL_SESSION_new.3.gz
 SSL_SESSION_print.3.gz
 SSL_SESSION_set1_id_context.3.gz
 SSL_accept.3.gz
 SSL_alert_type_string.3.gz
 SSL_clear.3.gz
 SSL_connect.3.gz
 SSL_copy_session_id.3.gz
 SSL_do_handshake.3.gz
 SSL_dup.3.gz
 SSL_dup_CA_list.3.gz
 SSL_export_keying_material.3.gz
 SSL_free.3.gz
 SSL_get_SSL_CTX.3.gz
 SSL_get_certificate.3.gz
 SSL_get_ciphers.3.gz
 SSL_get_client_CA_list.3.gz
 SSL_get_client_random.3.gz
 SSL_get_current_cipher.3.gz
 SSL_get_default_timeout.3.gz
 SSL_get_error.3.gz
 SSL_get_ex_data_X509_STORE_CTX_idx.3.gz
 SSL_get_ex_new_index.3.gz
 SSL_get_fd.3.gz
 SSL_get_peer_cert_chain.3.gz
 SSL_get_peer_certificate.3.gz
 SSL_get_rbio.3.gz
 SSL_get_server_tmp_key.3.gz
 SSL_get_session.3.gz
 SSL_get_shared_ciphers.3.gz
 SSL_get_state.3.gz
 SSL_get_verify_result.3.gz
 SSL_get_version.3.gz
 SSL_library_init.3.gz
 SSL_load_client_CA_file.3.gz
 SSL_new.3.gz
 SSL_num_renegotiations.3.gz
 SSL_pending.3.gz
 SSL_read.3.gz
 SSL_read_early_data.3.gz
 SSL_renegotiate.3.gz
 SSL_rstate_string.3.gz
 SSL_session_reused.3.gz
 SSL_set1_host.3.gz
 SSL_set1_param.3.gz
 SSL_set_SSL_CTX.3.gz
 SSL_set_bio.3.gz
 SSL_set_connect_state.3.gz
 SSL_set_fd.3.gz
 SSL_set_max_send_fragment.3.gz
 SSL_set_session.3.gz
 SSL_set_shutdown.3.gz
 SSL_set_tmp_ecdh.3.gz
 SSL_set_verify_result.3.gz
 SSL_shutdown.3.gz
 SSL_state_string.3.gz
 SSL_want.3.gz
 SSL_write.3.gz
 STACK_OF.3.gz
 SXNET_new.3.gz
 TS_REQ_new.3.gz
 UI_UTIL_read_pw.3.gz
 UI_create_method.3.gz
 UI_get_string_type.3.gz
 UI_new.3.gz
 X25519.3.gz
 X509V3_get_d2i.3.gz
 X509_ALGOR_dup.3.gz
 X509_ATTRIBUTE_new.3.gz
 X509_CINF_new.3.gz
 X509_CRL_get0_by_serial.3.gz
 X509_CRL_new.3.gz
 X509_EXTENSION_set_object.3.gz
 X509_INFO_new.3.gz
 X509_LOOKUP_hash_dir.3.gz
 X509_NAME_ENTRY_get_object.3.gz
 X509_NAME_add_entry_by_txt.3.gz
 X509_NAME_get_index_by_NID.3.gz
 X509_NAME_new.3.gz
 X509_NAME_print_ex.3.gz
 X509_OBJECT_get0_X509.3.gz
 X509_PUBKEY_new.3.gz
 X509_REQ_new.3.gz
 X509_REVOKED_new.3.gz
 X509_SIG_new.3.gz
 X509_STORE_CTX_get_error.3.gz
 X509_STORE_CTX_get_ex_new_index.3.gz
 X509_STORE_CTX_new.3.gz
 X509_STORE_CTX_set_verify_cb.3.gz
 X509_STORE_load_locations.3.gz
 X509_STORE_new.3.gz
 X509_STORE_set1_param.3.gz
 X509_STORE_set_verify_cb_func.3.gz
 X509_VERIFY_PARAM_set_flags.3.gz
 X509_check_ca.3.gz
 X509_check_host.3.gz
 X509_check_issued.3.gz
 X509_check_private_key.3.gz
 X509_check_purpose.3.gz
 X509_cmp.3.gz
 X509_cmp_time.3.gz
 X509_digest.3.gz
 X509_get0_notBefore.3.gz
 X509_get0_signature.3.gz
 X509_get1_email.3.gz
 X509_get_pubkey.3.gz
 X509_get_serialNumber.3.gz
 X509_get_subject_name.3.gz
 X509_get_version.3.gz
 X509_new.3.gz
 X509_sign.3.gz
 X509_verify_cert.3.gz
 X509v3_get_ext_by_NID.3.gz
 bn_dump.3.gz
 crypto.3.gz
 d2i_ASN1_NULL.3.gz
 d2i_ASN1_OBJECT.3.gz
 d2i_ASN1_OCTET_STRING.3.gz
 d2i_ASN1_SEQUENCE_ANY.3.gz
 d2i_AUTHORITY_KEYID.3.gz
 d2i_BASIC_CONSTRAINTS.3.gz
 d2i_CMS_ContentInfo.3.gz
 d2i_DHparams.3.gz
 d2i_DIST_POINT.3.gz
 d2i_DSAPublicKey.3.gz
 d2i_ECPKParameters.3.gz
 d2i_ESS_SIGNING_CERT.3.gz
 d2i_GENERAL_NAME.3.gz
 d2i_OCSP_REQUEST.3.gz
 d2i_OCSP_RESPONSE.3.gz
 d2i_PKCS12.3.gz
 d2i_PKCS7.3.gz
 d2i_PKCS8PrivateKey_bio.3.gz
 d2i_PKCS8_PRIV_KEY_INFO.3.gz
 d2i_PKEY_USAGE_PERIOD.3.gz
 d2i_POLICYINFO.3.gz
 d2i_PROXY_POLICY.3.gz
 d2i_PrivateKey.3.gz
 d2i_RSAPublicKey.3.gz
 d2i_SSL_SESSION.3.gz
 d2i_TS_REQ.3.gz
 d2i_X509.3.gz
 d2i_X509_ALGOR.3.gz
 d2i_X509_ATTRIBUTE.3.gz
 d2i_X509_CRL.3.gz
 d2i_X509_EXTENSION.3.gz
 d2i_X509_NAME.3.gz
 d2i_X509_REQ.3.gz
 d2i_X509_SIG.3.gz
 des_read_pw.3.gz
 evp.3.gz
 get_rfc3526_prime_8192.3.gz
 i2d_CMS_bio_stream.3.gz
 i2d_PKCS7_bio_stream.3.gz
 lh_new.3.gz
 lh_stats.3.gz
 ssl.3.gz
 tls_accept_socket.3.gz
 tls_client.3.gz
 tls_config_ocsp_require_stapling.3.gz
 tls_config_set_protocols.3.gz
 tls_config_set_session_id.3.gz
 tls_config_verify.3.gz
 tls_conn_version.3.gz
 tls_connect.3.gz
 tls_init.3.gz
 tls_load_file.3.gz
 tls_ocsp_process_response.3.gz
 tls_read.3.gz
 x509_verify.3.gz
libressl-devel/share/man/man5/
 openssl.cnf.5.gz
 x509v3.cnf.5.gz
libressl-devel/share/man/man8/ocspcheck.8.gz
@dir etc/libressl-devel/certs
@rmtry libressl-devel/share/man/mandoc.db
@rmtry libressl-devel/share/man/whatis


[FILE:970:manifests/plist.single.static]
etc/libressl-devel/
 openssl.cnf
 x509v3.cnf
libressl-devel/bin/
 nc
 ocspcheck
 openssl
libressl-devel/include/tls.h
libressl-devel/include/openssl/
 aes.h
 asn1.h
 asn1t.h
 bio.h
 blowfish.h
 bn.h
 buffer.h
 camellia.h
 cast.h
 chacha.h
 cmac.h
 cms.h
 comp.h
 conf.h
 conf_api.h
 crypto.h
 curve25519.h
 des.h
 dh.h
 dsa.h
 dso.h
 dtls1.h
 ec.h
 ecdh.h
 ecdsa.h
 engine.h
 err.h
 evp.h
 gost.h
 hkdf.h
 hmac.h
 idea.h
 lhash.h
 md4.h
 md5.h
 modes.h
 obj_mac.h
 objects.h
 ocsp.h
 opensslconf.h
 opensslfeatures.h
 opensslv.h
 ossl_typ.h
 pem.h
 pem2.h
 pkcs12.h
 pkcs7.h
 poly1305.h
 rand.h
 rc2.h
 rc4.h
 ripemd.h
 rsa.h
 safestack.h
 sha.h
 sm3.h
 sm4.h
 srtp.h
 ssl.h
 ssl2.h
 ssl23.h
 ssl3.h
 stack.h
 tls1.h
 ts.h
 txt_db.h
 ui.h
 ui_compat.h
 whrlpool.h
 x509.h
 x509_verify.h
 x509_vfy.h
 x509v3.h
libressl-devel/lib/
 libcrypto.a
 libssl.a
 libtls.a
libressl-devel/lib/pkgconfig/
 libcrypto.pc
 libssl.pc
 libtls.pc
 openssl.pc
@dir etc/libressl-devel/certs


[FILE:292:patches/patch-crypto_compat_arc4random.c]
--- crypto/compat/arc4random.c.orig	2020-10-17 08:15:36 UTC
+++ crypto/compat/arc4random.c
@@ -88,7 +88,7 @@ _rs_stir(void)
 	u_char rnd[KEYSZ + IVSZ];
 
 	if (getentropy(rnd, sizeof rnd) == -1)
-		_getentropy_fail();
+	; /*	_getentropy_fail(); */
 
 	if (!rs)
 		_rs_init(rnd, sizeof(rnd));


[FILE:6501:patches/patch-crypto_compat_getentropy__solaris.c]
--- crypto/compat/getentropy_solaris.c.orig	2020-10-17 08:15:36 UTC
+++ crypto/compat/getentropy_solaris.c
@@ -43,9 +43,6 @@
 #include <unistd.h>
 #include <time.h>
 #include <sys/sha2.h>
-#define SHA512_Init SHA512Init
-#define SHA512_Update SHA512Update
-#define SHA512_Final SHA512Final
 
 #include <sys/vfs.h>
 #include <sys/statfs.h>
@@ -66,12 +63,8 @@
 #define HD(x)	 (SHA512_Update(&ctx, (char *)&(x), sizeof (x)))
 #define HF(x)    (SHA512_Update(&ctx, (char *)&(x), sizeof (void*)))
 
-int	getentropy(void *buf, size_t len);
-
 static int getentropy_urandom(void *buf, size_t len, const char *path,
     int devfscheck);
-static int getentropy_fallback(void *buf, size_t len);
-static int getentropy_phdr(struct dl_phdr_info *info, size_t size, void *data);
 
 int
 getentropy(void *buf, size_t len)
@@ -95,7 +88,7 @@ getentropy(void *buf, size_t len)
 	 * the devfs mount, or if file descriptors are exhausted.
 	 */
 	ret = getentropy_urandom(buf, len,
-	    "/devices/pseudo/random@0:urandom", 1);
+	    "/devices/pseudo/random@0:urandom", 0);
 	if (ret != -1)
 		return (ret);
 
@@ -135,16 +128,8 @@ getentropy(void *buf, size_t len)
 	 * providing a new failsafe API which works in a chroot or
 	 * when file descriptors are exhausted.
 	 */
-#undef FAIL_INSTEAD_OF_TRYING_FALLBACK
-#ifdef FAIL_INSTEAD_OF_TRYING_FALLBACK
-	raise(SIGKILL);
-#endif
-	ret = getentropy_fallback(buf, len);
-	if (ret != -1)
-		return (ret);
-
-	errno = EIO;
-	return (ret);
+	printf("Collecting entropy via /dev/urandom has failed.\n");
+	return (-1);
 }
 
 static int
@@ -224,199 +209,3 @@ static const int cl[] = {
 	CLOCK_THREAD_CPUTIME_ID,
 #endif
 };
-
-static int
-getentropy_phdr(struct dl_phdr_info *info, size_t size, void *data)
-{
-	SHA512_CTX *ctx = data;
-
-	SHA512_Update(ctx, &info->dlpi_addr, sizeof (info->dlpi_addr));
-	return (0);
-}
-
-static int
-getentropy_fallback(void *buf, size_t len)
-{
-	uint8_t results[SHA512_DIGEST_LENGTH];
-	int save_errno = errno, e, pgs = getpagesize(), faster = 0, repeat;
-	static int cnt;
-	struct timespec ts;
-	struct timeval tv;
-	double loadavg[3];
-	struct rusage ru;
-	sigset_t sigset;
-	struct stat st;
-	SHA512_CTX ctx;
-	static pid_t lastpid;
-	pid_t pid;
-	size_t i, ii, m;
-	char *p;
-
-	pid = getpid();
-	if (lastpid == pid) {
-		faster = 1;
-		repeat = 2;
-	} else {
-		faster = 0;
-		lastpid = pid;
-		repeat = REPEAT;
-	}
-	for (i = 0; i < len; ) {
-		int j;
-		SHA512_Init(&ctx);
-		for (j = 0; j < repeat; j++) {
-			HX((e = gettimeofday(&tv, NULL)) == -1, tv);
-			if (e != -1) {
-				cnt += (int)tv.tv_sec;
-				cnt += (int)tv.tv_usec;
-			}
-
-			dl_iterate_phdr(getentropy_phdr, &ctx);
-
-			for (ii = 0; ii < sizeof(cl)/sizeof(cl[0]); ii++)
-				HX(clock_gettime(cl[ii], &ts) == -1, ts);
-
-			HX((pid = getpid()) == -1, pid);
-			HX((pid = getsid(pid)) == -1, pid);
-			HX((pid = getppid()) == -1, pid);
-			HX((pid = getpgid(0)) == -1, pid);
-			HX((e = getpriority(0, 0)) == -1, e);
-			HX((getloadavg(loadavg, 3) == -1), loadavg);
-
-			if (!faster) {
-				ts.tv_sec = 0;
-				ts.tv_nsec = 1;
-				(void) nanosleep(&ts, NULL);
-			}
-
-			HX(sigpending(&sigset) == -1, sigset);
-			HX(sigprocmask(SIG_BLOCK, NULL, &sigset) == -1,
-			    sigset);
-
-			HF(getentropy);	/* an addr in this library */
-			HF(printf);		/* an addr in libc */
-			p = (char *)&p;
-			HD(p);		/* an addr on stack */
-			p = (char *)&errno;
-			HD(p);		/* the addr of errno */
-
-			if (i == 0) {
-				struct sockaddr_storage ss;
-				struct statvfs stvfs;
-				struct termios tios;
-				socklen_t ssl;
-				off_t off;
-
-				/*
-				 * Prime-sized mappings encourage fragmentation;
-				 * thus exposing some address entropy.
-				 */
-				struct mm {
-					size_t	npg;
-					void	*p;
-				} mm[] =	 {
-					{ 17, MAP_FAILED }, { 3, MAP_FAILED },
-					{ 11, MAP_FAILED }, { 2, MAP_FAILED },
-					{ 5, MAP_FAILED }, { 3, MAP_FAILED },
-					{ 7, MAP_FAILED }, { 1, MAP_FAILED },
-					{ 57, MAP_FAILED }, { 3, MAP_FAILED },
-					{ 131, MAP_FAILED }, { 1, MAP_FAILED },
-				};
-
-				for (m = 0; m < sizeof mm/sizeof(mm[0]); m++) {
-					HX(mm[m].p = mmap(NULL,
-					    mm[m].npg * pgs,
-					    PROT_READ|PROT_WRITE,
-					    MAP_PRIVATE|MAP_ANON, -1,
-					    (off_t)0), mm[m].p);
-					if (mm[m].p != MAP_FAILED) {
-						size_t mo;
-
-						/* Touch some memory... */
-						p = mm[m].p;
-						mo = cnt %
-						    (mm[m].npg * pgs - 1);
-						p[mo] = 1;
-						cnt += (int)((long)(mm[m].p)
-						    / pgs);
-					}
-
-					/* Check cnts and times... */
-					for (ii = 0; ii < sizeof(cl)/sizeof(cl[0]);
-					    ii++) {
-						HX((e = clock_gettime(cl[ii],
-						    &ts)) == -1, ts);
-						if (e != -1)
-							cnt += (int)ts.tv_nsec;
-					}
-
-					HX((e = getrusage(RUSAGE_SELF,
-					    &ru)) == -1, ru);
-					if (e != -1) {
-						cnt += (int)ru.ru_utime.tv_sec;
-						cnt += (int)ru.ru_utime.tv_usec;
-					}
-				}
-
-				for (m = 0; m < sizeof mm/sizeof(mm[0]); m++) {
-					if (mm[m].p != MAP_FAILED)
-						munmap(mm[m].p, mm[m].npg * pgs);
-					mm[m].p = MAP_FAILED;
-				}
-
-				HX(stat(".", &st) == -1, st);
-				HX(statvfs(".", &stvfs) == -1, stvfs);
-
-				HX(stat("/", &st) == -1, st);
-				HX(statvfs("/", &stvfs) == -1, stvfs);
-
-				HX((e = fstat(0, &st)) == -1, st);
-				if (e == -1) {
-					if (S_ISREG(st.st_mode) ||
-					    S_ISFIFO(st.st_mode) ||
-					    S_ISSOCK(st.st_mode)) {
-						HX(fstatvfs(0, &stvfs) == -1,
-						    stvfs);
-						HX((off = lseek(0, (off_t)0,
-						    SEEK_CUR)) < 0, off);
-					}
-					if (S_ISCHR(st.st_mode)) {
-						HX(tcgetattr(0, &tios) == -1,
-						    tios);
-					} else if (S_ISSOCK(st.st_mode)) {
-						memset(&ss, 0, sizeof ss);
-						ssl = sizeof(ss);
-						HX(getpeername(0,
-						    (void *)&ss, &ssl) == -1,
-						    ss);
-					}
-				}
-
-				HX((e = getrusage(RUSAGE_CHILDREN,
-				    &ru)) == -1, ru);
-				if (e != -1) {
-					cnt += (int)ru.ru_utime.tv_sec;
-					cnt += (int)ru.ru_utime.tv_usec;
-				}
-			} else {
-				/* Subsequent hashes absorb previous result */
-				HD(results);
-			}
-
-			HX((e = gettimeofday(&tv, NULL)) == -1, tv);
-			if (e != -1) {
-				cnt += (int)tv.tv_sec;
-				cnt += (int)tv.tv_usec;
-			}
-
-			HD(cnt);
-		}
-		SHA512_Final(results, &ctx);
-		memcpy((char *)buf + i, results, MINIMUM(sizeof(results), len - i));
-		i += MINIMUM(sizeof(results), len - i);
-	}
-	explicit_bzero(&ctx, sizeof ctx);
-	explicit_bzero(results, sizeof results);
-	errno = save_errno;
-	return (0);		/* satisfied */
-}


[FILE:446:files/extra-patch-MAN3]
--- Makefile.in.orig	2020-05-07 23:42:38 UTC
+++ Makefile.in
@@ -191,7 +191,7 @@ am__define_uniq_tagged_files = \
 ETAGS = etags
 CTAGS = ctags
 CSCOPE = cscope
-DIST_SUBDIRS = crypto ssl tls include apps man tests
+DIST_SUBDIRS = crypto ssl tls include apps tests
 am__DIST_COMMON = $(srcdir)/Makefile.in $(srcdir)/libcrypto.pc.in \
 	$(srcdir)/libssl.pc.in $(srcdir)/libtls.pc.in \
 	$(srcdir)/openssl.pc.in COPYING ChangeLog INSTALL compile \


[FILE:43:files/special.mk]
MANPREFIX=		${PREFIX}/libressl-devel/share

