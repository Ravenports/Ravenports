# Buildsheet autogenerated by ravenadm tool -- Do not edit.

NAMEBASE=		langkit_support
VERSION=		24.0.0
EPOCH=			1
KEYWORDS=		ada devel
VARIANTS=		std
SDESC[std]=		Support files for Ada Langkit
HOMEPAGE=		https://github.com/AdaCore/langkit
CONTACT=		John_Marino[draco@marino.st]

DOWNLOAD_GROUPS=	main
SITES[main]=		GITHUB/AdaCore:langkit:v24.0.0
DISTFILE[1]=		generated:main
DF_INDEX=		1
SPKGS[std]=		set
			primary
			dev

OPTIONS_AVAILABLE=	none
OPTIONS_STANDARD=	none

BUILD_DEPENDS=		python312:primary:std
			python-e3-core:single:v12
			AdaSAT:dev:std
			gmp:dev:std
			gnatcoll-bindings:dev:std
			gnatcoll-core:dev:std
BUILDRUN_DEPENDS=	gnatcoll-core:primary:std
			gnatcoll-bindings:iconv:std
			gnatcoll-bindings:gmp:std
			AdaSAT:primary:std
EXRUN[dev]=		AdaSAT:dev:std
			gnatcoll-bindings:dev:std
			gnatcoll-core:dev:std
			gmp:dev:std

USES=			gprbuild iconv:build

DISTNAME=		langkit-24.0.0

LICENSE=		APACHE20:primary
LICENSE_TERMS=		primary:{{WRKDIR}}/TERMS
LICENSE_FILE=		APACHE20:{{WRKSRC}}/LICENSE.txt
LICENSE_AWK=		TERMS:"^$$"
LICENSE_SOURCE=		TERMS:{{WRKSRC}}/langkit/support/langkit_support.ads
LICENSE_SCHEME=		solo

INSTALL_REQ_TOOLCHAIN=	yes
SOVERSION=		24.0.0

do-build:
	(cd ${WRKSRC} && ${SETENV} ${MAKE_ENV} \
		python manage.py build-langkit-support \
		--library-types=static,static-pic,relocatable \
		--build-mode=prod)

pre-configure:
	${REINPLACE_CMD} -e 's|%%SOVERSION%%|24.0.0|' \
		${WRKSRC}/langkit/support/langkit_support.gpr

do-install:
	(cd ${WRKSRC} && ${SETENV} ${MAKE_ENV} \
		python manage.py install-langkit-support \
		--library-types=static,static-pic,relocatable \
		--build-mode=prod \
		${STAGEDIR}${PREFIX})
	# strip
	${STRIP_CMD} ${STAGEDIR}${PREFIX}/lib/langkit_support.relocatable/liblangkit_support.so
	# Remove redundant manifest file
	${RM} -r ${STAGEDIR}${PREFIX}/share/gpr/manifests

[FILE:116:descriptions/desc.primary]
Support files for Ada Langkit.
These used to be part of langkit, but they have been split out to their
own project.


[FILE:108:distinfo]
0ceb35394717bbebdf71a22f26d1f40c36ad4861a4b137d22d8964a89657752d      1282265 AdaCore-langkit-24.0.0.tar.gz


[FILE:108:manifests/plist.primary]
lib/liblangkit_support.so.%%SOVERSION%%
lib/langkit_support.relocatable/liblangkit_support.so.%%SOVERSION%%


[FILE:7364:manifests/plist.dev]
include/langkit_support/
 langkit_support-adalog-debug.adb
 langkit_support-adalog-debug.ads
 langkit_support-adalog-generic_main_support.adb
 langkit_support-adalog-generic_main_support.ads
 langkit_support-adalog-logic_var.adb
 langkit_support-adalog-logic_var.ads
 langkit_support-adalog-main_support.ads
 langkit_support-adalog-solver.adb
 langkit_support-adalog-solver.ads
 langkit_support-adalog-solver_interface.adb
 langkit_support-adalog-solver_interface.ads
 langkit_support-adalog.ads
 langkit_support-array_utils.adb
 langkit_support-array_utils.ads
 langkit_support-boxes.adb
 langkit_support-boxes.ads
 langkit_support-bump_ptr.ads
 langkit_support-bump_ptr_vectors.adb
 langkit_support-bump_ptr_vectors.ads
 langkit_support-cheap_sets.adb
 langkit_support-cheap_sets.ads
 langkit_support-diagnostics-output.adb
 langkit_support-diagnostics-output.ads
 langkit_support-diagnostics.adb
 langkit_support-diagnostics.ads
 langkit_support-errors.ads
 langkit_support-file_readers.adb
 langkit_support-file_readers.ads
 langkit_support-generic_api-analysis.adb
 langkit_support-generic_api-analysis.ads
 langkit_support-generic_api-introspection.adb
 langkit_support-generic_api-introspection.ads
 langkit_support-generic_api.adb
 langkit_support-generic_api.ads
 langkit_support-generic_bump_ptr.adb
 langkit_support-generic_bump_ptr.ads
 langkit_support-hashes.adb
 langkit_support-hashes.ads
 langkit_support-images.adb
 langkit_support-images.ads
 langkit_support-internal-analysis.adb
 langkit_support-internal-analysis.ads
 langkit_support-internal-conversions.ads
 langkit_support-internal-descriptor.ads
 langkit_support-internal-introspection.adb
 langkit_support-internal-introspection.ads
 langkit_support-internal.ads
 langkit_support-iterators.adb
 langkit_support-iterators.ads
 langkit_support-lexical_envs.ads
 langkit_support-lexical_envs_impl.adb
 langkit_support-lexical_envs_impl.ads
 langkit_support-names-maps.adb
 langkit_support-names-maps.ads
 langkit_support-names.adb
 langkit_support-names.ads
 langkit_support-packrat.adb
 langkit_support-packrat.ads
 langkit_support-relative_get.adb
 langkit_support-relative_get.ads
 langkit_support-slocs.adb
 langkit_support-slocs.ads
 langkit_support-symbols-precomputed.adb
 langkit_support-symbols-precomputed.ads
 langkit_support-symbols.adb
 langkit_support-symbols.ads
 langkit_support-text.adb
 langkit_support-text.ads
 langkit_support-token_data_handlers.adb
 langkit_support-token_data_handlers.ads
 langkit_support-tree_traversal_iterator.adb
 langkit_support-tree_traversal_iterator.ads
 langkit_support-types.ads
 langkit_support-vectors.adb
 langkit_support-vectors.ads
 langkit_support.ads
lib/liblangkit_support.so
lib/langkit_support.relocatable/
 langkit_support-adalog-debug.ali
 langkit_support-adalog-generic_main_support.ali
 langkit_support-adalog-logic_var.ali
 langkit_support-adalog-main_support.ali
 langkit_support-adalog-solver.ali
 langkit_support-adalog-solver_interface.ali
 langkit_support-adalog.ali
 langkit_support-array_utils.ali
 langkit_support-boxes.ali
 langkit_support-bump_ptr.ali
 langkit_support-bump_ptr_vectors.ali
 langkit_support-cheap_sets.ali
 langkit_support-diagnostics-output.ali
 langkit_support-diagnostics.ali
 langkit_support-errors.ali
 langkit_support-file_readers.ali
 langkit_support-generic_api-analysis.ali
 langkit_support-generic_api-introspection.ali
 langkit_support-generic_api.ali
 langkit_support-generic_bump_ptr.ali
 langkit_support-hashes.ali
 langkit_support-images.ali
 langkit_support-internal-analysis.ali
 langkit_support-internal-conversions.ali
 langkit_support-internal-descriptor.ali
 langkit_support-internal-introspection.ali
 langkit_support-internal.ali
 langkit_support-iterators.ali
 langkit_support-lexical_envs.ali
 langkit_support-lexical_envs_impl.ali
 langkit_support-names-maps.ali
 langkit_support-names.ali
 langkit_support-packrat.ali
 langkit_support-relative_get.ali
 langkit_support-slocs.ali
 langkit_support-symbols-precomputed.ali
 langkit_support-symbols.ali
 langkit_support-text.ali
 langkit_support-token_data_handlers.ali
 langkit_support-tree_traversal_iterator.ali
 langkit_support-types.ali
 langkit_support-vectors.ali
 langkit_support.ali
 liblangkit_support.so
lib/langkit_support.static/
 langkit_support-adalog-debug.ali
 langkit_support-adalog-generic_main_support.ali
 langkit_support-adalog-logic_var.ali
 langkit_support-adalog-main_support.ali
 langkit_support-adalog-solver.ali
 langkit_support-adalog-solver_interface.ali
 langkit_support-adalog.ali
 langkit_support-array_utils.ali
 langkit_support-boxes.ali
 langkit_support-bump_ptr.ali
 langkit_support-bump_ptr_vectors.ali
 langkit_support-cheap_sets.ali
 langkit_support-diagnostics-output.ali
 langkit_support-diagnostics.ali
 langkit_support-errors.ali
 langkit_support-file_readers.ali
 langkit_support-generic_api-analysis.ali
 langkit_support-generic_api-introspection.ali
 langkit_support-generic_api.ali
 langkit_support-generic_bump_ptr.ali
 langkit_support-hashes.ali
 langkit_support-images.ali
 langkit_support-internal-analysis.ali
 langkit_support-internal-conversions.ali
 langkit_support-internal-descriptor.ali
 langkit_support-internal-introspection.ali
 langkit_support-internal.ali
 langkit_support-iterators.ali
 langkit_support-lexical_envs.ali
 langkit_support-lexical_envs_impl.ali
 langkit_support-names-maps.ali
 langkit_support-names.ali
 langkit_support-packrat.ali
 langkit_support-relative_get.ali
 langkit_support-slocs.ali
 langkit_support-symbols-precomputed.ali
 langkit_support-symbols.ali
 langkit_support-text.ali
 langkit_support-token_data_handlers.ali
 langkit_support-tree_traversal_iterator.ali
 langkit_support-types.ali
 langkit_support-vectors.ali
 langkit_support.ali
 liblangkit_support.a
lib/langkit_support.static-pic/
 langkit_support-adalog-debug.ali
 langkit_support-adalog-generic_main_support.ali
 langkit_support-adalog-logic_var.ali
 langkit_support-adalog-main_support.ali
 langkit_support-adalog-solver.ali
 langkit_support-adalog-solver_interface.ali
 langkit_support-adalog.ali
 langkit_support-array_utils.ali
 langkit_support-boxes.ali
 langkit_support-bump_ptr.ali
 langkit_support-bump_ptr_vectors.ali
 langkit_support-cheap_sets.ali
 langkit_support-diagnostics-output.ali
 langkit_support-diagnostics.ali
 langkit_support-errors.ali
 langkit_support-file_readers.ali
 langkit_support-generic_api-analysis.ali
 langkit_support-generic_api-introspection.ali
 langkit_support-generic_api.ali
 langkit_support-generic_bump_ptr.ali
 langkit_support-hashes.ali
 langkit_support-images.ali
 langkit_support-internal-analysis.ali
 langkit_support-internal-conversions.ali
 langkit_support-internal-descriptor.ali
 langkit_support-internal-introspection.ali
 langkit_support-internal.ali
 langkit_support-iterators.ali
 langkit_support-lexical_envs.ali
 langkit_support-lexical_envs_impl.ali
 langkit_support-names-maps.ali
 langkit_support-names.ali
 langkit_support-packrat.ali
 langkit_support-relative_get.ali
 langkit_support-slocs.ali
 langkit_support-symbols-precomputed.ali
 langkit_support-symbols.ali
 langkit_support-text.ali
 langkit_support-token_data_handlers.ali
 langkit_support-tree_traversal_iterator.ali
 langkit_support-types.ali
 langkit_support-vectors.ali
 langkit_support.ali
 liblangkit_support.a
share/gpr/langkit_support.gpr


[FILE:408:patches/patch-langkit_support_langkit__support.gpr]
--- langkit/support/langkit_support.gpr.orig	2023-09-26 14:25:57 UTC
+++ langkit/support/langkit_support.gpr
@@ -75,6 +75,7 @@ library project Langkit_Support is
    end case;
 
    for Library_Name use "langkit_support";
+   for Library_Version use "liblangkit_support.so.%%SOVERSION%%";
    for Library_Kind use Library_Kind_Param;
    for Library_Dir use "lib/" & Library_Kind_Param & "/" & Build_Mode;
 

