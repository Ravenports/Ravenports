# Buildsheet autogenerated by ravenadm tool -- Do not edit.

NAMEBASE=		libxslt
VERSION=		1.1.34
KEYWORDS=		textproc
VARIANTS=		standard
SDESC[standard]=	XSLT C library for GNOME
HOMEPAGE=		http://xmlsoft.org/XSLT/
CONTACT=		nobody

DOWNLOAD_GROUPS=	main
SITES[main]=		ftp://xmlsoft.org/libxml2/
			http://xmlsoft.org/sources/
			ftp://gd.tuwien.ac.at/pub/libxml/
DISTFILE[1]=		libxslt-1.1.34.tar.gz:main
DIST_SUBDIR=		gnome2
DF_INDEX=		1
SPKGS[standard]=	single

OPTIONS_AVAILABLE=	none
OPTIONS_STANDARD=	none

BUILDRUN_DEPENDS=	libgcrypt:single:standard

USES=			cpe gmake libtool pkgconfig
GNOME_COMPONENTS=	libxml2

LICENSE=		MIT:single
LICENSE_FILE=		MIT:{{WRKSRC}}/COPYING
LICENSE_SCHEME=		solo

CPE_VENDOR=		xmlsoft
FPC_EQUIVALENT=		textproc/libxslt

MUST_CONFIGURE=		gnu
CONFIGURE_ARGS=		--with-html-dir={{PREFIX}}/share/doc
			--with-crypto
			--without-python

INSTALL_TARGET=		install-strip
INSTALL_REQ_TOOLCHAIN=	yes
PLIST_SUB=		XSLTVERSION=1.1.34
			EXSLTVERSION=0.8.20

post-patch:
	${REINPLACE_CMD} -e '/^install-data-am:/ s|install-data-local||' \
		${WRKSRC}/doc/Makefile.in
	${REINPLACE_CMD} -e 's|[$$](bindir)/xsltproc|../xsltproc/xsltproc|g ; \
		s|[$$](bindir)/xmllint|../xmllint/xmllint|g' \
		${WRKSRC}/doc/Makefile.in

[FILE:462:descriptions/desc.single]
Libxslt is the XSLT C library developed for the GNOME project.  XSLT
itself is a an XML language to define transformation for XML.  Libxslt is
based on libxml2, the XML C library developed for the GNOME project.  It
also implements most of the EXSLT set of processor-portable extensions
functions and some of Saxon's evaluate and expressions extensions.

People can either embed the library in their application or use xsltproc
the command line processing tool.


[FILE:107:distinfo]
98b1bd46d6792925ad2dfe9a87452ea2adebf69dcb9919ffd55bf926a7f93f7f      3552258 gnome2/libxslt-1.1.34.tar.gz


[FILE:690:manifests/plist.single]
bin/
 xslt-config
 xsltproc
include/libexslt/
 exslt.h
 exsltconfig.h
 exsltexports.h
include/libxslt/
 attributes.h
 documents.h
 extensions.h
 extra.h
 functions.h
 imports.h
 keys.h
 namespaces.h
 numbersInternals.h
 pattern.h
 preproc.h
 security.h
 templates.h
 transform.h
 variables.h
 xslt.h
 xsltInternals.h
 xsltconfig.h
 xsltexports.h
 xsltlocale.h
 xsltutils.h
lib/
 libexslt.a
 libexslt.so
 libexslt.so.%%EXSLTVERSION%%
 libexslt.so.0
 libxslt.a
 libxslt.so
 libxslt.so.%%XSLTVERSION%%
 libxslt.so.1
 xsltConf.sh
lib/pkgconfig/
 libexslt.pc
 libxslt.pc
share/aclocal/libxslt.m4
share/man/man1/xsltproc.1.gz
share/man/man3/
 libexslt.3.gz
 libxslt.3.gz
@dir lib/libxslt-plugins


[FILE:261:patches/patch-Makefile.in]
--- Makefile.in.orig	2017-11-02 20:34:22 UTC
+++ Makefile.in
@@ -417,8 +417,7 @@ SUBDIRS = \
 	libexslt \
 	xsltproc \
 	doc \
-	$(PYTHON_SUBDIR) \
-	tests
+	$(PYTHON_SUBDIR)
 
 DIST_SUBDIRS = libxslt libexslt xsltproc python doc tests
 confexecdir = $(libdir)


[FILE:925:patches/patch-configure]
--- configure.orig	2017-11-02 20:34:22 UTC
+++ configure
@@ -4620,7 +4620,7 @@ fi
 if test "${with_html_subdir+set}" = set; then :
   withval=$with_html_subdir; test "x$withval" != "x" && HTML_DIR="$HTML_DIR/$withval"
 else
-  HTML_DIR="$HTML_DIR/\$(PACKAGE)-\$(VERSION)/html"
+  HTML_DIR="$HTML_DIR/\$(PACKAGE)"
 fi
 
 
@@ -14135,11 +14135,12 @@ except: print 0"`
     fi
     if test "$PYTHON_VERSION" != ""
     then
+	with_python=`$PYTHON -c "import sys; print sys.exec_prefix"`
 	if test -r $with_python/include/python$PYTHON_VERSION/Python.h -a \
 	   -d $with_python/lib/python$PYTHON_VERSION/site-packages
 	then
 	    PYTHON_INCLUDES=$with_python/include/python$PYTHON_VERSION
-	    PYTHON_SITE_PACKAGES='$(libdir)/python$(PYTHON_VERSION)/site-packages'
+	    PYTHON_SITE_PACKAGES=$with_python/lib/python$PYTHON_VERSION/site-packages
 	else
 	    if test -r $prefix/include/python$PYTHON_VERSION/Python.h
 	    then


[FILE:774:patches/patch-python__Makefile.in]
--- python/Makefile.in.orig	2017-11-02 20:34:23 UTC
+++ python/Makefile.in
@@ -430,7 +430,7 @@ top_srcdir = @top_srcdir@
 AUTOMAKE_OPTIONS = 1.4 foreign
 SUBDIRS = . tests
 AM_CFLAGS = $(LIBXML_CFLAGS)
-DOCS_DIR = $(datadir)/doc/libxslt-python-$(LIBXSLT_VERSION)
+DOCS_DIR = $(datadir)/doc/py-libxslt
 # libxsltclass.txt is generated
 DOCS = TODO
 EXTRA_DIST = \
@@ -445,8 +445,8 @@ EXTRA_DIST = \
 
 libxsltmod_la_LDFLAGS = $(WIN32_EXTRA_LDFLAGS) -module -avoid-version
 @WITH_PYTHON_TRUE@mylibs = \
-@WITH_PYTHON_TRUE@	$(top_builddir)/libxslt/libxslt.la \
-@WITH_PYTHON_TRUE@	$(top_builddir)/libexslt/libexslt.la
+@WITH_PYTHON_TRUE@	-lxslt \
+@WITH_PYTHON_TRUE@	-lexslt
 
 @WITH_PYTHON_TRUE@python_LTLIBRARIES = libxsltmod.la
 @WITH_PYTHON_TRUE@libxsltmod_la_CPPFLAGS = \


[FILE:398:patches/patch-python__tests__Makefile.in]
--- python/tests/Makefile.in.orig	2017-11-02 20:34:23 UTC
+++ python/tests/Makefile.in
@@ -295,7 +295,7 @@ target_alias = @target_alias@
 top_build_prefix = @top_build_prefix@
 top_builddir = @top_builddir@
 top_srcdir = @top_srcdir@
-EXAMPLE_DIR = $(datadir)/doc/libxslt-python-$(LIBXSLT_VERSION)/examples
+EXAMPLE_DIR = $(datadir)/examples/py-libxslt
 TESTSPY = \
     basic.py	\
     exslt.py	\

