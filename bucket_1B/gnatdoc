# Buildsheet autogenerated by ravenadm tool -- Do not edit.

NAMEBASE=		gnatdoc
VERSION=		24.0.0
KEYWORDS=		textproc ada
VARIANTS=		std
SDESC[std]=		GNAT Documentation Generation Tool
HOMEPAGE=		https://github.com/AdaCore/gnatdoc
CONTACT=		John_Marino[draco@marino.st]

DOWNLOAD_GROUPS=	main
SITES[main]=		GITHUB/AdaCore:gnatdoc:v24.0.0
DISTFILE[1]=		generated:main
DF_INDEX=		1
SPKGS[std]=		set
			primary
			dev

OPTIONS_AVAILABLE=	none
OPTIONS_STANDARD=	none

BUILD_DEPENDS=		libvss:dev:std
			ada-markdown:single:std
			gpr-unit-provider:dev:std
			gpr-unit-provider:primary:std
BUILDRUN_DEPENDS=	gmp:primary:std

USES=			gmake gprbuild iconv

LICENSE=		GPLv3+:primary
LICENSE_TERMS=		primary:{{WRKDIR}}/TERMS
LICENSE_FILE=		GPLv3+:stock
LICENSE_AWK=		TERMS:"^$$"
LICENSE_SOURCE=		TERMS:{{WRKSRC}}/source/gnatdoc.ads
LICENSE_SCHEME=		solo

INSTALL_REQ_TOOLCHAIN=	yes

VAR_OPSYS[freebsd]=	MAKEFILE_LINE=XTRALIB="-lutil"
VAR_OPSYS[netbsd]=	MAKEFILE_LINE=XTRALIB="-lutil"
VAR_OPSYS[dragonfly]=	MAKEFILE_LINE=XTRALIB="-lutil"
VAR_OPSYS[midnightbsd]=	MAKEFILE_LINE=XTRALIB="-lutil"

post-install:
	${RM} -r ${STAGEDIR}${PREFIX}/share/gpr/manifests
	${STRIP_CMD} ${STAGEDIR}${PREFIX}/bin/gnatdoc

pre-configure:
	${REINPLACE_CMD} -e 's|@LIBS@|${XTRALIB}|' ${WRKSRC}/gnat/gnatdoc.gpr

[FILE:655:descriptions/desc.primary]
GNATdoc is a documentation tool for Ada which processes source files,
extracts documentation directly from the sources, and generates
annotated HTML files. It is based on the source cross-reference information
(e.g. generated by GNAT for Ada files). This means that you should ensure
that cross-reference information has been generated before generating the
documentation. It also relies on standard comments that it extracts from
the source code. The engine in charge of extracting them coupled with the
cross-reference engine gives GNATdoc all the flexibility needed to generate
accurate documentation, and report errors in case of wrong documentation.


[FILE:108:distinfo]
bbd046bd5007dd5a7453221973c05bfbd3ff46ea4ebfed8dea471f9a5c6e4df8       113089 AdaCore-gnatdoc-24.0.0.tar.gz


[FILE:12:manifests/plist.primary]
bin/gnatdoc


[FILE:2847:manifests/plist.dev]
include/gnatdoc/
 gnatdoc-backend-html.adb
 gnatdoc-backend-html.ads
 gnatdoc-backend-html_markup.adb
 gnatdoc-backend-html_markup.ads
 gnatdoc-backend-rst-pt.adb
 gnatdoc-backend-rst-pt.ads
 gnatdoc-backend-rst.adb
 gnatdoc-backend-rst.ads
 gnatdoc-backend.adb
 gnatdoc-backend.ads
 gnatdoc-command_line.adb
 gnatdoc-command_line.ads
 gnatdoc-comments-proxies.adb
 gnatdoc-comments-proxies.ads
 gnatdoc-comments-rst_helpers.adb
 gnatdoc-comments-rst_helpers.ads
 gnatdoc-comments-undocumented_checker.adb
 gnatdoc-comments-undocumented_checker.ads
 gnatdoc-configuration-command_line.adb
 gnatdoc-configuration-command_line.ads
 gnatdoc-configuration-project.adb
 gnatdoc-configuration-project.ads
 gnatdoc-configuration.adb
 gnatdoc-configuration.ads
 gnatdoc-driver.adb
 gnatdoc-entities.adb
 gnatdoc-entities.ads
 gnatdoc-frontend-options.ads
 gnatdoc-frontend.adb
 gnatdoc-frontend.ads
 gnatdoc-options.ads
 gnatdoc-projects.adb
 gnatdoc-projects.ads
 streams.adb
 streams.ads
include/libgnatdoc/
 gnatdoc-comments-builders-enumerations.adb
 gnatdoc-comments-builders-enumerations.ads
 gnatdoc-comments-builders-generics.adb
 gnatdoc-comments-builders-generics.ads
 gnatdoc-comments-builders-private_types.adb
 gnatdoc-comments-builders-private_types.ads
 gnatdoc-comments-builders-protecteds.adb
 gnatdoc-comments-builders-protecteds.ads
 gnatdoc-comments-builders-records.adb
 gnatdoc-comments-builders-records.ads
 gnatdoc-comments-builders-subprograms.adb
 gnatdoc-comments-builders-subprograms.ads
 gnatdoc-comments-builders.adb
 gnatdoc-comments-builders.ads
 gnatdoc-comments-extractor.adb
 gnatdoc-comments-extractor.ads
 gnatdoc-comments-helpers.adb
 gnatdoc-comments-helpers.ads
 gnatdoc-comments-options.ads
 gnatdoc-comments-utilities.adb
 gnatdoc-comments-utilities.ads
 gnatdoc-comments.adb
 gnatdoc-comments.ads
 gnatdoc-messages.adb
 gnatdoc-messages.ads
 gnatdoc.ads
lib/libgnatdoc/
 gnatdoc-comments-builders-enumerations.ali
 gnatdoc-comments-builders-enumerations.o
 gnatdoc-comments-builders-generics.ali
 gnatdoc-comments-builders-generics.o
 gnatdoc-comments-builders-private_types.ali
 gnatdoc-comments-builders-private_types.o
 gnatdoc-comments-builders-protecteds.ali
 gnatdoc-comments-builders-protecteds.o
 gnatdoc-comments-builders-records.ali
 gnatdoc-comments-builders-records.o
 gnatdoc-comments-builders-subprograms.ali
 gnatdoc-comments-builders-subprograms.o
 gnatdoc-comments-builders.ali
 gnatdoc-comments-builders.o
 gnatdoc-comments-extractor.ali
 gnatdoc-comments-extractor.o
 gnatdoc-comments-helpers.ali
 gnatdoc-comments-helpers.o
 gnatdoc-comments-options.ali
 gnatdoc-comments-options.o
 gnatdoc-comments-utilities.ali
 gnatdoc-comments-utilities.o
 gnatdoc-comments.ali
 gnatdoc-comments.o
 gnatdoc-messages.ali
 gnatdoc-messages.o
 gnatdoc.ali
 gnatdoc.o
share/gpr/
 gnatdoc.gpr
 libgnatdoc.gpr


[FILE:746:patches/patch-Makefile]
--- Makefile.orig	2023-09-14 13:34:58 UTC
+++ Makefile
@@ -4,8 +4,12 @@ docdir = ${PREFIX}/share/doc/gnatdoc
 SCENARIO_VARIABLES=-XGPR_UNIT_PROVIDER_LIBRARY_TYPE=static -XGPR_UNIT_PROVIDER_BUILD=debug -XVSS_LIBRARY_TYPE=static -XMARKDOWN_LIBRARY_TYPE=static
 
 all:
-	gprbuild -j0 -p -P gnat/libgnatdoc.gpr
-	gprbuild -j0 -p -P gnat/gnatdoc.gpr ${SCENARIO_VARIABLES}
+	gprbuild -j0 -p -P gnat/libgnatdoc.gpr -XLIBRARY_TYPE=static-pic
+	gprbuild -j0 -p -P gnat/gnatdoc.gpr -XLIBRARY_TYPE=static-pic ${SCENARIO_VARIABLES}
+
+install:
+	gprinstall -p -P gnat/libgnatdoc.gpr -XLIBRARY_TYPE=static-pic --prefix=${DESTDIR}${PREFIX}
+	gprinstall -p -P gnat/gnatdoc.gpr -XLIBRARY_TYPE=static-pic --prefix=${DESTDIR}${PREFIX}
 
 clean:
 	rm -rf .objs bin


[FILE:283:patches/patch-gnat_gnatdoc.gpr]
--- gnat/gnatdoc.gpr.orig	2023-09-14 13:34:58 UTC
+++ gnat/gnatdoc.gpr
@@ -40,4 +40,8 @@ project GNATdoc is
       for Executable ("gnatdoc-driver.adb") use "gnatdoc";
    end Builder;
 
+   package Linker is
+      for Switches ("ada") use (@LIBS@);
+   end Linker;
+
 end GNATdoc;

