# Buildsheet autogenerated by ravenadm tool -- Do not edit.

NAMEBASE=		gnatdoc
VERSION=		23.0.0
REVISION=		1
KEYWORDS=		textproc ada
VARIANTS=		standard
SDESC[standard]=	GNAT Documentation Generation Tool
HOMEPAGE=		https://github.com/AdaCore/gnatdoc
CONTACT=		John_Marino[draco@marino.st]

DOWNLOAD_GROUPS=	main
SITES[main]=		GITHUB/AdaCore:gnatdoc:v23.0.0
DISTFILE[1]=		generated:main
DF_INDEX=		1
SPKGS[standard]=	single

OPTIONS_AVAILABLE=	none
OPTIONS_STANDARD=	none

BUILD_DEPENDS=		libadalang:single:standard
			xmlada:primary:standard
			libvss:single:standard
			gpr:single:standard
			ada-markdown:single:standard
			gpr-unit-provider:single:standard
BUILDRUN_DEPENDS=	gmp:shared:standard

USES=			gmake gprbuild iconv

LICENSE=		GPLv3+:single
LICENSE_TERMS=		single:{{WRKDIR}}/TERMS
LICENSE_FILE=		GPLv3+:stock
LICENSE_AWK=		TERMS:"^$$"
LICENSE_SOURCE=		TERMS:{{WRKSRC}}/source/gnatdoc.ads
LICENSE_SCHEME=		solo

INSTALL_REQ_TOOLCHAIN=	yes

VAR_OPSYS[freebsd]=	MAKEFILE_LINE=XTRALIB="-lutil"
VAR_OPSYS[netbsd]=	MAKEFILE_LINE=XTRALIB="-lutil"
VAR_OPSYS[dragonfly]=	MAKEFILE_LINE=XTRALIB="-lutil"
VAR_OPSYS[midnightbsd]=	MAKEFILE_LINE=XTRALIB="-lutil"

post-install:
	${RM} -r ${STAGEDIR}${PREFIX}/share/gpr/manifests
	${STRIP_CMD} ${STAGEDIR}${PREFIX}/bin/gnatdoc4

pre-configure:
	${REINPLACE_CMD} -e 's|@LIBS@|${XTRALIB}|' ${WRKSRC}/gnat/gnatdoc.gpr

[FILE:655:descriptions/desc.single]
GNATdoc is a documentation tool for Ada which processes source files,
extracts documentation directly from the sources, and generates
annotated HTML files. It is based on the source cross-reference information
(e.g. generated by GNAT for Ada files). This means that you should ensure
that cross-reference information has been generated before generating the
documentation. It also relies on standard comments that it extracts from
the source code. The engine in charge of extracting them coupled with the
cross-reference engine gives GNATdoc all the flexibility needed to generate
accurate documentation, and report errors in case of wrong documentation.


[FILE:108:distinfo]
123c8e3517512f6f4f7e92d62f2d0e1b35c8d59c87acc5ba504eeeb0988b20d5        39607 AdaCore-gnatdoc-23.0.0.tar.gz


[FILE:1840:manifests/plist.single]
bin/gnatdoc4
include/gnatdoc/
 gnatdoc-backend-html.adb
 gnatdoc-backend-html.ads
 gnatdoc-backend-html_markup.adb
 gnatdoc-backend-html_markup.ads
 gnatdoc-backend.adb
 gnatdoc-backend.ads
 gnatdoc-command_line.adb
 gnatdoc-command_line.ads
 gnatdoc-comments-proxies.adb
 gnatdoc-comments-proxies.ads
 gnatdoc-driver.adb
 gnatdoc-entities.adb
 gnatdoc-entities.ads
 gnatdoc-frontend-options.ads
 gnatdoc-frontend.adb
 gnatdoc-frontend.ads
 gnatdoc-options.ads
 gnatdoc-projects.adb
 gnatdoc-projects.ads
 streams.adb
 streams.ads
include/libgnatdoc/
 gnatdoc-comments-builders-enumerations.adb
 gnatdoc-comments-builders-enumerations.ads
 gnatdoc-comments-builders-generics.adb
 gnatdoc-comments-builders-generics.ads
 gnatdoc-comments-builders-records.adb
 gnatdoc-comments-builders-records.ads
 gnatdoc-comments-builders-subprograms.adb
 gnatdoc-comments-builders-subprograms.ads
 gnatdoc-comments-builders.adb
 gnatdoc-comments-builders.ads
 gnatdoc-comments-extractor.adb
 gnatdoc-comments-extractor.ads
 gnatdoc-comments-helpers.adb
 gnatdoc-comments-helpers.ads
 gnatdoc-comments-options.ads
 gnatdoc-comments.adb
 gnatdoc-comments.ads
 gnatdoc.ads
lib/libgnatdoc/
 gnatdoc-comments-builders-enumerations.ali
 gnatdoc-comments-builders-enumerations.o
 gnatdoc-comments-builders-generics.ali
 gnatdoc-comments-builders-generics.o
 gnatdoc-comments-builders-records.ali
 gnatdoc-comments-builders-records.o
 gnatdoc-comments-builders-subprograms.ali
 gnatdoc-comments-builders-subprograms.o
 gnatdoc-comments-builders.ali
 gnatdoc-comments-builders.o
 gnatdoc-comments-extractor.ali
 gnatdoc-comments-extractor.o
 gnatdoc-comments-helpers.ali
 gnatdoc-comments-helpers.o
 gnatdoc-comments-options.ali
 gnatdoc-comments-options.o
 gnatdoc-comments.ali
 gnatdoc-comments.o
 gnatdoc.ali
 gnatdoc.o
share/gpr/
 gnatdoc.gpr
 libgnatdoc.gpr


[FILE:828:patches/patch-Makefile]
--- Makefile.orig	2022-09-20 14:18:23 UTC
+++ Makefile
@@ -1,7 +1,11 @@
 
 all:
-	gprbuild -j0 -p -P gnat/libgnatdoc.gpr -XSUPERPROJECT=
-	gprbuild -j0 -p -P gnat/gnatdoc.gpr -XGPR_UNIT_PROVIDER_LIBRARY_TYPE=static -XSUPERPROJECT= -XGPR_UNIT_PROVIDER_BUILD=debug
+	gprbuild -j0 -p -P gnat/libgnatdoc.gpr -XLIBRARY_TYPE=static-pic -XSUPERPROJECT=
+	gprbuild -j0 -p -P gnat/gnatdoc.gpr -XLIBRARY_TYPE=static-pic -XGPR_UNIT_PROVIDER_LIBRARY_TYPE=static -XSUPERPROJECT= -XGPR_UNIT_PROVIDER_BUILD=debug
+
+install:
+	gprinstall -p -P gnat/libgnatdoc.gpr -XLIBRARY_TYPE=static-pic -XSUPERPROJECT= --prefix=${DESTDIR}${PREFIX}
+	gprinstall -p -P gnat/gnatdoc.gpr -XLIBRARY_TYPE=static-pic -XGPR_UNIT_PROVIDER_LIBRARY_TYPE=static -XSUPERPROJECT= -XGPR_UNIT_PROVIDER_BUILD=debug --prefix=${DESTDIR}${PREFIX}
 
 clean:
 	rm -rf .objs bin


[FILE:284:patches/patch-gnat_gnatdoc.gpr]
--- gnat/gnatdoc.gpr.orig	2022-09-20 14:18:23 UTC
+++ gnat/gnatdoc.gpr
@@ -40,4 +40,8 @@ project GNATdoc is
       for Executable ("gnatdoc-driver.adb") use "gnatdoc4";
    end Builder;
 
+   package Linker is
+      for Switches ("ada") use (@LIBS@);
+   end Linker;
+
 end GNATdoc;

