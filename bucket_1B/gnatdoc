# Buildsheet autogenerated by ravenadm tool -- Do not edit.

NAMEBASE=		gnatdoc
VERSION=		25.0.0
KEYWORDS=		textproc ada
VARIANTS=		std
SDESC[std]=		GNAT Documentation Generation Tool
HOMEPAGE=		https://github.com/AdaCore/gnatdoc
CONTACT=		John_Marino[draco@marino.st]

DOWNLOAD_GROUPS=	main
SITES[main]=		GITHUB/AdaCore:gnatdoc:v25.0.0
DISTFILE[1]=		generated:main
DF_INDEX=		1
SPKGS[std]=		set
			primary
			dev

OPTIONS_AVAILABLE=	none
OPTIONS_STANDARD=	none

BUILD_DEPENDS=		libvss:dev:std
			ada-markdown:single:std
			libgpr2:dev:std
			libadalang:dev:std
BUILDRUN_DEPENDS=	gmp:primary:std
			libgpr2:primary:std
			libadalang:primary:std

USES=			gmake gprbuild iconv:build

LICENSE=		GPLv3+:primary
LICENSE_TERMS=		primary:{{WRKDIR}}/TERMS
LICENSE_FILE=		GPLv3+:stock
LICENSE_AWK=		TERMS:"^$$"
LICENSE_SOURCE=		TERMS:{{WRKSRC}}/source/gnatdoc.ads
LICENSE_SCHEME=		solo

BUILD_TARGET=		build-gnatdoc build-libgnatdoc

INSTALL_REQ_TOOLCHAIN=	yes

VAR_OPSYS[freebsd]=	MAKEFILE_LINE=XTRALIB="-lutil"
VAR_OPSYS[netbsd]=	MAKEFILE_LINE=XTRALIB="-lutil"
VAR_OPSYS[dragonfly]=	MAKEFILE_LINE=XTRALIB="-lutil"
VAR_OPSYS[midnightbsd]=	MAKEFILE_LINE=XTRALIB="-lutil"

post-install:
	${STRIP_CMD} ${STAGEDIR}${PREFIX}/bin/gnatdoc

pre-configure:
	${REINPLACE_CMD} -e 's|@LIBS@|${XTRALIB}|' ${WRKSRC}/gnat/gnatdoc.gpr

[FILE:655:descriptions/desc.primary]
GNATdoc is a documentation tool for Ada which processes source files,
extracts documentation directly from the sources, and generates
annotated HTML files. It is based on the source cross-reference information
(e.g. generated by GNAT for Ada files). This means that you should ensure
that cross-reference information has been generated before generating the
documentation. It also relies on standard comments that it extracts from
the source code. The engine in charge of extracting them coupled with the
cross-reference engine gives GNATdoc all the flexibility needed to generate
accurate documentation, and report errors in case of wrong documentation.


[FILE:108:distinfo]
970b29549f8b762d5cb35534352d7eb6747af6e7c22c847b79d84e3ee4739e91       179534 AdaCore-gnatdoc-25.0.0.tar.gz


[FILE:117:manifests/plist.primary]
bin/gnatdoc
share/gnatdoc/html/static/gnatdoc.css
share/gnatdoc/html/template/
 class.xhtml
 index.xhtml
 unit.xhtml


[FILE:3146:manifests/plist.dev]
include/gnatdoc/
 gnatdoc-backend-html.adb
 gnatdoc-backend-html.ads
 gnatdoc-backend-html_markup.adb
 gnatdoc-backend-html_markup.ads
 gnatdoc-backend-registry.adb
 gnatdoc-backend-registry.ads
 gnatdoc-backend-rst-pt.adb
 gnatdoc-backend-rst-pt.ads
 gnatdoc-backend-rst.adb
 gnatdoc-backend-rst.ads
 gnatdoc-backend-test.adb
 gnatdoc-backend-test.ads
 gnatdoc-backend.adb
 gnatdoc-backend.ads
 gnatdoc-command_line.adb
 gnatdoc-command_line.ads
 gnatdoc-comments-proxies.adb
 gnatdoc-comments-proxies.ads
 gnatdoc-comments-rst_helpers.adb
 gnatdoc-comments-rst_helpers.ads
 gnatdoc-comments-undocumented_checker.adb
 gnatdoc-comments-undocumented_checker.ads
 gnatdoc-configuration-command_line.adb
 gnatdoc-configuration-command_line.ads
 gnatdoc-configuration-project.adb
 gnatdoc-configuration-project.ads
 gnatdoc-configuration.adb
 gnatdoc-configuration.ads
 gnatdoc-driver.adb
 gnatdoc-entities.adb
 gnatdoc-entities.ads
 gnatdoc-frontend-options.ads
 gnatdoc-frontend.adb
 gnatdoc-frontend.ads
 gnatdoc-options.ads
 gnatdoc-projects.adb
 gnatdoc-projects.ads
 gnatdoc-version.ads
 streams.adb
 streams.ads
include/libgnatdoc/
 gnatdoc-comments-builders-enumerations.adb
 gnatdoc-comments-builders-enumerations.ads
 gnatdoc-comments-builders-generics.adb
 gnatdoc-comments-builders-generics.ads
 gnatdoc-comments-builders-private_types.adb
 gnatdoc-comments-builders-private_types.ads
 gnatdoc-comments-builders-protecteds.adb
 gnatdoc-comments-builders-protecteds.ads
 gnatdoc-comments-builders-records.adb
 gnatdoc-comments-builders-records.ads
 gnatdoc-comments-builders-subprograms.adb
 gnatdoc-comments-builders-subprograms.ads
 gnatdoc-comments-builders.adb
 gnatdoc-comments-builders.ads
 gnatdoc-comments-extractor.adb
 gnatdoc-comments-extractor.ads
 gnatdoc-comments-helpers.adb
 gnatdoc-comments-helpers.ads
 gnatdoc-comments-options.ads
 gnatdoc-comments-utilities.adb
 gnatdoc-comments-utilities.ads
 gnatdoc-comments.adb
 gnatdoc-comments.ads
 gnatdoc-messages.adb
 gnatdoc-messages.ads
 gnatdoc.ads
 vss-strings-formatters-virtual_files.adb
 vss-strings-formatters-virtual_files.ads
lib/libgnatdoc/
 gnatdoc-comments-builders-enumerations.ali
 gnatdoc-comments-builders-enumerations.o
 gnatdoc-comments-builders-generics.ali
 gnatdoc-comments-builders-generics.o
 gnatdoc-comments-builders-private_types.ali
 gnatdoc-comments-builders-private_types.o
 gnatdoc-comments-builders-protecteds.ali
 gnatdoc-comments-builders-protecteds.o
 gnatdoc-comments-builders-records.ali
 gnatdoc-comments-builders-records.o
 gnatdoc-comments-builders-subprograms.ali
 gnatdoc-comments-builders-subprograms.o
 gnatdoc-comments-builders.ali
 gnatdoc-comments-builders.o
 gnatdoc-comments-extractor.ali
 gnatdoc-comments-extractor.o
 gnatdoc-comments-helpers.ali
 gnatdoc-comments-helpers.o
 gnatdoc-comments-options.ali
 gnatdoc-comments-options.o
 gnatdoc-comments-utilities.ali
 gnatdoc-comments-utilities.o
 gnatdoc-comments.ali
 gnatdoc-comments.o
 gnatdoc-messages.ali
 gnatdoc-messages.o
 gnatdoc.ali
 gnatdoc.o
 vss-strings-formatters-virtual_files.ali
 vss-strings-formatters-virtual_files.o
share/gpr/
 gnatdoc.gpr
 libgnatdoc.gpr


[FILE:1023:patches/patch-Makefile]
--- Makefile.orig	2024-10-04 13:57:51 UTC
+++ Makefile
@@ -1,17 +1,27 @@
 PREFIX ?= `pwd`/install
 docdir = ${PREFIX}/share/doc/gnatdoc
 
-SCENARIO_VARIABLES=-XGPR_UNIT_PROVIDER_LIBRARY_TYPE=static -XGPR_UNIT_PROVIDER_BUILD=debug -XVSS_LIBRARY_TYPE=static -XMARKDOWN_LIBRARY_TYPE=static
+SCENARIO_VARIABLES= -XVSS_LIBRARY_TYPE=static-pic -XMARKDOWN_LIBRARY_TYPE=static-pic
 
 all: build-gnatdoc
 
 build-all: build-libgnatdoc build-gnatdoc build-tests
 
 build-libgnatdoc:
-	gprbuild -j0 -p -P gnat/libgnatdoc.gpr
+	gprbuild -p -P gnat/libgnatdoc.gpr -XLIBRARY_TYPE=static-pic
 
 build-gnatdoc:
-	gprbuild -j0 -p -P gnat/gnatdoc.gpr ${SCENARIO_VARIABLES}
+	gprbuild -p -P gnat/gnatdoc.gpr -XLIBRARY_TYPE=static-pic ${SCENARIO_VARIABLES}
+
+install:
+	gprinstall -p -P gnat/libgnatdoc.gpr \
+		-XLIBRARY_TYPE=static-pic \
+		--no-manifests \
+		--prefix=${DESTDIR}${PREFIX}
+	gprinstall -p -P gnat/gnatdoc.gpr \
+		-XLIBRARY_TYPE=static-pic \
+		--no-manifests \
+		--prefix=${DESTDIR}${PREFIX}
 
 clean:
 	rm -rf .objs bin


[FILE:420:patches/patch-gnat_gnatdoc.gpr]
--- gnat/gnatdoc.gpr.orig	2024-10-04 13:57:51 UTC
+++ gnat/gnatdoc.gpr
@@ -40,8 +40,12 @@ project GNATdoc is
       for Executable ("gnatdoc-driver.adb") use "gnatdoc";
    end Builder;
 
+   package Linker is
+      for Switches ("ada") use (@LIBS@);
+   end Linker;
+
    package Install is
-      for Artifacts ("share") use ("../share");
+      for Artifacts (".") use ("../share");
    end Install;
 
 end GNATdoc;

