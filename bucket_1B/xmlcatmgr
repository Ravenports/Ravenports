# Buildsheet autogenerated by ravenadm tool -- Do not edit.

NAMEBASE=		xmlcatmgr
VERSION=		2.2
REVISION=		2
KEYWORDS=		textproc
VARIANTS=		standard
SDESC[standard]=	SGML and XML catalog manager
HOMEPAGE=		http://xmlcatmgr.sourceforge.net/
CONTACT=		nobody

DOWNLOAD_GROUPS=	main
SITES[main]=		SF/xmlcatmgr/xmlcatmgr/2.2
DISTFILE[1]=		xmlcatmgr-2.2.tar.gz:main
DF_INDEX=		1
SPKGS[standard]=	single

OPTIONS_AVAILABLE=	none
OPTIONS_STANDARD=	none

LICENSE=		BSD3CLAUSE:single
LICENSE_FILE=		BSD3CLAUSE:{{WRKSRC}}/COPYING
LICENSE_SCHEME=		solo

FPC_EQUIVALENT=		textproc/xmlcatmgr

INVALID_RPATH=		yes
MUST_CONFIGURE=		gnu
CONFIGURE_ARGS=		--disable-docs
			DEFAULT_CATALOG_SGML={{PREFIX}}/share/sgml/catalog.ports
			DEFAULT_CATALOG_XML={{PREFIX}}/share/xml/catalog.ports

SUB_FILES=		pkg-install-single
			pkg-deinstall-single
			pkg-message-single
SUB_LIST=		CATALOG_MASTER_SGML={{PREFIX}}/share/sgml/catalog
			CATALOG_MASTER_XML={{PREFIX}}/share/xml/catalog
			CATALOG_PORTS_SGML={{PREFIX}}/share/sgml/catalog.ports
			CATALOG_PORTS_XML={{PREFIX}}/share/xml/catalog.ports
			XMLCATMGR={{PREFIX}}/bin/xmlcatmgr

post-install:
	@${MKDIR} ${STAGEDIR}${PREFIX}/share/sgml \
		${STAGEDIR}${PREFIX}/share/xml

[FILE:578:descriptions/desc.single]
XML Catalog Manager (xmlcatmgr in its short form) is a small utility
used to manipulate SGML and XML catalogs.  It is extremely small and
lightweight, specially designed to be run from packaging systems.
Basically, it allows adding and removing entries from catalogs in a
completely automated way.

A catalog is a lookup mechanism used to translate entities into other
different entities.  They can, for example, map public identifiers to
local files or URIs.  This allows you to tell the parser where to look
for entities without having to modify the original document source.


[FILE:99:distinfo]
ea1142b6aef40fbd624fc3e2130cf10cf081b5fa88e5229c92b8f515779d6fdc        97265 xmlcatmgr-2.2.tar.gz


[FILE:75:manifests/plist.single]
bin/xmlcatmgr
share/man/man1/xmlcatmgr.1.gz
@dir share/sgml
@dir share/xml


[FILE:1055:files/pkg-deinstall-single.in]
#!/bin/sh

PATH=/bin:/usr/bin:%%LOCALBASE%%/bin

export PATH
XMLCATMGR=%%XMLCATMGR%%
CATALOG_MASTER_SGML=%%CATALOG_MASTER_SGML%%
CATALOG_MASTER_XML=%%CATALOG_MASTER_XML%%
CATALOG_PORTS_SGML=%%CATALOG_PORTS_SGML%%
CATALOG_PORTS_XML=%%CATALOG_PORTS_XML%%

case $2 in
DEINSTALL)

T=/tmp/catalog.$$

${XMLCATMGR} -sc ${CATALOG_MASTER_SGML} remove CATALOG catalog.ports
${XMLCATMGR} -sc ${T} create
if cmp -s ${T} ${CATALOG_MASTER_SGML}
then
	echo " + Removing ${CATALOG_MASTER_SGML}.  It is empty."
	rm -f ${CATALOG_MASTER_SGML}
fi
if cmp -s ${T} ${CATALOG_PORTS_SGML}
then
	echo " + Removing ${CATALOG_PORTS_SGML}.  It is empty."
	rm -f ${CATALOG_PORTS_SGML}
fi
rm -f ${T}

${XMLCATMGR} -c ${CATALOG_MASTER_XML} remove nextCatalog ${CATALOG_PORTS_XML}
${XMLCATMGR} -c ${T} create
if cmp -s ${T} ${CATALOG_MASTER_XML}
then
	echo " + Removing ${CATALOG_MASTER_XML}.  It is empty."
	rm -f ${CATALOG_MASTER_XML}
fi
if cmp -s ${T} ${CATALOG_PORTS_XML}
then
	echo " + Removing ${CATALOG_PORTS_XML}.  It is empty."
	rm -f ${CATALOG_PORTS_XML}
fi
rm -f ${T}
;;
esac


[FILE:1259:files/pkg-install-single.in]
#!/bin/sh

PATH=/bin:/usr/bin:%%LOCALBASE%%/bin

export PATH
XMLCATMGR=%%XMLCATMGR%%
CATALOG_MASTER_SGML=%%CATALOG_MASTER_SGML%%
CATALOG_MASTER_XML=%%CATALOG_MASTER_XML%%
CATALOG_PORTS_SGML=%%CATALOG_PORTS_SGML%%
CATALOG_PORTS_XML=%%CATALOG_PORTS_XML%%

case $2 in
POST-INSTALL)

if [ ! -r ${CATALOG_MASTER_SGML} ]; then
	echo " + Creating ${CATALOG_MASTER_SGML}"
	${XMLCATMGR} -sc ${CATALOG_MASTER_SGML} create
fi

if ! ${XMLCATMGR} -sc ${CATALOG_MASTER_SGML} lookup catalog.ports > /dev/null 2>&1; then
	echo " + Registering CATALOG catalog.ports (SGML)"
	${XMLCATMGR} -sc ${CATALOG_MASTER_SGML} add CATALOG catalog.ports
fi

if [ ! -r ${CATALOG_PORTS_SGML} ]; then
	echo " + Creating ${CATALOG_PORTS_SGML}"
	${XMLCATMGR} -sc ${CATALOG_PORTS_SGML} create
fi

if [ ! -r ${CATALOG_MASTER_XML} ]; then
	echo " + Creating ${CATALOG_MASTER_XML}"
	${XMLCATMGR} -c ${CATALOG_MASTER_XML} create
fi

if ! ${XMLCATMGR} -c ${CATALOG_MASTER_XML} lookup ${CATALOG_PORTS_XML} > /dev/null 2>&1 ; then
	echo " + Registering nextCatalog catalog.ports (XML)"
	${XMLCATMGR} -c ${CATALOG_MASTER_XML} add nextCatalog ${CATALOG_PORTS_XML}
fi

if [ ! -r ${CATALOG_PORTS_XML} ]; then
	echo " + Creating ${CATALOG_PORTS_XML}"
	${XMLCATMGR} -c ${CATALOG_PORTS_XML} create
fi
;;
esac


[FILE:651:files/pkg-message-single.in]
The following catalogs are installed:

 1) %%PREFIX%%/share/sgml/catalog

   The top level catalog for SGML stuff.  It is not changed
   by any ports/packages except textproc/xmlcatmgr.

 2) %%PREFIX%%/share/sgml/catalog.ports

   This catalog is for handling SGML stuff installed under
   %%PREFIX%%/share/sgml.  It is changed by ports/packages.

 3) %%PREFIX%%/share/xml/catalog

   The top level catalog for XML stuff.  It is not changed
   by any ports/packages except textproc/xmlcatmgr.

 4) %%PREFIX%%/share/xml/catalog.ports

   This catalog is for handling XML stuff installed under
   %%PREFIX%%/share/xml.  It is changed by ports/packages.

