# Buildsheet autogenerated by ravenadm tool -- Do not edit.

NAMEBASE=		libmpack
VERSION=		1.0.5
KEYWORDS=		devel
VARIANTS=		standard
SDESC[standard]=	Small binary serialization/RPC library
HOMEPAGE=		https://github.com/libmpack
CONTACT=		nobody

DOWNLOAD_GROUPS=	main
SITES[main]=		GITHUB/libmpack:libmpack:1.0.5
DISTFILE[1]=		generated:main
DF_INDEX=		1
SPKGS[standard]=	single

OPTIONS_AVAILABLE=	none
OPTIONS_STANDARD=	none

USES=			gmake libtool:build

post-install:
	${STRIP_CMD} ${STAGEDIR}${PREFIX}/lib/libmpack.so

[FILE:118:descriptions/desc.single]
libmpack is a small binary serialization/RPC library that implements both
the msgpack and msgpack-rpc specifications.


[FILE:109:distinfo]
4ce91395d81ccea97d3ad4cb962f8540d166e59d3e2ddce8a22979b49f108956        32966 libmpack-libmpack-1.0.5.tar.gz


[FILE:103:manifests/plist.single]
include/mpack.h
lib/
 libmpack.a
 libmpack.so
 libmpack.so.0
 libmpack.so.0.0.0
lib/pkgconfig/mpack.pc


[FILE:528:patches/patch-tests_deps_tap_tap.c]
$NetBSD$

Fix redefinition of MAP_ANONYMOUS
https://github.com/libmpack/libmpack/issues/42

--- test/deps/tap/tap.c.orig	2017-03-19 20:48:19 UTC
+++ test/deps/tap/tap.c
@@ -298,8 +298,12 @@ tap_end_todo () {
 #include <sys/param.h>
 #include <regex.h>
 
-#if defined __APPLE__ || defined BSD
+#ifndef MAP_ANONYMOUS
+#ifdef MAP_ANON
 #define MAP_ANONYMOUS MAP_ANON
+#else
+#error "System does not support mapping anonymous pages"
+#endif
 #endif
 
 /* Create a shared memory int to keep track of whether a piece of code executed

