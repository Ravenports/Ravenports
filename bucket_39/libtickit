# Buildsheet autogenerated by ravenadm tool -- Do not edit.

NAMEBASE=		libtickit
VERSION=		0.4.4
KEYWORDS=		devel
VARIANTS=		std
SDESC[std]=		Terminal Interface Construction Kit
HOMEPAGE=		http://www.leonerd.org.uk/code/libtickit/
CONTACT=		nobody

DOWNLOAD_GROUPS=	main
SITES[main]=		https://launchpad.net/libtickit/trunk/v0.4/+download/
DISTFILE[1]=		libtickit-0.4.4.tar.gz:main
DF_INDEX=		1
SPKGS[std]=		set
			primary
			dev
			man

OPTIONS_AVAILABLE=	none
OPTIONS_STANDARD=	none

BUILD_DEPENDS=		libtermkey:dev:std
BUILDRUN_DEPENDS=	libtermkey:primary:std
B_DEPS[sunos]=		libbsd4sol:single:std

USES=			gmake pkgconfig libtool:build ncurses

LICENSE=		MIT:primary
LICENSE_FILE=		MIT:{{WRKSRC}}/LICENSE
LICENSE_SCHEME=		solo

MAKE_ARGS=		PREFIX="{{PREFIX}}"

SOVERSION=		3.0.0

VAR_OPSYS[sunos]=	CFLAGS=-D__EXTENSIONS__
			CFLAGS=-I{{LOCALBASE}}/include/bsd
			LDFLAGS=-lbsd

post-patch:
	# remove ill-advised _POSIX_C_SOURCE from version 0.3.2 on
	${REINPLACE_CMD} -e '/_POSIX_C_SOURCE/d' \
		${WRKSRC}/src/term.c \
		${WRKSRC}/src/evloop-default.c

post-install:
	${STRIP_CMD} ${STAGEDIR}${PREFIX}/lib/libtickit.so

post-patch-sunos:
	${REINPLACE_CMD} -e '/XOPEN_SOURCE/d' \
		${WRKSRC}/src/debug.c \
		${WRKSRC}/src/rectset.c \
		${WRKSRC}/src/mockterm.c

[FILE:857:descriptions/desc.primary]
libtickit, Terminal Interface Construction Kit

This library provides an abstracted mechanism for building interactive
full-screen terminal programs. It provides a full set of output drawing
functions, and handles keyboard and mouse input events.

It provides the following features:
 - A full set of terminal rendering attributes; bold, italics*, underline,
   reverse, strikethough*, alternate font*
 - 256 colours*
 - Mouse including mouse wheel and recognition of position reporting
   greater than 224 columns*
 - Keyboard input via libtermkey including arbitrary modifiers
 - Arbitrary scrolling regions*
 - Synchronous or asynchronous operation via file descriptors, or abstract
   IO via byte buffers
 - Allows multiple instances within a single application
 - Fully UTF-8 and Unicode aware, including non-BMP, fullwidth and
   combining characters


[FILE:101:distinfo]
31c83567d7ffe09802e0b9ec3892482ecd1557e236091b232543163e9bad433c       167646 libtickit-0.4.4.tar.gz


[FILE:59:manifests/plist.primary]
lib/
 libtickit.so.%%SOMAJOR%%
 libtickit.so.%%SOVERSION%%


[FILE:129:manifests/plist.dev]
include/
 tickit-evloop.h
 tickit-mockterm.h
 tickit-termdrv.h
 tickit.h
lib/
 libtickit.a
 libtickit.so
lib/pkgconfig/tickit.pc


[FILE:6344:manifests/plist.man]
share/man/man3/
 tickit_build.3
 tickit_ctl_lookup.3
 tickit_ctl_name.3
 tickit_ctl_type.3
 tickit_debug_init.3
 tickit_debug_logf.3
 tickit_debug_vlogf.3
 tickit_get_rootwin.3
 tickit_get_term.3
 tickit_getctl_int.3
 tickit_new_stdio.3
 tickit_new_stdtty.3
 tickit_pen_bind_event.3
 tickit_pen_clear.3
 tickit_pen_clear_attr.3
 tickit_pen_clone.3
 tickit_pen_copy.3
 tickit_pen_copy_attr.3
 tickit_pen_equiv.3
 tickit_pen_equiv_attr.3
 tickit_pen_get_bool_attr.3
 tickit_pen_get_colour_attr.3
 tickit_pen_get_colour_attr_rgb8.3
 tickit_pen_get_int_attr.3
 tickit_pen_has_attr.3
 tickit_pen_has_colour_attr_rgb8.3
 tickit_pen_is_nondefault.3
 tickit_pen_is_nonempty.3
 tickit_pen_new.3
 tickit_pen_new_attrs.3
 tickit_pen_nondefault_attr.3
 tickit_pen_ref.3
 tickit_pen_set_bool_attr.3
 tickit_pen_set_colour_attr.3
 tickit_pen_set_colour_attr_desc.3
 tickit_pen_set_colour_attr_rgb8.3
 tickit_pen_set_int_attr.3
 tickit_pen_unbind_event_id.3
 tickit_pen_unref.3
 tickit_penattr_lookup.3
 tickit_penattr_name.3
 tickit_penattr_type.3
 tickit_rect_add.3
 tickit_rect_bottom.3
 tickit_rect_contains.3
 tickit_rect_init_bounded.3
 tickit_rect_init_sized.3
 tickit_rect_intersect.3
 tickit_rect_intersects.3
 tickit_rect_right.3
 tickit_rect_subtract.3
 tickit_rect_translate.3
 tickit_rectset_add.3
 tickit_rectset_clear.3
 tickit_rectset_contains.3
 tickit_rectset_destroy.3
 tickit_rectset_get_rect.3
 tickit_rectset_get_rects.3
 tickit_rectset_intersects.3
 tickit_rectset_new.3
 tickit_rectset_rects.3
 tickit_rectset_subtract.3
 tickit_rectset_translate.3
 tickit_ref.3
 tickit_renderbuffer_blit.3
 tickit_renderbuffer_char.3
 tickit_renderbuffer_char_at.3
 tickit_renderbuffer_clear.3
 tickit_renderbuffer_clip.3
 tickit_renderbuffer_copyrect.3
 tickit_renderbuffer_erase.3
 tickit_renderbuffer_erase_at.3
 tickit_renderbuffer_erase_to.3
 tickit_renderbuffer_eraserect.3
 tickit_renderbuffer_flush_to_term.3
 tickit_renderbuffer_get_cursorpos.3
 tickit_renderbuffer_get_size.3
 tickit_renderbuffer_goto.3
 tickit_renderbuffer_has_cursorpos.3
 tickit_renderbuffer_hline_at.3
 tickit_renderbuffer_mask.3
 tickit_renderbuffer_moverect.3
 tickit_renderbuffer_new.3
 tickit_renderbuffer_ref.3
 tickit_renderbuffer_reset.3
 tickit_renderbuffer_restore.3
 tickit_renderbuffer_save.3
 tickit_renderbuffer_savepen.3
 tickit_renderbuffer_setpen.3
 tickit_renderbuffer_skip.3
 tickit_renderbuffer_skip_at.3
 tickit_renderbuffer_skip_to.3
 tickit_renderbuffer_skiprect.3
 tickit_renderbuffer_text.3
 tickit_renderbuffer_text_at.3
 tickit_renderbuffer_textf.3
 tickit_renderbuffer_textf_at.3
 tickit_renderbuffer_textn.3
 tickit_renderbuffer_textn_at.3
 tickit_renderbuffer_translate.3
 tickit_renderbuffer_ungoto.3
 tickit_renderbuffer_unref.3
 tickit_renderbuffer_vline_at.3
 tickit_renderbuffer_vtextf.3
 tickit_renderbuffer_vtextf_at.3
 tickit_run.3
 tickit_setctl_int.3
 tickit_stop.3
 tickit_string_get.3
 tickit_string_len.3
 tickit_string_new.3
 tickit_string_ref.3
 tickit_string_unref.3
 tickit_stringpos_limit_bytes.3
 tickit_stringpos_zero.3
 tickit_term_await_started_msec.3
 tickit_term_await_started_tv.3
 tickit_term_bind_event.3
 tickit_term_build.3
 tickit_term_chpen.3
 tickit_term_clear.3
 tickit_term_emit_key.3
 tickit_term_emit_mouse.3
 tickit_term_erasech.3
 tickit_term_flush.3
 tickit_term_get_drivername.3
 tickit_term_get_input_fd.3
 tickit_term_get_output_fd.3
 tickit_term_get_size.3
 tickit_term_get_termtype.3
 tickit_term_get_utf8.3
 tickit_term_getctl_int.3
 tickit_term_goto.3
 tickit_term_input_check_timeout_msec.3
 tickit_term_input_push_bytes.3
 tickit_term_input_readable.3
 tickit_term_input_wait_msec.3
 tickit_term_input_wait_tv.3
 tickit_term_move.3
 tickit_term_new.3
 tickit_term_new_for_termtype.3
 tickit_term_observe_sigwinch.3
 tickit_term_open_stdio.3
 tickit_term_pause.3
 tickit_term_print.3
 tickit_term_printf.3
 tickit_term_printn.3
 tickit_term_ref.3
 tickit_term_refresh_size.3
 tickit_term_resume.3
 tickit_term_scrollrect.3
 tickit_term_set_input_fd.3
 tickit_term_set_output_buffer.3
 tickit_term_set_output_fd.3
 tickit_term_set_output_func.3
 tickit_term_set_size.3
 tickit_term_set_utf8.3
 tickit_term_setctl_int.3
 tickit_term_setctl_str.3
 tickit_term_setpen.3
 tickit_term_teardown.3
 tickit_term_unbind_event_id.3
 tickit_term_unref.3
 tickit_term_vprintf.3
 tickit_termctl_lookup.3
 tickit_termctl_name.3
 tickit_termctl_type.3
 tickit_tick.3
 tickit_unref.3
 tickit_utf8_byte2col.3
 tickit_utf8_col2byte.3
 tickit_utf8_count.3
 tickit_utf8_mbswidth.3
 tickit_utf8_put.3
 tickit_utf8_seqlen.3
 tickit_watch_cancel.3
 tickit_watch_io.3
 tickit_watch_later.3
 tickit_watch_process.3
 tickit_watch_signal.3
 tickit_watch_timer_after_msec.3
 tickit_watch_timer_after_tv.3
 tickit_watch_timer_at_epoch.3
 tickit_watch_timer_at_tv.3
 tickit_window_bind_event.3
 tickit_window_bottom.3
 tickit_window_children.3
 tickit_window_close.3
 tickit_window_cols.3
 tickit_window_destroy.3
 tickit_window_expose.3
 tickit_window_flush.3
 tickit_window_get_abs_geometry.3
 tickit_window_get_children.3
 tickit_window_get_geometry.3
 tickit_window_get_pen.3
 tickit_window_get_term.3
 tickit_window_getctl_int.3
 tickit_window_hide.3
 tickit_window_is_focused.3
 tickit_window_is_steal_input.3
 tickit_window_is_visible.3
 tickit_window_left.3
 tickit_window_lines.3
 tickit_window_lower.3
 tickit_window_lower_to_back.3
 tickit_window_new.3
 tickit_window_new_root.3
 tickit_window_parent.3
 tickit_window_raise.3
 tickit_window_raise_to_front.3
 tickit_window_ref.3
 tickit_window_reposition.3
 tickit_window_resize.3
 tickit_window_right.3
 tickit_window_root.3
 tickit_window_scroll.3
 tickit_window_scroll_with_children.3
 tickit_window_scrollrect.3
 tickit_window_set_cursor_position.3
 tickit_window_set_cursor_shape.3
 tickit_window_set_cursor_visible.3
 tickit_window_set_focus_child_notify.3
 tickit_window_set_geometry.3
 tickit_window_set_pen.3
 tickit_window_set_steal_input.3
 tickit_window_setctl_int.3
 tickit_window_show.3
 tickit_window_take_focus.3
 tickit_window_top.3
 tickit_window_unbind_event_id.3
 tickit_window_unref.3
 tickit_windowctl_lookupl.3
 tickit_windowctl_name.3
 tickit_windowctl_type.3
share/man/man7/
 tickit.7
 tickit_debug.7
 tickit_pen.7
 tickit_rect.7
 tickit_rectset.7
 tickit_renderbuffer.7
 tickit_string.7
 tickit_term.7
 tickit_version.7
 tickit_window.7


[FILE:615:patches/patch-Makefile]
--- Makefile.orig	2023-09-04 12:50:34 UTC
+++ Makefile
@@ -137,14 +137,14 @@ install-man:
 	install -d $(DESTDIR)$(MAN3DIR)
 	install -d $(DESTDIR)$(MAN7DIR)
 	for F in man/*.3; do \
-	  gzip <$$F >$(DESTDIR)$(MAN3DIR)/$${F#man/}.gz; \
+	  cp $$F $(DESTDIR)$(MAN3DIR)/$${F#man/}; \
 	done
 	for F in man/*.7; do \
-	  gzip <$$F >$(DESTDIR)$(MAN7DIR)/$${F#man/}.gz; \
+	  cp $$F $(DESTDIR)$(MAN7DIR)/$${F#man/}; \
 	done
 	while read FROM EQ TO; do \
 	  if [ -n "$$FROM" ]; then \
-	    ln -sf $$TO.gz $(DESTDIR)$(MAN3DIR)/$$FROM.gz; \
+	    ln -sf $$TO $(DESTDIR)$(MAN3DIR)/$$FROM; \
 	  fi; \
 	done < man/also
 


[FILE:365:patches/patch-src-evloop-default.c]
--- src/evloop-default.c.orig	2023-09-04 12:50:34 UTC
+++ src/evloop-default.c
@@ -123,8 +123,10 @@ static void evloop_destroy(void *data)
     free(evdata->pollfds);
   if(evdata->pollwatches)
     free(evdata->pollwatches);
+#if HAVE_PPOLL
   if(evdata->signums)
     free(evdata->signums);
+#endif
 
   if(signal_observer == evdata)
     signal_observer = NULL;


[FILE:260:patches/patch-src_term.c]
--- src/term.c.orig	2023-09-04 12:50:34 UTC
+++ src/term.c
@@ -27,6 +27,10 @@
 #include <sys/select.h>
 #include <sys/time.h>
 
+#ifdef __sun__
+#include <sys/termios.h>
+#endif
+
 #define streq(a,b) (!strcmp(a,b))
 #define strneq(a,b,n) (strncmp(a,b,n)==0)
 

