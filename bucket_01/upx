# Buildsheet autogenerated by ravenadm tool -- Do not edit.

NAMEBASE=		upx
VERSION=		4.0.2
KEYWORDS=		archivers
VARIANTS=		standard
SDESC[standard]=	Ultimate Packer for eXecutables
HOMEPAGE=		https://upx.github.io/
CONTACT=		nobody

DOWNLOAD_GROUPS=	main
SITES[main]=		https://github.com/upx/upx/releases/download/v4.0.2/
DISTFILE[1]=		upx-4.0.2-src.tar.xz:main
DF_INDEX=		1
SPKGS[standard]=	complete
			primary
			man
			docs

OPTIONS_AVAILABLE=	none
OPTIONS_STANDARD=	none

USES=			cpe cmake c++:primary

DISTNAME=		upx-4.0.2-src

LICENSE=		GPLv2+:primary
LICENSE_TERMS=		primary:{{WRKSRC}}/LICENSE
LICENSE_FILE=		GPLv2+:{{WRKSRC}}/COPYING
LICENSE_SCHEME=		solo

CPE_VENDOR=		upx_project
FPC_EQUIVALENT=		archivers/upx

post-install:
	${RM} ${STAGEDIR}${STD_DOCDIR}/COPYING
	${RM} ${STAGEDIR}${STD_DOCDIR}/LICENSE
	${STRIP_CMD} ${STAGEDIR}${PREFIX}/bin/upx

[FILE:290:descriptions/desc.primary]
UPX is a free, portable, extendable, high-performance executable packer for
several different executable formats. It achieves an excellent compression
ratio and offers very fast decompression. Your executables suffer no memory
overhead or other drawbacks because of in-place decompression.


[FILE:99:distinfo]
1221e725b1a89e06739df27fae394d6bc88aedbe12f137c630ec772522cbc76f      1191960 upx-4.0.2-src.tar.xz


[FILE:8:manifests/plist.primary]
bin/upx


[FILE:24:manifests/plist.man]
share/man/man1/upx.1.gz


[FILE:64:manifests/plist.docs]
share/doc/upx/
 NEWS
 README
 THANKS
 upx-doc.html
 upx-doc.txt


[FILE:401:patches/patch-src-packer.h]
--- src/packer.h.orig	2023-01-30 10:18:06 UTC
+++ src/packer.h
@@ -225,7 +225,7 @@ protected:
     void addLoader(C, C, C, C, C, C, C, C, C);
     void addLoader(C, C, C, C, C, C, C, C, C, C);
 #undef C
-#if (ACC_CC_CLANG || ACC_CC_GNUC)
+#if 0 && (ACC_CC_CLANG || ACC_CC_GNUC)
     void addLoaderVA(const char *s, ...) __attribute__((__sentinel__));
 #else
     void addLoaderVA(const char *s, ...);


[FILE:642:patches/patch-src_bele.h]
--- src/bele.h.orig	2023-01-30 10:18:06 UTC
+++ src/bele.h
@@ -85,6 +85,7 @@ static forceinline unsigned bswap32(unsi
 static forceinline upx_uint64_t bswap64(upx_uint64_t v) { return _byteswap_uint64(v); }
 
 #else
+# if defined(__FreeBSD__) || defined(__DragonFly__)
 
 static forceinline constexpr unsigned bswap16(unsigned v) {
     // return __builtin_bswap16((upx_uint16_t) (v & 0xffff));
@@ -97,6 +98,7 @@ static forceinline constexpr unsigned bs
 }
 static forceinline constexpr upx_uint64_t bswap64(upx_uint64_t v) { return __builtin_bswap64(v); }
 
+# endif
 #endif
 
 static forceinline constexpr unsigned no_bswap16(unsigned v) {

