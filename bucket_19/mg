# Buildsheet autogenerated by ravenadm tool -- Do not edit.

NAMEBASE=		mg
VERSION=		20230501
KEYWORDS=		editors
VARIANTS=		standard
SDESC[standard]=	Microscopic GNU Emacs clone
HOMEPAGE=		https://github.com/hboetes/mg
CONTACT=		nobody

DOWNLOAD_GROUPS=	main
SITES[main]=		GITHUB/hboetes:mg:20230501
DISTFILE[1]=		generated:main
DF_INDEX=		1
SPKGS[standard]=	single

OPTIONS_AVAILABLE=	none
OPTIONS_STANDARD=	none

B_DEPS[linux]=		libbsd:dev:standard
BR_DEPS[linux]=		libbsd:primary:standard

USES=			cmake ncurses pkgconfig

LICENSE=		PUBDOM:single
LICENSE_FILE=		PUBDOM:{{WRKDIR}}/LICENSE
LICENSE_AWK=		PUBDOM:"^\#include"
LICENSE_SOURCE=		PUBDOM:{{WRKSRC}}/main.c
LICENSE_SCHEME=		solo

FPC_EQUIVALENT=		editors/mg

do-install:
	${INSTALL_PROGRAM} ${WRKDIR}/.build/mg ${STAGEDIR}${PREFIX}/bin
	${INSTALL_MAN} ${WRKSRC}/mg.1 ${STAGEDIR}${MAN1PREFIX}/man/man1

[FILE:232:descriptions/desc.single]
Mg is a small, fast, portable, and free (public domain) Emacs-like
editor maintained by the OpenBSD Project.  It is intended for people
who can't, or don't want to, run the real GNU Emacs, or are not
familiar with the vi(1) editor.


[FILE:105:distinfo]
e2878feca64067a0c524e456ffba68d8cb69bcdce0943d2f2b69cad06174462e       158315 hboetes-mg-20230501.tar.gz


[FILE:30:manifests/plist.single]
bin/mg
share/man/man1/mg.1.gz


[FILE:474:patches/patch-interpreter.c]
--- interpreter.c.orig	2023-05-01 15:27:50 UTC
+++ interpreter.c
@@ -591,7 +591,11 @@ founddef(char *defstr, int blkid, int ex
 		return(dobeep_msgs("Variable/function name clash:", vnamep));
 
 	if (!SLIST_EMPTY(&varhead)) {
+#ifdef __DragonFly__
+                SLIST_FOREACH_MUTABLE(v1, &varhead, entry, vt) {
+#else
 		SLIST_FOREACH_SAFE(v1, &varhead, entry, vt) {
+#endif
 			if (strcmp(vnamep, v1->v_name) == 0)
 				SLIST_REMOVE(&varhead, v1, varentry, entry);
 		}


[FILE:440:patches/patch-mg.1]
--- mg.1.orig	2023-05-01 15:27:50 UTC
+++ mg.1
@@ -1163,15 +1163,13 @@ or
 .Sq #
 as the first character of a line.
 .Sh FILES
-.Bl -tag -width /usr/share/doc/mg/tutorial -compact
+.Bl -tag -width ~/.mg-TERM -compact
 .It Pa ~/.mg
 normal startup file
 .It Pa ~/.mg-TERM
 terminal-specific startup file
 .It Pa ~/.mg.d
 alternative backup file location
-.It Pa /usr/share/doc/mg/tutorial
-concise tutorial
 .El
 .Sh SEE ALSO
 .Xr ctags 1 ,

