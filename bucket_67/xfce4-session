# Buildsheet autogenerated by ravenadm tool -- Do not edit.

NAMEBASE=		xfce4-session
VERSION=		4.18.4
REVISION=		1
KEYWORDS=		x11
VARIANTS=		std
SDESC[std]=		Session manager for the Xfce DE
HOMEPAGE=		https://docs.xfce.org/xfce/xfce4-session/start
CONTACT=		Michael_Reim[kraileth@elderlinux.org]

DOWNLOAD_GROUPS=	main
SITES[main]=		https://archive.xfce.org/src/xfce/xfce4-session/4.18/
DISTFILE[1]=		xfce4-session-4.18.4.tar.bz2:main
DIST_SUBDIR=		xfce
DF_INDEX=		1
SPKGS[std]=		set
			primary
			nls

OPTIONS_AVAILABLE=	none
OPTIONS_STANDARD=	none

BUILD_DEPENDS=		harfbuzz:dev:std
			libwnck:dev:std
			libxfce4ui:dev:std
BUILDRUN_DEPENDS=	dbus-glib:primary:std
			libwnck:primary:std
			libxfce4ui:primary:std
			upower:primary:std
			xorg-iceauth:single:std
RUN_DEPENDS=		consolekit:primary:std

USES=			gmake libtool pkgconfig fontconfig:build
GNOME_COMPONENTS=	glib intltool gtk3
XORG_COMPONENTS=	x11 sm

LICENSE=		GPLv2+:primary
LICENSE_TERMS=		primary:{{WRKDIR}}/TERMS
LICENSE_FILE=		GPLv2+:{{WRKSRC}}/COPYING
LICENSE_AWK=		TERMS:"^$$"
LICENSE_SOURCE=		TERMS:{{WRKSRC}}/xfce4-session/sm-layer.h
LICENSE_SCHEME=		solo

FPC_EQUIVALENT=		x11-wm/xfce4-session

MUST_CONFIGURE=		gnu
CONFIGURE_ARGS=		--enable-nls
			--enable-polkit
			--with-xsession-prefix={{PREFIX}}

INSTALL_REQ_TOOLCHAIN=	yes
SOVERSION=		0.0.0

VAR_OPSYS[freebsd]=	CONFIGURE_ARGS=--with-backend=freebsd
VAR_OPSYS[dragonfly]=	CONFIGURE_ARGS=--with-backend=freebsd
VAR_OPSYS[midnightbsd]=	CONFIGURE_ARGS=--with-backend=freebsd

[FILE:250:descriptions/desc.primary]
Xfce4-session is a session manager for Xfce. Its task is to save the state 
of your desktop (opened applications and their location) and restore it 
during a next startup. You can create several different sessions and 
choose one of them on startup.


[FILE:112:distinfo]
9a9c5074c7338b881a5259d3b643619bf84901360c03478e1a697938ece06516       922274 xfce/xfce4-session-4.18.4.tar.bz2


[FILE:1384:manifests/plist.primary]
bin/
 startxfce4
 xfce4-session
 xfce4-session-logout
 xfce4-session-settings
 xflock4
etc/xdg/autostart/xscreensaver.desktop
etc/xdg/xfce4/
 Xft.xrdb
 xinitrc
etc/xdg/xfce4/xfconf/xfce-perchannel-xml/xfce4-session.xml
lib/xfce4/session/xfsm-shutdown-helper
share/applications/
 xfce-session-settings.desktop
 xfce4-session-logout.desktop
share/icons/hicolor/128x128/apps/org.xfce.session.png
share/icons/hicolor/16x16/apps/org.xfce.session.png
share/icons/hicolor/24x24/actions/
 xfsm-hibernate.png
 xfsm-lock.png
 xfsm-logout.png
 xfsm-reboot.png
 xfsm-shutdown.png
 xfsm-suspend.png
 xfsm-switch-user.png
share/icons/hicolor/24x24/apps/org.xfce.session.png
share/icons/hicolor/32x32/apps/org.xfce.session.png
share/icons/hicolor/48x48/actions/
 xfsm-hibernate.png
 xfsm-lock.png
 xfsm-logout.png
 xfsm-reboot.png
 xfsm-shutdown.png
 xfsm-suspend.png
 xfsm-switch-user.png
share/icons/hicolor/48x48/apps/org.xfce.session.png
share/icons/hicolor/64x64/apps/org.xfce.session.png
share/icons/hicolor/96x96/actions/
 xfsm-hibernate.png
 xfsm-lock.png
 xfsm-logout.png
 xfsm-reboot.png
 xfsm-shutdown.png
 xfsm-suspend.png
 xfsm-switch-user.png
share/icons/hicolor/96x96/apps/org.xfce.session.png
share/icons/hicolor/scalable/apps/org.xfce.session.svg
share/man/man1/
 xfce4-session-logout.1.gz
 xfce4-session.1.gz
share/xdg-desktop-portal/xfce-portals.conf
share/xsessions/xfce.desktop


[FILE:3054:manifests/plist.nls]
share/locale/am/LC_MESSAGES/xfce4-session.mo
share/locale/ar/LC_MESSAGES/xfce4-session.mo
share/locale/ast/LC_MESSAGES/xfce4-session.mo
share/locale/az/LC_MESSAGES/xfce4-session.mo
share/locale/be/LC_MESSAGES/xfce4-session.mo
share/locale/be@tarask/LC_MESSAGES/xfce4-session.mo
share/locale/bg/LC_MESSAGES/xfce4-session.mo
share/locale/bn/LC_MESSAGES/xfce4-session.mo
share/locale/ca/LC_MESSAGES/xfce4-session.mo
share/locale/cs/LC_MESSAGES/xfce4-session.mo
share/locale/da/LC_MESSAGES/xfce4-session.mo
share/locale/de/LC_MESSAGES/xfce4-session.mo
share/locale/el/LC_MESSAGES/xfce4-session.mo
share/locale/en_AU/LC_MESSAGES/xfce4-session.mo
share/locale/en_CA/LC_MESSAGES/xfce4-session.mo
share/locale/en_GB/LC_MESSAGES/xfce4-session.mo
share/locale/eo/LC_MESSAGES/xfce4-session.mo
share/locale/es/LC_MESSAGES/xfce4-session.mo
share/locale/et/LC_MESSAGES/xfce4-session.mo
share/locale/eu/LC_MESSAGES/xfce4-session.mo
share/locale/fa_IR/LC_MESSAGES/xfce4-session.mo
share/locale/fi/LC_MESSAGES/xfce4-session.mo
share/locale/fr/LC_MESSAGES/xfce4-session.mo
share/locale/gl/LC_MESSAGES/xfce4-session.mo
share/locale/he/LC_MESSAGES/xfce4-session.mo
share/locale/hi/LC_MESSAGES/xfce4-session.mo
share/locale/hr/LC_MESSAGES/xfce4-session.mo
share/locale/hu/LC_MESSAGES/xfce4-session.mo
share/locale/hy_AM/LC_MESSAGES/xfce4-session.mo
share/locale/hye/LC_MESSAGES/xfce4-session.mo
share/locale/id/LC_MESSAGES/xfce4-session.mo
share/locale/ie/LC_MESSAGES/xfce4-session.mo
share/locale/is/LC_MESSAGES/xfce4-session.mo
share/locale/it/LC_MESSAGES/xfce4-session.mo
share/locale/ja/LC_MESSAGES/xfce4-session.mo
share/locale/kk/LC_MESSAGES/xfce4-session.mo
share/locale/ko/LC_MESSAGES/xfce4-session.mo
share/locale/lt/LC_MESSAGES/xfce4-session.mo
share/locale/lv/LC_MESSAGES/xfce4-session.mo
share/locale/ms/LC_MESSAGES/xfce4-session.mo
share/locale/nb/LC_MESSAGES/xfce4-session.mo
share/locale/nl/LC_MESSAGES/xfce4-session.mo
share/locale/nn/LC_MESSAGES/xfce4-session.mo
share/locale/oc/LC_MESSAGES/xfce4-session.mo
share/locale/pa/LC_MESSAGES/xfce4-session.mo
share/locale/pl/LC_MESSAGES/xfce4-session.mo
share/locale/pt/LC_MESSAGES/xfce4-session.mo
share/locale/pt_BR/LC_MESSAGES/xfce4-session.mo
share/locale/ro/LC_MESSAGES/xfce4-session.mo
share/locale/ru/LC_MESSAGES/xfce4-session.mo
share/locale/si/LC_MESSAGES/xfce4-session.mo
share/locale/sk/LC_MESSAGES/xfce4-session.mo
share/locale/sl/LC_MESSAGES/xfce4-session.mo
share/locale/sq/LC_MESSAGES/xfce4-session.mo
share/locale/sr/LC_MESSAGES/xfce4-session.mo
share/locale/sv/LC_MESSAGES/xfce4-session.mo
share/locale/te/LC_MESSAGES/xfce4-session.mo
share/locale/th/LC_MESSAGES/xfce4-session.mo
share/locale/tr/LC_MESSAGES/xfce4-session.mo
share/locale/ug/LC_MESSAGES/xfce4-session.mo
share/locale/uk/LC_MESSAGES/xfce4-session.mo
share/locale/ur/LC_MESSAGES/xfce4-session.mo
share/locale/ur_PK/LC_MESSAGES/xfce4-session.mo
share/locale/vi/LC_MESSAGES/xfce4-session.mo
share/locale/zh_CN/LC_MESSAGES/xfce4-session.mo
share/locale/zh_HK/LC_MESSAGES/xfce4-session.mo
share/locale/zh_TW/LC_MESSAGES/xfce4-session.mo


[FILE:360:patches/patch-config.h.in]
$NetBSD: patch-config.h.in,v 1.2 2017/06/22 09:40:24 youri Exp $

Add NetBSD backend.

--- config.h.in.orig	2023-05-29 15:39:37 UTC
+++ config.h.in
@@ -15,6 +15,9 @@
 /* Solaris suspend/hibernate backend */
 #undef BACKEND_TYPE_SOLARIS
 
+/* NetBSD suspend/hibernate backend */
+#undef BACKEND_TYPE_NETBSD
+
 /* Define for debugging support */
 #undef DEBUG
 


[FILE:1013:patches/patch-configure]
Add NetBSD backend detection.

--- configure.orig	2023-05-29 15:39:33 UTC
+++ configure
@@ -18464,6 +18464,8 @@ if test x$with_backend = x; then
     with_backend=freebsd ;; #(
   *-*dragonfly*) :
     with_backend=freebsd ;; #(
+  *-*netbsd*) :
+    with_backend=netbsd ;; #(
   *-openbsd*) :
     with_backend=openbsd ;; #(
   *-solaris*) :
@@ -18498,6 +18500,11 @@ if test x$with_backend = xsolaris; then
 printf "%s\n" "#define BACKEND_TYPE_SOLARIS 1" >>confdefs.h
 
 fi
+if test x$with_backend = xnetbsd; then
+
+$as_echo "#define BACKEND_TYPE_NETBSD 1" >>confdefs.h
+
+fi
 
 ac_config_files="$ac_config_files Makefile doc/Makefile icons/Makefile icons/16x16/Makefile icons/24x24/Makefile icons/24x24-actions/Makefile icons/32x32/Makefile icons/48x48-actions/Makefile icons/48x48/Makefile icons/128x128/Makefile icons/scalable/Makefile libxfsm/Makefile po/Makefile.in settings/Makefile scripts/Makefile scripts/xinitrc.in xfce4-session/Makefile xfce4-session-logout/Makefile xfsm-shutdown-helper/Makefile"
 


[FILE:637:patches/patch-libxfsm_xfsm-shutdown-common.h]
$NetBSD: patch-libxfsm_xfsm-shutdown-common.h,v 1.1 2019/05/23 02:56:07 gutteridge Exp $

Add NetBSD commands.

--- libxfsm/xfsm-shutdown-common.h.orig	2023-05-18 16:19:55 UTC
+++ libxfsm/xfsm-shutdown-common.h
@@ -70,6 +70,11 @@
 #define UP_BACKEND_HIBERNATE_COMMAND "/usr/sbin/ZZZ"
 #endif
 
+#ifdef BACKEND_TYPE_NETBSD
+#define UP_BACKEND_SUSPEND_COMMAND      "/sbin/sysctl -w hw.acpi.sleep.state=1"
+#define UP_BACKEND_HIBERNATE_COMMAND    "/sbin/sysctl -w hw.acpi.sleep.state=4"
+#endif
+
 #ifdef BACKEND_TYPE_SOLARIS
 #define UP_BACKEND_SUSPEND_COMMAND "/usr/bin/sys-suspend"
 #define UP_BACKEND_HIBERNATE_COMMAND "/usr/bin/false"

