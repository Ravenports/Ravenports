# Buildsheet autogenerated by ravenadm tool -- Do not edit.

NAMEBASE=		libheif
VERSION=		1.18.0
KEYWORDS=		graphics
VARIANTS=		standard
SDESC[standard]=	HEIF file format decoder and encoder
HOMEPAGE=		https://github.com/strukturag/libheif
CONTACT=		nobody

DOWNLOAD_GROUPS=	main
SITES[main]=		GITHUB/strukturag:libheif:v1.18.0
DISTFILE[1]=		generated:main
DF_INDEX=		1
SPKGS[standard]=	complete
			primary
			dev
			man
			tools

OPTIONS_AVAILABLE=	none
OPTIONS_STANDARD=	none

BUILD_DEPENDS=		libde265:dev:standard
			x265:dev:standard
BUILDRUN_DEPENDS=	x265:primary:standard
			libde265:primary:standard
EXRUN[tools]=		primary
EXRUN[dev]=		libde265:dev:standard
			x265:dev:standard

USES=			cmake pkgconfig shebangfix cpe jpeg png
			mime-info:primary zlib:build

LICENSE=		LGPL3+:primary
LICENSE_TERMS=		primary:{{WRKDIR}}/TERMS
LICENSE_FILE=		LGPL3+:{{WRKSRC}}/COPYING
LICENSE_AWK=		TERMS:"LIBHEIF_HEIF_H"
LICENSE_SOURCE=		TERMS:{{WRKSRC}}/libheif/api/libheif/heif.h
LICENSE_SCHEME=		solo

CPE_VENDOR=		struktur
FPC_EQUIVALENT=		graphics/libheif
SHEBANG_GLOB=		*.sh

SOVERSION=		1.18.0

post-install:
	${RMDIR} ${STAGEDIR}${PREFIX}/lib/libheif
	${STRIP_CMD} ${STAGEDIR}${PREFIX}/bin/heif-*
	${STRIP_CMD} ${STAGEDIR}${PREFIX}/lib/libheif.so
	# create symlink that the CMake file botches
	${LN} -s heif-dec ${STAGEDIR}${PREFIX}/bin/heif-convert

[FILE:353:descriptions/desc.primary]
libheif is an ISO/IEC 23008-12:2017 HEIF file format decoder and encoder.

HEIF is a new image file format employing HEVC (h.265) image coding for the 
best compression ratios currently possible.

libheif makes use of libde265 for the actual image decoding and x265 for 
encoding. Alternative codecs for, e.g., AVC and JPEG can be provided as 
plugins.


[FILE:38:descriptions/desc.tools]
This package contains the HEIF tools.


[FILE:111:distinfo]
847d4e2bb7153ae00965c9e6a0f184420c90879d84632424e478c411224c9817      1504964 strukturag-libheif-1.18.0.tar.gz


[FILE:55:manifests/plist.primary]
lib/
 libheif.so.%%SOMAJOR%%
 libheif.so.%%SOVERSION%%


[FILE:258:manifests/plist.dev]
include/libheif/
 heif.h
 heif_cxx.h
 heif_items.h
 heif_plugin.h
 heif_properties.h
 heif_regions.h
 heif_version.h
lib/libheif.so
lib/cmake/libheif/
 libheif-config-release.cmake
 libheif-config-version.cmake
 libheif-config.cmake
lib/pkgconfig/libheif.pc


[FILE:85:manifests/plist.man]
share/man/man1/
 heif-dec.1.gz
 heif-enc.1.gz
 heif-info.1.gz
 heif-thumbnailer.1.gz


[FILE:104:manifests/plist.tools]
bin/
 heif-convert
 heif-dec
 heif-enc
 heif-info
 heif-thumbnailer
share/thumbnailers/heif.thumbnailer


[FILE:853:patches/patch-examples_CMakeLists.txt]
--- examples/CMakeLists.txt.orig	2024-07-10 09:23:32 UTC
+++ examples/CMakeLists.txt
@@ -33,11 +33,6 @@ install(TARGETS heif-dec RUNTIME DESTINA
 install(FILES heif-dec.1 DESTINATION ${CMAKE_INSTALL_MANDIR}/man1)
 
 # create symbolic link from the old name `heif-convert` to `heif-dec`
-if(NOT WIN32)
-  install(CODE "execute_process(COMMAND ${CMAKE_COMMAND} -E create_symlink ${CMAKE_INSTALL_PREFIX}/${CMAKE_INSTALL_BINDIR}/heif-dec${CMAKE_EXECUTABLE_SUFFIX} ${CMAKE_INSTALL_PREFIX}/${CMAKE_INSTALL_BINDIR}/heif-convert${CMAKE_EXECUTABLE_SUFFIX})")
-else()
-  install(CODE "execute_process(COMMAND ${CMAKE_COMMAND} -E copy ${CMAKE_INSTALL_PREFIX}/${CMAKE_INSTALL_BINDIR}/heif-dec${CMAKE_EXECUTABLE_SUFFIX} ${CMAKE_INSTALL_PREFIX}/${CMAKE_INSTALL_BINDIR}/heif-convert${CMAKE_EXECUTABLE_SUFFIX})")
-endif()
 
 
 add_executable(heif-enc ${getopt_sources}

