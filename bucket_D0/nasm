# Buildsheet autogenerated by ravenadm tool -- Do not edit.

NAMEBASE=		nasm
VERSION=		2.16.02
KEYWORDS=		devel lang
VARIANTS=		standard
SDESC[standard]=	General-purpose x86 and amd64 assembler
HOMEPAGE=		https://www.nasm.us/
CONTACT=		nobody

DOWNLOAD_GROUPS=	main
SITES[main]=		https://www.nasm.us/pub/nasm/releasebuilds/2.16.02/
			https://mirror.sobukus.de/files/src/nasm/
DISTFILE[1]=		nasm-2.16.02.tar.xz:main
DISTFILE[2]=		nasm-2.16.02-xdoc.tar.xz:main
DF_INDEX=		1 2
SPKGS[standard]=	complete
			primary
			docs

OPTIONS_AVAILABLE=	none
OPTIONS_STANDARD=	none

BUILD_DEPENDS=		perl-Font-TTF:single:perl_used
			perl-IO-String:single:perl_used

USES=			cpe gmake perl:build

LICENSE=		BSD2CLAUSE:primary
LICENSE_FILE=		BSD2CLAUSE:{{WRKSRC}}/LICENSE
LICENSE_SCHEME=		solo

CPE_PRODUCT=		netwide_assembler
CPE_VENDOR=		nasm
FPC_EQUIVALENT=		devel/nasm

MUST_CONFIGURE=		gnu
CONFIGURE_ARGS=		--docdir="{{STD_DOCDIR}}"

MAKE_ARGS=		INSTALLROOT={{STAGEDIR}}

INSTALL_TARGET=		install install_doc

post-patch:
	# fix gmake on macos
	${REINPLACE_CMD} -e 's|[$$][(]A[)]|a|g' ${WRKSRC}/Makefile.in

post-install:
	${MKDIR} ${STAGEDIR}${STD_DOCDIR}
	(cd ${WRKSRC}/doc && ${COPYTREE_SHARE} html ${STAGEDIR}${STD_DOCDIR})
	${INSTALL_DATA} ${WRKSRC}/doc/nasmdoc.txt ${STAGEDIR}${STD_DOCDIR}

[FILE:691:descriptions/desc.primary]
The Netwide Assembler (NASM) is an x86 and amd64 (x86-64) assembler
designed for portability and modularity.  It will output flat-form binary
files, a.out (Linux and *BSD), COFF, ELF32, ELF64, Mach-O, Microsoft OMF
(OBJ), Win32, Win64, as86 (Minix/Linux bin86 v0.3), LADsoft IEEE-695,
Intel hex, Motorola S-record, and a home-grown format called RDOFF.  NASM
syntax is similar to Intel's, but is less complex.  It supports Pentium,
P6, MMX, 3DNow!, SSE, SSE2, SSE3, SSE4.1, SSE4.2, XOP/FMA4/CVT16
(rev 3.03), and x64 opcodes, among others.  It has strong support for
macro conventions.

The port also includes NDISASM, a binary file disassembler which uses the
same instruction set as NASM.


[FILE:201:distinfo]
1e1b942ea88f22edae89659e15be26fa027eae0747f51413540f52d4eac4790d      1044824 nasm-2.16.02.tar.xz
45fe7c1abd55045e10a4e97319ff393710321288eec6ea4f9ecc77b95665a8c4       871988 nasm-2.16.02-xdoc.tar.xz


[FILE:61:manifests/plist.primary]
bin/
 nasm
 ndisasm
share/man/man1/
 nasm.1.gz
 ndisasm.1.gz


[FILE:769:manifests/plist.docs]
share/doc/nasm/
 local.css
 nasmdo10.html
 nasmdo11.html
 nasmdo12.html
 nasmdo13.html
 nasmdoc.css
 nasmdoc.pdf
 nasmdoc.txt
 nasmdoc0.html
 nasmdoc1.html
 nasmdoc2.html
 nasmdoc3.html
 nasmdoc4.html
 nasmdoc5.html
 nasmdoc6.html
 nasmdoc7.html
 nasmdoc8.html
 nasmdoc9.html
 nasmdoca.html
 nasmdocb.html
 nasmdocc.html
 nasmdocd.html
 nasmdoce.html
 nasmdocf.html
 nasmdoci.html
 nasmlogw.png
share/doc/nasm/html/
 local.css
 nasmdo10.html
 nasmdo11.html
 nasmdo12.html
 nasmdo13.html
 nasmdoc.css
 nasmdoc0.html
 nasmdoc1.html
 nasmdoc2.html
 nasmdoc3.html
 nasmdoc4.html
 nasmdoc5.html
 nasmdoc6.html
 nasmdoc7.html
 nasmdoc8.html
 nasmdoc9.html
 nasmdoca.html
 nasmdocb.html
 nasmdocc.html
 nasmdocd.html
 nasmdoce.html
 nasmdocf.html
 nasmdoci.html
 nasmlogw.png


[FILE:506:patches/patch-doc_Makefile.in]
--- doc/Makefile.in.orig	2022-12-22 02:44:07 UTC
+++ doc/Makefile.in
@@ -28,7 +28,7 @@ MKDIR_P		= @MKDIR_P@
 RM_F		= rm -f
 RM_RF		= rm -rf
 CP_F		= cp -f
-CP_UF		= cp -uf
+CP_UF		= cp -f
 
 # Optional tools
 XZ		= @XZ@
@@ -40,7 +40,7 @@ XZFILES         = @XZFILES@
 HTMLAUX		= nasmdoc.css local.css nasmlogw.png
 
 SRCS		= nasmdoc.src inslist.src changes.src warnings.src version.src
-OUT		= html nasmdoc.txt nasmdoc.pdf $(XZFILES)
+OUT		= html nasmdoc.txt
 XZOUT           = nasmdoc.pdf.xz
 
 .SUFFIXES:

