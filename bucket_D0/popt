# Buildsheet autogenerated by ravenadm tool -- Do not edit.

NAMEBASE=		popt
VERSION=		1.18
KEYWORDS=		devel
VARIANTS=		standard
SDESC[standard]=	Command line option parsing library
HOMEPAGE=		http://freshmeat.net/projects/popt/
CONTACT=		nobody

DOWNLOAD_GROUPS=	main
SITES[main]=		http://ftp.rpm.org/popt/releases/popt-1.x/
			https://fossies.org/linux/misc/
DISTFILE[1]=		popt-1.18.tar.gz:main
DF_INDEX=		1
SPKGS[standard]=	single

OPTIONS_AVAILABLE=	none
OPTIONS_STANDARD=	none

USES=			cpe iconv libtool fbsd10fix

CPE_VENDOR=		popt_project
FPC_EQUIVALENT=		devel/popt

MUST_CONFIGURE=		gnu
CONFIGURE_ARGS=		--disable-nls

INSTALL_TARGET=		install-strip
SOVERSION=		0.0.1

[FILE:447:descriptions/desc.single]
This is the popt command line option parsing library. While it is similar
to getopt(3), it contains a number of enhancements, including:

        1) popt is fully reentrant
        2) popt can parse arbitrary argv[] style arrays while
           getopt(2) makes this quite difficult
        3) popt allows users to alias command line arguments
        4) popt provides convenience functions for parsing strings
           into argv[] style arrays


[FILE:95:distinfo]
5159bc03a20b28ce363aa96765f37df99ea4d8850b1ece17d1e6ad5c24fdc5d1       580569 popt-1.18.tar.gz


[FILE:140:manifests/plist.single]
include/popt.h
lib/
 libpopt.a
 libpopt.so
 libpopt.so.%%SOMAJOR%%
 libpopt.so.%%SOVERSION%%
lib/pkgconfig/popt.pc
share/man/man3/popt.3.gz


[FILE:731:patches/patch-src_poptconfig.c]
$NetBSD: patch-src_poptconfig.c,v 1.1 2020/08/15 01:02:42 tnn Exp $

date: 2009-04-22 17:25:05 +0200;  author: tnn;  state: Exp;  lines: +14 -11;
patch-aa: fix devel/popt build on NetBSD-current (>=5.99.11) which
          has glob_pattern_p(3) in libc.
Reported in PR pkg/41265.

--- src/poptconfig.c.orig	2020-04-16 10:32:54 UTC
+++ src/poptconfig.c
@@ -21,7 +21,10 @@
 #if defined(HAVE_GLOB_H)
 #include <glob.h>
 
-#if !defined(__GLIBC__)
+#if defined(__NetBSD__)
+#include <sys/param.h>
+#endif
+#if !defined(__GLIBC__) && (!defined(__NetBSD__) || __NetBSD_Version__ < 599001100)
 /* Return nonzero if PATTERN contains any metacharacters.
    Metacharacters can be quoted with backslashes if QUOTE is nonzero.  */
 static int

