# Buildsheet autogenerated by ravenadm tool -- Do not edit.

NAMEBASE=		ixion
VERSION=		0.17.0
KEYWORDS=		math
VARIANTS=		standard libre
SDESC[libre]=		Formula parser and interpreter for Libreoffice
SDESC[standard]=	General purpose formula parser and interpreter
HOMEPAGE=		https://gitlab.com/ixion/ixion
CONTACT=		nobody

DOWNLOAD_GROUPS=	main libre
SITES[main]=		https://gitlab.com/ixion/ixion/-/archive/0.17.0/
SITES[libre]=		https://gitlab.com/ixion/ixion/-/archive/0.15.0/
DISTFILE[1]=		ixion-0.17.0.tar.bz2:main
DISTFILE[2]=		ixion-0.15.0.tar.bz2:libre
SPKGS[libre]=		single
SPKGS[standard]=	single

OPTIONS_AVAILABLE=	LIBRE
OPTIONS_STANDARD=	none
VOPTS[libre]=		LIBRE=ON

BUILD_DEPENDS=		mdds:single:standard
			spdlog:single:standard
BUILDRUN_DEPENDS=	boost-libraries:rest:python_default

USES=			cmake python:build zlib

DISTNAME=		ixion-{{VAR_VERSION}}

LICENSE=		MPL:single
LICENSE_TERMS=		single:{{WRKDIR}}/TERMS
LICENSE_FILE=		MPL:{{WRKSRC}}/LICENSE
LICENSE_AWK=		TERMS:"^$$"
LICENSE_SOURCE=		TERMS:{{WRKSRC}}/src/libixion/address.cpp
LICENSE_SCHEME=		solo

PLIST_SUB=		VER={{VER}}

LDFLAGS=		-lboost_thread
			-lboost_program_options
			-lboost_filesystem
CMAKE_ARGS=		-DMDDS_INCLUDEDIR="{{LOCALBASE}}/include/mdds-1.2"
			-DCMAKE_SKIP_BUILD_RPATH:BOOL=YES
VAR_OPSYS[linux]=	LDFLAGS=-ldl

[LIBRE].DESCRIPTION=			Build older 0.15 version for Libreoffice
[LIBRE].DF_INDEX_OFF=			1
[LIBRE].DF_INDEX_ON=			2
[LIBRE].MAKEFILE_OFF=			VER=0.17
					VAR_VERSION=0.17.0
[LIBRE].MAKEFILE_ON=			VER=0.15
					VAR_VERSION=0.15.0

post-patch-LIBRE-ON:
	${REINPLACE_CMD} -e '/input_cell/ s|nullptr_t|std::nullptr_t|' \
		${WRKSRC}/include/ixion/model_context.hpp

post-install:
	${STRIP_CMD} ${STAGEDIR}${PREFIX}/bin/ixion*
	${STRIP_CMD} ${STAGEDIR}${PREFIX}/lib/lib*.so

[FILE:701:descriptions/desc.single]
Ixion is a general purpose formula parser & interpreter that can
calculate multiple named targets, or "cells".

The goal of this project is to create a library for calculating
the results of formula expressions stored in multiple named targets,
or "cells". The cells can be referenced from each other, and the
library takes care of resolving their dependencies automatically
upon calculation. The caller can run the calculation routine either
in a single-threaded mode, or a multi-threaded mode. The library
also supports re-calculations where the contents of one or more
cells have been modified since the last calculation, and a partial
calculation of only the affected cells need to be calculated.


[FILE:198:distinfo]
63f3942defc684be82046b9d7454602dadafced9be7b3b60e9e8a5fa63ee91a8       191134 ixion-0.17.0.tar.bz2
654dd3fb9c6932e35b0c333f69574fa7c2eb05788e8c7fa9580fba27cb054a82       163162 ixion-0.15.0.tar.bz2


[FILE:677:manifests/plist.single]
bin/
 ixion-formula-tokenizer
 ixion-parser
 ixion-sorter
include/ixion-%%VER%%/ixion/
 address.hpp
 address_iterator.hpp
 cell.hpp
 cell_access.hpp
 compute_engine.hpp
 config.hpp
 dirty_cell_tracker.hpp
 document.hpp
 env.hpp
 exceptions.hpp
 formula.hpp
 formula_function_opcode.hpp
 formula_name_resolver.hpp
 formula_opcode.hpp
 formula_result.hpp
 formula_tokens.hpp
 formula_tokens_fwd.hpp
 global.hpp
 info.hpp
 macros.hpp
 matrix.hpp
 model_context.hpp
 model_iterator.hpp
 module.hpp
 named_expressions_iterator.hpp
 table.hpp
 types.hpp
include/ixion-%%VER%%/ixion/interface/
 formula_model_access.hpp
 session_handler.hpp
 table_handler.hpp
lib/libixion-%%VER%%.so


[FILE:657:manifests/plist.single.libre]
bin/
 ixion-formula-tokenizer
 ixion-parser
 ixion-sorter
include/ixion-%%VER%%/ixion/
 address.hpp
 address_iterator.hpp
 cell.hpp
 column_store_type.hpp
 compute_engine.hpp
 config.hpp
 dirty_cell_tracker.hpp
 env.hpp
 exceptions.hpp
 formula.hpp
 formula_function_opcode.hpp
 formula_name_resolver.hpp
 formula_opcode.hpp
 formula_result.hpp
 formula_tokens.hpp
 formula_tokens_fwd.hpp
 global.hpp
 info.hpp
 macros.hpp
 matrix.hpp
 mem_str_buf.hpp
 model_context.hpp
 model_iterator.hpp
 module.hpp
 table.hpp
 types.hpp
include/ixion-%%VER%%/ixion/interface/
 formula_model_access.hpp
 session_handler.hpp
 table_handler.hpp
lib/liblibixion-%%VER%%.so

