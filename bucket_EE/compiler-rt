# Buildsheet autogenerated by ravenadm tool -- Do not edit.

NAMEBASE=		compiler-rt
VERSION=		15.0.7
KEYWORDS=		lang devel
VARIANTS=		standard
SDESC[standard]=	Compiler runtime libraries for clang
HOMEPAGE=		https://compiler-rt.llvm.org/
CONTACT=		nobody

DOWNLOAD_GROUPS=	main
SITES[main]=		https://github.com/llvm/llvm-project/releases/download/llvmorg-15.0.7/
DISTFILE[1]=		compiler-rt-15.0.7.src.tar.xz:main
DISTFILE[2]=		cmake-15.0.7.src.tar.xz:main
DF_INDEX=		1 2
SPKGS[standard]=	single

OPTIONS_AVAILABLE=	none
OPTIONS_STANDARD=	none

BROKEN[freebsd]=	Needs md5.h, sha224.h headers normally in system root
BROKEN[netbsd]=		missing headers from system root

BUILDRUN_DEPENDS=	llvm:single:standard
B_DEPS[netbsd]=		libmd:dev:standard
BR_DEPS[netbsd]=	libmd:primary:standard

USES=			cpe cmake ninja python:build c++:single

DISTNAME=		compiler-rt-15.0.7.src

LICENSE=		CUSTOM1:single
LICENSE_NAME=		CUSTOM1:"University of Illinois/NCSA Open Source License"
LICENSE_FILE=		CUSTOM1:{{WRKSRC}}/LICENSE.TXT
LICENSE_SCHEME=		solo

CPE_PRODUCT=		llvm
CPE_VENDOR=		llvm

PLIST_SUB=		OPSYSLC={{OPSYS:tl}}

post-extract:
	${CP} ${WRKDIR}/cmake-15.0.7.src/Modules/* \
		${WRKSRC}/cmake/Modules/

[FILE:209:descriptions/desc.single]
The compiler-rt project consists of:

builtins 
sanitizer runtimes
- AddressSanitizer
- ThreadSanitizer
- UndefinedBehaviorSanitizer
- MemorySanitizer
- LeakSanitizer
- DataFlowSanitizer
profile
BlocksRuntime


[FILE:210:distinfo]
353832c66cce60931ea0413b3c071faad59eefa70d02c97daa8978b15e4b25b7      2350132 compiler-rt-15.0.7.src.tar.xz
8986f29b634fdaa9862eedda78513969fe9788301c9f2d938f4c10a3e7a3e7ea         6972 cmake-15.0.7.src.tar.xz


[FILE:1899:manifests/plist.single]
%%ONLY-FREEBSD%%lib/freebsd/
 libclang_rt.asan-preinit-x86_64.a
 libclang_rt.asan-x86_64.a
 libclang_rt.asan-x86_64.a.syms
 libclang_rt.asan-x86_64.so
 libclang_rt.asan_cxx-x86_64.a
 libclang_rt.asan_cxx-x86_64.a.syms
 libclang_rt.cfi-x86_64.a
 libclang_rt.cfi_diag-x86_64.a
 libclang_rt.dd-x86_64.a
 libclang_rt.dyndd-x86_64.so
 libclang_rt.fuzzer-x86_64.a
 libclang_rt.fuzzer_interceptors-x86_64.a
 libclang_rt.fuzzer_no_main-x86_64.a
 libclang_rt.msan-x86_64.a
 libclang_rt.msan-x86_64.a.syms
 libclang_rt.msan_cxx-x86_64.a
 libclang_rt.msan_cxx-x86_64.a.syms
 libclang_rt.profile-x86_64.a
 libclang_rt.safestack-x86_64.a
 libclang_rt.stats-x86_64.a
 libclang_rt.stats_client-x86_64.a
 libclang_rt.tsan-x86_64.a
 libclang_rt.tsan-x86_64.a.syms
 libclang_rt.tsan_cxx-x86_64.a
 libclang_rt.tsan_cxx-x86_64.a.syms
 libclang_rt.ubsan_minimal-x86_64.a
 libclang_rt.ubsan_minimal-x86_64.a.syms
 libclang_rt.ubsan_minimal-x86_64.so
 libclang_rt.ubsan_standalone-x86_64.a
 libclang_rt.ubsan_standalone-x86_64.a.syms
 libclang_rt.ubsan_standalone-x86_64.so
 libclang_rt.ubsan_standalone_cxx-x86_64.a
 libclang_rt.ubsan_standalone_cxx-x86_64.a.syms
 libclang_rt.xray-basic-x86_64.a
 libclang_rt.xray-fdr-x86_64.a
 libclang_rt.xray-profiling-x86_64.a
 libclang_rt.xray-x86_64.a
%%ONLY-FREEBSD%%share/
 asan_ignorelist.txt
 cfi_ignorelist.txt
 msan_ignorelist.txt
include/fuzzer/FuzzedDataProvider.h
include/orc/c_api.h
include/profile/InstrProfData.inc
include/sanitizer/
 allocator_interface.h
 asan_interface.h
 common_interface_defs.h
 coverage_interface.h
 dfsan_interface.h
 hwasan_interface.h
 linux_syscall_hooks.h
 lsan_interface.h
 msan_interface.h
 netbsd_syscall_hooks.h
 scudo_interface.h
 tsan_interface.h
 tsan_interface_atomic.h
 ubsan_interface.h
include/xray/
 xray_interface.h
 xray_log_interface.h
 xray_records.h
lib/%%OPSYSLC%%/
 libclang_rt.builtins-x86_64.a
 libclang_rt.orc-x86_64.a


[FILE:406:patches/patch-lib_fuzzer_FuzzerSHA1.cpp]
--- lib/fuzzer/FuzzerSHA1.cpp.orig	2022-10-04 09:29:17 UTC
+++ lib/fuzzer/FuzzerSHA1.cpp
@@ -40,7 +40,11 @@ namespace {  // Added for LibFuzzer
 # define SHA_BIG_ENDIAN
 # endif
 #else // ! defined __LITTLE_ENDIAN__
+# if LIBFUZZER_FREEBSD
+# include <sys/endian.h>
+# else
 # include <endian.h> // machine/endian.h
+# endif
 # if __BYTE_ORDER__ ==  __ORDER_BIG_ENDIAN__
 #  define SHA_BIG_ENDIAN
 # endif


[FILE:320:patches/patch-lib_sanitizer__common_sanitizer__platform__limits__freebsd.cpp]
--- lib/sanitizer_common/sanitizer_platform_limits_freebsd.cpp.orig	2022-10-04 09:29:17 UTC
+++ lib/sanitizer_common/sanitizer_platform_limits_freebsd.cpp
@@ -76,7 +76,6 @@
 #include <sha512.h>
 #include <stdio.h>
 #include <stringlist.h>
-#include <term.h>
 #include <termios.h>
 #include <time.h>
 #include <ttyent.h>


[FILE:877:patches/patch-lib_sanitizer__common_sanitizer__platform__limits__netbsd.cpp]
--- lib/sanitizer_common/sanitizer_platform_limits_netbsd.cpp.orig	2022-11-29 10:05:58 UTC
+++ lib/sanitizer_common/sanitizer_platform_limits_netbsd.cpp
@@ -47,7 +47,6 @@
 #include <sys/ioctl_compat.h>
 #include <sys/joystick.h>
 #include <sys/ksyms.h>
-#include <sys/lua.h>
 #include <sys/midiio.h>
 #include <sys/mtio.h>
 #include <sys/power.h>
@@ -493,12 +492,7 @@ struct urio_command {
 #include <semaphore.h>
 #include <signal.h>
 #include <stddef.h>
-#include <md2.h>
-#include <md4.h>
-#include <md5.h>
-#include <rmd160.h>
 #include <soundcard.h>
-#include <term.h>
 #include <termios.h>
 #include <time.h>
 #include <ttyent.h>
@@ -514,9 +508,6 @@ struct urio_command {
 #include <fstab.h>
 #include <stringlist.h>
 
-#if defined(__x86_64__)
-#include <nvmm.h>
-#endif
 // clang-format on
 
 // Include these after system headers to avoid name clashes and ambiguities.

