# Buildsheet autogenerated by ravenadm tool -- Do not edit.

NAMEBASE=		adacontrol
VERSION=		1.18r9
KEYWORDS=		lang ada
VARIANTS=		standard projects
SDESC[projects]=	Ada constructs lint tool with project support
SDESC[standard]=	Ada constructs lint tool
HOMEPAGE=		http://www.adalog.fr
CONTACT=		John_Marino[draco@marino.st]

DOWNLOAD_GROUPS=	main
SITES[main]=		SF/adacontrol
DISTFILE[1]=		adactl-1.18r9-src.tgz:main
DF_INDEX=		1
SPKGS[projects]=	primary
SPKGS[standard]=	complete
			primary
			docs

OPTIONS_AVAILABLE=	PROJECTS
OPTIONS_STANDARD=	none
VOPTS[projects]=	PROJECTS=ON

BUILD_DEPENDS=		asis:primary:standard

USES=			gprbuild

DISTNAME=		adactl-1.18r9

LICENSE=		GPLv2+:primary GMGPL:primary
LICENSE_SCHEME=		multi
LICENSE_FILE=		GPLv2+:{{WRKSRC}}/COPYING
			GMGPL:{{WRKDIR}}/LICENSE

FPC_EQUIVALENT=		lang/adacontrol

BUILD_WRKSRC=		{{WRKSRC}}/src
BUILD_TARGET=		build

[PROJECTS].DESCRIPTION=			Use project support from gnatcoll
[PROJECTS].BUILD_DEPENDS_ON=		gnatcoll:single:project

do-patch-PROJECTS-OFF:
	(cd ${WRKSRC}/src && ${MV} \
		implementation_options-i_options_from_gpr_project.adb \
		implementation_options-i_options_from_gpr_project_gpr.adb)
	(cd ${WRKSRC}/src && ${MV} \
		implementation_options-i_options_from_gpr_project_nogpr.adb \
		implementation_options-i_options_from_gpr_project.adb)
	${REINPLACE_CMD} -e '/gnatcoll/d' ${WRKSRC}/build.gpr

do-install-PROJECTS-OFF:
	${MKDIR} ${STAGEDIR}${STD_DOCDIR}
	${INSTALL_DATA} ${WRKSRC}/doc/*.pdf ${STAGEDIR}${STD_DOCDIR}

do-build:
	(cd ${WRKSRC} && ${SETENV} ${MAKE_ENV} gprbuild -P build)

post-extract:
	 ${AWK} '/^-- Ada$$/ {exit}; {print $$0}' ${WRKSRC}/src/adactl.adb \
		> ${WRKDIR}/LICENSE

do-install:
	${MKDIR} ${STAGEDIR}${PREFIX}/bin \
		${STAGEDIR}${PREFIX}/share/gps/plug-ins \
		${STAGEDIR}${PREFIX}/share/doc/gps/html \
		${STAGEDIR}${PREFIX}/share/gprconfig
	${INSTALL_PROGRAM} ${WRKSRC}/adactl ${WRKSRC}/pfni \
		${WRKSRC}/ptree ${STAGEDIR}/${PREFIX}/bin
	${INSTALL_DATA} ${WRKSRC}/GPS/adacontrol.xml \
		${STAGEDIR}${PREFIX}/share/gprconfig
	${INSTALL_DATA} ${WRKSRC}/GPS/*adactl* ${WRKSRC}/GPS/pfni.* \
		${STAGEDIR}${PREFIX}/share/gps/plug-ins
	${INSTALL_DATA} ${WRKSRC}/doc/*.html \
		${STAGEDIR}${PREFIX}/share/doc/gps/html

[FILE:866:descriptions/desc.primary]
AdaControl is a free (GMGPL) tool that detects the use of various kinds of
constructs in Ada programs. Its first goal is to control proper usage of
style or programming rules, but it can also be used as a powerful tool to
search for use (or non-use) of various forms of programming styles or
design patterns. Searched elements range from very simple, like the
occurrence of certain entities, declarations, or statements, to very
sophisticated, like verifying that certain programming patterns are being
obeyed..

Which elements or constructs are searched is defined by a set of rules; the
following table gives a short summary of rules currently checked by
AdaControl. The number in parentheses after the rule name gives the number
of subrules, if any. Considering all possible rules and subrules, this
makes 452 tests that can be performed currently by AdaControl!


[FILE:100:distinfo]
193095dbe9efdd0eb5b6c1590cf8dbff25b5fe2c65f8b45e3d5f085298d1ef0e      2212880 adactl-1.18r9-src.tgz


[FILE:246:manifests/plist.primary]
bin/
 adactl
 pfni
 ptree
share/doc/gps/html/
 adacontrol_pm.html
 adacontrol_ug.html
share/gprconfig/adacontrol.xml
share/gps/plug-ins/
 adactl-ask.gif
 adactl-ask.svg
 adactl-file.gif
 adactl-file.svg
 adactl.py
 pfni.py
 pfni.xml
 zadactl.xml


[FILE:60:manifests/plist.docs]
share/doc/adacontrol/
 adacontrol_pm.pdf
 adacontrol_ug.pdf

