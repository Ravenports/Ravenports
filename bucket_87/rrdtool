# Buildsheet autogenerated by ravenadm tool -- Do not edit.

NAMEBASE=		rrdtool
VERSION=		1.9.0
KEYWORDS=		databases graphics
VARIANTS=		std
SDESC[std]=		Round Robin Database tools
HOMEPAGE=		https://oss.oetiker.ch/rrdtool/
CONTACT=		nobody

DOWNLOAD_GROUPS=	main
SITES[main]=		GITHUB/oetiker:rrdtool-1.x:v1.9.0
DISTFILE[1]=		generated:main
DF_INDEX=		1
SPKGS[std]=		set
			primary
			dev
			examples
			man
			docs

OPTIONS_AVAILABLE=	none
OPTIONS_STANDARD=	none

BUILD_DEPENDS=		groff:primary:std
			harfbuzz:dev:std
			python-setuptools:single:python_used
RUN_DEPENDS=		fonts-dejavu:single:std

USES=			autoreconf gmake libtool pkgconfig shebangfix png
			freetype perl python cpe zlib
GNOME_COMPONENTS=	libxml2 glib cairo pango

LICENSE=		GPLv2+:primary
LICENSE_TERMS=		primary:{{WRKSRC}}/COPYRIGHT
LICENSE_FILE=		GPLv2+:{{WRKSRC}}/LICENSE
LICENSE_SCHEME=		solo

CPE_TARGET_SW=		python
CPE_VENDOR=		rrdtool_project
FPC_EQUIVALENT=		databases/rrdtool
SHEBANG_FILES=		examples/stripes.py
			examples/rrdcached/rrdcached-size.pl

MUST_CONFIGURE=		gnu
CONFIGURE_ARGS=		--disable-tcl
			--enable-perl
			--enable-perl-site-install
			--enable-python
			--enable-mmap
			--disable-nls
			--disable-ruby

MAKE_ARGS=		PERL_MAKE_OPTIONS='PREFIX="{{PREFIX}}"
			INSTALLPRIVLIB="{{PREFIX}}/lib"
			INSTALLARCHLIB="{{PREFIX}}/lib"'

INSTALL_TARGET=		install-strip
INSTALL_REQ_TOOLCHAIN=	yes
SOVERSION=		8.3.0
PLIST_SUB=		SOEXTENSION={{SOEXTENSION}}
RC_SUBR=		rrdcached:primary

CPPFLAGS=		-I{{LOCALBASE}}/include/freetype2
VAR_OPSYS[linux]=	MAKEFILE_LINE=SOEXTENSION=-x86_64-linux-gnu

post-install:
	${STRIP_CMD} ${STAGEDIR}${PREFIX}/${SITE_ARCH_REL}/auto/RRDs/RRDs.so

[FILE:559:descriptions/desc.primary]
It is pretty easy to gather status information from all sorts of things,
ranging from the temperature in your office to the number of octets which
have passed through the FDDI interface of your router. But it is not so
trivial to store this data in a efficient and systematic manner. This is
where RRDtool kicks in. It lets you log and analyze the data you gather
from all kinds of data-sources. The data analysis part of RRDtool is based
on the ability to quickly generate graphical representations of the data
values collected over a definable time period.


[FILE:111:distinfo]
405f4ce365e2e37bdeff9bbb844cbedf9b36dde7344b31449e369315a3df5ef0       833532 oetiker-rrdtool-1.x-1.9.0.tar.gz


[FILE:438:manifests/plist.primary]
%%PYTHON_SITELIBDIR%%/rrdtool.cpython-%%PYTHON_SUFFIX%%%%SOEXTENSION%%.so
%%PYTHON_SITELIBDIR%%/rrdtool-0.1.10-py%%PYTHON_VER%%.egg-info/
 PKG-INFO
 SOURCES.txt
 dependency_links.txt
 top_level.txt
%%SITE_ARCH%%/RRDs.pm
%%SITE_ARCH%%/auto/RRDp/.packlist
%%SITE_ARCH%%/auto/RRDs/
 .packlist
 RRDs.so
%%SITE_PERL%%/RRDp.pm
bin/
 rrdcached
 rrdcgi
 rrdcreate
 rrdinfo
 rrdtool
 rrdupdate
lib/
 librrd.so.%%SOMAJOR%%
 librrd.so.%%SOVERSION%%


[FILE:94:manifests/plist.dev]
include/
 rrd.h
 rrd_client.h
 rrd_format.h
lib/
 librrd.a
 librrd.so
lib/pkgconfig/librrd.pc


[FILE:208:manifests/plist.examples]
share/examples/rrdtool/
 4charts.pl
 bigtops.pl
 cgi-demo.cgi
 minmax.pl
 perftest.pl
 piped-demo.pl
 shared-demo.pl
 stripes.pl
 stripes.py
share/examples/rrdtool/rrdcached/
 RRDCached.pm
 rrdcached-size.pl


[FILE:501:manifests/plist.man]
%%PERL5_MAN3%%/
 RRDp.3
 RRDs.3
share/man/man1/
 bin_dec_hex.1
 cdeftutorial.1
 rpntutorial.1
 rrd-beginners.1
 rrd_pdpcalc.1
 rrdbuild.1
 rrdcached.1
 rrdcgi.1
 rrdcreate.1
 rrddump.1
 rrdfetch.1
 rrdfirst.1
 rrdflushcached.1
 rrdgraph.1
 rrdgraph_data.1
 rrdgraph_examples.1
 rrdgraph_graph.1
 rrdgraph_rpn.1
 rrdinfo.1
 rrdlast.1
 rrdlastupdate.1
 rrdlist.1
 rrdpython.1
 rrdresize.1
 rrdrestore.1
 rrdthreads.1
 rrdtool.1
 rrdtune.1
 rrdtutorial.1
 rrdupdate.1
 rrdxport.1
share/man/man3/librrd.3


[FILE:1610:manifests/plist.docs]
share/doc/rrdtool/html/
 RRDp.html
 RRDs.html
 bin_dec_hex.html
 cdeftutorial.html
 index.html
 librrd.html
 rpntutorial.html
 rrd-beginners.html
 rrd_pdpcalc.html
 rrdbuild.html
 rrdcached.html
 rrdcgi.html
 rrdcreate.html
 rrddump.html
 rrdfetch.html
 rrdfirst.html
 rrdflushcached.html
 rrdgraph.html
 rrdgraph_data.html
 rrdgraph_examples.html
 rrdgraph_graph.html
 rrdgraph_rpn.html
 rrdinfo.html
 rrdlast.html
 rrdlastupdate.html
 rrdlist.html
 rrdpython.html
 rrdresize.html
 rrdrestore.html
 rrdthreads.html
 rrdtool.html
 rrdtune.html
 rrdtutorial.html
 rrdupdate.html
 rrdxport.html
share/doc/rrdtool/txt/
 bin_dec_hex.pod
 bin_dec_hex.txt
 cdeftutorial.pod
 cdeftutorial.txt
 librrd.txt
 rpntutorial.pod
 rpntutorial.txt
 rrd-beginners.pod
 rrd-beginners.txt
 rrd_pdpcalc.pod
 rrd_pdpcalc.txt
 rrdbuild.pod
 rrdbuild.txt
 rrdcached.pod
 rrdcached.txt
 rrdcgi.pod
 rrdcgi.txt
 rrdcreate.pod
 rrdcreate.txt
 rrddump.pod
 rrddump.txt
 rrdfetch.pod
 rrdfetch.txt
 rrdfirst.pod
 rrdfirst.txt
 rrdflushcached.pod
 rrdflushcached.txt
 rrdgraph.pod
 rrdgraph.txt
 rrdgraph_data.pod
 rrdgraph_data.txt
 rrdgraph_examples.pod
 rrdgraph_examples.txt
 rrdgraph_graph.pod
 rrdgraph_graph.txt
 rrdgraph_rpn.pod
 rrdgraph_rpn.txt
 rrdinfo.pod
 rrdinfo.txt
 rrdlast.pod
 rrdlast.txt
 rrdlastupdate.pod
 rrdlastupdate.txt
 rrdlist.pod
 rrdlist.txt
 rrdpython.pod
 rrdpython.txt
 rrdresize.pod
 rrdresize.txt
 rrdrestore.pod
 rrdrestore.txt
 rrdthreads.pod
 rrdthreads.txt
 rrdtool.pod
 rrdtool.txt
 rrdtune.pod
 rrdtune.txt
 rrdtutorial.pod
 rrdtutorial.txt
 rrdupdate.pod
 rrdupdate.txt
 rrdxport.pod
 rrdxport.txt


[FILE:916:patches/patch-bindings_Makefile.am]
--- bindings/Makefile.am.orig	2024-07-29 07:08:58 UTC
+++ bindings/Makefile.am
@@ -28,15 +28,15 @@ all-local:  @COMP_PERL@ @COMP_RUBY@ @COM
 install-data-local:
 	$(AM_V_GEN)test -f ${builddir}/perl-piped/Makefile \
            && ( cd ${builddir}/perl-piped \
-	        && $(MAKE) install ) \
+	        && $(MAKE) pure_install ) \
 	   || true
 	$(AM_V_GEN)test -f ${builddir}/perl-shared/Makefile \
            && ( cd ${builddir}/perl-shared \
-                && $(MAKE) install ) \
+                && $(MAKE) pure_install ) \
            || true
 	$(AM_V_GEN)test -f ${builddir}/ruby/Makefile \
            && ( cd ${builddir}/ruby \
-                && $(MAKE) EPREFIX=$(DESTDIR)$(exec_prefix) $(RUBY_MAKE_OPTIONS) install ) \
+                && $(MAKE) EPREFIX=$(DESTDIR)$(exec_prefix) install ) \
            || true
 	$(AM_V_GEN)test -d ${builddir}/python/build \
            && ( cd ${builddir}/python \


[FILE:412:patches/patch-bindings_python_setup.py]
--- bindings/python/setup.py.orig	2024-07-29 07:08:58 UTC
+++ bindings/python/setup.py
@@ -2,10 +2,7 @@
 import os
 import sys
 
-try:
-    from setuptools import setup, Extension
-except ImportError:
-    sys.exit('The setup requires setuptools.')
+from distutils.core import setup, Extension
 
 TOP_SRCDIR = os.environ.get('ABS_TOP_SRCDIR', '../..')
 TOP_BUILDDIR = os.environ.get('ABS_TOP_BUILDDIR', '../..')


[FILE:532:patches/patch-doc_Makefile.am]
--- doc/Makefile.am.orig	2024-07-29 07:08:58 UTC
+++ doc/Makefile.am
@@ -50,9 +50,9 @@ CLEANFILES = $(GENERATED_EXTRADIST) pod2
 EXTRA_DIST= $(GENERATED_EXTRADIST) $(POD) $(POD3) rrdtool-dump.dtd rrdtool-xport.dtd rrdgraph_libdbi.pod rrdlua.pod \
             rrdpython.pod rrdrados.pod rrdruby.pod
 
-idocdir = $(RRDDOCDIR)/txt
+idocdir = $(datadir)/doc/rrdtool/txt
 idoc_DATA = $(POD) $(TXT)
-ihtmldir = $(RRDDOCDIR)/html
+ihtmldir = $(datadir)/doc/rrdtool/html
 ihtml_DATA = $(HTML)
 imandir = $(mandir)/man1
 iman_DATA = $(MAN)


[FILE:366:patches/patch-examples_Makefile.am]
--- examples/Makefile.am.orig	2024-07-29 07:08:58 UTC
+++ examples/Makefile.am
@@ -8,7 +8,7 @@ SUBDIRS = rrdcached
 
 EXTRA_DIST = cgi-demo.cgi.in stripes.py
 
-examplesdir = $(pkgdatadir)/examples
+examplesdir = $(datadir)/examples/rrdtool
 
 examples_SCRIPTS = cgi-demo.cgi piped-demo.pl shared-demo.pl \
 	stripes.pl bigtops.pl minmax.pl 4charts.pl perftest.pl \


[FILE:337:patches/patch-examples_rrdcached_Makefile.am]
--- examples/rrdcached/Makefile.am.orig	2024-07-29 07:08:58 UTC
+++ examples/rrdcached/Makefile.am
@@ -4,7 +4,7 @@
 
 #ACLOCAL_M4 = $(top_srcdir)/config/aclocal.m4
 
-examplesdir = $(pkgdatadir)/examples/rrdcached
+examplesdir = $(datadir)/examples/rrdtool/rrdcached
 examples_SCRIPTS = rrdcached-size.pl
 examples_DATA = RRDCached.pm
 


[FILE:568:files/rrdcached.in]
#!/bin/sh
#
# PROVIDE: rrdcached
# REQUIRE: DAEMON
# KEYWORD: shutdown
#
# Add the following line to /etc/rc.conf to enable rrdcached:
#
# rrdcached_enable (bool):	Set to "NO" by default.
#				Set to "YES" to enable rrdcached
#
# rrdcached_flags (str):	Set to "" by default.
#

. /etc/rc.subr

name=rrdcached
rcvar=rrdcached_enable

load_rc_config $name

# Set defaults
: ${rrdcached_enable="NO"}
: ${rrdcached_flags="-s www -l /var/run/rrdcached.sock -p /var/run/rrdcached.pid"}

pidfile=/var/run/${name}.pid   
command=%%PREFIX%%/bin/${name}

run_rc_command "$1"   

