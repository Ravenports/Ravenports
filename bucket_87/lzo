# Buildsheet autogenerated by ravenadm tool -- Do not edit.

NAMEBASE=		lzo
VERSION=		2.10
KEYWORDS=		archivers devel
VARIANTS=		standard
SDESC[standard]=	Portable speedy, lossless data compression library
HOMEPAGE=		none
CONTACT=		nobody

DOWNLOAD_GROUPS=	main
SITES[main]=		http://download.openpkg.org/components/cache/lzo/
DISTFILE[1]=		lzo-2.10.tar.gz:main
DF_INDEX=		1
SPKGS[standard]=	complete
			static
			shared
			docs
			examples

OPTIONS_AVAILABLE=	none
OPTIONS_STANDARD=	none

USES=			libtool

LICENSE=		GPLv2:static
LICENSE_TERMS=		static:{{WRKDIR}}/TERMS
LICENSE_FILE=		GPLv2:{{WRKSRC}}/COPYING
LICENSE_AWK=		TERMS:"__LZO1_H_INCLUDED"
LICENSE_SOURCE=		TERMS:{{WRKSRC}}/include/lzo/lzo1.h
LICENSE_SCHEME=		solo

FPC_EQUIVALENT=		archivers/lzo2

INVALID_RPATH=		yes
MUST_CONFIGURE=		gnu
CONFIGURE_ARGS=		--enable-shared
			--docdir={{STD_DOCDIR}}

post-install:
	@${MKDIR} ${STAGEDIR}${STD_DOCDIR}
	${REINPLACE_CMD} -e 's,doc/,,' ${WRKSRC}/NEWS
.for i in AUTHORS BUGS NEWS
	${INSTALL_DATA} ${WRKSRC}/${i} ${STAGEDIR}${STD_DOCDIR}/
.endfor
	${INSTALL_DATA}	${WRKSRC}/doc/* ${STAGEDIR}${STD_DOCDIR}/
	${MKDIR} ${STAGEDIR}${PREFIX}/share/examples/lzo
	${INSTALL_DATA}	${WRKSRC}/examples/[a-z]*.[ch] \
		${STAGEDIR}${PREFIX}/share/examples/lzo/

do-test:
	@${ECHO_MSG} "===>  Running self-tests (can take a few minutes)"
	#: override MALLOC_OPTIONS, else tests take excessively long
	(cd ${WRKSRC} && ${SETENV} MALLOC_OPTIONS=jz \
		${MAKE} check test SHELL="${SH} -x")

[FILE:833:descriptions/desc.static]
LZO is a data compression library which is suitable for data
de-/compression in real-time. This means it favours speed over
compression ratio.

LZO implements a number of algorithms with the following features:
   + Decompression is simple and *very* fast.
   + Requires no memory for decompression.
   + Compression is pretty fast.
   + Requires 64 kB of memory for compression.
   + Allows you to dial up extra compression at a speed cost in the
     compressor. The speed of the decompressor is not reduced.
   + Includes compression levels for generating pre-compressed data
     which achieve a quite competitive compression ratio.
   + There is also a compression level which needs only 8 kB for
     compression.
   + Algorithm is thread safe.
   + Algorithm is lossless.

This package contains the header and static library.


[FILE:186:descriptions/desc.shared]
LZO is a data compression library which is suitable for data
de-/compression in real-time. This means it favours speed over
compression ratio.

This package contains the shared library.


[FILE:94:distinfo]
c0f892943208266f9b6543b3ae308fab6284c5c90e627931446fb49b4221a072       600622 lzo-2.10.tar.gz


[FILE:173:manifests/plist.static]
include/lzo/
 lzo1.h
 lzo1a.h
 lzo1b.h
 lzo1c.h
 lzo1f.h
 lzo1x.h
 lzo1y.h
 lzo1z.h
 lzo2a.h
 lzo_asm.h
 lzoconf.h
 lzodefs.h
 lzoutil.h
lib/liblzo2.a
lib/pkgconfig/lzo2.pc


[FILE:49:manifests/plist.shared]
lib/
 liblzo2.so
 liblzo2.so.2
 liblzo2.so.2.0.0


[FILE:280:patches/patch-include__lzo__lzodefs.h]
--- include/lzo/lzodefs.h.orig	2017-03-01 19:54:14 UTC
+++ include/lzo/lzodefs.h
@@ -29,6 +29,8 @@
 #ifndef __LZODEFS_H_INCLUDED
 #define __LZODEFS_H_INCLUDED 1
 
+#include <limits.h>
+
 #if defined(__CYGWIN32__) && !defined(__CYGWIN__)
 #  define __CYGWIN__ __CYGWIN32__
 #endif


[FILE:692:patches/patch-lzotest__lzotest.c]
--- lzotest/lzotest.c.orig	2017-03-01 19:54:14 UTC
+++ lzotest/lzotest.c
@@ -206,7 +206,7 @@ enum {
 // command line options
 **************************************************************************/
 
-int opt_verbose = 2;
+int opt_verbose = 1;
 
 long opt_c_loops = 0;
 long opt_d_loops = 0;
@@ -1902,9 +1902,11 @@ int __lzo_cdecl_main main(int argc, char
         if ((*s == '/' || *s == '\\') && s[1])
             progname = s + 1;
 
+#if 0
     printf("\nLZO real-time data compression library (v%s, %s).\n",
            lzo_version_string(), lzo_version_date());
     printf("Copyright (C) 1996-2017 Markus Franz Xaver Johannes Oberhumer\nAll Rights Reserved.\n\n");
+#endif
 
 
 /*

