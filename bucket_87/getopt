# Buildsheet autogenerated by ravenadm tool -- Do not edit.

NAMEBASE=		getopt
VERSION=		1.1.6
REVISION=		1
KEYWORDS=		misc devel
VARIANTS=		std
SDESC[std]=		Replacement for getopt(1)
HOMEPAGE=		http://software.frodo.looijaard.name/getopt/
CONTACT=		nobody

DOWNLOAD_GROUPS=	main
SITES[main]=		http://frodo.looijaard.name/system/files/software/getopt/
DISTFILE[1]=		getopt-1.1.6.tar.gz:main
DF_INDEX=		1
SPKGS[std]=		set
			primary
			man

OPTIONS_AVAILABLE=	none
OPTIONS_STANDARD=	none

USES=			gmake

FPC_EQUIVALENT=		misc/getopt

MAKE_ARGS=		CC={{CC}}
			LIBCGETOPT=0
			WITHOUT_GETTEXT=1

post-patch:
	${RM} ${WRKSRC}/gnu/*.o

post-install:
	${STRIP_CMD} ${STAGEDIR}${PREFIX}/bin/getopt

[FILE:516:descriptions/desc.primary]
Rewrite of getopt(1) with the following features:

 * It can do anything that the GNU getopt(3) routines can do.
 * It can cope with spaces and shell metacharacters within arguments.
 * It can parse long parameters.
 * It can shuffle parameters, so you can mix options and other parameters
   on the command-line.
 * It can be easily identified as an enhanced getopt(1) from within shell
   scripts.
 * It can report parse errors as coming from the shell script.
 * It compiles cleanly with both libc-5 and glibc-2.


[FILE:98:distinfo]
d0bf1dc642a993e7388a1cddfb9409bed375c21d5278056ccca3a0acd09dc5fe        58926 getopt-1.1.6.tar.gz


[FILE:11:manifests/plist.primary]
bin/getopt


[FILE:24:manifests/plist.man]
share/man/man1/getopt.1


[FILE:1226:patches/patch-Makefile]
--- Makefile.orig	2014-11-24 12:33:39 UTC
+++ Makefile
@@ -1,9 +1,9 @@
 .SUFFIXES:
 
 DESTDIR=
-prefix=/usr/local
+prefix=$(PREFIX)
 bindir=$(prefix)/bin
-mandir=$(prefix)/man
+mandir=$(prefix)/share/man
 man1dir=$(mandir)/man1
 sharedir=$(prefix)/share
 getoptdir=$(sharedir)/getopt
@@ -32,7 +32,7 @@ MSGFMT=msgfmt
 LANGUAGES = ca cs da de es et eu fi fr gl hr hu id it ja nl pl pt_BR ru sl sv tr uk vi zh_CN zh_TW
 MOFILES:=$(patsubst %,po/%.mo,$(LANGUAGES))
 
-CPPFLAGS=-DLIBCGETOPT=$(LIBCGETOPT) -DWITHOUT_GETTEXT=$(WITHOUT_GETTEXT) -DLOCALEDIR=\"$(localedir)\" -DNOT_UTIL_LINUX -Dprogram_invocation_short_name=\"$(PACKAGE)\"  -Dprogram_version=\"$(VERSION)\"
+CPPFLAGS+=-DLIBCGETOPT=$(LIBCGETOPT) -DWITHOUT_GETTEXT=$(WITHOUT_GETTEXT) -DLOCALEDIR=\"$(localedir)\" -DNOT_UTIL_LINUX -Dprogram_invocation_short_name=\"$(PACKAGE)\"  -Dprogram_version=\"$(VERSION)\"
 ifeq ($(LIBCGETOPT),0)
 CPPFLAGS+=-I./gnu 
 endif
@@ -41,9 +41,6 @@ WARNINGS=-Wall \
          -Wcast-align -Wmissing-declarations \
          -Wwrite-strings -Wstrict-prototypes -Wmissing-prototypes \
          -Wnested-externs -Winline
-OPTIMIZE=-O3 -fno-strength-reduce
-CFLAGS=$(WARNINGS) $(OPTIMIZE)
-LDFLAGS=
 
 sources=getopt.c
 ifeq ($(LIBCGETOPT),0)


[FILE:318:patches/patch-gnu_getopt.c]
--- gnu/getopt.c.orig	2014-11-19 21:39:47 UTC
+++ gnu/getopt.c
@@ -40,6 +40,7 @@
 #endif
 
 #include <stdio.h>
+#include <string.h> // for strcmp, strncmp, strlen 
 
 /* Comment out all this code if we are using the GNU C Library, and are not
    actually compiling the library itself.  This code is part of the GNU C

