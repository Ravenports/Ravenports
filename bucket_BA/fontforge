# Buildsheet autogenerated by ravenadm tool -- Do not edit.

NAMEBASE=		fontforge
VERSION=		20251009
KEYWORDS=		print
VARIANTS=		std
SDESC[std]=		Outline and bitmap font editor
HOMEPAGE=		https://fontforge.org/
CONTACT=		nobody

DOWNLOAD_GROUPS=	main
SITES[main]=		GITHUB/fontforge:fontforge:20251009
DISTFILE[1]=		generated:main
DF_INDEX=		1
SPKGS[std]=		set
			primary
			nls
			man

OPTIONS_AVAILABLE=	none
OPTIONS_STANDARD=	none

BUILD_DEPENDS=		appstream-glib:dev:std
			brotli:dev:std
			gtkmm30:dev:std
			harfbuzz:dev:std
			libspiro:dev:std
			libuninameslist:dev:std
			woff2:dev:std
BUILDRUN_DEPENDS=	brotli:primary:std
			gtkmm30:primary:std
			libspiro:primary:std
			libuninameslist:primary:std
			woff2:primary:std
RUN_DEPENDS=		fonts-unifont:single:std

USES=			cpe python:sutools cmake iconv:wchar_t pkgconfig png
			jpeg tiff gif readline fontconfig mime-info:primary
			gnome-icons:primary desktop-utils:primary
GNOME_COMPONENTS=	glib libxml2 cairo pango gtk3

LICENSE=		GPLv3+:primary
LICENSE_TERMS=		primary:{{WRKDIR}}/TERMS
LICENSE_FILE=		GPLv3+:{{WRKSRC}}/COPYING.gplv3
LICENSE_AWK=		TERMS:"^\#\#"
LICENSE_SOURCE=		TERMS:{{WRKSRC}}/LICENSE
LICENSE_SCHEME=		solo

FPC_EQUIVALENT=		print/fontforge

CMAKE_ARGS=		-DENABLE_DOCS:BOOL=OFF
			-DBUILD_SHARED_LIBS:BOOL=ON

post-patch:
	# https://github.com/fontforge/fontforge/issues/5251
	${REINPLACE_CMD} -e 's/\(%[^%[:space:]]*\)hs/\1s/g' \
		${WRKSRC}/fontforgeexe/searchview.c
.for lang in  de ca hr it pl uk en_GB fr vi ko ja
	${REINPLACE_CMD} -e 's/\(%[^%[:space:]]*\)hs/\1s/g' \
		${WRKSRC}/po/${lang}.po
.endfor

post-install:
	${STRIP_CMD} ${STAGEDIR}${PREFIX}/bin/fontforge
	${STRIP_CMD} ${STAGEDIR}${PREFIX}/lib/libfontforge.so
	${STRIP_CMD} ${STAGEDIR}${PYTHON_SITELIBDIR}/*.so

[FILE:558:descriptions/desc.primary]
FontForge (formerly called PfaEdit) is a PostScript font editor which can
create and modify outline fonts in Type 1, CID-Keyed, TrueType, OpenType
format. It can generate bitmaps and save in BDF format or embedded bitmaps
in TrueType/OpenType fonts.

It can generate Type3 and SVG fonts if built with multilayer feature.
If you feel the shortage of memory, rebuilding multilayer-disabled
FontForge with FONTFORGE_NO_MULTILAYER defined will save some memory.

If you have installed AutoTrace or Potrace, you can generate outlines
from imported bitmap images.


[FILE:114:distinfo]
613424039e0e1b6bb106f8f0df287e1d249ac285d854f4e1964d68e9b9ad7eb0     18043460 fontforge-fontforge-20251009.tar.gz


[FILE:8329:manifests/plist.primary]
%%PYTHON_SITELIBDIR%%/
 fontforge.so
 psMat.so
bin/
 fontforge
 fontimage
 fontlint
 sfddiff
lib/
 libfontforge.so
 libfontforge.so.4
share/applications/org.fontforge.FontForge.desktop
share/fontforge/prefs
share/fontforge/cidmap/
 Adobe-CNS1-6.cidmap
 Adobe-GB1-5.cidmap
 Adobe-Japan1-5.cidmap
 Adobe-Japan1-6.cidmap
 Adobe-Japan1-7.cidmap
 Adobe-Japan2-0.cidmap
 Adobe-Korea1-2.cidmap
share/fontforge/hotkeys/default
share/fontforge/pixmaps/
 Cantarell-Bold.ttf
 Cantarell-BoldOblique.ttf
 Cantarell-Oblique.ttf
 Cantarell-Regular.ttf
 Inconsolata-Bold.ttf
 Inconsolata-Regular.ttf
 OFL.txt
 changeweight.png
 charviewicon.xbm
 check_off.png
 check_off_disabled.png
 check_on.png
 check_on_disabled.png
 chooseraudio.png
 chooserback.png
 chooserbookmark.png
 choosercid.png
 choosercompressed.png
 chooserconfigtool.png
 choosercore.png
 chooserdir.png
 chooserforward.png
 chooserhomefolder.png
 chooserimage.png
 choosermac.png
 choosermacttf.png
 choosernobookmark.png
 chooserobject.png
 choosersfdir.png
 choosertar.png
 choosertextbdf.png
 choosertextc.png
 choosertextcss.png
 choosertextfontps.png
 choosertextfontsfd.png
 choosertexthtml.png
 choosertextjava.png
 choosertextmake.png
 choosertextplain.png
 choosertextps.png
 choosertextxml.png
 chooserttf.png
 chooserunknown.png
 chooserupdir.png
 chooservideo.png
 colorwheel.png
 downarrow.png
 downarrow_disabled.png
 editclear.png
 editclearback.png
 editcopy.png
 editcopyfg2bg.png
 editcopylayer2layer.png
 editcopylbearing.png
 editcopylookupdata.png
 editcopyrbearing.png
 editcopyref.png
 editcopyvwidth.png
 editcopywidth.png
 editcut.png
 editfind.png
 editjoin.png
 editmerge.png
 editmergetoline.png
 editpaste.png
 editpasteafter.png
 editpasteinto.png
 editredo.png
 editrmundoes.png
 editrplref.png
 editsameas.png
 editselect.png
 editundo.png
 editunlink.png
 elementaddextrema.png
 elementaddinflections.png
 elementalign.png
 elementanticlock.png
 elementautotrace.png
 elementbalance.png
 elementbdfinfo.png
 elementbitmapsavail.png
 elementbuildaccent.png
 elementbuildcomposite.png
 elementclockwise.png
 elementcomparefonts.png
 elementcomparelayers.png
 elementcorrectdir.png
 elementexpandstroke.png
 elementfindprobs.png
 elementfontinfo.png
 elementgetinfo.png
 elementglyphinfo.png
 elementharmonize.png
 elementhbaselines.png
 elementinterpolatefonts.png
 elementmathinfo.png
 elementmergefonts.png
 elementorder.png
 elementotherinfo.png
 elementregenbitmaps.png
 elementremovebitmaps.png
 elementrenameglyph.png
 elementround.png
 elementshowdep.png
 elementsimplify.png
 elementstyles.png
 elementtilepath.png
 elementtilepattern.png
 elementtransform.png
 elementvalidate.png
 elementvbaselines.png
 exclude.png
 extendcondense.png
 fflogo.png
 fflogo13.png
 ffsplash1.png
 ffsplash2.png
 ffsplash3.png
 fileclose.png
 fileclose2.png
 filedisplay.png
 fileexecute.png
 fileexport.png
 filegenerate.png
 filegeneratefamily.png
 fileimport.png
 filemergefeature.png
 filenew.png
 fileopen.png
 fileprefs.png
 fileprint.png
 filequit.png
 filerecent.png
 filerevert.png
 filerevertbackup.png
 filerevertglyph.png
 filesave.png
 filesaveall.png
 filesaveas.png
 findinter.png
 fliphor.png
 flipvert.png
 fontview2.xbm
 helpabout.png
 helphelp.png
 helpindex.png
 hintsadddstem.png
 hintsaddhstem.png
 hintsaddvstem.png
 hintsautohint.png
 hintscleardstems.png
 hintsclearhstems.png
 hintsclearvstems.png
 hintsdontautohint.png
 hintsreviewhints.png
 inline.png
 intersection.png
 logo.xbm
 menuempty.png
 metricscenter.png
 metricssetlbearing.png
 metricssetrbearing.png
 metricssetvwidth.png
 metricssetwidth.png
 oblique.png
 outline.png
 overlapexclude.png
 overlapfindinter.png
 overlapintersection.png
 overlaprm.png
 palette3drotate-selected.png
 palette3drotate.png
 palettecorner-selected.png
 palettecorner.png
 palettecurve-selected.png
 palettecurve.png
 paletteelipse-selected.png
 paletteelipse.png
 paletteflip-selected.png
 paletteflip.png
 palettefreehand-selected.png
 palettefreehand.png
 palettehand-selected.png
 palettehand.png
 palettehvcurve-selected.png
 palettehvcurve.png
 paletteknife-selected.png
 paletteknife.png
 paletteline.png
 palettemagnify-selected.png
 palettemagnify.png
 palettepen-selected.png
 palettepen.png
 palettepencil.png
 paletteperspective-selected.png
 paletteperspective.png
 palettepointer-selected.png
 palettepointer.png
 palettepoly-selected.png
 palettepoly.png
 paletterect-selected.png
 paletterect.png
 paletterotate-selected.png
 paletterotate.png
 paletteruler-selected.png
 paletteruler.png
 palettescale-selected.png
 palettescale.png
 paletteselectedbg.png
 paletteshift.png
 paletteskew-selected.png
 paletteskew.png
 palettesmall3drotate.png
 palettesmallcorner.png
 palettesmallcurve.png
 palettesmallelipse.png
 palettesmallflip.png
 palettesmallhand.png
 palettesmallhvcurve.png
 palettesmallknife.png
 palettesmallmag.png
 palettesmallpen.png
 palettesmallpencil.png
 palettesmallperspective.png
 palettesmallpointer.png
 palettesmallpoly.png
 palettesmallrect.png
 palettesmallrotate.png
 palettesmallruler.png
 palettesmallscale.png
 palettesmallskew.png
 palettesmallspirocorner.png
 palettesmallspirocurve.png
 palettesmallspirog2curve.png
 palettesmallspiroleft.png
 palettesmallspiroright.png
 palettesmallstar.png
 palettesmalltangent.png
 palettespirocorner-selected.png
 palettespirocorner.png
 palettespirocurve-selected.png
 palettespirocurve.png
 palettespirodisabled.png
 palettespirodown.png
 palettespirog2curve-selected.png
 palettespirog2curve.png
 palettespiroleft-selected.png
 palettespiroleft.png
 palettespiroright-selected.png
 palettespiroright.png
 palettespiroup-selected.png
 palettespiroup.png
 palettestar-selected.png
 palettestar.png
 palettetangent-selected.png
 palettetangent.png
 pointsG2curve.png
 pointsaddanchor.png
 pointscorner.png
 pointscurve.png
 pointshvcurve.png
 pointsmakearc.png
 pointsmakeline.png
 pointsnamecontour.png
 pointsnamepoint.png
 pointsspironext.png
 pointsspiroprev.png
 pointstangent.png
 ptinfocorner.png
 ptinfocurve.png
 ptinfohvcurve.png
 ptinfotangent.png
 python.png
 radio_off.png
 radio_off_disabled.png
 radio_on.png
 radio_on_disabled.png
 resources
 rmoverlap.png
 rotate180.png
 rotateccw.png
 rotatecw.png
 selectblue.png
 selectcyan.png
 selectdefault.png
 selectgreen.png
 selectmagenta.png
 selectred.png
 selectwhite.png
 selectyellow.png
 shadow.png
 skew.png
 splash2019.png
 splash2020.png
 styleschangeweight.png
 styleschangexheight.png
 stylesextendcondense.png
 stylesinline.png
 stylesitalic.png
 stylesoblique.png
 stylesoutline.png
 stylesshadow.png
 stylessmallcaps.png
 stylessubsuper.png
 styleswireframe.png
 text12210.png
 tools3drotate.png
 toolselipse.png
 toolsflip.png
 toolsfreehand.png
 toolsknife.png
 toolsmagnify.png
 toolspen.png
 toolsperspective.png
 toolspointer.png
 toolspolygon.png
 toolsrect.png
 toolsrotate.png
 toolsruler.png
 toolsscale.png
 toolsscroll.png
 toolsskew.png
 toolsspiro.png
 toolsstar.png
 transformfliphor.png
 transformflipvert.png
 transformrotate180.png
 transformrotateccw.png
 transformrotatecw.png
 transformskew.png
 ttdebugcontinue.png
 ttdebugexit.png
 ttdebugmenudelta.png
 ttdebugstepinto.png
 ttdebugstepout.png
 ttdebugstepover.png
 ttdebugstop.png
 ttdebugstopped.png
 ttdebugwatchpnt.png
 viewbiggersize.png
 viewfindinfont.png
 viewfit.png
 viewformer.png
 viewgoto.png
 viewinsertafter.png
 viewinsertbefore.png
 viewlayers.png
 viewnext.png
 viewnextdef.png
 viewpalettes.png
 viewprev.png
 viewprevdef.png
 viewreplace.png
 viewsmallersize.png
 viewzoomin.png
 viewzoomout.png
 wireframe.png
share/fontforge/python/excepthook.py
share/icons/hicolor/128x128/apps/org.fontforge.FontForge.png
share/icons/hicolor/16x16/apps/org.fontforge.FontForge.png
share/icons/hicolor/22x22/apps/org.fontforge.FontForge.png
share/icons/hicolor/24x24/apps/org.fontforge.FontForge.png
share/icons/hicolor/256x256/apps/org.fontforge.FontForge.png
share/icons/hicolor/32x32/apps/org.fontforge.FontForge.png
share/icons/hicolor/48x48/apps/org.fontforge.FontForge.png
share/icons/hicolor/512x512/apps/org.fontforge.FontForge.png
share/icons/hicolor/64x64/apps/org.fontforge.FontForge.png
share/icons/hicolor/scalable/apps/org.fontforge.FontForge.svg
share/metainfo/org.fontforge.FontForge.appdata.xml
share/mime/packages/fontforge.xml


[FILE:879:manifests/plist.nls]
share/locale/ca/LC_MESSAGES/FontForge.mo
share/locale/de/LC_MESSAGES/FontForge.mo
share/locale/el/LC_MESSAGES/FontForge.mo
share/locale/en_GB/LC_MESSAGES/FontForge.mo
share/locale/es/LC_MESSAGES/FontForge.mo
share/locale/fr/LC_MESSAGES/FontForge.mo
share/locale/hr/LC_MESSAGES/FontForge.mo
share/locale/it/LC_MESSAGES/FontForge.mo
share/locale/ja/LC_MESSAGES/FontForge.mo
share/locale/ka_GE/LC_MESSAGES/FontForge.mo
share/locale/ko/LC_MESSAGES/FontForge.mo
share/locale/ml/LC_MESSAGES/FontForge.mo
share/locale/pl/LC_MESSAGES/FontForge.mo
share/locale/pt/LC_MESSAGES/FontForge.mo
share/locale/ru/LC_MESSAGES/FontForge.mo
share/locale/th_TH/LC_MESSAGES/FontForge.mo
share/locale/tr_TR/LC_MESSAGES/FontForge.mo
share/locale/uk/LC_MESSAGES/FontForge.mo
share/locale/vi/LC_MESSAGES/FontForge.mo
share/locale/zh_CN/LC_MESSAGES/FontForge.mo
share/locale/zh_TW/LC_MESSAGES/FontForge.mo


[FILE:65:manifests/plist.man]
share/man/man1/
 fontforge.1
 fontimage.1
 fontlint.1
 sfddiff.1


[FILE:1099:patches/patch-fontforge_splinefont.h]
$NetBSD: patch-fontforge_splinefont.h,v 1.3 2019/09/02 14:45:37 nia Exp $

NetBSD does not implement uselocale().

--- fontforge/splinefont.h.orig	2023-01-01 05:25:21 UTC
+++ fontforge/splinefont.h
@@ -2630,17 +2630,33 @@ extern bool isSplinePointPartOfGuide( Sp
 
 extern void debug_printHint( StemInfo *h, char* msg );
 
-#if defined(_WIN32) || defined(__HAIKU__)
+#if defined(_WIN32) || defined(__HAIKU__) || defined(__NetBSD__)
 #define BAD_LOCALE_HACK
+#ifndef __NetBSD__
 typedef char* locale_t;
+#endif
+#ifndef LC_GLOBAL_LOCALE
 #define LC_GLOBAL_LOCALE ((locale_t)-1)
+#endif
+#ifndef LC_ALL_MASK
 #define LC_ALL_MASK LC_ALL
+#endif
+#ifndef LC_COLLATE_MASK
 #define LC_COLLATE_MASK LC_COLLATE
+#endif
+#ifndef LC_CTYPE_MASK
 #define LC_CTYPE_MASK LC_CTYPE
+#endif
+#ifndef LC_MONETARY_MASK
 #define LC_MONETARY_MASK LC_MONETARY
+#endif
+#ifndef LC_NUMERIC_MASK
 #define LC_NUMERIC_MASK LC_NUMERIC
+#endif
+#ifndef LC_TIME_MASK
 #define LC_TIME_MASK LC_TIME
 #endif
+#endif
 
 static inline void switch_to_c_locale(locale_t * tmplocale_p, locale_t * oldlocale_p) {
 #ifndef BAD_LOCALE_HACK

