# Buildsheet autogenerated by ravenadm tool -- Do not edit.

NAMEBASE=		midnight-commander
VERSION=		4.8.33
KEYWORDS=		misc shells
VARIANTS=		std desktop
SDESC[desktop]=		Free Norton Commander clone (X11)
SDESC[std]=		Free Norton Commander clone
HOMEPAGE=		http://midnight-commander.org/
CONTACT=		nobody

DOWNLOAD_GROUPS=	main icon
SITES[main]=		http://ftp.midnight-commander.org/
SITES[icon]=		http://midnight-commander.org/chrome/site/
DISTFILE[1]=		mc-4.8.33.tar.xz:main
DISTFILE[2]=		MidnightCommander.png:icon
DF_INDEX=		1 2
SPKGS[desktop]=		set
			primary
			nls
			man
SPKGS[std]=		set
			primary
			nls
			man

OPTIONS_AVAILABLE=	X11
OPTIONS_STANDARD=	none
VOPTS[desktop]=		X11=ON

BUILD_DEPENDS=		libssh2:dev:std
BUILDRUN_DEPENDS=	libssh2:primary:std
RUN_DEPENDS=		diffutils:primary:std

USES=			gmake iconv libtool ncurses pkgconfig perl:build
			shebangfix ssl:build
GNOME_COMPONENTS=	glib

DISTNAME=		mc-4.8.33
EXTRACT_ONLY=		1

FPC_EQUIVALENT=		misc/mc
SHEBANG_FILES=		misc/mcedit.menu.in
			configure
			configure.ac
			src/vfs/extfs/helpers/Makefile.in
			src/vfs/extfs/helpers/s3+.in
SHEBANG_NEW_PYTHON=	{{LOCALBASE}}/bin/python2
SHEBANG_OLD_PYTHON=	@PYTHON@

MUST_CONFIGURE=		gnu
CONFIGURE_ARGS=		--enable-charset
			--enable-nls
			--enable-vfs-sftp
			--enable-vfs-smb
			--with-internal-edit
			--with-screen=ncurses
			--with-subshell
			--with-smb-configdir={{LOCALBASE}}/etc
			--with-smb-codepagedir={{LOCALBASE}}/etc/codepages

CPPFLAGS=		-I{{NCURSESINC}}
			-DNCURSES_WIDECHAR=1
VAR_OPSYS[sunos]=	CONFIGURE_ENV=ac_cv_search_addwstr="-lncursesw -ltinfow -lsocket"

[X11].DESCRIPTION=			Support xterm under X11 server
[X11].CONFIGURE_WITH_BOTH=		x
[X11].XORG_COMPONENTS_ON=		x11
					xext

post-patch:
	${REINPLACE_CMD} -e 's|PACKAGE=mc|PACKAGE=midnight-commander|' \
		${WRKSRC}/configure
	${REINPLACE_CMD} -e 's|SUBDIRS = intl|SUBDIRS =|' \
		${WRKSRC}/Makefile.in

post-install-X11-ON:
	@${MKDIR} ${STAGEDIR}${DESKTOPDIR} \
		${STAGEDIR}${PREFIX}/share/pixmaps
	${INSTALL_DATA} ${DISTDIR}/MidnightCommander.png \
		${STAGEDIR}${PREFIX}/share/pixmaps/
	${INSTALL_DATA} ${FILESDIR}/mc.desktop \
		${STAGEDIR}${DESKTOPDIR}

[FILE:641:descriptions/desc.primary]
GNU Midnight Commander (also referred to as MC) is a user shell with
text-mode full-screen interface.  It can be run on the OS console,
in xterm and other terminal emulators.

GNU Midnight Commander allows you to manage files while making most of
you screen and giving you a clear representation of the filesystem, yet
it's simple enough to be run over a telnet or ssh session.

GNU Midnight Commander was conceived as a free clone of John Socha's
Norton Commander (TM).  It also takes the best from more recent software
with similar interfaces.  GNU Midnight Commander comes with mouse support
on xterm and optionally on the Linux console.


[FILE:195:distinfo]
cae149d42f844e5185d8c81d7db3913a8fa214c65f852200a9d896b468af164c      2424476 mc-4.8.33.tar.xz
6bd935ea11c45da5c11e60542e30b4a05396d75b81401f28b3a68a82cafbf8fe         6466 MidnightCommander.png


[FILE:3814:manifests/plist.primary]
%%ONLY-LINUX%%libexec/mc/cons.saver
%%X11-ON%%share/applications/mc.desktop
%%X11-ON%%share/pixmaps/MidnightCommander.png
bin/
 mc
 mcdiff
 mcedit
 mcview
etc/mc/
 edit.indent.rc
 filehighlight.ini
 mc.default.keymap
 mc.emacs.keymap
 mc.ext.ini
 mc.keymap
 mc.menu
 mc.vim.keymap
 mcedit.menu
 sfs.ini
libexec/mc/
 mc-wrapper.csh
 mc-wrapper.sh
 mc.csh
 mc.sh
libexec/mc/ext.d/
 archive.sh
 doc.sh
 image.sh
 misc.sh
 package.sh
 sound.sh
 text.sh
 video.sh
 web.sh
libexec/mc/extfs.d/
 README
 README.extfs
 a+
 apt+
 audio
 bpp
 changesetfs
 deb
 deba
 debd
 dpkg+
 gitfs+
 hp48+
 iso9660
 lslR
 mailfs
 patchfs
 patchsetfs
 rpm
 rpms+
 s3+
 torrent
 trpm
 u7z
 uace
 ualz
 uar
 uarc
 uarj
 uc1541
 ucab
 uha
 ulha
 ulib
 unar
 urar
 uwim
 uzip
 uzoo
libexec/mc/shell/
 README.shell
 append
 chmod
 chown
 fexists
 get
 hardlink
 info
 ln
 ls
 mkdir
 mv
 rmdir
 send
 unlink
 utime
share/mc/
 mc.charsets
 mc.lib
share/mc/examples/macros.d/
 macro.0.sh
 macro.1.sh
 macro.3.sh
 macro.4.sh
 macro.5.sh
 macro.6.sh
 macro.7.sh
share/mc/help/
 mc.hlp
 mc.hlp.es
 mc.hlp.hu
 mc.hlp.it
 mc.hlp.pl
 mc.hlp.ru
 mc.hlp.sr
share/mc/hints/
 mc.hint
 mc.hint.be
 mc.hint.bg
 mc.hint.ca
 mc.hint.cs
 mc.hint.da
 mc.hint.de
 mc.hint.el
 mc.hint.en_GB
 mc.hint.eo
 mc.hint.es
 mc.hint.et
 mc.hint.eu
 mc.hint.fa
 mc.hint.fr
 mc.hint.ga
 mc.hint.gl
 mc.hint.hu
 mc.hint.id
 mc.hint.it
 mc.hint.ja
 mc.hint.ka
 mc.hint.ko
 mc.hint.lt
 mc.hint.nb
 mc.hint.nl
 mc.hint.pl
 mc.hint.pt
 mc.hint.pt_BR
 mc.hint.ro
 mc.hint.ru
 mc.hint.sk
 mc.hint.sr
 mc.hint.sv
 mc.hint.tr
 mc.hint.uk
 mc.hint.zh_CN
 mc.hint.zh_TW
share/mc/skins/
 dark.ini
 darkfar.ini
 default.ini
 double-lines.ini
 featured-plus.ini
 featured.ini
 gotar.ini
 gray-green-purple256.ini
 gray-orange-blue256.ini
 julia256.ini
 julia256root.ini
 mc46.ini
 modarcon16-defbg-thin.ini
 modarcon16-defbg.ini
 modarcon16-thin.ini
 modarcon16.ini
 modarcon16root-defbg-thin.ini
 modarcon16root-defbg.ini
 modarcon16root-thin.ini
 modarcon16root.ini
 modarin256-defbg-thin.ini
 modarin256-defbg.ini
 modarin256-thin.ini
 modarin256.ini
 modarin256root-defbg-thin.ini
 modarin256root-defbg.ini
 modarin256root-thin.ini
 modarin256root.ini
 nicedark.ini
 sand256.ini
 seasons-autumn16M.ini
 seasons-spring16M.ini
 seasons-summer16M.ini
 seasons-winter16M.ini
 xoria256-thin.ini
 xoria256.ini
 xoria256root-thin.ini
 yadt256-defbg.ini
 yadt256.ini
share/mc/syntax/
 PKGBUILD.syntax
 Syntax
 ada95.syntax
 as.syntax
 aspx.syntax
 assembler.syntax
 awk.syntax
 b.syntax
 c.syntax
 cabal.syntax
 changelog.syntax
 cmake.syntax
 cobol.syntax
 cs.syntax
 css.syntax
 cuda.syntax
 cxx.syntax
 cython.syntax
 d.syntax
 debian-changelog.syntax
 debian-control.syntax
 debian-description.syntax
 debian-sources-list.syntax
 diff.syntax
 dlink.syntax
 dos.syntax
 dot.syntax
 ebuild.syntax
 eiffel.syntax
 erlang.syntax
 f90.syntax
 filehighlight.syntax
 fortran.syntax
 glsl.syntax
 go.syntax
 haskell.syntax
 hive.syntax
 html.syntax
 idl.syntax
 ini.syntax
 j.syntax
 jal.syntax
 java.syntax
 js.syntax
 json.syntax
 kotlin.syntax
 latex.syntax
 lisp.syntax
 lkr.syntax
 lsm.syntax
 lua.syntax
 m4.syntax
 mail.syntax
 makefile.syntax
 markdown.syntax
 meson.syntax
 ml.syntax
 named.syntax
 nemerle.syntax
 nroff.syntax
 octave.syntax
 opencl.syntax
 osl.syntax
 pascal.syntax
 perl.syntax
 php.syntax
 po.syntax
 povray.syntax
 privoxy.syntax
 procmail.syntax
 properties.syntax
 protobuf.syntax
 puppet.syntax
 python.syntax
 r.syntax
 ruby.syntax
 rust.syntax
 sh.syntax
 slang.syntax
 smalltalk.syntax
 spec.syntax
 spice.syntax
 sql.syntax
 strace.syntax
 swift.syntax
 swig.syntax
 syntax.syntax
 tcl.syntax
 texinfo.syntax
 toml.syntax
 ts.syntax
 tt.syntax
 unknown.syntax
 verilog.syntax
 vhdl.syntax
 xml.syntax
 yabasic.syntax
 yaml.syntax
 yum-repo.syntax
 yxx.syntax


[FILE:2062:manifests/plist.nls]
share/locale/af/LC_MESSAGES/mc.mo
share/locale/ar/LC_MESSAGES/mc.mo
share/locale/az/LC_MESSAGES/mc.mo
share/locale/be/LC_MESSAGES/mc.mo
share/locale/bg/LC_MESSAGES/mc.mo
share/locale/br/LC_MESSAGES/mc.mo
share/locale/ca/LC_MESSAGES/mc.mo
share/locale/cs/LC_MESSAGES/mc.mo
share/locale/da/LC_MESSAGES/mc.mo
share/locale/de/LC_MESSAGES/mc.mo
share/locale/de_CH/LC_MESSAGES/mc.mo
share/locale/el/LC_MESSAGES/mc.mo
share/locale/en_GB/LC_MESSAGES/mc.mo
share/locale/eo/LC_MESSAGES/mc.mo
share/locale/es/LC_MESSAGES/mc.mo
share/locale/et/LC_MESSAGES/mc.mo
share/locale/eu/LC_MESSAGES/mc.mo
share/locale/fa/LC_MESSAGES/mc.mo
share/locale/fi/LC_MESSAGES/mc.mo
share/locale/fr/LC_MESSAGES/mc.mo
share/locale/fr_CA/LC_MESSAGES/mc.mo
share/locale/ga/LC_MESSAGES/mc.mo
share/locale/gl/LC_MESSAGES/mc.mo
share/locale/he/LC_MESSAGES/mc.mo
share/locale/hr/LC_MESSAGES/mc.mo
share/locale/hu/LC_MESSAGES/mc.mo
share/locale/ia/LC_MESSAGES/mc.mo
share/locale/id/LC_MESSAGES/mc.mo
share/locale/ie/LC_MESSAGES/mc.mo
share/locale/it/LC_MESSAGES/mc.mo
share/locale/ja/LC_MESSAGES/mc.mo
share/locale/ka/LC_MESSAGES/mc.mo
share/locale/kk/LC_MESSAGES/mc.mo
share/locale/ko/LC_MESSAGES/mc.mo
share/locale/kw/LC_MESSAGES/mc.mo
share/locale/lt/LC_MESSAGES/mc.mo
share/locale/lv/LC_MESSAGES/mc.mo
share/locale/mn/LC_MESSAGES/mc.mo
share/locale/nb/LC_MESSAGES/mc.mo
share/locale/nl/LC_MESSAGES/mc.mo
share/locale/nl_BE/LC_MESSAGES/mc.mo
share/locale/pl/LC_MESSAGES/mc.mo
share/locale/pt/LC_MESSAGES/mc.mo
share/locale/pt_BR/LC_MESSAGES/mc.mo
share/locale/ro/LC_MESSAGES/mc.mo
share/locale/ru/LC_MESSAGES/mc.mo
share/locale/sk/LC_MESSAGES/mc.mo
share/locale/sl/LC_MESSAGES/mc.mo
share/locale/sr/LC_MESSAGES/mc.mo
share/locale/sv/LC_MESSAGES/mc.mo
share/locale/szl/LC_MESSAGES/mc.mo
share/locale/ta/LC_MESSAGES/mc.mo
share/locale/te/LC_MESSAGES/mc.mo
share/locale/tr/LC_MESSAGES/mc.mo
share/locale/uk/LC_MESSAGES/mc.mo
share/locale/uz/LC_MESSAGES/mc.mo
share/locale/vi/LC_MESSAGES/mc.mo
share/locale/wa/LC_MESSAGES/mc.mo
share/locale/zh_CN/LC_MESSAGES/mc.mo
share/locale/zh_TW/LC_MESSAGES/mc.mo


[FILE:190:manifests/plist.man]
share/man/es/man1/mc.1
share/man/hu/man1/mc.1
share/man/it/man1/mc.1
share/man/man1/
 mc.1
 mcdiff.1
 mcedit.1
 mcview.1
share/man/pl/man1/mc.1
share/man/ru/man1/mc.1
share/man/sr/man1/mc.1


[FILE:619:patches/patch-lib_tty_tty-ncurses.c]
--- lib/tty/tty-ncurses.c.orig	2025-01-11 17:51:01 UTC
+++ lib/tty/tty-ncurses.c
@@ -291,7 +291,7 @@ tty_shutdown (void)
 void
 tty_enter_ca_mode (void)
 {
-    if (mc_global.tty.xterm_flag && smcup != NULL)
+    if (mc_global.tty.xterm_flag)
     {
         fprintf (stdout, /* ESC_STR ")0" */ ESC_STR "7" ESC_STR "[?47h");
         fflush (stdout);
@@ -303,7 +303,7 @@ tty_enter_ca_mode (void)
 void
 tty_exit_ca_mode (void)
 {
-    if (mc_global.tty.xterm_flag && rmcup != NULL)
+    if (mc_global.tty.xterm_flag)
     {
         fprintf (stdout, ESC_STR "[?47l" ESC_STR "8" ESC_STR "[m");
         fflush (stdout);


[FILE:546:patches/patch-src_diffviewer_ydiff.c]
--- src/diffviewer/ydiff.c.orig	2025-01-11 17:51:01 UTC
+++ src/diffviewer/ydiff.c
@@ -821,7 +821,7 @@ dff_execute (const char *args, const cha
     /* escape potential $ to avoid shell variable substitutions in popen() */
     file1_esc = str_shell_escape (file1);
     file2_esc = str_shell_escape (file2);
-    cmd = g_strdup_printf ("diff %s %s %s %s %s", args, extra, opt, file1_esc, file2_esc);
+    cmd = g_strdup_printf ("gdiff %s %s %s %s %s", args, extra, opt, file1_esc, file2_esc);
     g_free (file1_esc);
     g_free (file2_esc);
 


[FILE:257:files/mc.desktop]
[Desktop Entry]
Type=Application
Version=1.0
Name=Midnight Commander
GenericName=Midnight Commander
Comment=Midnight Commander, a free Norton Commander Clone
Icon=MidnightCommander
Exec=mc
Categories=System;Utility;Core;FileTools;FileManager;
Terminal=true

