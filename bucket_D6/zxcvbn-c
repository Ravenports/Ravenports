# Buildsheet autogenerated by ravenadm tool -- Do not edit.

NAMEBASE=		zxcvbn-c
VERSION=		2.5
KEYWORDS=		security
VARIANTS=		std
SDESC[std]=		Password strength estimator
HOMEPAGE=		https://github.com/tsyrogit/zxcvbn-c/
CONTACT=		nobody

DOWNLOAD_GROUPS=	main
SITES[main]=		GITHUB/tsyrogit:zxcvbn-c:v2.5
DISTFILE[1]=		generated:main
DF_INDEX=		1
SPKGS[std]=		set
			primary
			dev

OPTIONS_AVAILABLE=	none
OPTIONS_STANDARD=	none

USES=			gmake

LICENSE=		MIT:primary
LICENSE_FILE=		MIT:{{WRKSRC}}/LICENSE.txt
LICENSE_SCHEME=		solo

MAKEFILE=		makefile

SOVERSION=		0.0.0

[FILE:283:descriptions/desc.primary]
zxcvbn-c is a C/C++ implementation of the zxcvbn password strength
estimation.

The code is intended to be included as part of the source of a
C/C++ program. Like the original this code is for character sets
which use single byte characters primarily in the code range 0x20
to 0x7E.


[FILE:107:distinfo]
77d6c6ecb35952a8d8ce7f736b7a2bf466275c48210e309b73782d6b7e84dffd      1404434 tsyrogit-zxcvbn-c-2.5.tar.gz


[FILE:59:manifests/plist.primary]
lib/
 libzxcvbn.so.%%SOVERSION%%
 libzxcvbn.so.%%SOMAJOR%%


[FILE:34:manifests/plist.dev]
lib/libzxcvbn.so
include/zxcvbn.h


[FILE:723:patches/patch-makefile]
$NetBSD: patch-makefile,v 1.1 2024/02/11 21:45:44 ryoon Exp $

* Add install target.

--- makefile.orig	2022-04-07 17:19:00 UTC
+++ makefile
@@ -17,6 +17,12 @@ WORDS = words-eng_wiki.txt words-female.
 
 all: test-file test-inline test-c++inline test-c++file test-shlib test-statlib test-internals
 
+install: ${TARGET_LIB}
+	install ${TARGET_LIB} ${DESTDIR}${PREFIX}/lib
+	cd $${DESTDIR}${PREFIX}/lib && ln -sf ${TARGET_LIB} ${SONAME}
+	cd $${DESTDIR}${PREFIX}/lib && ln -sf ${TARGET_LIB} libzxcvbn.so
+	install zxcvbn.h ${DESTDIR}${PREFIX}/include
+
 test-shlib: test.c $(TARGET_LIB)
 	if [ ! -e libzxcvbn.so ]; then ln -s $(TARGET_LIB) libzxcvbn.so; fi
 	$(CC) $(CPPFLAGS) $(CFLAGS) -o $@ $< -L. $(LDFLAGS) -lzxcvbn -lm

