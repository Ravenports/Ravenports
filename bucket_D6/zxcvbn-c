# Buildsheet autogenerated by ravenadm tool -- Do not edit.

NAMEBASE=		zxcvbn-c
VERSION=		2.6
KEYWORDS=		security
VARIANTS=		std
SDESC[std]=		Password strength estimator
HOMEPAGE=		https://github.com/tsyrogit/zxcvbn-c/
CONTACT=		nobody

DOWNLOAD_GROUPS=	main
SITES[main]=		GITHUB/tsyrogit:zxcvbn-c:v2.6
DISTFILE[1]=		generated:main
DF_INDEX=		1
SPKGS[std]=		set
			primary
			dev
			tools

OPTIONS_AVAILABLE=	none
OPTIONS_STANDARD=	none

EXRUN[tools]=		primary

USES=			gmake c++:tools

LICENSE=		MIT:primary
LICENSE_FILE=		MIT:{{WRKSRC}}/LICENSE.txt
LICENSE_SCHEME=		solo

MAKEFILE=		makefile

SOVERSION=		0.0.0

post-install:
	${STRIP_CMD} ${STAGEDIR}${PREFIX}/lib/libzxcvbn.so
	${STRIP_CMD} ${STAGEDIR}${PREFIX}/bin/zxcvbn-dictgen

[FILE:283:descriptions/desc.primary]
zxcvbn-c is a C/C++ implementation of the zxcvbn password strength
estimation.

The code is intended to be included as part of the source of a
C/C++ program. Like the original this code is for character sets
which use single byte characters primarily in the code range 0x20
to 0x7E.


[FILE:50:descriptions/desc.tools]
This package contains the zxcvbn-dictgen program.


[FILE:107:distinfo]
11e39f6776f9c82c68b2acb94336e32697d4ab6cdb4ac16f9583ccbdd735113a      1405136 tsyrogit-zxcvbn-c-2.6.tar.gz


[FILE:59:manifests/plist.primary]
lib/
 libzxcvbn.so.%%SOMAJOR%%
 libzxcvbn.so.%%SOVERSION%%


[FILE:49:manifests/plist.dev]
include/zxcvbn.h
lib/
 libzxcvbn.a
 libzxcvbn.so


[FILE:44:manifests/plist.tools]
bin/zxcvbn-dictgen
share/zxcvbn/zxcvbn.dict


[FILE:896:patches/patch-makefile]
--- makefile.orig	2025-07-29 21:04:08 UTC
+++ makefile
@@ -16,13 +16,19 @@ SONAME = libzxcvbn.so.0
 PREFIX ?= /usr/local
 BINDIR ?= $(PREFIX)/bin
 INCLUDEDIR ?= $(PREFIX)/include
-LIBDIR ?= $(PREFIX)/lib64
+LIBDIR ?= $(PREFIX)/lib
 DATADIR ?= $(PREFIX)/share
 
 WORDS = words-eng_wiki.txt words-female.txt words-male.txt words-passwd.txt words-surname.txt words-tv_film.txt
 
 all: test-file test-inline test-c++inline test-c++file test-shlib test-statlib test-internals
 
+install: ${TARGET_LIB}
+	install ${TARGET_LIB} ${DESTDIR}${PREFIX}/lib
+	cd $${DESTDIR}${PREFIX}/lib && ln -sf ${TARGET_LIB} ${SONAME}
+	cd $${DESTDIR}${PREFIX}/lib && ln -sf ${TARGET_LIB} libzxcvbn.so
+	install zxcvbn.h ${DESTDIR}${PREFIX}/include
+
 test-shlib: test.c $(TARGET_LIB)
 	if [ ! -e libzxcvbn.so ]; then ln -s $(TARGET_LIB) libzxcvbn.so; fi
 	$(CC) $(CPPFLAGS) $(CFLAGS) -o $@ $< -L. $(LDFLAGS) -lzxcvbn -lm

