# Buildsheet autogenerated by ravenadm tool -- Do not edit.

NAMEBASE=		duktape
VERSION=		2.7.0
REVISION=		4
KEYWORDS=		lang
VARIANTS=		standard
SDESC[standard]=	Embeddable Javascript engine w. compact footprint
HOMEPAGE=		https://duktape.org
CONTACT=		Michael_Reim[kraileth@elderlinux.org]

DOWNLOAD_GROUPS=	main
SITES[main]=		https://duktape.org/
DISTFILE[1]=		duktape-2.7.0.tar.xz:main
DF_INDEX=		1
SPKGS[standard]=	complete
			primary
			dev
			tools

OPTIONS_AVAILABLE=	none
OPTIONS_STANDARD=	none

EXRUN[tools]=		duktape:primary:standard

USES=			cpe gmake

LICENSE=		MIT:complete
LICENSE_FILE=		MIT:{{WRKSRC}}/LICENSE.txt
LICENSE_SCHEME=		solo

CPE_PRODUCT=		duktape
CPE_VENDOR=		duktape_project
FPC_EQUIVALENT=		lang/duktape

MAKEFILE=		Makefile.sharedlibrary
MAKE_ARGS=		INSTALL_PREFIX={{PREFIX}}

SOVERSION=		207.20700

post-install:
	${INSTALL_PROGRAM} ${WRKSRC}/duk ${STAGEDIR}${PREFIX}/bin
	${STRIP_CMD} ${STAGEDIR}${PREFIX}/lib/lib*.so

post-build:
	(cd ${WRKSRC} && ${SETENV} ${MAKE_CMD} ${MAKE_FLAGS} \
		Makefile.cmdline duk)

[FILE:45:descriptions/desc.primary]
This package contains the duktape libraries.


[FILE:161:descriptions/desc.tools]
Duktape is an embeddable Javascript engine, with a focus on portability 
and compact footprint.

This subpackage contains the standalone interpreter executable.


[FILE:99:distinfo]
90f8d2fa8b5567c6899830ddef2c03f3c27960b11aca222fa17aa7ac613c2890      1026524 duktape-2.7.0.tar.xz


[FILE:119:manifests/plist.primary]
lib/
 libduktape.so.%%SOMAJOR%%
 libduktape.so.%%SOVERSION%%
 libduktaped.so.%%SOMAJOR%%
 libduktaped.so.%%SOVERSION%%


[FILE:95:manifests/plist.dev]
include/
 duk_config.h
 duktape.h
lib/
 libduktape.so
 libduktaped.so
lib/pkgconfig/duktape.pc


[FILE:8:manifests/plist.tools]
bin/duk


[FILE:691:patches/patch-Makefile.sharedlibrary]
--- Makefile.sharedlibrary.orig	2022-02-18 21:22:19 UTC
+++ Makefile.sharedlibrary
@@ -71,11 +71,11 @@ all: libduktape.$(SO_REALNAME_SUFFIX) li
 
 libduktape.$(SO_REALNAME_SUFFIX):
 	$(CC) $(CFLAGS) $(CPPFLAGS) $(LDFLAGS) -shared -fPIC -Wall -Wextra -Os -Wl,$(LD_SONAME_ARG),libduktape.$(SO_SONAME_SUFFIX) \
-		-o $@ $(DUKTAPE_SRCDIR)/duktape.c
+		-o $@ $(DUKTAPE_SRCDIR)/duktape.c -lm
 
 libduktaped.$(SO_REALNAME_SUFFIX):
 	$(CC) $(CFLAGS) $(CPPFLAGS) $(LDFLAGS) -shared -fPIC -g -Wall -Wextra -Os -Wl,$(LD_SONAME_ARG),libduktaped.$(SO_SONAME_SUFFIX) \
-		-o $@ $(DUKTAPE_SRCDIR)/duktape.c
+		-o $@ $(DUKTAPE_SRCDIR)/duktape.c -lm
 
 duktape.pc:
 	sed -e "s|@PREFIX@|$(INSTALL_PREFIX)|" \

