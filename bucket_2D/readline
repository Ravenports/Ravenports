# Buildsheet autogenerated by ravenadm tool -- Do not edit.

NAMEBASE=		readline
VERSION=		7.0.5
KEYWORDS=		devel
VARIANTS=		standard
SDESC[standard]=	Library for editing command lines during typing
HOMEPAGE=		http://tiswww.case.edu/php/chet/readline/rltop.html
CONTACT=		nobody

DOWNLOAD_GROUPS=	main patches
SITES[main]=		GNU/readline
SITES[patches]=		GNU/readline/readline-7.0-patches
DISTFILE[1]=		readline-7.0.tar.gz:main
DISTFILE[2]=		readline70-001:patches
DISTFILE[3]=		readline70-002:patches
DISTFILE[4]=		readline70-003:patches
DISTFILE[5]=		readline70-004:patches
DISTFILE[6]=		readline70-005:patches
DF_INDEX=		1
SPKGS[standard]=	single

OPTIONS_AVAILABLE=	none
OPTIONS_STANDARD=	none

USES=			cpe ncurses

DISTNAME=		readline-7.0

LICENSE=		GPLv3+:single
LICENSE_TERMS=		single:{{WRKDIR}}/TERMS
LICENSE_FILE=		GPLv3+:{{WRKSRC}}/COPYING
LICENSE_AWK=		TERMS:"_READLINE_H_"
LICENSE_SOURCE=		TERMS:{{WRKSRC}}/readline.h
LICENSE_SCHEME=		solo

INFO=			single:history
			single:readline
			single:rluserman
CPE_UPDATE=		5
CPE_VENDOR=		gnu
CPE_VERSION=		7.0
FPC_EQUIVALENT=		devel/readline
INFO_SUBDIR=		.

PATCHFILES=		2 3 4 5 6

MUST_CONFIGURE=		gnu
CONFIGURE_ARGS=		--with-curses

CFLAGS=			-I{{NCURSESINC}}

post-patch:
	${REINPLACE_CMD} "s|@SHOBJ_LDFLAGS@|@SHOBJ_LDFLAGS@ -L${NCURSESLIB} -lncurses|" \
		${WRKSRC}/shlib/Makefile.in

post-install:
	${STRIP_CMD} ${STAGEDIR}${PREFIX}/lib/libhistory.so.7 \
		${STAGEDIR}${PREFIX}/lib/libreadline.so.7
	${RM} -r ${STAGEDIR}${STD_DOCDIR}

[FILE:395:descriptions/desc.single]
The GNU Readline library provides a set of functions for use by
applications that allow users to edit command lines as they are typed in.
Both Emacs and vi editing modes are available. The Readline library
includes additional functions to maintain a list of previously-entered
command lines, to recall and perhaps reedit those lines, and perform
csh-like history expansion on previous commands.


[FILE:563:distinfo]
750d437185286f40a369e1e4f4764eda932b9459b5ec9a731628393dd3d32334      2910016 readline-7.0.tar.gz
9ac1b3ac2ec7b1bf0709af047f2d7d2a34ccde353684e57c6b47ebca77d7a376         1777 readline70-001
8747c92c35d5db32eae99af66f17b384abaca961653e185677f9c9a571ed2d58         2953 readline70-002
9e43aa93378c7e9f7001d8174b1beb948deefa6799b6f581673f465b7d9d4780         1294 readline70-003
f925683429f20973c552bff6702c74c58c2a38ff6e5cf305a8e847119c5a6b64         1501 readline70-004
ca159c83706541c6bbe39129a33d63bbd76ac594303f67e4d35678711c51b753         1641 readline70-005


[FILE:457:manifests/plist.single]
include/readline/
 chardefs.h
 history.h
 keymaps.h
 readline.h
 rlconf.h
 rlstdc.h
 rltypedefs.h
 tilde.h
lib/
 libhistory.a
 libhistory.so
 libhistory.so.7
 libreadline.a
 libreadline.so
 libreadline.so.7
share/man/man3/
 history.3.gz
 readline.3.gz
share/readline/
 excallback.c
 fileman.c
 hist_erasedups.c
 hist_purgecmd.c
 histexamp.c
 manexamp.c
 rl-callbacktest.c
 rl-fgets.c
 rl.c
 rlbasic.c
 rlcat.c
 rlevent.c
 rlptytest.c
 rltest.c
 rlversion.c


[FILE:530:patches/patch-support_shlib-install]
--- support/shlib-install.orig	2012-07-10 19:58:08 UTC
+++ support/shlib-install
@@ -119,16 +119,10 @@ INSTALL_LINK2='${echo} cd $INSTALLDIR &&
 #
 case "$host_os-$host_vendor" in
 *linux*|freebsd*-gentoo)
-	# libname.so.M -> libname.so.M.N
-	${echo} ${RM} ${INSTALLDIR}/$LINK2
-	if [ -z "$uninstall" ]; then
-		eval $INSTALL_LINK2
-	fi
-
 	# libname.so -> libname.so.M
 	${echo} ${RM} ${INSTALLDIR}/$LINK1
 	if [ -z "$uninstall" ]; then
-		${echo} cd $INSTALLDIR && ${echo} ${LN} $LINK2 $LINK1
+		eval $INSTALL_LINK1
 	fi
 	;;
 


[FILE:1142:patches/patch-support_shobj-conf]
--- support/shobj-conf.orig	2014-02-24 02:06:29 UTC
+++ support/shobj-conf
@@ -95,7 +95,7 @@ sunos4*)
 	SHLIB_LIBVERSION='$(SHLIB_LIBSUFF).$(SHLIB_MAJOR)$(SHLIB_MINOR)'
 	;;
 
-sunos5*-*gcc*|solaris2*-*gcc*)
+sunos5*|solaris2*)
 	SHOBJ_LD='${CC}'
 	ld_used=`gcc -print-prog-name=ld`
 	if ${ld_used} -V 2>&1 | grep GNU >/dev/null 2>&1; then
@@ -113,17 +113,8 @@ sunos5*-*gcc*|solaris2*-*gcc*)
 	SHLIB_LIBVERSION='$(SHLIB_LIBSUFF).$(SHLIB_MAJOR)'
 	;;
 
-sunos5*|solaris2*)
-	SHOBJ_CFLAGS='-K pic'
-	SHOBJ_LD=/usr/ccs/bin/ld
-	SHOBJ_LDFLAGS='-G -dy -z text -i -h $@'
-
-#	SHLIB_XLDFLAGS='-R $(libdir)'
-	SHLIB_LIBVERSION='$(SHLIB_LIBSUFF).$(SHLIB_MAJOR)'
-	;;
-
 # All versions of Linux (including Gentoo/FreeBSD) or the semi-mythical GNU Hurd.
-linux*-*|gnu*-*|k*bsd*-gnu-*|freebsd*-gentoo)
+gnu*-*|k*bsd*-gnu-*|freebsd*-gentoo)
 	SHOBJ_CFLAGS=-fPIC
 	SHOBJ_LD='${CC}'
 	SHOBJ_LDFLAGS='-shared -Wl,-soname,$@'
@@ -160,7 +151,7 @@ freebsd3*|freebsdaout*)
 	;;
 
 # FreeBSD-4.x and later have only ELF
-freebsd[4-9]*|freebsd1[0-9]*|freebsdelf*|dragonfly*)
+freebsd1[0-9]*|freebsdelf*|dragonfly*|linux*)
 	SHOBJ_CFLAGS=-fPIC
 	SHOBJ_LD='${CC}'
 

