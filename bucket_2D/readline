# Buildsheet autogenerated by ravenadm tool -- Do not edit.

NAMEBASE=		readline
VERSION=		6.3.8
KEYWORDS=		devel
VARIANTS=		standard
SDESC[standard]=	Library for editing command lines during typing
HOMEPAGE=		https://cnswww.cns.cwru.edu/php/chet/readline/rltop.html
CONTACT=		nobody

DOWNLOAD_GROUPS=	main patches
SITES[main]=		GNU/readline
SITES[patches]=		GNU/readline/readline-6.3-patches
DISTFILE[1]=		readline-6.3.tar.gz:main
DISTFILE[2]=		readline63-001:patches
DISTFILE[3]=		readline63-002:patches
DISTFILE[4]=		readline63-003:patches
DISTFILE[5]=		readline63-004:patches
DISTFILE[6]=		readline63-005:patches
DISTFILE[7]=		readline63-006:patches
DISTFILE[8]=		readline63-007:patches
DISTFILE[9]=		readline63-008:patches
DF_INDEX=		1
SPKGS[standard]=	single

OPTIONS_AVAILABLE=	none
OPTIONS_STANDARD=	none

USES=			cpe ncurses

DISTNAME=		readline-6.3

LICENSE=		GPLv3:single
LICENSE_SCHEME=		solo
LICENSE_FILE=		GPLv3:{{WRKSRC}}/COPYING

INFO=			single:history
			single:readline
			single:rluserman
CPE_UPDATE=		8
CPE_VENDOR=		gnu
CPE_VERSION=		6.3
FPC_EQUIVALENT=		devel/readline
INFO_SUBDIR=		.

PATCHFILES=		2 3 4 5 6 7 8 9

MUST_CONFIGURE=		gnu
CONFIGURE_ARGS=		--with-curses

CFLAGS=			-I{{NCURSESINC}}

post-patch:
	${REINPLACE_CMD} "s|@SHOBJ_LDFLAGS@|@SHOBJ_LDFLAGS@ -L${NCURSESLIB} -lncurses|" \
		${WRKSRC}/shlib/Makefile.in

post-install:
	 ${STRIP_CMD} ${STAGEDIR}${PREFIX}/lib/libhistory.so.6 \
		${STAGEDIR}${PREFIX}/lib/libreadline.so.6
	${RM} -r ${STAGEDIR}${STD_DOCDIR}

[FILE:395:descriptions/desc.single]
The GNU Readline library provides a set of functions for use by
applications that allow users to edit command lines as they are typed in.
Both Emacs and vi editing modes are available. The Readline library
includes additional functions to maintain a list of previously-entered
command lines, to recall and perhaps reedit those lines, and perform
csh-like history expansion on previous commands.


[FILE:842:distinfo]
56ba6071b9462f980c5a72ab0023893b65ba6debb4eeb475d7a563dc65cafd43      2468560 readline-6.3.tar.gz
1a79bbb6eaee750e0d6f7f3d059b30a45fc54e8e388a8e05e9c3ae598590146f         1366 readline63-001
39e304c7a526888f9e112e733848215736fb7b9d540729b9e31f3347b7a1e0a5         1297 readline63-002
ec41bdd8b00fd884e847708513df41d51b1243cecb680189e31b7173d01ca52f          985 readline63-003
4547b906fb2570866c21887807de5dee19838a60a1afb66385b272155e4355cc         1363 readline63-004
877788f9228d1a9907a4bcfe3d6dd0439c08d728949458b41208d9bf9060274b         1664 readline63-005
5c237ab3c6c97c23cf52b2a118adc265b7fb411b57c93a5f7c221d50fafbe556         1982 readline63-006
4d79b5a2adec3c2e8114cbd3d63c1771f7c6cf64035368624903d257014f5bea         1428 readline63-007
3bc093cf526ceac23eb80256b0ec87fa1735540d659742107b6284d635c43787         1452 readline63-008


[FILE:446:manifests/plist.single]
include/readline/
 chardefs.h
 history.h
 keymaps.h
 readline.h
 rlconf.h
 rlstdc.h
 rltypedefs.h
 tilde.h
lib/
 libhistory.a
 libhistory.so
 libhistory.so.6
 libreadline.a
 libreadline.so
 libreadline.so.6
share/man/man3/
 history.3.gz
 readline.3.gz
share/readline/
 excallback.c
 fileman.c
 hist_erasedups.c
 hist_purgecmd.c
 histexamp.c
 manexamp.c
 rl-callbacktest.c
 rl-fgets.c
 rl.c
 rlcat.c
 rlevent.c
 rlptytest.c
 rltest.c
 rlversion.c


[FILE:537:patches/patch-support_shlib-install]
--- support/shlib-install.orig	2012-07-10 19:58:08.000000000 +0000
+++ support/shlib-install	2017-05-18 20:58:47.492075412 +0000
@@ -119,16 +119,10 @@
 #
 case "$host_os-$host_vendor" in
 *linux*|freebsd*-gentoo)
-	# libname.so.M -> libname.so.M.N
-	${echo} ${RM} ${INSTALLDIR}/$LINK2
-	if [ -z "$uninstall" ]; then
-		eval $INSTALL_LINK2
-	fi
-
 	# libname.so -> libname.so.M
 	${echo} ${RM} ${INSTALLDIR}/$LINK1
 	if [ -z "$uninstall" ]; then
-		${echo} cd $INSTALLDIR && ${echo} ${LN} $LINK2 $LINK1
+		eval $INSTALL_LINK1
 	fi
 	;;
 


[FILE:608:patches/patch-support_shobj-conf]
--- support/shobj-conf.orig	2014-02-24 02:06:29.000000000 +0000
+++ support/shobj-conf	2017-05-18 19:31:59.172300977 +0000
@@ -123,7 +123,7 @@
 	;;
 
 # All versions of Linux (including Gentoo/FreeBSD) or the semi-mythical GNU Hurd.
-linux*-*|gnu*-*|k*bsd*-gnu-*|freebsd*-gentoo)
+gnu*-*|k*bsd*-gnu-*|freebsd*-gentoo)
 	SHOBJ_CFLAGS=-fPIC
 	SHOBJ_LD='${CC}'
 	SHOBJ_LDFLAGS='-shared -Wl,-soname,$@'
@@ -160,7 +160,7 @@
 	;;
 
 # FreeBSD-4.x and later have only ELF
-freebsd[4-9]*|freebsd1[0-9]*|freebsdelf*|dragonfly*)
+freebsd1[0-9]*|freebsdelf*|dragonfly*|linux*)
 	SHOBJ_CFLAGS=-fPIC
 	SHOBJ_LD='${CC}'
 

