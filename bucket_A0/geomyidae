# Buildsheet autogenerated by ravenadm tool -- Do not edit.

NAMEBASE=		geomyidae
VERSION=		0.99
KEYWORDS=		net
VARIANTS=		std
SDESC[std]=		Small C-based Gopher server
HOMEPAGE=		https://r-36.net/scm/geomyidae/
CONTACT=		Michael_Reim[kraileth@elderlinux.org]

DOWNLOAD_GROUPS=	main
SITES[main]=		ftp://bitreich.org/releases/geomyidae/
DISTFILE[1]=		geomyidae-v0.99.tar.gz:main
DF_INDEX=		1
SPKGS[std]=		primary
			man
			examples

OPTIONS_AVAILABLE=	none
OPTIONS_STANDARD=	none

USES=			ssl

DISTNAME=		geomyidae-v0.99

LICENSE=		MIT:primary
LICENSE_FILE=		MIT:{{WRKSRC}}/LICENSE
LICENSE_SCHEME=		solo

post-patch:
	${REINPLACE_CMD} 's!__PREFIX__!${PREFIX}!g' ${WRKSRC}/Makefile

post-stage:
	(cd ${WRKSRC} && \
		${COPYTREE_SHARE} "CGI.md cgi-examples rc.d" ${STAGEDIR}${STD_EXAMPLESDIR})
	${STRIP_CMD} ${STAGEDIR}${PREFIX}/bin/geomyidae

[FILE:232:descriptions/desc.primary]
Geomyidae is a daemon for serving the protocol specified in RFC 1436 
(Gopher). Under 1000 lines of C by design, it is lightweight yet supports 
dynamic content, automatic file/directory indexing, logging and privilege 
separation.


[FILE:101:distinfo]
427014aafca2f9bd789088ea9eb798e9a74597ada09518ae5fd42255a991eb3c        40436 geomyidae-v0.99.tar.gz


[FILE:14:manifests/plist.primary]
bin/geomyidae


[FILE:27:manifests/plist.man]
share/man/man8/geomyidae.8


[FILE:318:manifests/plist.examples]
share/examples/geomyidae/CGI.md
share/examples/geomyidae/cgi-examples/
 dirlisting.dcgi
 proxy.cgi
 rest.dcgi
 umnlisting.dcgi
 vhosting.cgi
share/examples/geomyidae/rc.d/
 Archlinux.conf.d
 Archlinux.rc.d
 FreeBSD.rc.d
 Gentoo.conf.d
 Gentoo.init.d
 NetBSD.rc.d
 OpenBSD.rc.d
 README
 geomyidae.service
 rc.geomyidae


[FILE:703:patches/patch-Makefile]
--- Makefile.orig	2023-08-26 14:42:28 UTC
+++ Makefile
@@ -5,7 +5,7 @@
 NAME = geomyidae
 VERSION = 0.96
 
-PREFIX = /usr/local
+PREFIX = __PREFIX__
 BINDIR = ${PREFIX}/bin
 MANDIR = ${PREFIX}/share/man/man8
 
@@ -14,8 +14,8 @@ TLS_CFLAGS = -DENABLE_TLS
 # libtls is provided using for example LibreSSL.
 TLS_LDFLAGS = -ltls 
 
-GEOM_CFLAGS = -D_DEFAULT_SOURCE -I. -I/usr/include ${TLS_CFLAGS} ${CFLAGS}
-GEOM_LDFLAGS = -L/usr/lib -L. ${TLS_LDFLAGS} ${LDFLAGS}
+GEOM_CFLAGS = -D_DEFAULT_SOURCE -I. -I__PREFIX__/include ${TLS_CFLAGS} ${CFLAGS}
+GEOM_LDFLAGS = -L__PREFIX__/lib -L. ${TLS_LDFLAGS} ${LDFLAGS}
 
 # FreeBSD
 # GEOM_CFLAGS = -D_DEFAULT_SOURCE -I. -I/usr/local/include ${TLS_CFLAGS} ${CFLAGS}

