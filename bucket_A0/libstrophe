# Buildsheet autogenerated by ravenadm tool -- Do not edit.

NAMEBASE=		libstrophe
VERSION=		0.13.0
KEYWORDS=		net_im
VARIANTS=		standard
SDESC[standard]=	Lightweight XMPP library
HOMEPAGE=		https://strophe.im/libstrophe/
CONTACT=		nobody

DOWNLOAD_GROUPS=	main
SITES[main]=		GITHUB/strophe:libstrophe:0.13.0
DISTFILE[1]=		generated:main
DF_INDEX=		1
SPKGS[standard]=	single

OPTIONS_AVAILABLE=	none
OPTIONS_STANDARD=	none

USES=			autoreconf gmake libtool pkgconfig ssl expat zlib

LICENSE=		MIT:single GPLv3+:single
LICENSE_TERMS=		single:{{WRKSRC}}/LICENSE.txt
LICENSE_FILE=		MIT:{{WRKSRC}}/MIT-LICENSE.txt
			GPLv3+:{{WRKSRC}}/GPL-LICENSE.txt
LICENSE_SCHEME=		dual

FPC_EQUIVALENT=		net-im/libstrophe

MUST_CONFIGURE=		gnu
CONFIGURE_ARGS=		--with-pkgconfigdir={{PREFIX}}/lib/pkgconfig

INSTALL_TARGET=		install-strip
SOVERSION=		0.13.0

[FILE:193:descriptions/desc.single]
libstrophe is a lightweight XMPP client library written in C.
It has minimal dependencies and is configurable for various environments.
It runs well on Linux, Unix and Windows based platforms.


[FILE:111:distinfo]
c1e3cc7c728c2d793a8799b29208439495b65bdedc6732d855fe54c3a1fc13c8       228692 strophe-libstrophe-0.13.0.tar.gz


[FILE:136:manifests/plist.single]
include/strophe.h
lib/
 libstrophe.a
 libstrophe.so
 libstrophe.so.%%SOMAJOR%%
 libstrophe.so.%%SOVERSION%%
lib/pkgconfig/libstrophe.pc


[FILE:375:patches/patch-configure.ac]
--- configure.ac.orig	2024-02-01 08:34:32 UTC
+++ configure.ac
@@ -21,6 +21,7 @@ AS_CASE([$host_os],
     [freebsd*],    [PLATFORM="bsd"],
     [openbsd*],    [PLATFORM="bsd"],
     [netbsd*],     [PLATFORM="bsd"],
+    [midnight*],   [PLATFORM="bsd"],
     [*nto*|*qnx*], [PLATFORM="qnx"],
     [*solaris*],   [PLATFORM="solaris"],
     [*android*],   [PLATFORM="android"],


[FILE:314:patches/patch-src_compression.c]
--- src/compression.c.orig	2024-02-01 08:34:32 UTC
+++ src/compression.c
@@ -19,6 +19,10 @@
 
 #include "common.h"
 
+#ifndef EBADFD
+#define EBADFD EBADF
+#endif
+
 #ifndef STROPHE_COMPRESSION_BUFFER_SIZE
 /** Max buffer size for compressed data (send & receive). */
 #define STROPHE_COMPRESSION_BUFFER_SIZE 4096

