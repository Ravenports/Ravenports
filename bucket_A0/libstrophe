# Buildsheet autogenerated by ravenadm tool -- Do not edit.

NAMEBASE=		libstrophe
VERSION=		0.14.0
KEYWORDS=		net_im
VARIANTS=		std
SDESC[std]=		Lightweight XMPP library
HOMEPAGE=		https://strophe.im/libstrophe/
CONTACT=		nobody

DOWNLOAD_GROUPS=	main
SITES[main]=		GITHUB/strophe:libstrophe:0.14.0
DISTFILE[1]=		generated:main
DF_INDEX=		1
SPKGS[std]=		set
			primary
			dev

OPTIONS_AVAILABLE=	none
OPTIONS_STANDARD=	none

USES=			autoreconf gmake libtool pkgconfig ssl expat zlib

LICENSE=		MIT:primary GPLv3+:primary
LICENSE_TERMS=		primary:{{WRKSRC}}/LICENSE.txt
LICENSE_FILE=		MIT:{{WRKSRC}}/MIT-LICENSE.txt
			GPLv3+:{{WRKSRC}}/GPL-LICENSE.txt
LICENSE_SCHEME=		dual

FPC_EQUIVALENT=		net-im/libstrophe

MUST_CONFIGURE=		gnu
CONFIGURE_ARGS=		--with-pkgconfigdir={{PREFIX}}/lib/pkgconfig

INSTALL_TARGET=		install-strip
SOVERSION=		0.14.0

[FILE:193:descriptions/desc.primary]
libstrophe is a lightweight XMPP client library written in C.
It has minimal dependencies and is configurable for various environments.
It runs well on Linux, Unix and Windows based platforms.


[FILE:111:distinfo]
adeb9e673d7f8b8cd20a2437cc220a8de581abf6e46594896b622e3e0dfa5c1f       232918 strophe-libstrophe-0.14.0.tar.gz


[FILE:61:manifests/plist.primary]
lib/
 libstrophe.so.%%SOMAJOR%%
 libstrophe.so.%%SOVERSION%%


[FILE:80:manifests/plist.dev]
include/strophe.h
lib/
 libstrophe.a
 libstrophe.so
lib/pkgconfig/libstrophe.pc


[FILE:375:patches/patch-configure.ac]
--- configure.ac.orig	2025-03-13 13:44:37 UTC
+++ configure.ac
@@ -21,6 +21,7 @@ AS_CASE([$host_os],
     [freebsd*],    [PLATFORM="bsd"],
     [openbsd*],    [PLATFORM="bsd"],
     [netbsd*],     [PLATFORM="bsd"],
+    [midnight*],   [PLATFORM="bsd"],
     [*nto*|*qnx*], [PLATFORM="qnx"],
     [*solaris*],   [PLATFORM="solaris"],
     [*android*],   [PLATFORM="android"],


[FILE:314:patches/patch-src_compression.c]
--- src/compression.c.orig	2025-03-13 13:44:37 UTC
+++ src/compression.c
@@ -19,6 +19,10 @@
 
 #include "common.h"
 
+#ifndef EBADFD
+#define EBADFD EBADF
+#endif
+
 #ifndef STROPHE_COMPRESSION_BUFFER_SIZE
 /** Max buffer size for compressed data (send & receive). */
 #define STROPHE_COMPRESSION_BUFFER_SIZE 4096

