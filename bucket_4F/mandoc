# Buildsheet autogenerated by ravenadm tool -- Do not edit.

NAMEBASE=		mandoc
VERSION=		1.14.4
KEYWORDS=		textproc
VARIANTS=		standard
SDESC[standard]=	Suite of tools compiling mdoc and man
HOMEPAGE=		https://mandoc.bsd.lv/
CONTACT=		nobody

DOWNLOAD_GROUPS=	main
SITES[main]=		http://mdocml.bsd.lv/snapshots/
DISTFILE[1]=		mandoc-1.14.4.tar.gz:main
DF_INDEX=		1
SPKGS[standard]=	single

OPTIONS_AVAILABLE=	none
OPTIONS_STANDARD=	none

BUILD_DEPENDS=		zlib:static:standard

USES=			sqlite

LICENSE=		ISCL:single
LICENSE_FILE=		ISCL:{{WRKSRC}}/LICENSE
LICENSE_SCHEME=		solo

FPC_EQUIVALENT=		textproc/mdocml

MUST_CONFIGURE=		yes
CONFIGURE_ENV=		INSTALL_PROGRAM="{{INSTALL_PROGRAM}}"
			INSTALL_DATA="{{INSTALL_DATA}}"
			INSTALL_LIB="{{INSTALL_LIB}}"
			INSTALL_MAN="{{INSTALL_MAN}}"

post-patch:
	${REINPLACE_CMD} -e 's|@PREFIX@|${PREFIX}|g' ${WRKSRC}/configure

[FILE:752:descriptions/desc.single]
mandoc is a suite of tools compiling mdoc, the roff macro language of 
choice for BSD manual pages, and man, the predominant historical language 
for UNIX manuals. It is small, ISO C, ISC-licensed, and quite fast. The 
main component of the toolset is the mandoc utility program, based on the 
libmandoc validating compiler, to format output for UTF-8 and ASCII UNIX 
terminals, HTML 5, PostScript, and PDF.

mandoc has predominantly been developed on OpenBSD and is both an OpenBSD 
and a BSD.lv project. We strive to support all interested free operating 
systems, in particular FreeBSD, NetBSD, DragonFly, illumos, Minix 3, and 
both GNU- and musl-based Linux distributions, as well as all systems 
running the pkgsrc portable package build system.


[FILE:99:distinfo]
24eb72103768987dcc63b53d27fdc085796330782f44b3b40c4660b1e1ee9b9c       627229 mandoc-1.14.4.tar.gz


[FILE:327:manifests/plist.single]
bin/
 apropos
 demandoc
 man
 mandoc
 soelim
 whatis
sbin/makewhatis
share/man/man1/
 apropos.1.gz
 demandoc.1.gz
 man.1.gz
 mandoc.1.gz
 soelim.1.gz
 whatis.1.gz
share/man/man5/
 man.conf.5.gz
 mandoc.db.5.gz
share/man/man7/
 eqn.7.gz
 man.7.gz
 mandoc_char.7.gz
 mdoc.7.gz
 roff.7.gz
 tbl.7.gz
share/man/man8/makewhatis.8.gz


[FILE:1335:patches/patch-configure]
--- configure.orig	2018-08-08 14:51:51 UTC
+++ configure
@@ -35,15 +35,12 @@ echo "file config.log: writing..."
 
 SOURCEDIR=`dirname "$0"`
 
-MANPATH_BASE="/usr/share/man:/usr/X11R6/man"
-MANPATH_DEFAULT="/usr/share/man:/usr/X11R6/man:/usr/local/man"
+MANPATH_BASE="@PREFIX@/share/man"
+MANPATH_DEFAULT="/usr/share/man:@PREFIX@/share/man"
 OSNAME=
 UTF8_LOCALE=
 
-CC=`printf "all:\\n\\t@echo \\\$(CC)\\n" | env -i make -sf -`
-CFLAGS=
 LDADD=
-LDFLAGS=
 LD_NANOSLEEP=
 LD_OHASH=
 LD_RECVMSG=
@@ -90,13 +87,13 @@ HAVE_SYS_ENDIAN=
 HAVE_VASPRINTF=
 HAVE_WCHAR=
 
-PREFIX="/usr/local"
+PREFIX="@PREFIX@"
 BINDIR=
 SBINDIR=
 BIN_FROM_SBIN=
 INCLUDEDIR=
 LIBDIR=
-MANDIR=
+MANDIR="@PREFIX@/share/man"
 HOMEBREWDIR=
 
 WWWPREFIX="/var/www"
@@ -117,10 +114,6 @@ MANM_EQN="eqn"
 MANM_TBL="tbl"
 
 INSTALL="install"
-INSTALL_PROGRAM=
-INSTALL_LIB=
-INSTALL_MAN=
-INSTALL_DATA=
 LN="ln -f"
 
 # --- manual settings from configure.local -----------------------------
@@ -398,7 +391,7 @@ __HEREDOC__
 [ ${HAVE_GETLINE} -eq 0 ] && echo "#include <stdio.h>"
 
 echo
-echo "#define MAN_CONF_FILE \"/etc/${MANM_MANCONF}\""
+echo "#define MAN_CONF_FILE \"@PREFIX@/etc/${MANM_MANCONF}\""
 echo "#define MANPATH_BASE \"${MANPATH_BASE}\""
 echo "#define MANPATH_DEFAULT \"${MANPATH_DEFAULT}\""
 [ -n "${OSNAME}" ] && echo "#define OSNAME \"${OSNAME}\""

